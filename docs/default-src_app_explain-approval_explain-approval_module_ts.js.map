{"version":3,"file":"default-src_app_explain-approval_explain-approval_module_ts.js","mappings":"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","sources":["./src/app/explain-approval/explain-approval-routing.module.ts","./src/app/explain-approval/explain-approval.module.ts","./src/app/explain-approval/explain-approval.page.ts"],"sourcesContent":["/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ExplainApprovalPage } from './explain-approval.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ExplainApprovalPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ExplainApprovalPageRoutingModule {}\n","/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ExplainApprovalPageRoutingModule } from './explain-approval-routing.module';\n\nimport { ExplainApprovalPage } from './explain-approval.page';\nexport { ExplainApprovalPage } from './explain-approval.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ExplainApprovalPageRoutingModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [ExplainApprovalPage],\n  exports: [ExplainApprovalPage]\n})\nexport class ExplainApprovalPageModule {}\n","/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { Component, OnInit, Input } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { GlobalService } from \"../global.service\";\nimport { PollPage } from '../poll/poll.module';  \nimport { Poll } from '../poll.service';\n\n@Component({\n  selector: 'app-explain-approval',\n  templateUrl: './explain-approval.page.html',\n  styleUrls: ['./explain-approval.page.scss'],\n})\nexport class ExplainApprovalPage implements OnInit {\n\n  Math = Math;\n\n  @Input() parent: PollPage;\n  @Input() oid: string;\n\n  ready = false;\n  tab = \"approval\";\n  seen_tabs = new Set([this.tab]);\n\n  p: Poll;\n  optionname: string;\n\n  // data for approval animation:\n\n  rs: number[];\n  rmin: number;\n  a: number;\n  cs: string[];\n  ts: string[];\n  n: number;\n  myr: number;\n  myi: number;\n  myv: string;\n  thresholdi: number;\n  poss: number[];\n  // timing:\n  tr1 = 0; tr2 = 2;  // ratings needles\n  td1 = 2; td2 = 4;  // diagonal\n  tob1 = 4; tob2: number;  // opposition bar\n  dtt = 1; tt1: number; tt2: number;  // threshold\n  tab1: number; tab2 = 7;  // approval bar\n  to1 = 8; to2 = 9;  // own status\n  eff_unequal_proxy: boolean;\n\n  // data for share animation:\n  oids: string[];\n  os: string[];\n  ps: number[];\n  ss: number[];\n  dattrs: string[];\n\n  // svg code snippets:\n\n  text_y0_start = '<text y=\"0\">';\n  tspan_i_start = '<tspan font-style=\"italic\">';\n  tspan_end = '</tspan>';\n  text_end = '</text>'; \n\n  // styling:\n  approval_font_size_small = 3;\n  approval_font_size_normal = 3.75;\n  approval_font_size_large = 6;\n  share_font_size_small = 3;\n  share_font_size_normal = 3.75;\n  share_font_size_large = 6;\n\n\n  constructor(\n    private modalController: ModalController,\n    translate: TranslateService,\n    G: GlobalService) { \n  }\n\n  ngOnInit() {\n    // approval:\n    const p = this.p = this.parent.p,\n          oid = this.oid,\n          rs0 = (p.T.effective_ratings_ascending_map||new Map()).get(oid)||[],\n          rs = this.rs = [],\n          rmin = this.rmin = p.T.thresholds_map.get(oid) || 100,\n          cs = this.cs = [],\n          ts = this.ts = [],\n          poss = this.poss = [],\n          myr = this.myr = p.get_my_effective_rating(oid),\n          n = this.n = p.T.n_not_abstaining,\n          offset = n - rs0.length,\n          dur = this.tab2 - this.tob1 - this.dtt,\n          a = this.a = ((n>0) ? (p.T.approval_scores_map.get(oid) / n) : 0) || 0;\n    this.optionname = p.options[oid].name;\n    this.tob2 = this.tt1 = this.tob1 + dur*(1-a);\n    this.tt2 = this.tab1 = this.tt1 + this.dtt;\n    this.thresholdi = -1;\n    for (let i=0; i<n; i++) {\n      let r = i < offset ? 0 : rs0[i-offset];\n      rs.push(r);\n      cs.push((r == 0) ? 'var(--vodle-red)' : (r < rmin) ? 'var(--vodle-blue)' : 'var(--vodle-green)');\n      ts.push(''+(this.tob1 + dur*i/n + (r < rmin ? 0 : this.dtt))+'s' )\n      poss.push(100*(i+.01)/n);\n      if (this.thresholdi < 0 && r >= rmin) {\n        this.thresholdi = i;\n      }\n    }\n    this.myi = rs.indexOf(myr);\n    this.eff_unequal_proxy = (myr != p.get_my_proxy_rating(oid));\n\n    this.parent.G.L.trace(\"ANIMATION:\",oid,rs,rmin,cs,myr,n,this.myi,this.a,poss,this.thresholdi);\n    this.parent.G.L.trace(\"ANIMATION:\",dur, this.tob2, this.tt2);\n\n    // share:\n    const nvs = {},\n          vids = [],\n          vm = p.T.votes_map,\n          dattrs = this.dattrs = [];\n    this.myv = vm.get(p.myvid);\n    let oids = this.oids = [],\n        os = this.os = [],\n        ps = this.ps = [],\n        ss = this.ss = [];\n    for (const [vid, ap] of p.T.approvals_map.get(oid)) {\n      if (ap) {\n        vids.push(vid);\n      }\n    }\n    for (const vid of vids) {\n      // find no. of voters who vote for oid2 instead of for oid\n      const oid2 = vm.get(vid);\n      if (!(oid2 in nvs)) {\n        nvs[oid2] = 0;\n      }\n      nvs[oid2]++;\n    }\n    this.parent.G.L.trace(\"partial share:\", vids, nvs);\n    let lastss = 0;\n    for (const oid2 of this.parent.oidsorted) {\n      if (oid2 in nvs || oid2 == oid) {\n        oids.push(oid2);\n        os.push(p.options[oid2].name);\n        const thisps = (n > 0) ? ((nvs[oid2] || 0) / n) : (1 / this.parent.oidsorted.length);\n        ps.push(thisps);\n        ss.push(lastss);\n        this.parent.G.L.trace(\"partial share:\", oid2, thisps, lastss);\n        lastss += thisps;\n      }\n      if (oid2 == oid) {\n        break; // since later options can't get votes from approvers of oid\n      }\n    }\n    if (os.length > 6) {\n      // need to summarize the last few!\n      let sumps = 0;\n      for (let index=4; index<os.length-1; index++) {\n        sumps += ps[index];\n      }\n      oids = this.oids = oids.slice(0, 4).concat(['', oids[-1]]);\n      os = this.os = os.slice(0, 4).concat(['other higher-ranked options', os[-1]]);\n      ps = this.ps = ps.slice(0, 4).concat([sumps, ps[-1]]);\n      ss = this.ss = ss.slice(0, 5).concat([ss[-1]]);\n    }\n    for (const i in ps) {\n      const share = ps[i],\n            R = this.parent.pieradius,\n            dx = R * Math.sin(this.parent.two_pi * share),\n            dy = R * (1 - Math.cos(this.parent.two_pi * share)),\n            more_than_180_degrees_flag = share > 0.5 ? 1 : 0;\n      if (share < 1) {\n        dattrs.push(\"M 0,0 l 0,-\"+R+\" a \"+R+\" \"+R+\" 0 \"+more_than_180_degrees_flag+\" 1 \"+dx+\" \"+dy+\" Z\");\n      } else { // a full circle\n        dattrs.push('d', \"M 0,0 l 0,-20 a 20 20 0 1 1 0 \"+(2*R)+\" a 20 20 0 1 1 0 \"+(-2*R)+\" Z\");\n      }\n    }\n  }\n\n  ionViewWillEnter() {\n    this.tab = \"approval\";\n    this.seen_tabs = new Set([this.tab]);\n  }\n  \n  ionViewDidEnter() {\n    this.ready = true;\n    window.setTimeout(this.restart, 100);\n  }\n\n  // top-row navigation:\n\n  back() {\n    if (this.tab=='approval') {\n      this.close();\n    } else {\n      this.go('approval');\n    }\n  }\n\n  forward() {\n    this.go('share');\n  }\n\n  go(tab: string) {\n    this.tab = tab;\n    if (!this.seen_tabs.has(tab)) {\n      this.seen_tabs.add(tab);\n      this.restart();\n    }\n  }\n\n  close()\n  {\n    this.modalController.dismiss();\n  }\n\n  // bottom-row controls:\n\n  restart() {\n    const svg = <SVGSVGElement><unknown>document.getElementById(\"animation\");\n    svg.setCurrentTime(0); \n  }\n\n  playing = true;\n\n  pause() {\n    const svg = <SVGSVGElement><unknown>document.getElementById(\"animation\");\n    svg.pauseAnimations();\n    this.playing = false;\n  }\n\n  unpause() {\n    const svg = <SVGSVGElement><unknown>document.getElementById(\"animation\");\n    svg.unpauseAnimations();\n    this.playing = true;\n  }\n\n  to_end() {\n    const svg = <SVGSVGElement><unknown>document.getElementById(\"animation\");\n    svg.setCurrentTime(100); \n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}