;
(self.AMP=self.AMP||[]).push({m:0,v:"2203281422000",n:"amp-connatix-player",ev:"0.1",l:!0,f:function(n,t){!function(){function t(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function r(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.push.apply(r,e)}return r}function e(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function i(n,t){return(i=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function u(n){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function o(n){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function a(n,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return e(n)}var f={SUFFICIENT:1,INSUFFICIENT:2,UNKNOWN_NOT_REQUIRED:3,UNKNOWN:4},c={TCF_V1:1,TCF_V2:2,US_PRIVACY_STRING:3};function l(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function s(n,t){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=function(n,t){if(n){if("string"==typeof n)return l(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(n,t):void 0}}(n))||t&&n&&"number"==typeof n.length){r&&(n=r);var e=0;return function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var v=function(){var n=this;this.promise=new Promise((function(t,r){n.resolve=t,n.reject=r}))},h=Array.isArray,d=Object.prototype;function m(n){return(n.ownerDocument||n).defaultView}function p(n){var t=Object.getOwnPropertyDescriptor(n,"message");if(null!=t&&t.writable)return n;var r=n.message,e=n.stack,i=new Error(r);for(var u in n)i[u]=n[u];return i.stack=e,i}function y(n){for(var t,r=null,e="",i=s(arguments,!0);!(t=i()).done;){var u=t.value;u instanceof Error&&!r?r=p(u):(e&&(e+=" "),e+=u)}return r?e&&(r.message=e+": "+r.message):r=new Error(e),r}function b(n){var t,r;null===(t=(r=self).__AMP_REPORT_ERROR)||void 0===t||t.call(r,n)}function w(n){var t=y.apply(null,arguments);setTimeout((function(){throw b(t),t}))}function j(n){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];return n.apply(null,r)}catch(n){w(n)}}d.hasOwnProperty,d.toString;var S={"getPropertyPriority":function(){return""},"getPropertyValue":function(){return""}},O=/vertical/,g=new WeakMap,x=new WeakMap,E=new WeakMap;function I(n,t,r){var e=n.ownerDocument.defaultView;if(e){var i=x.get(n);if(i||(i=[],x.set(n,i),T(e).observe(n)),!i.some((function(n){return n.callback===r&&n.type===t}))){i.push({type:t,callback:r});var u=E.get(n);u&&setTimeout((function(){return P(t,r,u)}))}}}function R(n,t,r){var e=x.get(n);if(e&&(function(n,e){for(var i=[],u=0,o=0;o<n.length;o++){var a=n[o];(f=a).callback===r&&f.type===t?i.push(a):(u<o&&(n[u]=a),u++)}var f;u<n.length&&(n.length=u)}(e),0==e.length)){x.delete(n),E.delete(n);var i=n.ownerDocument.defaultView;i&&T(i).unobserve(n)}}function T(n){var t=g.get(n);return t||(t=new n.ResizeObserver(N),g.set(n,t)),t}function N(n){for(var t=new Set,r=n.length-1;r>=0;r--){var e=n[r],i=e.target;if(!t.has(i)){t.add(i);var u=x.get(i);if(u){E.set(i,e);for(var o=0;o<u.length;o++){var a=u[o],f=a.callback;P(a.type,f,e)}}}}}function P(n,t,r){if(0==n){var e=r.contentRect,i=e.height;j(t,{width:e.width,height:i})}else if(1==n){var u,o=r.borderBoxSize;if(o)u=o.length>0?o[0]:{inlineSize:0,blockSize:0};else{var a,f,c=r.target,l=m(c),s=O.test(function(n,t){return n.getComputedStyle(t)||S}(l,c).writingMode),v=c,h=v.offsetHeight,d=v.offsetWidth;s?(f=d,a=h):(a=d,f=h),u={inlineSize:a,blockSize:f}}j(t,u)}}var C=function(){function n(n){this.Gn=n,this.Zn=!1,this.Un=!1,this.Jn=this.Jn.bind(this)}var t=n.prototype;return t.updatePlaying=function(n){var t,r;n!==this.Zn&&(this.Zn=n,n?(this.Un=!1,I(this.Gn,1,this.Jn)):(t=this.Gn,r=this.Jn,R(t,1,r)))},t.Jn=function(n){var t=n.blockSize,r=n.inlineSize>0&&t>0;if(r!==this.Un){this.Un=r;var e=this.Gn;r||e.pause()}},n}(),A=self.AMP_CONFIG||{},U=("string"==typeof A.thirdPartyFrameRegex?new RegExp(A.thirdPartyFrameRegex):A.thirdPartyFrameRegex,("string"==typeof A.cdnProxyRegex?new RegExp(A.cdnProxyRegex):A.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function k(n){if(!self.document||!self.document.head)return null;if(self.location&&U.test(self.location.origin))return null;var t=self.document.head.querySelector('meta[name="'.concat(n,'"]'));return t&&t.getAttribute("content")||null}A.thirdPartyUrl,A.thirdPartyFrameHost,A.cdnUrl||k("runtime-host"),A.errorReportingUrl,A.betaErrorReportingUrl,A.localDev,A.geoApiUrl||k("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var F=self.__AMP_LOG;function _(n){return function(n,t){throw new Error("failed to call initLogConstructor")}()}function z(n,t,r,e,i,u,o,a,f,c,l){return n}function M(n,t){return q(n=function(n){return n.__AMP_TOP||(n.__AMP_TOP=n)}(n),t)}function W(n,t){return B(D(n),t)}function V(n){return n.nodeType?(t=m(n),M(t,"ampdoc")).getAmpDoc(n):n;var t}function D(n){var t=V(n);return t.isSingleDoc()?t.win:t}function q(n,t){z(function(n,t){var r=n.__AMP_SERVICES&&n.__AMP_SERVICES[t];return!(!r||!r.ctor)}(n,t));var r=J(n)[t];return r.obj||(z(r.ctor),z(r.context),r.obj=new r.ctor(r.context),z(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}function B(n,t){var r=J(n)[t];return r?r.promise?r.promise:(q(n,t),r.promise=Promise.resolve(r.obj)):null}function J(n){var t=n.__AMP_SERVICES;return t||(t=n.__AMP_SERVICES={}),t}var K=function(n){return function(n,t,r,e){var i=W(n,t);if(i)return i;var u=V(n);return u.whenExtensionsKnown().then((function(){var n=u.getExtensionVersion(r);return n?M(u.win,"extensions").waitForExtension(r,n):null})).then((function(r){return r?function(n,t){return function(n,t){var r=B(n,t);if(r)return r;var e,i,u,o,a=J(n);return a[t]=(i=(e=new v).promise,u=e.reject,o=e.resolve,i.catch((function(){})),{obj:null,promise:i,resolve:o,reject:u,context:null,ctor:null}),a[t].promise}(D(n),t)}(n,t):null}))}(n,"consentPolicyManager","amp-consent")};new Set(["c","v","a","ad"]);var $=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&i(n,t)}(d,n);var o,l,s=(o=d,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,t=u(o);if(l){var r=u(this).constructor;n=Reflect.construct(t,arguments,r)}else n=t.apply(this,arguments);return a(this,n)});function d(n){var t;return(t=s.call(this,n)).Wb="",t.Vb="",t.Qb=null,t.tb=null,t.Xb=null,t.uw=null,t.ib=t.ib.bind(e(t)),t.Gt=new C(t.element),t}var m=d.prototype;return m.aw=function(n,t){var r=this;this.Xb&&this.Xb.then((function(e){e&&e.contentWindow&&e.contentWindow.postMessage(JSON.stringify({"event":"command","func":n,"args":t||""}),r.Qb)}))},m.fw=function(){var n=this;this.win.addEventListener("message",(function(t){if(n.tb&&t.source===n.tb.contentWindow){var r=function(n,t){try{return function(n){return JSON.parse(n)}(n)}catch(n){return null}}(t.data);if(r&&"command"===r.event)switch(r.func){case"cnxClose":n.cw(),n.attemptCollapse();break;case"cnxPlayerRendered":n.uw(n.tb)}}}))},m.lw=function(){var t,r,e=this,i=n.prototype.getConsentPolicy.call(this)||"default",u=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return K(n).then((function(n){return n?n.whenPolicyResolved(t):null}))}(this.element,i),o=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return K(n).then((function(n){return n?n.getConsentStringInfo(t):null}))}(this.element,i),a=(t=this.element,r=i,K(t).then((function(n){return n?n.getMergedSharedData(r):null}))),l=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return K(n).then((function(n){return n?n.getConsentMetadataInfo(t):null}))}(this.element,i);(function(n){function t(n){return{status:"fulfilled",value:n}}function r(n){return{status:"rejected",reason:n}}return Promise.all(n.map((function(n){return n.then(t,r)})))})([u,o,a,l]).then((function(n){if(n&&4===n.length){var t=n[0],r=n[1],i=n[2],u=n[3],o={"consentPolicyStateEnum":f,"consentStringTypeEnum":c,"consentPolicyState":{"error":t.reason,"value":t.value},"rawConsentString":{"error":r.reason,"value":r.value},"consentSharedData":{"error":i.reason,"value":i.value},"consentMetadata":{"error":u.reason,"value":u.value}};e.aw("ampConsentInfo",o)}}))},m.cw=function(){var n,t;this.tb&&(null===(t=(n=this.tb).parentElement)||void 0===t||t.removeChild(n),this.tb=null)},m.buildCallback=function(){var n,t,r=this.element;!function(n){n.classList.add("i-amphtml-media-component")}(r),this.Wb=(n=r.getAttribute("data-player-id"),"The data-player-id attribute is required for <amp-connatix-player> %s",t=r,(F.user||(F.user=_()),void F.user.win?F.userForEmbed||(F.userForEmbed=_()):F.user).assert(n,"The data-player-id attribute is required for <amp-connatix-player> %s",t,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined)),this.Vb=r.getAttribute("data-media-id")||"";var e=r.getAttribute("data-elements-player")||!1;this.Qb=e?"https://cdm.elements.video":"https://cdm.connatix.com";var i=new v;this.Xb=i.promise,this.uw=i.resolve},m.preconnectCallback=function(n){var t;(t=this.win,M(t,"preconnect")).url(this.getAmpDoc(),this.Qb,n)},m.layoutCallback=function(){var n,e=this,i=this.element,u=function(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(r){t(n,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))}))}return n}({"playerId":this.Wb||void 0,"mediaId":this.Vb||void 0,"url":(n=i,function(n,t){return q(D(V(n)),"documentInfo")}(n).get()).sourceUrl},function(n,t,r){var e=n.dataset,i={},u=/^param(.+)/;for(var o in e){var a=o.match(u);a&&(i[a[1][0].toLowerCase()+a[1].substr(1)]=e[o])}return i}(i)),o=function(n,t,r){if(!t)return n;var e=n.split("#",2),i=e[0].split("?",2);return i[0]+(i[1]?"?".concat(i[1],"&").concat(t):"?".concat(t))+(e[1]?"#".concat(e[1]):"")}(this.Qb+"/amp-embed/index.html",function(n){var t,r,e,i=[];for(var u in n){var o=n[u];if(null!=o){o=h(e=o)?e:[e];for(var a=0;a<o.length;a++)i.push((t=u,r=o[a],"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r))))}}return i.join("&")}(u)),a=i.ownerDocument.createElement("iframe");return a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen","true"),a.src=o,function(n,t){n.classList.add("i-amphtml-fill-content"),n.classList.add("i-amphtml-replaced-content")}(a),i.appendChild(a),this.tb=a,this.fw(),this.lw(),function(n,t){I(n,0,t)}(this.element,this.ib),this.Gt.updatePlaying(!0),this.loadPromise(a).then((function(){return e.Xb}))},m.isLayoutSupported=function(n){return function(n){return"fixed"==n||"fixed-height"==n||"responsive"==n||"fill"==n||"flex-item"==n||"fluid"==n||"intrinsic"==n}(n)},m.ib=function(n){var t=n.height,r=n.width;this.tb&&this.aw("ampResize",{"width":r,"height":t})},m.pauseCallback=function(){this.tb&&(this.aw("ampPause"),this.tb.src=this.tb.src)},m.unlayoutCallback=function(){this.cw();var n=new v;return this.Xb=n.promise,this.uw=n.resolve,R(this.element,0,this.ib),this.Gt.updatePlaying(!1),!0},d}(n.BaseElement);n.registerElement("amp-connatix-player",$)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-connatix-player-0.1.js.map