{"version":3,"file":"src_app_delete-all_delete-all_module_ts.js","mappings":"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","sources":["./src/app/delete-all/delete-all.page.scss","./src/app/delete-all/delete-all.module.ts","./src/app/delete-all/delete-all-routing.module.ts","./src/app/delete-all/delete-all.page.ts"],"sourcesContent":["// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@charset \"UTF-8\";\n/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/delete-all/delete-all.page.scss\"],\"names\":[],\"mappings\":\"AAAA,gBAAgB;AAAhB;;;;;;;;;;;;;;;;;CAAA\",\"sourcesContent\":[\"/*\\r\\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\\r\\n\\r\\nThis file is part of vodle.\\r\\n\\r\\nvodle is free software: you can redistribute it and/or modify it under the \\r\\nterms of the GNU Affero General Public License as published by the Free \\r\\nSoftware Foundation, either version 3 of the License, or (at your option) \\r\\nany later version.\\r\\n\\r\\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \\r\\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \\r\\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \\r\\ndetails.\\r\\n\\r\\nYou should have received a copy of the GNU Affero General Public License \\r\\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \\r\\n*/\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","/*\r\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\r\n\r\nThis file is part of vodle.\r\n\r\nvodle is free software: you can redistribute it and/or modify it under the \r\nterms of the GNU Affero General Public License as published by the Free \r\nSoftware Foundation, either version 3 of the License, or (at your option) \r\nany later version.\r\n\r\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \r\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \r\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \r\ndetails.\r\n\r\nYou should have received a copy of the GNU Affero General Public License \r\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \r\n*/\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DeleteAllPageRoutingModule } from './delete-all-routing.module';\r\n\r\nimport { DeleteAllPage } from './delete-all.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DeleteAllPageRoutingModule,\r\n    TranslateModule.forChild(),\r\n    DeleteAllPage\r\n  ]\r\n})\r\nexport class DeleteAllPageModule {}\r\n","/*\r\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\r\n\r\nThis file is part of vodle.\r\n\r\nvodle is free software: you can redistribute it and/or modify it under the \r\nterms of the GNU Affero General Public License as published by the Free \r\nSoftware Foundation, either version 3 of the License, or (at your option) \r\nany later version.\r\n\r\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \r\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \r\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \r\ndetails.\r\n\r\nYou should have received a copy of the GNU Affero General Public License \r\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \r\n*/\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DeleteAllPage } from './delete-all.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DeleteAllPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DeleteAllPageRoutingModule {}\r\n","/*\r\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\r\n\r\nThis file is part of vodle.\r\n\r\nvodle is free software: you can redistribute it and/or modify it under the \r\nterms of the GNU Affero General Public License as published by the Free \r\nSoftware Foundation, either version 3 of the License, or (at your option) \r\nany later version.\r\n\r\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \r\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \r\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \r\ndetails.\r\n\r\nYou should have received a copy of the GNU Affero General Public License \r\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \r\n*/\r\n\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common'\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\nimport { LocalNotifications } from '@capacitor/local-notifications';\r\n\r\nimport { GlobalService } from \"../global.service\";\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CommonModule } from '@angular/common';\r\n@Component({\r\n  imports: [ CommonModule, IonicModule, TranslateModule ],\r\n  selector: 'app-delete-all',\r\n  templateUrl: './delete-all.page.html',\r\n  styleUrls: ['./delete-all.page.scss'],\r\n})\r\nexport class DeleteAllPage implements OnInit {\r\n\r\n  constructor(\r\n    private location: Location,\r\n    public alertCtrl: AlertController,\r\n    public translate: TranslateService,\r\n    public G: GlobalService) { \r\n  }\r\n\r\n  ngOnInit() {\r\n    this.G.L.entry(\"DeleteAllPage.ngOnInit\");\r\n  }\r\n  \r\n  ionViewWillEnter() {\r\n    this.G.L.entry(\"DeleteAllPage.ionViewWillEnter\");\r\n    this.G.D.save_state();\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.G.L.entry(\"DeleteAllPage.ionViewDidEnter\");\r\n    // TODO: query whether really want to delete all:\r\n    if (this.G.D.ready) {\r\n      this.confirm_dialog();\r\n    }\r\n  }\r\n\r\n  onDataReady() {\r\n    // called when DataService initialization was slower than view initialization\r\n    this.G.L.entry(\"DeleteAllPage.onDataReady\");\r\n  }\r\n\r\n  ionViewDidLeave() {\r\n    this.G.L.entry(\"DeleteAllPage.ionViewDidLeave\");\r\n  }\r\n\r\n  async confirm_dialog() {\r\n    const dialog = await this.alertCtrl.create({ \r\n      header: this.translate.instant('delete-all.confirm-header'), \r\n      message: this.translate.instant('delete-all.confirm-intro'), \r\n      buttons: [\r\n        { \r\n          text: this.translate.instant('cancel'), \r\n          role: 'cancel',\r\n          handler: () => { \r\n            this.G.L.trace('DeleteAllPage.confirm_dialog cancel');\r\n            // TODO: navigate back\r\n            this.location.back();\r\n          } \r\n        },\r\n        { \r\n          text: this.translate.instant('delete-all.confirm-button'),\r\n          role: 'ok', \r\n          cssClass: 'delete-all-confirm-button',\r\n          handler: () => {\r\n            this.G.L.trace('DeleteAllPage.confirm_dialog delete');\r\n            // clear all local storage:\r\n            this.G.D.delete_all().then(() => {\r\n              // now reload page, which will reinit the app and redirect us to the login page\r\n              // (at least in browsers – what about native apps?):\r\n              LocalNotifications.schedule({ notifications: [{ id: null,\r\n                title: this.translate.instant(\"delete-all.success-title\"),\r\n                body: this.translate.instant(\"delete-all.success-body\"),\r\n              }]});\r\n              window.location.assign(\"http://www.vodle.it\");\r\n            }).catch(error => {\r\n              LocalNotifications.schedule({ notifications: [{ id: null,\r\n                  title: this.translate.instant(\"delete-all.failed\"),\r\n                  body: null\r\n              }]});\r\n              // go back to previous page:\r\n              this.location.back();\r\n            })\r\n          } \r\n        } \r\n      ] \r\n    }); \r\n    await dialog.present(); \r\n  }\r\n\r\n}\r\n"],"names":["NgModule","CommonModule","FormsModule","TranslateModule","IonicModule","DeleteAllPageRoutingModule","DeleteAllPage","DeleteAllPageModule","__decorate","imports","forChild","RouterModule","routes","path","component","exports","Component","Location","TranslateService","AlertController","LocalNotifications","GlobalService","constructor","location","alertCtrl","translate","G","ngOnInit","L","entry","ionViewWillEnter","D","save_state","ionViewDidEnter","ready","confirm_dialog","onDataReady","ionViewDidLeave","_this","_asyncToGenerator","dialog","create","header","instant","message","buttons","text","role","handler","trace","back","cssClass","delete_all","then","schedule","notifications","id","title","body","window","assign","catch","error","present","selector","template","__NG_CLI_RESOURCE__0"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}