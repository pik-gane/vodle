{"version":3,"file":"src_app_delete-all_delete-all_module_ts.js","mappings":";;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;EAiBE;;AAEuC;AACc;AAEL;AAElD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,2DAAa;KACzB;CACF,CAAC;IAMW,0BAA0B,SAA1B,0BAA0B;CAAG;AAA7B,0BAA0B;IAJtC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,0BAA0B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACnCvC;;;;;;;;;;;;;;;;;EAiBE;;AAEuC;AACM;AACF;AACS;AAET;AAE4B;AAEvB;IAYrC,mBAAmB,SAAnB,mBAAmB;CAAG;AAAtB,mBAAmB;IAV/B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,kFAA0B;YAC1B,yEAAwB,EAAE;SAC3B;QACD,YAAY,EAAE,CAAC,2DAAa,CAAC;KAC9B,CAAC;GACW,mBAAmB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxChC;;;;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AAEA;AAEA;IAOaM,aAAa,SAAbA,aAAa;EAExBC,YACUC,QADV,EAESC,SAFT,EAGSC,SAHT,EAISC,CAJT,EAIyB;IAHf;IACD;IACA;IACA;EACR;;EAEDC,QAAQ;IACN,KAAKD,CAAL,CAAOE,CAAP,CAASC,KAAT,CAAe,wBAAf;EACD;;EAEDC,gBAAgB;IACd,KAAKJ,CAAL,CAAOE,CAAP,CAASC,KAAT,CAAe,gCAAf;IACA,KAAKH,CAAL,CAAOK,CAAP,CAASC,UAAT;EACD;;EAEDC,eAAe;IACb,KAAKP,CAAL,CAAOE,CAAP,CAASC,KAAT,CAAe,+BAAf,EADa,CAEb;;IACA,IAAI,KAAKH,CAAL,CAAOK,CAAP,CAASG,KAAb,EAAoB;MAClB,KAAKC,cAAL;IACD;EACF;;EAEDC,WAAW;IACT;IACA,KAAKV,CAAL,CAAOE,CAAP,CAASC,KAAT,CAAe,2BAAf;EACD;;EAEDQ,eAAe;IACb,KAAKX,CAAL,CAAOE,CAAP,CAASC,KAAT,CAAe,+BAAf;EACD;;EAEKM,cAAc;IAAA;;IAAA;MAClB,MAAMG,MAAM,SAAS,KAAI,CAACd,SAAL,CAAee,MAAf,CAAsB;QACzCC,MAAM,EAAE,KAAI,CAACf,SAAL,CAAegB,OAAf,CAAuB,2BAAvB,CADiC;QAEzCC,OAAO,EAAE,KAAI,CAACjB,SAAL,CAAegB,OAAf,CAAuB,0BAAvB,CAFgC;QAGzCE,OAAO,EAAE,CACP;UACEC,IAAI,EAAE,KAAI,CAACnB,SAAL,CAAegB,OAAf,CAAuB,QAAvB,CADR;UAEEI,IAAI,EAAE,QAFR;UAGEC,OAAO,EAAE,MAAK;YACZ,KAAI,CAACpB,CAAL,CAAOE,CAAP,CAASmB,KAAT,CAAe,qCAAf,EADY,CAEZ;;;YACA,KAAI,CAACxB,QAAL,CAAcyB,IAAd;UACD;QAPH,CADO,EAUP;UACEJ,IAAI,EAAE,KAAI,CAACnB,SAAL,CAAegB,OAAf,CAAuB,2BAAvB,CADR;UAEEI,IAAI,EAAE,IAFR;UAGEI,QAAQ,EAAE,2BAHZ;UAIEH,OAAO,EAAE,MAAK;YACZ,KAAI,CAACpB,CAAL,CAAOE,CAAP,CAASmB,KAAT,CAAe,qCAAf,EADY,CAEZ;;;YACA,KAAI,CAACrB,CAAL,CAAOK,CAAP,CAASmB,UAAT,GAAsBC,IAAtB,CAA2B,MAAK;cAC9B;cACA;cACAhC,uFAAA,CAA4B;gBAAEkC,aAAa,EAAE,CAAC;kBAAEC,EAAE,EAAE,IAAN;kBAC5CC,KAAK,EAAE,KAAI,CAAC9B,SAAL,CAAegB,OAAf,CAAuB,0BAAvB,CADqC;kBAE5Ce,IAAI,EAAE,KAAI,CAAC/B,SAAL,CAAegB,OAAf,CAAuB,yBAAvB;gBAFsC,CAAD;cAAjB,CAA5B;cAIAgB,MAAM,CAAClC,QAAP,CAAgBmC,MAAhB,CAAuB,qBAAvB;YACD,CARD,EAQGC,KARH,CAQSC,KAAK,IAAG;cACfzC,uFAAA,CAA4B;gBAAEkC,aAAa,EAAE,CAAC;kBAAEC,EAAE,EAAE,IAAN;kBAC1CC,KAAK,EAAE,KAAI,CAAC9B,SAAL,CAAegB,OAAf,CAAuB,mBAAvB,CADmC;kBAE1Ce,IAAI,EAAE;gBAFoC,CAAD;cAAjB,CAA5B,EADe,CAKf;;cACA,KAAI,CAACjC,QAAL,CAAcyB,IAAd;YACD,CAfD;UAgBD;QAvBH,CAVO;MAHgC,CAAtB,CAArB;MAwCA,MAAMV,MAAM,CAACuB,OAAP,EAAN;IAzCkB;EA0CnB;;AA7EuB;;;QAbjB7C,qDAAQA;;QAERE,2DAAeA;;QADfD,iEAAgBA;;QAKhBG,0DAAaA;;;AAOTC,aAAa,sDALzBN,wDAAS,CAAC;EACT+C,QAAQ,EAAE,gBADD;EAETC,UAAAA,6DAFS;;AAAA,CAAD,CAKgB,GAAb1C,aAAa,CAAb","sources":["./src/app/delete-all/delete-all-routing.module.ts","./src/app/delete-all/delete-all.module.ts","./src/app/delete-all/delete-all.page.ts"],"sourcesContent":["/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DeleteAllPage } from './delete-all.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DeleteAllPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DeleteAllPageRoutingModule {}\n","/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DeleteAllPageRoutingModule } from './delete-all-routing.module';\n\nimport { DeleteAllPage } from './delete-all.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DeleteAllPageRoutingModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [DeleteAllPage]\n})\nexport class DeleteAllPageModule {}\n","/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { Component, OnInit } from '@angular/core';\nimport { Location } from '@angular/common'\nimport { TranslateService } from '@ngx-translate/core';\nimport { AlertController } from '@ionic/angular';\n\nimport { LocalNotifications } from '@capacitor/local-notifications';\n\nimport { GlobalService } from \"../global.service\";\n\n@Component({\n  selector: 'app-delete-all',\n  templateUrl: './delete-all.page.html',\n  styleUrls: ['./delete-all.page.scss'],\n})\nexport class DeleteAllPage implements OnInit {\n\n  constructor(\n    private location: Location,\n    public alertCtrl: AlertController,\n    public translate: TranslateService,\n    public G: GlobalService) { \n  }\n\n  ngOnInit() {\n    this.G.L.entry(\"DeleteAllPage.ngOnInit\");\n  }\n  \n  ionViewWillEnter() {\n    this.G.L.entry(\"DeleteAllPage.ionViewWillEnter\");\n    this.G.D.save_state();\n  }\n\n  ionViewDidEnter() {\n    this.G.L.entry(\"DeleteAllPage.ionViewDidEnter\");\n    // TODO: query whether really want to delete all:\n    if (this.G.D.ready) {\n      this.confirm_dialog();\n    }\n  }\n\n  onDataReady() {\n    // called when DataService initialization was slower than view initialization\n    this.G.L.entry(\"DeleteAllPage.onDataReady\");\n  }\n\n  ionViewDidLeave() {\n    this.G.L.entry(\"DeleteAllPage.ionViewDidLeave\");\n  }\n\n  async confirm_dialog() {\n    const dialog = await this.alertCtrl.create({ \n      header: this.translate.instant('delete-all.confirm-header'), \n      message: this.translate.instant('delete-all.confirm-intro'), \n      buttons: [\n        { \n          text: this.translate.instant('cancel'), \n          role: 'cancel',\n          handler: () => { \n            this.G.L.trace('DeleteAllPage.confirm_dialog cancel');\n            // TODO: navigate back\n            this.location.back();\n          } \n        },\n        { \n          text: this.translate.instant('delete-all.confirm-button'),\n          role: 'ok', \n          cssClass: 'delete-all-confirm-button',\n          handler: () => {\n            this.G.L.trace('DeleteAllPage.confirm_dialog delete');\n            // clear all local storage:\n            this.G.D.delete_all().then(() => {\n              // now reload page, which will reinit the app and redirect us to the login page\n              // (at least in browsers – what about native apps?):\n              LocalNotifications.schedule({ notifications: [{ id: null,\n                title: this.translate.instant(\"delete-all.success-title\"),\n                body: this.translate.instant(\"delete-all.success-body\"),\n              }]});\n              window.location.assign(\"http://www.vodle.it\");\n            }).catch(error => {\n              LocalNotifications.schedule({ notifications: [{ id: null,\n                  title: this.translate.instant(\"delete-all.failed\"),\n                  body: null\n              }]});\n              // go back to previous page:\n              this.location.back();\n            })\n          } \n        } \n      ] \n    }); \n    await dialog.present(); \n  }\n\n}\n"],"names":["Component","Location","TranslateService","AlertController","LocalNotifications","GlobalService","DeleteAllPage","constructor","location","alertCtrl","translate","G","ngOnInit","L","entry","ionViewWillEnter","D","save_state","ionViewDidEnter","ready","confirm_dialog","onDataReady","ionViewDidLeave","dialog","create","header","instant","message","buttons","text","role","handler","trace","back","cssClass","delete_all","then","schedule","notifications","id","title","body","window","assign","catch","error","present","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}