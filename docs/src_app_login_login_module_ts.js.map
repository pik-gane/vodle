{"version":3,"file":"src_app_login_login_module_ts.js","mappings":"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","sources":["./src/app/login/login-routing.module.ts","./src/app/login/login.module.ts","./src/app/login/login.page.ts"],"sourcesContent":["/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    LoginPageRoutingModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { Router, ActivatedRoute } from \"@angular/router\";\nimport { Validators, UntypedFormBuilder, UntypedFormGroup, UntypedFormControl } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IonButton, IonInput } from '@ionic/angular';\n\nimport { GlobalService } from \"../global.service\";\nimport { environment } from 'src/environments/environment';\n\n/*\n- if no conn. info in local db:\n  - apparently user new on this device. ask if has used vodle before\n    - if no: ask for new conn. info, try to connect as public user\n      - if success, look for private user doc. \n        - if exists, notify that conn. info already in use (used vodle before after all?), try connecting as private user and updating user doc.\n          - if success, done\n          - otherwise, notify error, ask to verify username and password or contact server admin to correct permissions, return to form\n        - otherwise, try generating user\n          - if success, try connecting as private user and generating user doc.\n            - if success, done\n            - otherwise, notify error, ask to verify username and password or contact server admin to correct permissions, return to form\n          - if not, notify error, ask to verify username and password or contact server admin to correct permissions, return to form\n      - otherwise, notify error, ask to verify conn. info, return to form \n    - if yes: ask for old conn. info or recovery file, ...\n*/\n\n// PAGE:\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n\n  E = environment;\n  window = window;\n  \n  // ATTRIBUTES:\n\n  languageFormGroup: UntypedFormGroup;\n  emailFormGroup: UntypedFormGroup;\n  passwordFormGroup: UntypedFormGroup;\n  oldPasswordFormGroup: UntypedFormGroup;\n\n  step: string;\n\n  showing_password: boolean;\n  advanced_expanded: boolean;\n  terms_expanded = false;\n  accept_privacy = !environment.privacy_statement_url; // auto-accept if empty privacy URL\n  save_password = false;\n  \n  @ViewChild('input_email', { static: false }) input_email: IonInput;\n  @ViewChild('input_new_password', { static: false }) input_new_password: IonInput;\n  @ViewChild('input_retype_password', { static: false }) input_retype_password: IonInput;\n  @ViewChild('input_old_password', { static: false }) input_old_password: IonInput;\n  @ViewChild('dismiss_button', { static: false }) dismiss_button: IonButton;\n\n  // LIFECYCLE:\n\n  ready = false;  \n  then_url: string;\n\n  constructor(      \n      private router: Router,\n      public route: ActivatedRoute,\n      public formBuilder: UntypedFormBuilder,\n      public translate: TranslateService,\n      public G: GlobalService) { \n    this.G.L.entry(\"LoginPage.constructor\");\n    this.route.params.subscribe(params => { \n      this.then_url = params['then'];\n      const step = this.step = params['step'] || 'start';\n      this.G.L.info(\"LoginPage going to step\", step, this.then_url);\n      if (['start','language','used_before',\n           'fresh_email','old_email','fresh_password','old_password',\n           'connected'].includes(step)) {\n        this.ready = true;  // here we do not need to wait for DataService since we need no data. \n      }\n      if (step == 'connected') {\n        // store privacy consent in database:\n        this.G.D.setu('consent', 'Yes, I have read the data protection declaration and terms of use. I consent to the processing of my data on user devices and database servers in the described manner, in order to participate in polls. I agree that some of my data will be transmitted to other participants in pseudonymized form. I am aware that my right to have my data deleted is hence constrained insofar as these copies may not be deleted on all user devices. I can revoke this consent by e-mail.');\n      }\n\n    });\n  }\n\n  ngOnInit() {\n    this.G.L.entry(\"LoginPage.ngOnInit\");\n    this.languageFormGroup = this.formBuilder.group({\n      language: new UntypedFormControl('', Validators.required),\n    });\n    this.emailFormGroup = this.formBuilder.group({\n      email: new UntypedFormControl('', Validators.compose([\n//        Validators.required,  // TODO: uncomment once the problem is solved that the privacy link does not work properly when field left empty\n        Validators.email\n      ])),\n    });\n    this.passwordFormGroup = this.formBuilder.group({\n      pw: this.formBuilder.group({\n        password: new UntypedFormControl('', Validators.compose([\n          Validators.required,\n          Validators.minLength(8),\n          Validators.pattern(this.G.S.password_regexp)\n        ])),\n        confirm_password: new UntypedFormControl('', Validators.required),\n      }, {\n        validators: [this.G.S.passwords_match]\n      }),\n    });\n    this.oldPasswordFormGroup = this.formBuilder.group({\n      pw: this.formBuilder.group({\n        password: new UntypedFormControl('', Validators.compose([\n          Validators.required,\n          Validators.minLength(8),\n          Validators.pattern(this.G.S.password_regexp)\n        ])),\n      }),\n    });\n  }\n  \n  ionViewWillEnter() {\n    this.G.L.entry(\"LoginPage.ionViewWillEnter\");\n    this.G.D.page = this;\n  }\n\n  ionViewDidEnter() {\n    this.G.L.entry(\"LoginPage.ionViewDidEnter\");\n    const default_lang = navigator.language.slice(0,2);\n    this.languageFormGroup.get('language').setValue(\n      this.G.S.language||((this.translate.langs.includes(default_lang))?default_lang:''));\n    // browser might have prefilled fields, so check this:\n    /*\n    this.set_language();\n    this.set_email();\n    this.set_password();\n    this.set_old_password();\n    */\n    if (this.G.D.ready && !this.ready) this.onDataReady();\n    setTimeout(() => {\n      const el = this.input_email||this.input_new_password||this.input_old_password;\n      if (el) {\n        if (this.step!='fresh_email') el.setFocus();\n      } else {\n        const el = document.getElementById(\"dismiss_button\");\n        if (el) {\n          el.focus();\n        }\n      }\n    }, 300);\n  }\n\n  onDataReady() {\n    // called when DataService initialization was slower than view initialization\n    this.G.L.entry(\"LoginPage.onDataReady\");\n    this.ready = true;\n  }\n\n  ionViewDidLeave() {\n    this.G.L.entry(\"LoginPage.ionViewDidLeave\");\n    this.G.D.save_state();\n    this.G.L.exit(\"LoginPage.ionViewDidLeave\");\n  }\n\n  // OTHER HOOKS:\n  \n  // for DataService:\n\n  onDataChange() {\n    // called whenever data stored in database has changed\n    this.G.L.entry(\"LoginPage.onDataChange\");\n  }\n\n  // for form actions:\n\n  set_language() {\n    let c = this.languageFormGroup.get('language');\n    if (c.valid) this.G.S.language = c.value;\n  }\n\n  set_email() {\n    let c = this.emailFormGroup.get('email');\n    if (c.valid) this.G.S.email = c.value; \n  }\n\n  set_password() {\n    let fg = this.passwordFormGroup.get('pw');\n    if (fg.valid) this.G.S.password = fg.get('password').value; \n  }\n\n  set_old_password() {\n    let fg = this.oldPasswordFormGroup.get('pw');\n    if (fg.valid) this.G.S.password = fg.get('password').value; \n  }\n\n  submit_language() {\n    this.set_language();\n    if (this.languageFormGroup.valid) {\n      this.G.go_fullscreen_on_mobile();\n      this.router.navigate(['/login/used_before/'+this.then_url]);  \n    }\n  }\n\n  ask_used_before_no() {\n    this.G.go_fullscreen_on_mobile();\n    this.router.navigate(['/login/fresh_email/'+this.then_url]);\n  }\n\n  ask_used_before_yes() {\n    this.G.go_fullscreen_on_mobile();\n    this.router.navigate(['/login/old_email/'+this.then_url]);\n  }\n\n  submit_email() {\n    this.set_email();\n    if (this.emailFormGroup.get('email').valid && this.accept_privacy) {\n      if (this.step == 'fresh_email') {\n        this.router.navigate(['/login/fresh_password/'+this.then_url]);\n      } else {\n        this.router.navigate(['/login/old_password/'+this.then_url]);\n      }\n    }\n  }\n\n  login_as_guest() {\n    this.G.S.password = \"Guest\" + Math.round(Math.random()*1000000);\n    this.G.S.email = this.G.S.password + \"@vodle.it\";\n    this.G.S.default_wap = 10;\n    this.G.S.use_guest = true;\n    this.G.D.login_submitted();\n  }\n\n  blur_password() {\n    setTimeout(() => {\n      this.input_retype_password.setFocus();\n    }, 100);\n  }\n\n  submit_new_password() {\n    this.set_password();\n    // TODO: test connection to vodle central. if fails, ask for different server or correct password?\n    if (this.passwordFormGroup.get('pw').valid) {\n      this.G.S.default_wap = 10;\n      this.G.D.login_submitted();\n    }\n  }\n\n  submit_old_password() {\n    this.set_old_password();\n    // TODO: test connection to vodle central. if fails, ask for different server or correct password!\n    if (this.oldPasswordFormGroup.get('pw').valid) {\n      this.G.D.login_submitted();\n    }\n  }\n\n  connected_dismissed() {\n    this.G.D.init_notifications(true);\n    const target = \"./#/\"+decodeURIComponent(((!!this.then_url) && !this.then_url.includes('logout')) ? this.then_url : \"\");\n    this.G.L.trace(\"LoginPage redirecting to\", this.then_url, target);\n    if (target != \"\") {\n      // DIRTY FIX to make sure data is loaded properly:\n      window.location.replace(target);\n    } else {\n      // in principle, we would rather want to do this instead:\n      this.router.navigate([target]);\n    }\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}