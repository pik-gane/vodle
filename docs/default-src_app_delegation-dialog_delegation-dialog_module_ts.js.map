{"version":3,"file":"default-src_app_delegation-dialog_delegation-dialog_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;AAmBoE;AAC2E;AAClF;AACN;AAEX;AACH;AAC2B;AAElB;AAIS;AAMN;AACR;AACA;AACS;AACP;AAOxC,IAAMkB,oBAAoB,GAA1B,MAAMA,oBAAoB;EA4B/BC,YACUC,OAA0B,EAC3BC,WAA+B,EAC/BC,SAA2B,EAC3BC,CAAgB;IAHf,KAAAH,OAAO,GAAPA,OAAO;IACR,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAC,SAAS,GAATA,SAAS;IACT,KAAAC,CAAC,GAADA,CAAC;IA9BV,KAAAC,CAAC,GAAGZ,qEAAW;IAIf,KAAAa,KAAK,GAAG,KAAK;IAgLb,KAAAC,mBAAmB,GAAG;MACpB,mBAAmB,EAAE,CACnB;QAAEC,IAAI,EAAE,UAAU;QAAEC,OAAO,EAAE;MAAuC,CAAE,CACvE;MACD,MAAM,EAAE;KACT;EA1JD;EAEAC,QAAQA,CAAA,GACR;EAEAC,gBAAgBA,CAAA;IACd,IAAI,CAACC,iBAAiB,GAAI,OAAOC,SAAS,CAACC,KAAK,KAAK,UAAW;IAChE,IAAI,CAACC,SAAS,GAAG1B,sDAAS,CAAC2B,gBAAgB,EAAE,IAAI,IAAI,CAACJ,iBAAiB;IACvE,IAAI,CAACK,SAAS,GAAG,IAAI,CAACf,WAAW,CAACgB,KAAK,CAAC;MACtCC,iBAAiB,EAAE,IAAIjC,8DAAkB,CAAC,EAAE,EAAEF,sDAAU,CAACoC,QAAQ,CAAC;MAClEC,IAAI,EAAE,IAAInC,8DAAkB,CAAC,IAAI,CAACkB,CAAC,CAACkB,CAAC,CAACC,KAAK,CAAC;MAC5CC,UAAU,EAAE,IAAItC,8DAAkB,CAAC,CAAC;KACrC,CAAC;IAEF,IAAI,IAAI,CAACkB,CAAC,CAACqB,CAAC,CAACC,+BAA+B,CAAC,IAAI,CAACC,MAAM,CAACC,GAAG,CAAC,EAAE;MAC7D,MAAMC,GAAG,GAAG,IAAI,CAACzB,CAAC,CAACqB,CAAC,CAACK,yBAAyB,CAAC,IAAI,CAACH,MAAM,CAACC,GAAG,CAAC;MAC/D,MAAMG,GAAG,GAAG,IAAI,CAACJ,MAAM,CAACK,CAAC,CAACC,KAAK;MAC/B,MAAMC,OAAO,GAAGL,GAAG,CAACM,GAAG,CAACJ,GAAG,CAAC,IAAI,EAAE;MAClC,IAAIK,WAAW,GAAG,CAAC;MACnB,KAAK,MAAMC,KAAK,IAAIH,OAAO,EAAE;QAC3B,IAAIG,KAAK,KAAKC,SAAS,EAAE;UACvB;QACF;QACAF,WAAW,IAAIG,MAAM,CAACF,KAAK,CAAC,CAAC,CAAC,CAAC;MACjC;MACA,IAAI,CAACG,WAAW,GAAG,EAAE,GAAGJ,WAAW;IACrC;IAEA;IACA,IAAI,IAAI,CAAChC,CAAC,CAACqB,CAAC,CAACgB,6BAA6B,CAAC,IAAI,CAACd,MAAM,CAACC,GAAG,CAAC,EAAE;MAC3D,IAAI,CAACc,sBAAsB,EAAE;IAC/B;IAEA;IACA,IAAI,IAAI,CAACtC,CAAC,CAACqB,CAAC,CAACkB,gCAAgC,CAAC,IAAI,CAAChB,MAAM,CAACC,GAAG,CAAC,EAAE;MAC9D,IAAI,CAACgB,YAAY,GAAG,EAAE;MACtB,IAAI,CAACC,gBAAgB,GAAG,IAAIC,GAAG,EAAU;MAEzC,KAAK,MAAMC,EAAE,IAAI,IAAI,CAACpB,MAAM,CAACK,CAAC,CAACgB,IAAI,EAAE;QACnC,IAAI,IAAI,CAACrB,MAAM,CAACsB,gBAAgB,CAACC,GAAG,CAACH,EAAE,CAAC,EAAE;UACxC,IAAI,IAAI,CAACpB,MAAM,CAACsB,gBAAgB,CAACd,GAAG,CAACY,EAAE,CAAC,KAAK,EAAE,EAAE;YAC/C;UACF;QACF;QACA,IAAI,CAACH,YAAY,CAACO,IAAI,CAAC;UAACJ,EAAE,EAAEA,EAAE;UAAEK,IAAI,EAAE,IAAI,CAACzB,MAAM,CAACK,CAAC,CAACqB,OAAO,CAACN,EAAE,CAAC,CAACK;QAAI,CAAC,CAAC;QACtE,IAAI,CAACP,gBAAgB,CAACS,GAAG,CAACP,EAAE,CAAC;MAC/B;IACF;IAEA,MAAMlB,GAAG,GAAG,IAAI,CAACzB,CAAC,CAACqB,CAAC,CAACK,yBAAyB,CAAC,IAAI,CAACH,MAAM,CAACC,GAAG,CAAC;IAC/D2B,OAAO,CAACC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC7B,MAAM,CAACK,CAAC,CAACC,KAAK,CAAC;IAChDsB,OAAO,CAACC,GAAG,CAAC,KAAK,EAAE3B,GAAG,CAAC;IACvB,KAAK,MAAM,CAACE,GAAG,EAAE0B,IAAI,CAAC,IAAI5B,GAAG,EAAE;MAC7B,KAAK,MAAM6B,GAAG,IAAID,IAAI,EAAE;QACtBF,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEzB,GAAG,EAAE2B,GAAG,CAAC;MAC9B;IACF;IAEA,IAAI,IAAI,CAACtD,CAAC,CAACqB,CAAC,CAACkB,gCAAgC,CAAC,IAAI,CAAChB,MAAM,CAACC,GAAG,CAAC,EAAE;MAC9D,KAAK,MAAM+B,GAAG,IAAI,IAAI,CAAChC,MAAM,CAACK,CAAC,CAACgB,IAAI,EAAE;QACpC,MAAMY,GAAG,GAAG,IAAI,CAACxD,CAAC,CAACqB,CAAC,CAACoC,wBAAwB,CAAC,IAAI,CAAClC,MAAM,CAACC,GAAG,EAAE+B,GAAG,CAAC;QACnEJ,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEG,GAAG,EAAEC,GAAG,CAAC;MAC9B;IACF,CAAC,MAAI;MACH,MAAMA,GAAG,GAAG,IAAI,CAACxD,CAAC,CAACqB,CAAC,CAACoC,wBAAwB,CAAC,IAAI,CAAClC,MAAM,CAACC,GAAG,CAAC;MAC9D2B,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEI,GAAG,CAAC;IACzB;IAEA;IAEA,IAAI,IAAI,CAACxD,CAAC,CAACqB,CAAC,CAACkB,gCAAgC,CAAC,IAAI,CAAChB,MAAM,CAACC,GAAG,CAAC,EAAE;MAC9D,IAAI,CAACI,CAAC,GAAG,IAAI,CAAC5B,CAAC,CAAC0D,CAAC,CAACC,KAAK,CAAC,IAAI,CAACpC,MAAM,CAACC,GAAG,CAAC;IAC1C,CAAC,MAAM;MACL,CAAC,IAAI,CAACI,CAAC,EAAE,IAAI,CAACgC,GAAG,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,WAAW,EAAE,IAAI,CAACC,SAAS,CAAC,GAAG,IAAI,CAAC/D,CAAC,CAACgE,GAAG,CAACC,kBAAkB,CAAC,IAAI,CAAC1C,MAAM,CAACC,GAAG,CAAC;IACrH;IAEA;IACA,IAAI,CAAC0C,aAAa,GAAG,IAAI,CAACnE,SAAS,CAACoE,OAAO,CAAC,oCAAoC,EAAE;MAACC,GAAG,EAAE,IAAI,CAACpE,CAAC,CAACqB,CAAC,CAACgD,WAAW,CAAC,IAAI,CAACzC,CAAC,CAACwC,GAAG;IAAC,CAAC,CAAC;IAC1H,IAAI,CAACE,cAAc,EAAE;IACrB,IAAI,CAACpE,KAAK,GAAG,IAAI;EACnB;EAIAqE,eAAeA,CAAA;IACbC,UAAU,CAAC,MAAM,IAAI,CAACC,aAAa,CAACC,QAAQ,EAAE,EAAE,GAAG,CAAC;EACtD;EAEApC,sBAAsBA,CAAA;IACpB,MAAMX,GAAG,GAAG,IAAI,CAACJ,MAAM,CAACK,CAAC,CAACC,KAAK;IAC/B,MAAM8C,WAAW,GAAG,IAAI,CAAC3E,CAAC,CAACqB,CAAC,CAACK,yBAAyB,CAAC,IAAI,CAACH,MAAM,CAACC,GAAG,CAAC;IACvE,MAAMM,OAAO,GAAG6C,WAAW,CAAC5C,GAAG,CAACJ,GAAG,CAAC,IAAI,EAAE;IAC1C,IAAIiD,KAAK,GAAGC,KAAK,CAAC5D,IAAI,CAAC;MAAE6D,MAAM,EAAEzF,qEAAW,CAAC0F,UAAU,CAACC;IAAe,CAAE,EAAE,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,GAAG,CAAC,CAAC;IAC3F,KAAK,MAAMjD,KAAK,IAAIH,OAAO,EAAE;MAC3B,IAAIG,KAAK,KAAKC,SAAS,EAAE;QACvB;MACF;MACA,MAAMiD,aAAa,GAAWP,KAAK,CAACQ,OAAO,CAACjD,MAAM,CAACF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;MAC7D,IAAIkD,aAAa,KAAK,CAAC,CAAC,EAAE;QACxBP,KAAK,CAACS,MAAM,CAACF,aAAa,EAAE,CAAC,CAAC;MAChC;IACF;IACA,IAAI,CAACG,IAAI,GAAGV,KAAK,CAAC,CAAC,CAAC;IACpB,IAAI,CAACW,YAAY,GAAGX,KAAK;EAC3B;EAEAY,yBAAyBA,CAAA;IACvB,MAAMzE,iBAAiB,GAAG,IAAI,CAACF,SAAS,CAACkB,GAAG,CAAC,mBAAmB,CAAC,CAAC0D,KAAK;IACvE,IAAI,CAACzF,CAAC,CAACqB,CAAC,CAACqE,IAAI,CAAC,IAAI,CAAC9D,CAAC,CAACJ,GAAG,EAAE,eAAe,GAAG,IAAI,CAACoC,GAAG,EAAE7C,iBAAiB,CAAC;IACxE,IAAI,CAACuD,cAAc,EAAE;EACvB;EAEAqB,YAAYA,CAAA;IACV,MAAM1E,IAAI,GAAG,IAAI,CAACJ,SAAS,CAACkB,GAAG,CAAC,MAAM,CAAC,CAAC0D,KAAK;IAC7C,IAAI,CAACzF,CAAC,CAACqB,CAAC,CAACqE,IAAI,CAAC,IAAI,CAAC9D,CAAC,CAACJ,GAAG,EAAE,WAAW,GAAG,IAAI,CAACoC,GAAG,EAAE3C,IAAI,CAAC;IACvD,IAAI,CAAC,IAAI,CAACjB,CAAC,CAACqB,CAAC,CAACkB,gCAAgC,CAAC,IAAI,CAAChB,MAAM,CAACC,GAAG,CAAC,EAAE;MAC/D,IAAI,CAACoE,mBAAmB,CAAC3E,IAAI,CAAC;IAChC;IACA,IAAI,CAACqD,cAAc,EAAE;EACvB;EAEAuB,YAAYA,CAACC,CAAC;IACZ,IAAI,CAACR,IAAI,GAAGQ,CAAC,CAACC,MAAM,CAACN,KAAK;EAC5B;EAEAO,eAAeA,CAACC,KAAY;IAC1B,MAAMC,MAAM,GAAGD,KAAK,CAACC,MAA8B;IACnD/C,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAE+C,IAAI,CAACC,SAAS,CAACF,MAAM,CAACT,KAAK,CAAC,CAAC;IAC5D,IAAIY,EAAE,GAAG,IAAI3D,GAAG,EAAU;IAC1B,KAAK,MAAM4D,MAAM,IAAIJ,MAAM,CAACT,KAAK,EAAE;MACjCY,EAAE,CAACnD,GAAG,CAACoD,MAAM,CAAC3D,EAAE,CAAC;IACnB;IACA,IAAI,CAACF,gBAAgB,GAAG,IAAIC,GAAG,CAAC2D,EAAE,CAAC;EACrC;EAEAE,gBAAgBA,CAAA;IACd,OAAO1B,KAAK,CAAC5D,IAAI,CAAC,IAAI,CAACuB,YAAY,CAACgE,OAAO,EAAE,CAAC;EAChD;EAEAlC,cAAcA,CAAA;IACZ,IAAI,CAACtE,CAAC,CAACyG,CAAC,CAACxE,KAAK,CAAC,qCAAqC,CAAC;IACrD,IAAI,CAACyE,UAAU,GAAG,SAAS,GAAGC,kBAAkB,CAAC,IAAI,CAAC9F,SAAS,CAACkB,GAAG,CAAC,mBAAmB,CAAC,CAAC0D,KAAK,CAAC,GAAG,WAAW,GAAGkB,kBAAkB,CAAC,IAAI,CAACzC,aAAa,CAAC,GAAG,QAAQ,GAAGyC,kBAAkB,CAAC,IAAI,CAACC,YAAY,CAAC;EAC3M;EAEAC,YAAYA,CAAA;IAEV,IAAI,CAAChH,OAAO,CAACiH,OAAO,EAAE;EACxB;EASAlB,mBAAmBA,CAAC3E,IAAY;IAC9B,IAAI,CAAC8F,eAAe,GAAG,IAAI,CAAC/G,CAAC,CAACgE,GAAG,CAACgD,mBAAmB,CAAC,IAAI,CAACzF,MAAM,CAACC,GAAG,EAAE,IAAI,CAACoC,GAAG,EAAE3C,IAAI,EAAE,IAAI,CAAC6C,WAAW,CAAC;IACxG,IAAI,CAAC8C,YAAY,GAAI,IAAI,CAAC7G,SAAS,CAACoE,OAAO,CAAC,0CAA0C,CAAC,GAAG,MAAM,GAClF,IAAI,CAACpE,SAAS,CAACoE,OAAO,CAAC,8CAA8C,CAAC,GAAG,MAAM,GAC/E8C,MAAM,CAACC,YAAY,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAACvF,CAAC,CAACwF,KAAK,GAAG,OAAO,GAC3D,IAAI,CAACrH,SAAS,CAACoE,OAAO,CAAC,wCAAwC,EAAE;MAACC,GAAG,EAAE,IAAI,CAACpE,CAAC,CAACqB,CAAC,CAACgD,WAAW,CAAC,IAAI,CAACzC,CAAC,CAACwC,GAAG;IAAC,CAAC,CAAC,GAAG,MAAM,GAClH,IAAI,CAACrE,SAAS,CAACoE,OAAO,CAAC,6CAA6C,CAAC,GAAG,MAAM,GAC9E,IAAI,CAACpE,SAAS,CAACoE,OAAO,CAAC,6CAA6C,CAAC,GAAG,MAAM,GAC9E8C,MAAM,CAACC,YAAY,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAACJ,eAAe,GAAG,MAAM,GAClE,IAAI,CAAChH,SAAS,CAACoE,OAAO,CAAC,4CAA4C,CAAC,GAAG,MAAM,GAC7E,IAAI,CAACpE,SAAS,CAACoE,OAAO,CAAC,yCAAyC,CAAE;EAClF;EAEAkD,4BAA4BA,CAAA;IAC1B,IAAI,CAAC,IAAI,CAACrH,CAAC,CAACqB,CAAC,CAACkB,gCAAgC,CAAC,IAAI,CAAChB,MAAM,CAACC,GAAG,CAAC,EAAE;MAC/D;IACF;IAEA;IACA,CAAC,IAAI,CAACI,CAAC,EAAE,IAAI,CAACgC,GAAG,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,WAAW,EAAE,IAAI,CAACC,SAAS,CAAC,GAAG,IAAI,CAAC/D,CAAC,CAACgE,GAAG,CAACC,kBAAkB,CAAC,IAAI,CAAC1C,MAAM,CAACC,GAAG,CAAC;IACnH,MAAMyB,OAAO,GAAG4B,KAAK,CAAC5D,IAAI,CAAC,IAAI,CAACwB,gBAAgB,CAAC;IACjD,IAAI,CAACmD,mBAAmB,CAAC,IAAI,CAAC/E,SAAS,CAACkB,GAAG,CAAC,MAAM,CAAC,CAAC0D,KAAK,CAAC;IAC1D,IAAI,CAACsB,eAAe,GAAG,IAAI,CAAC/G,CAAC,CAACgE,GAAG,CAACgD,mBAAmB,CAAC,IAAI,CAACzF,MAAM,CAACC,GAAG,EAAE,IAAI,CAACoC,GAAG,EAAE,IAAI,CAAC/C,SAAS,CAACkB,GAAG,CAAC,MAAM,CAAC,CAAC0D,KAAK,EAAE,IAAI,CAAC3B,WAAW,EAAEb,OAAO,CAAC;IAC7I,IAAI,CAACjD,CAAC,CAACgE,GAAG,CAACsD,qBAAqB,CAAC,IAAI,CAAC/F,MAAM,CAACC,GAAG,EAAE,IAAI,CAACoC,GAAG,EAAE,IAAI,CAAC/C,SAAS,CAACkB,GAAG,CAAC,mBAAmB,CAAC,CAAC0D,KAAK,CAAC;IAC1G,KAAK,MAAMlC,GAAG,IAAI,IAAI,CAACd,gBAAgB,EAAE;MACvC,IAAI,CAACzC,CAAC,CAACqB,CAAC,CAACkG,IAAI,CAAC,IAAI,CAAC3F,CAAC,CAACJ,GAAG,EAAE,UAAU,GAAG+B,GAAG,EAAE,IAAI,CAACK,GAAG,CAAC;IACvD;EACF;EAEA4D,+BAA+BA,CAAA;IAC7B,KAAK,MAAMjE,GAAG,IAAI,IAAI,CAACd,gBAAgB,EAAE;MACvC,IAAIhB,GAAG,GAAG,IAAI,CAACzB,CAAC,CAACqB,CAAC,CAACK,yBAAyB,CAAC,IAAI,CAACH,MAAM,CAACC,GAAG,EAAE+B,GAAG,CAAC,IAAI,IAAIkE,GAAG,EAAsC;MACnH,IAAIpE,IAAI,GAAG5B,GAAG,CAACM,GAAG,CAAC,IAAI,CAACR,MAAM,CAACK,CAAC,CAACC,KAAK,CAAC,IAAI,EAAE;MAC7CwB,IAAI,GAAE,CAAC,CAAC,IAAI,CAACO,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;MAC3BnC,GAAG,CAACiG,GAAG,CAAC,IAAI,CAACnG,MAAM,CAACK,CAAC,CAACC,KAAK,EAAEwB,IAAI,CAAC;MAClC,IAAI,CAACrD,CAAC,CAACqB,CAAC,CAACsG,0BAA0B,CAAC,IAAI,CAACpG,MAAM,CAACC,GAAG,EAAE+B,GAAG,EAAE9B,GAAG,CAAC;IAChE;EACF;EAEAmG,oBAAoBA,CAAA;IAClB,IAAI,CAAC5H,CAAC,CAACyG,CAAC,CAACxE,KAAK,CAAC,2CAA2C,CAAC;IAC3D,IAAI,CAACoF,4BAA4B,EAAE;IACnC,IAAI,CAAC7B,yBAAyB,EAAE;IAChC,IAAI,CAACG,YAAY,EAAE;IACnBzG,mDAAK,CAACwB,KAAK,CAAC;MACV0G,KAAK,EAAE,IAAI,CAAClD,aAAa;MACzB2D,IAAI,EAAE,IAAI,CAACjB,YAAY;MAC7B;MACMkB,WAAW,EAAE;KACd,CAAC,CAACC,IAAI,CAACC,GAAG,IAAG;MACZ,IAAI,CAAChI,CAAC,CAACyG,CAAC,CAACwB,IAAI,CAAC,qDAAqD,EAAED,GAAG,CAAC;MACzE,IAAI,CAAChI,CAAC,CAACgE,GAAG,CAACkE,sBAAsB,CAAC,IAAI,CAAC3G,MAAM,CAACC,GAAG,EAAE,IAAI,CAACoC,GAAG,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,WAAW,EAAE,IAAI,CAACC,SAAS,CAAC;MAC5G,IAAI,IAAI,CAAC/D,CAAC,CAACqB,CAAC,CAACkB,gCAAgC,CAAC,IAAI,CAAChB,MAAM,CAACC,GAAG,CAAC,EAAE;QAC9D,IAAI,CAACgG,+BAA+B,EAAE;MACxC,CAAC,MAAM;QACL,IAAI,CAACxH,CAAC,CAACgE,GAAG,CAACmE,iBAAiB,CAAC,IAAI,CAAC5G,MAAM,CAACC,GAAG,EAAE,IAAI,CAACoC,GAAG,EAAE,IAAI,CAAC0B,IAAI,CAAC;MACpE;MACA,IAAI,CAACzF,OAAO,CAACiH,OAAO,EAAE;IACxB,CAAC,CAAC,CAACsB,KAAK,CAACC,GAAG,IAAG;MACb,IAAI,CAACrI,CAAC,CAACyG,CAAC,CAAC6B,KAAK,CAAC,kDAAkD,EAAED,GAAG,CAAC;IACzE,CAAC,CAAC;EACJ;EAEAE,mBAAmBA,CAAA;IACjB,IAAI,CAACvI,CAAC,CAACyG,CAAC,CAACxE,KAAK,CAAC,0CAA0C,CAAC;IAC1D,IAAI,CAACuD,yBAAyB,EAAE;IAChC,IAAI,CAACG,YAAY,EAAE;IACnB,IAAI,CAAC0B,4BAA4B,EAAE;IACnCmB,MAAM,CAAC/H,SAAS,CAACgI,SAAS,CAACC,SAAS,CAAC,IAAI,CAAC3B,eAAe,CAAC;IAC1D,IAAI,CAAC/G,CAAC,CAACgE,GAAG,CAACkE,sBAAsB,CAAC,IAAI,CAAC3G,MAAM,CAACC,GAAG,EAAE,IAAI,CAACoC,GAAG,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,WAAW,EAAE,IAAI,CAACC,SAAS,CAAC;IAC5G,IAAI,IAAI,CAAC/D,CAAC,CAACqB,CAAC,CAACkB,gCAAgC,CAAC,IAAI,CAAChB,MAAM,CAACC,GAAG,CAAC,EAAE;MAC9D,IAAI,CAACgG,+BAA+B,EAAE;IACxC,CAAC,MAAM,IAAG,IAAI,CAACxH,CAAC,CAACqB,CAAC,CAACC,+BAA+B,CAAC,IAAI,CAACC,MAAM,CAACC,GAAG,CAAC,EAAC;MAClE,IAAI,CAACxB,CAAC,CAACgE,GAAG,CAACmE,iBAAiB,CAAC,IAAI,CAAC5G,MAAM,CAACC,GAAG,EAAE,IAAI,CAACoC,GAAG,EAAEzB,MAAM,CAAC,IAAI,CAACtB,SAAS,CAACkB,GAAG,CAAC,YAAY,CAAC,CAAC0D,KAAK,CAAC,CAAC;IACzG,CAAC,MAAK;MACJ,IAAI,CAACzF,CAAC,CAACgE,GAAG,CAACmE,iBAAiB,CAAC,IAAI,CAAC5G,MAAM,CAACC,GAAG,EAAE,IAAI,CAACoC,GAAG,EAAE,IAAI,CAAC0B,IAAI,CAAC;IACpE;IACAnG,8EAAkB,CAACwJ,QAAQ,CAAC;MAC1BC,aAAa,EAAE,CAAC;QACdxB,KAAK,EAAE,IAAI,CAACrH,SAAS,CAACoE,OAAO,CAAC,mDAAmD,CAAC;QAClF0E,IAAI,EAAE,IAAI,CAAC9I,SAAS,CAACoE,OAAO,CAAC,kDAAkD,EAClD;UAAC2E,QAAQ,EAAE,IAAI,CAACjI,SAAS,CAACkB,GAAG,CAAC,mBAAmB,CAAC,CAAC0D;QAAK,CAAC,CAAC;QACvF9C,EAAE,EAAE;OACL;KACF,CAAC,CACDoF,IAAI,CAACC,GAAG,IAAG;MACV,IAAI,CAAChI,CAAC,CAACyG,CAAC,CAACsC,KAAK,CAAC,iFAAiF,EAAEf,GAAG,CAAC;IACxG,CAAC,CAAC,CAACI,KAAK,CAACC,GAAG,IAAG;MACb,IAAI,CAACrI,CAAC,CAACyG,CAAC,CAACuC,IAAI,CAAC,8EAA8E,EAAEX,GAAG,CAAC;IACpG,CAAC,CAAC;IACF,IAAI,CAAC9G,MAAM,CAAC0H,sBAAsB,EAAE;IACpC,IAAI,CAACpJ,OAAO,CAACiH,OAAO,EAAE;IACtB,IAAI,CAAC9G,CAAC,CAACyG,CAAC,CAACyC,IAAI,CAAC,0CAA0C,CAAC;EAC3D;EAEAC,oBAAoBA,CAACC,EAAc;IACjC,IAAI,CAACpJ,CAAC,CAACyG,CAAC,CAACxE,KAAK,CAAC,2CAA2C,CAAC;IAC3D,IAAI,CAACoF,4BAA4B,EAAE;IACnC,IAAI,CAAC7B,yBAAyB,EAAE;IAChC,IAAI,CAACG,YAAY,EAAE;IACnB,IAAI,CAAC3F,CAAC,CAACgE,GAAG,CAACkE,sBAAsB,CAAC,IAAI,CAAC3G,MAAM,CAACC,GAAG,EAAE,IAAI,CAACoC,GAAG,EAAE,IAAI,CAACC,OAAO,EAAE,IAAI,CAACC,WAAW,EAAE,IAAI,CAACC,SAAS,CAAC;IAC5G,IAAI,IAAI,CAAC/D,CAAC,CAACqB,CAAC,CAACkB,gCAAgC,CAAC,IAAI,CAAChB,MAAM,CAACC,GAAG,CAAC,EAAE;MAC9D,IAAI,CAACgG,+BAA+B,EAAE;IACxC,CAAC,MAAM,IAAG,IAAI,CAACxH,CAAC,CAACqB,CAAC,CAACC,+BAA+B,CAAC,IAAI,CAACC,MAAM,CAACC,GAAG,CAAC,EAAC;MAClE,IAAI,CAACxB,CAAC,CAACgE,GAAG,CAACmE,iBAAiB,CAAC,IAAI,CAAC5G,MAAM,CAACC,GAAG,EAAE,IAAI,CAACoC,GAAG,EAAEzB,MAAM,CAAC,IAAI,CAACtB,SAAS,CAACkB,GAAG,CAAC,YAAY,CAAC,CAAC0D,KAAK,CAAC,CAAC;IACzG,CAAC,MAAM;MACL,IAAI,CAACzF,CAAC,CAACgE,GAAG,CAACmE,iBAAiB,CAAC,IAAI,CAAC5G,MAAM,CAACC,GAAG,EAAE,IAAI,CAACoC,GAAG,EAAE,IAAI,CAAC0B,IAAI,CAAC;IACpE;IACA,IAAI,CAAC/D,MAAM,CAAC0H,sBAAsB,EAAE;IACpC,IAAI,CAACpJ,OAAO,CAACiH,OAAO,EAAE;IACtB,IAAI,CAAC9G,CAAC,CAACyG,CAAC,CAACyC,IAAI,CAAC,2CAA2C,CAAC;EAC5D;EAEAG,KAAKA,CAAA;IACH,IAAI,CAACxJ,OAAO,CAACiH,OAAO,EAAE;EACxB;;;;;;;;;;;;;;;cA5SCpI,iDAAKA;MAAA;;cA+GLC,qDAAS;QAAA2K,IAAA,GAAC,eAAe,EAAE;UAAEC,MAAM,EAAE;QAAK,CAAE;MAAA;;;;AAnHlC5J,oBAAoB,GAAA6J,kDAAA,EANhC/K,yDAAS,CAAC;EACTgL,OAAO,EAAE,CAAE/J,+CAAY,EAAEF,uDAAW,EAAEC,gEAAe,EAAEF,uDAAW,EAAED,+DAAmB,CAAE;EACzFoK,QAAQ,EAAE,uBAAuB;EACjCC,QAAA,EAAAC,oEAA4C;;CAE7C,CAAC,GACWjK,oBAAoB,CAiThC;;;;;;;;;;;;;;;;;;;;;;;;;AClWD;;;;;;;;;;;;;;;;;;;AAmByC;AACM;AACmB;AACZ;AAET;AAE0C;AAEvB;AACA;AAczD,IAAMoK,0BAA0B,GAAhC,MAAMA,0BAA0B,GAAG;AAA7BA,0BAA0B,GAAAP,iDAAA,EAZtCK,uDAAQ,CAAC;EACRJ,OAAO,EAAE,CACP/J,8CAAY,EACZH,uDAAW,EACXC,uDAAW,EACXF,+DAAmB,EACnBwK,gGAAiC,EACjCrK,gEAAe,CAACuK,QAAQ,EAAE,EAC1BrK,yEAAoB,CACrB;EACDsK,OAAO,EAAE,CAACtK,yEAAoB;CAC/B,CAAC,GACWoK,0BAA0B,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3C1C;;;;;;;;;;;;;;;;;;;AAmByC;AACc;AAES;AAEhE,MAAMI,MAAM,GAAW,CACrB;EACEC,IAAI,EAAE,EAAE;EACRC,SAAS,EAAE1K,yEAAoBA;CAChC,CACF;AAMM,IAAMmK,iCAAiC,GAAvC,MAAMA,iCAAiC,GAAG;AAApCA,iCAAiC,GAAAN,iDAAA,EAJ7CK,uDAAQ,CAAC;EACRJ,OAAO,EAAE,CAACS,8CAAY,CAACF,QAAQ,CAACG,MAAM,CAAC,CAAC;EACxCF,OAAO,EAAE,CAACC,8CAAY;CACvB,CAAC,GACWJ,iCAAiC,CAAG;;;;;;;;;;;;;;;;;;ACnCA;AACjD,MAAM5K,KAAK,GAAGoL,+DAAc,CAAC,OAAO,EAAE;EAClCC,GAAG,EAAEA,CAAA,KAAM,6JAAe,CAACxC,IAAI,CAACyC,CAAC,IAAI,IAAIA,CAAC,CAACC,QAAQ,CAAC,CAAC;AACzD,CAAC,CAAC;AAC4B;;;;;;;;;;;ACJ9B;AACA,4CAA4C,mBAAO,CAAC,wEAA6D;AACjH,kCAAkC,mBAAO,CAAC,iEAAsD;AAChG;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA,SAAS,+HAA+H,sBAAsB,6hBAA6hB,kVAAkV;AAC7gC;AACA","sources":["./src/app/delegation-dialog/delegation-dialog.page.ts","./src/app/delegation-dialog/delegation-dialog.module.ts","./src/app/delegation-dialog/delegation-dialog-routing.module.ts","./node_modules/@capacitor/share/dist/esm/index.js","./src/app/delegation-dialog/delegation-dialog.page.scss"],"sourcesContent":["/*\r\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\r\n\r\nThis file is part of vodle.\r\n\r\nvodle is free software: you can redistribute it and/or modify it under the \r\nterms of the GNU Affero General Public License as published by the Free \r\nSoftware Foundation, either version 3 of the License, or (at your option) \r\nany later version.\r\n\r\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \r\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \r\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \r\ndetails.\r\n\r\nYou should have received a copy of the GNU Affero General Public License \r\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \r\n*/\r\n\r\nimport { Component, OnInit, Input, ViewChild } from '@angular/core';\r\nimport { Validators, UntypedFormBuilder, UntypedFormGroup, UntypedFormControl, ValidationErrors, AbstractControl, Form } from '@angular/forms';\r\nimport { IonInput, PopoverController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { Capacitor } from '@capacitor/core';\r\nimport { Share } from '@capacitor/share';\r\nimport { LocalNotifications } from '@capacitor/local-notifications';\r\n\r\nimport { GlobalService } from \"../global.service\";\r\nimport { PollPage } from '../poll/poll.module';  \r\nimport { Poll } from '../poll.service';\r\nimport { del_agreement_t, del_request_t } from '../data.service';\r\nimport { environment } from 'src/environments/environment';\r\n\r\ninterface Option {\r\n  id: string;\r\n  name: string;\r\n}\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CommonModule } from '@angular/common';\r\n@Component({\r\n  imports: [ CommonModule, IonicModule, TranslateModule, FormsModule, ReactiveFormsModule ],\r\n  selector: 'app-delegation-dialog',\r\n  templateUrl: './delegation-dialog.page.html',\r\n  styleUrls: ['./delegation-dialog.page.scss'],\r\n})\r\nexport class DelegationDialogPage implements OnInit {\r\n\r\n  E = environment;\r\n  \r\n  @Input() parent: PollPage;\r\n\r\n  ready = false;\r\n\r\n  can_use_web_share: boolean;\r\n  can_share: boolean;\r\n\r\n  formGroup: UntypedFormGroup;\r\n\r\n  p: Poll;\r\n  did: string;\r\n  request: del_request_t;\r\n  private_key: string;\r\n  agreement: del_agreement_t;\r\n  delegation_link: string;\r\n  message_title: string;\r\n  message_body: string;\r\n  mailto_url: string;\r\n  rank: number;\r\n  rank_options: number[];\r\n  option_names: Option[];\r\n  options_selected: Set<string>;\r\n  weight_left: number;\r\n\r\n  constructor(\r\n    private popover: PopoverController,\r\n    public formBuilder: UntypedFormBuilder, \r\n    public translate: TranslateService,\r\n    public G: GlobalService) { \r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.can_use_web_share = (typeof navigator.share === \"function\");\r\n    this.can_share = Capacitor.isNativePlatform() || this.can_use_web_share;\r\n    this.formGroup = this.formBuilder.group({\r\n      delegate_nickname: new UntypedFormControl('', Validators.required),\r\n      from: new UntypedFormControl(this.G.S.email),\r\n      trustLevel: new UntypedFormControl(1),\r\n    });\r\n\r\n    if (this.G.D.get_weighted_delegation_allowed(this.parent.pid)) {\r\n      const ddm = this.G.D.get_direct_delegation_map(this.parent.pid);\r\n      const uid = this.parent.p.myvid;\r\n      const dir_del = ddm.get(uid) || [];\r\n      var weight_used = 0;\r\n      for (const entry of dir_del) {\r\n        if (entry === undefined) {\r\n          continue;\r\n        }\r\n        weight_used += Number(entry[1]);\r\n      }\r\n      this.weight_left = 99 - weight_used;\r\n    }\r\n\r\n    // checks if ranked delegation is allowed and if so, initialises the values needed for the drop-down menu\r\n    if (this.G.D.get_ranked_delegation_allowed(this.parent.pid)) {\r\n      this.initialise_rank_values();\r\n    }\r\n    \r\n    // checks if delegation of specific options is allowed and if so, initialises the values needed for the check-boxes\r\n    if (this.G.D.get_different_delegation_allowed(this.parent.pid)) {\r\n      this.option_names = [];\r\n      this.options_selected = new Set<string>();\r\n\r\n      for (const id of this.parent.p.oids) {\r\n        if (this.parent.option_delegated.has(id)) {\r\n          if (this.parent.option_delegated.get(id) !== '') {\r\n            continue;\r\n          }\r\n        }\r\n        this.option_names.push({id: id, name: this.parent.p.options[id].name});\r\n        this.options_selected.add(id);\r\n      }\r\n    }\r\n\r\n    const ddm = this.G.D.get_direct_delegation_map(this.parent.pid);\r\n    console.log(\"this voter: \", this.parent.p.myvid);\r\n    console.log(\"ddm\", ddm);\r\n    for (const [uid, dels] of ddm) {\r\n      for (const del of dels) {\r\n        console.log(\"ddm\", uid, del);\r\n      }\r\n    }\r\n    \r\n    if (this.G.D.get_different_delegation_allowed(this.parent.pid)) {\r\n      for (const oid of this.parent.p.oids) {\r\n        const iim = this.G.D.get_inverse_indirect_map(this.parent.pid, oid);\r\n        console.log(\"iim\", oid, iim);\r\n      }\r\n    }else{\r\n      const iim = this.G.D.get_inverse_indirect_map(this.parent.pid);\r\n      console.log(\"iim\", iim);\r\n    }\r\n\r\n    // TODO: what if already some delegation active or pending?\r\n    \r\n    if (this.G.D.get_different_delegation_allowed(this.parent.pid)) {\r\n      this.p = this.G.P.polls[this.parent.pid];\r\n    } else {\r\n      [this.p, this.did, this.request, this.private_key, this.agreement] = this.G.Del.prepare_delegation(this.parent.pid);\r\n    }\r\n    \r\n    // TODO: make indentation in body work:\r\n    this.message_title = this.translate.instant('delegation-request.message-subject', {due: this.G.D.format_date(this.p.due)});\r\n    this.update_request();\r\n    this.ready = true;\r\n  }\r\n\r\n  @ViewChild('focus_element', { static: false }) focus_element: IonInput;\r\n\r\n  ionViewDidEnter() {\r\n    setTimeout(() => this.focus_element.setFocus(), 100);\r\n  }\r\n\r\n  initialise_rank_values() {\r\n    const uid = this.parent.p.myvid;\r\n    const dir_del_map = this.G.D.get_direct_delegation_map(this.parent.pid);\r\n    const dir_del = dir_del_map.get(uid) || [];\r\n    var ranks = Array.from({ length: environment.delegation.max_delegations }, (_, i) => i + 1);\r\n    for (const entry of dir_del) {\r\n      if (entry === undefined) {\r\n        continue;\r\n      }\r\n      const indexToRemove: number = ranks.indexOf(Number(entry[1]));\r\n      if (indexToRemove !== -1) {\r\n        ranks.splice(indexToRemove, 1);\r\n      }\r\n    }\r\n    this.rank = ranks[0];\r\n    this.rank_options = ranks;\r\n  }\r\n\r\n  delegate_nickname_changed() {\r\n    const delegate_nickname = this.formGroup.get('delegate_nickname').value;\r\n    this.G.D.setp(this.p.pid, \"del_nickname.\" + this.did, delegate_nickname);\r\n    this.update_request();\r\n  }\r\n\r\n  from_changed() {\r\n    const from = this.formGroup.get('from').value;\r\n    this.G.D.setp(this.p.pid, \"del_from.\" + this.did, from);\r\n    if (!this.G.D.get_different_delegation_allowed(this.parent.pid)) {\r\n      this.set_delegation_link(from);\r\n    }\r\n    this.update_request();\r\n  }\r\n\r\n  rank_changed(e) {\r\n    this.rank = e.detail.value;\r\n  }\r\n\r\n  options_changed(event: Event){\r\n    const target = event.target as HTMLIonSelectElement;\r\n    console.log(\"options_changed\", JSON.stringify(target.value));\r\n    var ns = new Set<string>();\r\n    for (const option of target.value) {\r\n      ns.add(option.id);\r\n    }\r\n    this.options_selected = new Set(ns);\r\n  }\r\n\r\n  get_option_names() {\r\n    return Array.from(this.option_names.entries());\r\n  }\r\n\r\n  update_request() {\r\n    this.G.L.entry(\"DelegationDialogPage.update_request\");\r\n    this.mailto_url = \"mailto:\" + encodeURIComponent(this.formGroup.get('delegate_nickname').value) + \"?subject=\" + encodeURIComponent(this.message_title) + \"&body=\" + encodeURIComponent(this.message_body); \r\n  }\r\n\r\n  ClosePopover()\r\n  {\r\n    this.popover.dismiss();\r\n  }\r\n\r\n  validation_messages = {\r\n    'delegate_nickname': [\r\n      { type: 'required', message: 'validation.delegate-nickname-required' },\r\n    ],\r\n    'from': []\r\n  }\r\n\r\n  set_delegation_link(from: string) {\r\n    this.delegation_link = this.G.Del.get_delegation_link(this.parent.pid, this.did, from, this.private_key);\r\n    this.message_body = (this.translate.instant('delegation-request.message-body-greeting') + \"\\n\\n\" \r\n                + this.translate.instant('delegation-request.message-body-before-title') + \"\\n\\n\"\r\n                + String.fromCharCode(160).repeat(4) + this.p.title + \".\\n\\n\"\r\n                + this.translate.instant('delegation-request.message-body-closes', {due: this.G.D.format_date(this.p.due)}) + \"\\n\\n\"\r\n                + this.translate.instant('delegation-request.message-body-explanation') + \"\\n\\n\" \r\n                + this.translate.instant('delegation-request.message-body-before-link') + \"\\n\\n\" \r\n                + String.fromCharCode(160).repeat(4) + this.delegation_link + \"\\n\\n\"\r\n                + this.translate.instant('delegation-request.message-body-dont-share') + \"\\n\\n\"\r\n                + this.translate.instant('delegation-request.message-body-regards'));\r\n  }\r\n\r\n  prepare_if_different_allowed() {\r\n    if (!this.G.D.get_different_delegation_allowed(this.parent.pid)) {\r\n      return;\r\n    }\r\n\r\n    // [this.p, this.did, this.request, this.private_key, this.agreement] = this.G.Del.prepare_delegation_for_options(this.parent.pid, Array.from(this.options_selected));\r\n    [this.p, this.did, this.request, this.private_key, this.agreement] = this.G.Del.prepare_delegation(this.parent.pid);\r\n    const options = Array.from(this.options_selected);\r\n    this.set_delegation_link(this.formGroup.get('from').value);\r\n    this.delegation_link = this.G.Del.get_delegation_link(this.parent.pid, this.did, this.formGroup.get('from').value, this.private_key, options);\r\n    this.G.Del.set_delegate_nickname(this.parent.pid, this.did, this.formGroup.get('delegate_nickname').value);\r\n    for (const oid of this.options_selected) {\r\n      this.G.D.setv(this.p.pid, \"del_oid.\" + oid, this.did);\r\n    }\r\n  }\r\n\r\n  update_delegation_map_different() {\r\n    for (const oid of this.options_selected) {\r\n      var ddm = this.G.D.get_direct_delegation_map(this.parent.pid, oid) || new Map<string, [string, string, string][]>();\r\n      var dels = ddm.get(this.parent.p.myvid) || [];\r\n      dels= [[this.did, '0', '']];\r\n      ddm.set(this.parent.p.myvid, dels);\r\n      this.G.D.save_direct_delegation_map(this.parent.pid, oid, ddm);\r\n    }\r\n  }\r\n\r\n  share_button_clicked() {\r\n    this.G.L.entry(\"DelegationDialogPage.share_button_clicked\");\r\n    this.prepare_if_different_allowed();\r\n    this.delegate_nickname_changed();\r\n    this.from_changed();\r\n    Share.share({\r\n      title: this.message_title,\r\n      text: this.message_body,\r\n//      url: this.delegation_link, // not added since contained in body, otherwise will appear twice...\r\n      dialogTitle: 'Share vodle delegation link',\r\n    }).then(res => {\r\n      this.G.L.info(\"DelegationDialogPage.share_button_clicked succeeded\", res);\r\n      this.G.Del.after_request_was_sent(this.parent.pid, this.did, this.request, this.private_key, this.agreement);\r\n      if (this.G.D.get_different_delegation_allowed(this.parent.pid)) {\r\n        this.update_delegation_map_different();\r\n      } else {\r\n        this.G.Del.set_delegate_rank(this.parent.pid, this.did, this.rank);\r\n      }\r\n      this.popover.dismiss();\r\n    }).catch(err => {\r\n      this.G.L.error(\"DelegationDialogPage.share_button_clicked failed\", err);\r\n    });\r\n  }\r\n\r\n  copy_button_clicked() {\r\n    this.G.L.entry(\"DelegationDialogPage.copy_button_clicked\");\r\n    this.delegate_nickname_changed();\r\n    this.from_changed();\r\n    this.prepare_if_different_allowed();\r\n    window.navigator.clipboard.writeText(this.delegation_link);\r\n    this.G.Del.after_request_was_sent(this.parent.pid, this.did, this.request, this.private_key, this.agreement);\r\n    if (this.G.D.get_different_delegation_allowed(this.parent.pid)) {\r\n      this.update_delegation_map_different();\r\n    } else if(this.G.D.get_weighted_delegation_allowed(this.parent.pid)){\r\n      this.G.Del.set_delegate_rank(this.parent.pid, this.did, Number(this.formGroup.get('trustLevel').value));\r\n    }else {\r\n      this.G.Del.set_delegate_rank(this.parent.pid, this.did, this.rank);\r\n    }\r\n    LocalNotifications.schedule({\r\n      notifications: [{\r\n        title: this.translate.instant(\"delegation-request.notification-copied-link-title\"),\r\n        body: this.translate.instant(\"delegation-request.notification-copied-link-body\", \r\n                                     {nickname: this.formGroup.get('delegate_nickname').value}),\r\n        id: null\r\n      }]\r\n    })\r\n    .then(res => {\r\n      this.G.L.trace(\"DelegationDialogPage.copy_button_clicked localNotifications.schedule succeeded:\", res);\r\n    }).catch(err => {\r\n      this.G.L.warn(\"DelegationDialogPage.copy_button_clicked localNotifications.schedule failed:\", err);\r\n    });\r\n    this.parent.update_delegation_info();\r\n    this.popover.dismiss();\r\n    this.G.L.exit(\"DelegationDialogPage.copy_button_clicked\");\r\n  }\r\n\r\n  email_button_clicked(ev: MouseEvent) {\r\n    this.G.L.entry(\"DelegationDialogPage.email_button_clicked\");\r\n    this.prepare_if_different_allowed();\r\n    this.delegate_nickname_changed();\r\n    this.from_changed();\r\n    this.G.Del.after_request_was_sent(this.parent.pid, this.did, this.request, this.private_key, this.agreement);\r\n    if (this.G.D.get_different_delegation_allowed(this.parent.pid)) {\r\n      this.update_delegation_map_different();\r\n    } else if(this.G.D.get_weighted_delegation_allowed(this.parent.pid)){\r\n      this.G.Del.set_delegate_rank(this.parent.pid, this.did, Number(this.formGroup.get('trustLevel').value));\r\n    } else {\r\n      this.G.Del.set_delegate_rank(this.parent.pid, this.did, this.rank);\r\n    }\r\n    this.parent.update_delegation_info();\r\n    this.popover.dismiss();\r\n    this.G.L.exit(\"DelegationDialogPage.email_button_clicked\");\r\n  }\r\n  \r\n  close() {\r\n    this.popover.dismiss();\r\n  }\r\n}\r\n","/*\r\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\r\n\r\nThis file is part of vodle.\r\n\r\nvodle is free software: you can redistribute it and/or modify it under the \r\nterms of the GNU Affero General Public License as published by the Free \r\nSoftware Foundation, either version 3 of the License, or (at your option) \r\nany later version.\r\n\r\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \r\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \r\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \r\ndetails.\r\n\r\nYou should have received a copy of the GNU Affero General Public License \r\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \r\n*/\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DelegationDialogPageRoutingModule } from './delegation-dialog-routing.module';\r\n\r\nimport { DelegationDialogPage } from './delegation-dialog.page';\r\nexport { DelegationDialogPage } from './delegation-dialog.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    DelegationDialogPageRoutingModule,\r\n    TranslateModule.forChild(),\r\n    DelegationDialogPage\r\n  ],\r\n  exports: [DelegationDialogPage]\r\n})\r\nexport class DelegationDialogPageModule {}\r\n","/*\r\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\r\n\r\nThis file is part of vodle.\r\n\r\nvodle is free software: you can redistribute it and/or modify it under the \r\nterms of the GNU Affero General Public License as published by the Free \r\nSoftware Foundation, either version 3 of the License, or (at your option) \r\nany later version.\r\n\r\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \r\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \r\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \r\ndetails.\r\n\r\nYou should have received a copy of the GNU Affero General Public License \r\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \r\n*/\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DelegationDialogPage } from './delegation-dialog.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DelegationDialogPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DelegationDialogPageRoutingModule {}\r\n","import { registerPlugin } from '@capacitor/core';\nconst Share = registerPlugin('Share', {\n    web: () => import('./web').then(m => new m.ShareWeb()),\n});\nexport * from './definitions';\nexport { Share };\n","// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@charset \"UTF-8\";\n/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/delegation-dialog/delegation-dialog.page.scss\"],\"names\":[],\"mappings\":\"AAAA,gBAAgB;AAAhB;;;;;;;;;;;;;;;;;CAAA\",\"sourcesContent\":[\"/*\\r\\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\\r\\n\\r\\nThis file is part of vodle.\\r\\n\\r\\nvodle is free software: you can redistribute it and/or modify it under the \\r\\nterms of the GNU Affero General Public License as published by the Free \\r\\nSoftware Foundation, either version 3 of the License, or (at your option) \\r\\nany later version.\\r\\n\\r\\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \\r\\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \\r\\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \\r\\ndetails.\\r\\n\\r\\nYou should have received a copy of the GNU Affero General Public License \\r\\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \\r\\n*/\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n"],"names":["Component","Input","ViewChild","Validators","UntypedFormBuilder","UntypedFormControl","PopoverController","TranslateService","Capacitor","Share","LocalNotifications","GlobalService","environment","ReactiveFormsModule","FormsModule","IonicModule","TranslateModule","CommonModule","DelegationDialogPage","constructor","popover","formBuilder","translate","G","E","ready","validation_messages","type","message","ngOnInit","ionViewWillEnter","can_use_web_share","navigator","share","can_share","isNativePlatform","formGroup","group","delegate_nickname","required","from","S","email","trustLevel","D","get_weighted_delegation_allowed","parent","pid","ddm","get_direct_delegation_map","uid","p","myvid","dir_del","get","weight_used","entry","undefined","Number","weight_left","get_ranked_delegation_allowed","initialise_rank_values","get_different_delegation_allowed","option_names","options_selected","Set","id","oids","option_delegated","has","push","name","options","add","console","log","dels","del","oid","iim","get_inverse_indirect_map","P","polls","did","request","private_key","agreement","Del","prepare_delegation","message_title","instant","due","format_date","update_request","ionViewDidEnter","setTimeout","focus_element","setFocus","dir_del_map","ranks","Array","length","delegation","max_delegations","_","i","indexToRemove","indexOf","splice","rank","rank_options","delegate_nickname_changed","value","setp","from_changed","set_delegation_link","rank_changed","e","detail","options_changed","event","target","JSON","stringify","ns","option","get_option_names","entries","L","mailto_url","encodeURIComponent","message_body","ClosePopover","dismiss","delegation_link","get_delegation_link","String","fromCharCode","repeat","title","prepare_if_different_allowed","set_delegate_nickname","setv","update_delegation_map_different","Map","set","save_direct_delegation_map","share_button_clicked","text","dialogTitle","then","res","info","after_request_was_sent","set_delegate_rank","catch","err","error","copy_button_clicked","window","clipboard","writeText","schedule","notifications","body","nickname","trace","warn","update_delegation_info","exit","email_button_clicked","ev","close","args","static","__decorate","imports","selector","template","__NG_CLI_RESOURCE__0","NgModule","DelegationDialogPageRoutingModule","DelegationDialogPageModule","forChild","exports","RouterModule","routes","path","component","registerPlugin","web","m","ShareWeb"],"sourceRoot":"webpack:///","x_google_ignoreList":[3]}