{"version":3,"file":"5654.10de1a0401c8eef1.js","mappings":"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","names":["selector","none","this","querySelector","x","Array","isArray","from","empty","querySelectorAll","matches","node","find","prototype","firstElementChild","filter","children","update","length","parent","datum","ownerDocument","namespaceURI","_next","_parent","__data__","group","enter","exit","data","i","groupLength","dataLength","EnterNode","key","keyValue","nodeByKeyValue","Map","keyValues","call","A","has","set","get","delete","a","b","NaN","constructor","appendChild","child","insertBefore","next","xhtml","svg","xlink","xml","xmlns","name","prefix","indexOf","slice","namespaces","space","local","removeAttribute","fullname","removeAttributeNS","value","setAttribute","setAttributeNS","v","apply","arguments","defaultView","document","style","removeProperty","priority","setProperty","getPropertyValue","getComputedStyle","string","trim","split","classList","ClassList","_node","_names","classArray","getAttribute","names","list","n","add","remove","classedAdd","classedRemove","textContent","innerHTML","nextSibling","parentNode","previousSibling","firstChild","uri","documentElement","createElement","createElementNS","namespace","creatorFixed","creatorInherit","removeChild","clone","cloneNode","typenames","map","t","type","typename","on","__on","o","j","m","removeEventListener","listener","options","event","contextListener","addEventListener","r","push","params","window","CustomEvent","createEvent","e","initEvent","bubbles","cancelable","detail","dispatchEvent","join","splice","contains","root","groups","parents","_groups","_parents","Selection","selection","select","subgroups","subnode","subgroup","selectAll","array","arrayAll","selectorAll","selectChild","match","childFirst","childFind","childMatcher","selectChildren","childrenFilter","matcher","bind","bindKey","bindIndex","constant","arraylike","enterGroup","updateGroup","exitGroup","previous","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","append","merge","order","context","groups0","groups1","m0","Math","min","merges","group0","group1","compareDocumentPosition","sort","compare","ascending","sortgroups","sortgroup","compareNode","callback","nodes","size","each","attr","getAttributeNS","attrRemoveNS","attrRemove","attrFunctionNS","attrFunction","attrConstantNS","attrConstant","styleRemove","styleFunction","styleConstant","styleValue","property","propertyRemove","propertyFunction","propertyConstant","classed","classedFunction","classedTrue","classedFalse","text","textRemove","textFunction","textConstant","html","htmlRemove","htmlFunction","htmlConstant","raise","lower","create","creator","insert","before","constantNull","deep","selection_cloneDeep","selection_cloneShallow","parseTypenames","onAdd","onRemove","dispatch","dispatchFunction","dispatchConstant","Symbol","iterator","noop","_","test","Error","Dispatch","types","hasOwnProperty","c","concat","T","copy","that","args","taskHead","taskTail","frame","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","requestAnimationFrame","f","setTimeout","clearNow","_call","_time","delay","time","Timer","restart","undefined","timerFlush","t0","t2","t1","Infinity","sleep","nap","clearTimeout","wake","clearInterval","setInterval","poke","elapsed","stop","timer","TypeError","emptyOn","emptyTween","id","index","timing","schedules","__transition","self","tween","state","start","tick","duration","ease","schedule","svgNode","degrees","PI","identity","translateX","translateY","rotate","skewX","scaleX","scaleY","d","sqrt","atan2","atan","parse","pxComma","pxParen","degParen","s","pop","q","xa","ya","xb","yb","number","translate","scale","interpolateTransformCss","interpolateTransform","DOMMatrix","WebKitCSSMatrix","isIdentity","decompose","interpolateTransformSvg","transform","baseVal","consolidate","matrix","tween0","tween1","transition","_id","factory","definition","Object","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","rgb","formatHex","formatRgb","format","l","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","g","Color","color","opacity","rgbConvert","hex","clampa","clampi","isNaN","max","round","toString","h","Hsl","m1","m2","v0","v1","v2","v3","t3","define","channels","assign","displayable","color_formatHex","formatHex8","formatHsl","hslConvert","color_formatRgb","extend","k","pow","darker","clamp","rgb_formatHex","rgb_formatRgb","hsl2rgb","clamph","clampt","linear","y","nogamma","exponential","gamma","end","colorRgb","rgbGamma","spline","colors","rgbSpline","values","floor","basis","reA","reB","source","am","bm","bs","bi","lastIndex","one","zero","interpolateNumber","interpolateRgb","interpolateString","interpolate","value1","string00","interpolate0","string1","string0","string10","attrInterpolateNS","_value","attrInterpolate","init","on0","on1","sit","every","styleInterpolate","textInterpolate","_name","selection_prototype","Transition","inherit","id0","id1","newId","onFunction","attrTween","tweenValue","attrTweenNS","styleTween","styleNull","listener0","styleMaybeRemove","textTween","removeFunction","tweenRemove","tweenFunction","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","easeVarying","Promise","resolve","reject","cancel","interrupt","defaultTiming","active","Transform","point","applyX","applyY","invert","location","invertX","invertY","rescaleX","domain","range","rescaleY","svgcolors","vodlered","vodleblue","vodlegreen","vodledarkgreen","AnalysisPage","modalController","G","environment","JSON","L","entry","ngOnInit","ionViewWillEnter","D","page","ionViewDidEnter","show_venn","onDataReady","onDataChange","ionViewWillLeave","ionViewDidLeave","close","dismiss","P","p","shares_map","our_oids","oid","oids_descending","entries","slidercolor","info","exact_combi_counts","approvals_map","chars","vid","all_vids_set","combi","amo","subset_counts","n_subsets","mask","subset","sets_array","n_not_abstaining","sets","label","reverse","div_width","d3","getBoundingClientRect","width","chart","venn","height","circle_data","svg_gs","bbox","getBBox","R","cx","cy","n_votes_map","svg_g","positions","fine","it","random","phi","sin","cos","pos","svg_g0","svg_circle","svg_text","cloned_text","selectors","IonContent","ctx","ExpandableComponent","renderer","ngAfterViewInit","setStyle","expandWrapper","nativeElement","expandHeight","ElementRef","ctx_r38","ctx_r44","ctx_r119","ctx_r132","ctx_r134","PollPage","changeDetector","router","route","routerOutlet","loadingController","alertCtrl","popover","Set","subscribe","pid","ev","detectChanges","specs","getp","show_live","details_expanded","incoming_delegation_expanded","option_expanded","ready","debug","polls","warn","navigate","error","allow_voting","oids","orm","own_ratings_map","myvid","S","default_wap","set_my_own_rating","tally_all","oidsorted","update_order","show_stats","update_delegation_info","on_delegate_toggle_change","have_seen","has_results","have_seen_results","news","N","delegate","rate_yourself_toggle","get_slider_value","auto_dismiss","setp","stringify","save_state","n_indirect_clients","get_n_indirect_clients","cache","incoming_dids_caches","accepted_requests","declined_requests","did","url","status","startsWith","Del","get_my_outgoing_dids_cache","trace","get_delegate_nickname","agreement","get_agreement","delegation_status","update_delegation_toggles","accepted_oids","active_oids","onScroll","scroll_position","scrollTop","on_rate_yourself_toggle_change","update_my_delegation","sum","n_delegated","approval_scores_map","votedfor","votes_map","share","bar","getElementById","pie","pieradius","dx","two_pi","dy","more_than_180_degrees_flag","approved","z","valueAsString","tt","Z","set_slider_color","get_my_proxy_rating","needle","knob","delegate_vid","get_potential_effective_delegate","rating","proxy_ratings_map","x2","force","needs_refresh","refresh_paused","dragged_oid","loadingElement","message","instant","spinner","present","onDidDismiss","sortingcounter","col","l1","onRatingColPointerdown","l2","onRatingColPointerup","l3","onRatingColTouchstart","l4","onRatingColTouchup","listeners","old","toggle_show_live","expand","get_slider","set_slider_values","slider","Number","apply_sliders_rating","onRatingSliderFocus","onRatingSliderChange","onRatingSliderBlur","rating_change_ended","have_acted","end_if_past_due","get_knob_pos","PointerEvent","clientX","touches","left","right","swallow_event","onRatingColClick","onBodyPointerup","onBodyTouchup","slider_rect","get_screen_coords","knob_center_x","element","DOMRect","stopPropagation","stopImmediatePropagation","preventDefault","checkmark_clicked","buttons","role","handler","delegate_dialog","component","DelegationDialogPage","translucent","showBackdrop","componentProps","then","popoverElement","assist_dialog","modal","AssistPage","backdropDismiss","currentModal","analysis_dialog","cssClass","explain_approval_dialog","ExplainApprovalPage","swipeToClose","presentingElement","nativeEl","modalElement","revoke_delegation_dialog","nickname","console","log","revoke_delegation","add_option","side","AddoptionDialogPage","glossary","glossary_key","show_glossary","dismiss_glossary","routes","path","PollPageRoutingModule","RouterModule","PollPageModule","CommonModule","FormsModule","IonicModule","SharedcomponentsModule","TranslateModule","exports","d3Selection","d3Transition","SMALL","circles","stats","intersectionPoints","ret","intersect","circleCircleIntersection","parentIndex","getIntersectionPoints","innerPoints","distance","radius","containedInCircles","arcArea","polygonArea","arcs","center","getCenter","angle","p2","p1","midPoint","arc","circle","a1","a2","angleDiff","circleArea","smallest","disjoint","abs","area","acos","r1","r2","w2","x0","y0","rx","ry","points","zeros","dot","w1","parameters","maxDiff","maxIterations","nonZeroDelta","zeroDelta","minErrorDelta","minTolerance","rho","chi","psi","sigma","simplex","fx","sortOrder","centroid","reflected","contracted","expanded","iteration","history","sortedSimplex","worst","weightedSum","updateSimplex","Ht","shouldReduce","pt","st","pk","current","c1","c2","phi0","phiPrime0","fxprime","phi_old","phiPrime","a0","a_lo","a_high","phi_lo","zoom","initial","temp","yk","wolfeLineSearch","alpha","delta_k","norm2","areas","setid","loss","lossFunction","initialLayout","bestInitialLayout","ids","pairs","addMissingAreas","setids","nelderMead","overlap","tolerance","fA","fB","delta","mid","fMid","bisect","distance$$1","circleOverlap","greedyLayout","constrained","restarts","matrices","distances","zerosM","constraints","distanceFromIntersectArea","getDistanceMatrices","norm","row","best","obj","xi","yi","xj","yj","dij","constraint","squaredDistance","constrainedMDSGradient","conjugateGradient","constrainedMDSLayout","setOverlaps","rowid","weight","mostOverlapped","positioned","positionSet","setIndex","isPositioned","d1","d2","extraPoints","bestLoss","bestPoint","localLoss","overlaps","output","intersectionArea","orientation","orientationOrder","largestX","largestY","rotation","slope","maxDistance","xRoot","yRoot","disjointClusters","minMax","xRange","yRange","solution","clusters","disjointCluster","orientateCircles","bounds","getBoundingBox","returnBounds","spacing","cluster","bottom","xOffset","yOffset","centreing","addCluster","padding","scaling","scaled","labeller","joined","words","minChars","word","line","lineNumber","tspan","getComputedTextLength","interior","exterior","margin","circleMargin","valid","areaStats","H","computeTextCentre","circleids","circleid","overlapped","getOverlappingCircles","areaids","exclude","centre","tokens","parseFloat","circlePath","scaleSolution","normalizeSolution","VennDiagram","normalize","wrap","styled","fontSize","colourMap","colourScheme","colourIndex","colours","layoutFunction","toremove","forEach","some","textCentres","computeTextCentres","labels","hasPrevious","circleFromPath","pathTween","intersectionAreaPath","enterPath","enterText","updateText","wrapText","exitText","sortAreas","div","relativeTo","check","shouldExclude","defineProperty","require","nextId","Local","sourceEvent","ownerSVGElement","createSVGPoint","clientY","matrixTransform","getScreenCTM","inverse","rect","clientLeft","top","clientTop","changedTouches","identifier","touch","sn","F","selection_style","selection_on","filterEvents","related","relatedTarget","event1","event0","capture","filterContextListener","Wt","mouseenter","mouseleave","cssNode","cssRoot","cssView"],"sourceRoot":"webpack:///","sources":["./node_modules/d3-selection/src/selector.js","./node_modules/d3-selection/src/array.js","./node_modules/d3-selection/src/selectorAll.js","./node_modules/d3-selection/src/matcher.js","./node_modules/d3-selection/src/selection/selectChild.js","./node_modules/d3-selection/src/selection/selectChildren.js","./node_modules/d3-selection/src/selection/sparse.js","./node_modules/d3-selection/src/selection/enter.js","./node_modules/d3-selection/src/constant.js","./node_modules/d3-selection/src/selection/data.js","./node_modules/d3-selection/src/selection/sort.js","./node_modules/d3-selection/src/namespaces.js","./node_modules/d3-selection/src/namespace.js","./node_modules/d3-selection/src/selection/attr.js","./node_modules/d3-selection/src/window.js","./node_modules/d3-selection/src/selection/style.js","./node_modules/d3-selection/src/selection/property.js","./node_modules/d3-selection/src/selection/classed.js","./node_modules/d3-selection/src/selection/text.js","./node_modules/d3-selection/src/selection/html.js","./node_modules/d3-selection/src/selection/raise.js","./node_modules/d3-selection/src/selection/lower.js","./node_modules/d3-selection/src/creator.js","./node_modules/d3-selection/src/selection/insert.js","./node_modules/d3-selection/src/selection/remove.js","./node_modules/d3-selection/src/selection/clone.js","./node_modules/d3-selection/src/selection/on.js","./node_modules/d3-selection/src/selection/dispatch.js","./node_modules/d3-selection/src/selection/index.js","./node_modules/d3-selection/src/selection/select.js","./node_modules/d3-selection/src/selection/selectAll.js","./node_modules/d3-selection/src/selection/filter.js","./node_modules/d3-selection/src/selection/exit.js","./node_modules/d3-selection/src/selection/join.js","./node_modules/d3-selection/src/selection/merge.js","./node_modules/d3-selection/src/selection/order.js","./node_modules/d3-selection/src/selection/call.js","./node_modules/d3-selection/src/selection/nodes.js","./node_modules/d3-selection/src/selection/node.js","./node_modules/d3-selection/src/selection/size.js","./node_modules/d3-selection/src/selection/empty.js","./node_modules/d3-selection/src/selection/each.js","./node_modules/d3-selection/src/selection/append.js","./node_modules/d3-selection/src/selection/datum.js","./node_modules/d3-selection/src/selection/iterator.js","./node_modules/d3-dispatch/src/dispatch.js","./node_modules/d3-timer/src/timer.js","./node_modules/d3-timer/src/timeout.js","./node_modules/d3-transition/src/transition/schedule.js","./node_modules/d3-interpolate/src/number.js","./node_modules/d3-interpolate/src/transform/decompose.js","./node_modules/d3-interpolate/src/transform/parse.js","./node_modules/d3-interpolate/src/transform/index.js","./node_modules/d3-transition/src/transition/tween.js","./node_modules/d3-color/src/define.js","./node_modules/d3-color/src/color.js","./node_modules/d3-interpolate/src/basis.js","./node_modules/d3-interpolate/src/constant.js","./node_modules/d3-interpolate/src/color.js","./node_modules/d3-interpolate/src/rgb.js","./node_modules/d3-interpolate/src/basisClosed.js","./node_modules/d3-interpolate/src/string.js","./node_modules/d3-transition/src/transition/interpolate.js","./node_modules/d3-transition/src/transition/attr.js","./node_modules/d3-transition/src/transition/attrTween.js","./node_modules/d3-transition/src/transition/delay.js","./node_modules/d3-transition/src/transition/duration.js","./node_modules/d3-transition/src/transition/ease.js","./node_modules/d3-transition/src/transition/on.js","./node_modules/d3-transition/src/transition/selection.js","./node_modules/d3-transition/src/transition/style.js","./node_modules/d3-transition/src/transition/styleTween.js","./node_modules/d3-transition/src/transition/textTween.js","./node_modules/d3-transition/src/transition/index.js","./node_modules/d3-transition/src/transition/select.js","./node_modules/d3-transition/src/transition/selectAll.js","./node_modules/d3-transition/src/transition/filter.js","./node_modules/d3-transition/src/transition/merge.js","./node_modules/d3-transition/src/transition/transition.js","./node_modules/d3-transition/src/transition/text.js","./node_modules/d3-transition/src/transition/remove.js","./node_modules/d3-transition/src/transition/easeVarying.js","./node_modules/d3-transition/src/transition/end.js","./node_modules/d3-transition/src/selection/transition.js","./node_modules/d3-ease/src/cubic.js","./node_modules/d3-transition/src/selection/index.js","./node_modules/d3-transition/src/selection/interrupt.js","./node_modules/d3-transition/src/interrupt.js","./node_modules/d3-brush/src/brush.js","./node_modules/d3-selection/src/select.js","./node_modules/d3-selection/src/selectAll.js","./node_modules/d3-zoom/src/transform.js","./src/app/analysis/analysis.page.html","./src/app/analysis/analysis.page.ts","./src/app/sharedcomponents/expandable/expandable.component.ts","./src/app/sharedcomponents/expandable/expandable.component.html","./src/app/poll/poll.page.html","./src/app/poll/poll.page.ts","./src/app/poll/poll-routing.module.ts","./src/app/poll/poll.module.ts","./node_modules/venn.js/build/venn.js","./node_modules/venn.js/node_modules/d3-selection/src/creator.js","./node_modules/venn.js/node_modules/d3-selection/src/select.js","./node_modules/venn.js/node_modules/d3-selection/src/create.js","./node_modules/venn.js/node_modules/d3-selection/src/local.js","./node_modules/venn.js/node_modules/d3-selection/src/sourceEvent.js","./node_modules/venn.js/node_modules/d3-selection/src/point.js","./node_modules/venn.js/node_modules/d3-selection/src/mouse.js","./node_modules/venn.js/node_modules/d3-selection/src/selectAll.js","./node_modules/venn.js/node_modules/d3-selection/src/touch.js","./node_modules/venn.js/node_modules/d3-selection/src/touches.js","./node_modules/venn.js/node_modules/d3-selection/src/matcher.js","./node_modules/venn.js/node_modules/d3-selection/src/namespace.js","./node_modules/venn.js/node_modules/d3-selection/src/namespaces.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/sparse.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/enter.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/data.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/sort.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/attr.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/property.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/classed.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/text.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/html.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/raise.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/lower.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/insert.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/remove.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/clone.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/dispatch.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/index.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/select.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/selectAll.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/filter.js","./node_modules/venn.js/node_modules/d3-selection/src/constant.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/exit.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/join.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/merge.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/order.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/call.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/nodes.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/node.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/size.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/empty.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/each.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/append.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/datum.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/on.js","./node_modules/venn.js/node_modules/d3-selection/src/selection/style.js","./node_modules/venn.js/node_modules/d3-selection/src/selector.js","./node_modules/venn.js/node_modules/d3-selection/src/selectorAll.js","./node_modules/venn.js/node_modules/d3-selection/src/window.js","./node_modules/venn.js/node_modules/d3-dispatch/src/dispatch.js","./node_modules/venn.js/node_modules/d3-timer/src/timer.js","./node_modules/venn.js/node_modules/d3-timer/src/timeout.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/schedule.js","./node_modules/venn.js/node_modules/d3-transition/src/interrupt.js","./node_modules/venn.js/node_modules/d3-interpolate/src/number.js","./node_modules/venn.js/node_modules/d3-interpolate/src/transform/decompose.js","./node_modules/venn.js/node_modules/d3-interpolate/src/transform/parse.js","./node_modules/venn.js/node_modules/d3-interpolate/src/transform/index.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/tween.js","./node_modules/venn.js/node_modules/d3-color/src/define.js","./node_modules/venn.js/node_modules/d3-color/src/color.js","./node_modules/venn.js/node_modules/d3-interpolate/src/basis.js","./node_modules/venn.js/node_modules/d3-interpolate/src/constant.js","./node_modules/venn.js/node_modules/d3-interpolate/src/color.js","./node_modules/venn.js/node_modules/d3-interpolate/src/rgb.js","./node_modules/venn.js/node_modules/d3-interpolate/src/basisClosed.js","./node_modules/venn.js/node_modules/d3-interpolate/src/string.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/interpolate.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/attr.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/attrTween.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/delay.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/duration.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/ease.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/on.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/selection.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/style.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/styleTween.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/textTween.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/index.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/select.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/selectAll.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/filter.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/merge.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/transition.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/text.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/remove.js","./node_modules/venn.js/node_modules/d3-transition/src/transition/end.js","./node_modules/venn.js/node_modules/d3-transition/src/selection/transition.js","./node_modules/venn.js/node_modules/d3-ease/src/cubic.js","./node_modules/venn.js/node_modules/d3-transition/src/selection/index.js","./node_modules/venn.js/node_modules/d3-transition/src/selection/interrupt.js","./node_modules/venn.js/node_modules/d3-transition/src/active.js"],"sourcesContent":["function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name __brush rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection, event) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start(event).brush(event).end(event);\n          });\n    }\n  };\n\n  brush.clear = function(group, event) {\n    brush.move(group, null, event);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move(event);\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move(event);\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import array from \"./array.js\";\nimport {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([array(selector)], root);\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","<!--\n(C) Copyright 20152022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n-->\n\n<ion-header>\n\n  <ion-item class=\"ion-no-margin ion-no-padding\" style=\"--inner-padding-end:0px!important\">\n    <ion-toolbar style=\"padding-left: 16px;\">\n\n      <!--<ion-icon slot=\"start\" name=\"analytics-outline\"></ion-icon>&nbsp;-->\n      <ion-text \n        style=\"font-weight: bold; font-size: larger;\"\n        [innerHtml]=\"'analysis.-page-title' | translate\">\n      </ion-text>\n      <ion-buttons slot=\"end\">\n\n        <!-- OFFLINE SIGN -- >\n        <ng-container *ngIf=\"!window.navigator.onLine\">\n          <ion-icon name=\"cloud-offline-outline\" color=\"grey\"\n            style=\"position: relative; bottom: -1px;\">\n          </ion-icon>\n          <ion-icon name=\"alert-outline\" color=\"grey\">\n          </ion-icon>\n        </ng-container> \n        <!---->\n\n        <!-- SYNCING SIGN: -- >\n        <ion-spinner *ngIf=\"!!P.p && P.p.syncing && window.navigator.onLine\" name=\"crescent\" color=\"grey\"></ion-spinner>\n        <!---->\n\n        <!-- CLOSE BUTTON: -->\n        <ion-button fill=\"clear\" (click)=\"close()\">\n          <ion-icon slot=\"icon-only\" name=\"close-outline\"></ion-icon>\n        </ion-button>\n    \n      </ion-buttons>\n    </ion-toolbar>\n  </ion-item>\n\n</ion-header>\n\n<!-- SCROLLABLE CONTENT: -->\n\n<ion-content *ngIf=\"P.ready\">\n\n  <div id=\"venn\"></div>\n\n  <ion-item class=\"ion-no-margin\" lines=\"none\">\n    <ion-grid class=\"ion-no-padding ion-no-margin\">\n      <ion-row class=\"ion-no-padding ion-no-margin\">\n        <ion-col class=\"ion-no-padding ion-no-margin\">\n          <p>\n            Each dot represents one participant. <!--TODO: or one percent-->\n          </p>\n          <p>\n            The large discs show how much approval each option gets.\n            The part of the disc that sticks out from behind the other discs shows the share that this option gets. \n            We only show those options that get a share.\n          </p>\n          <small><p>\n            The colors show which options you yourself approve and where your share goes:\n            <span style=\"color:#d33939\"><b>Red:</b></span> you won't approve this option since your wap is zero.\n            <span style=\"color:#3465a4\"><b>Blue:</b></span> you currently don't approve this option.\n            <span style=\"color:#62a73b\"><b>Green:</b></span> you approve this option.\n            Your share goes to the <span style=\"color:#4c822e\"><b>dark green</b></span> option. \n          </p></small>\n          <p>\n            <b>Suggestion:</b> You might want to talk to the supporters of the options you don't approve (red and blue). \n            Maybe you can together find some other option that you can all approve?\n            <small>A good compromise option might already be on the menu or you might want to add it.</small>\n          </p>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-item>\n</ion-content>\n","/*\n(C) Copyright 20152022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { Component, OnInit, Input, ViewChild } from '@angular/core';\nimport { ModalController, IonContent } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport * as venn from 'venn.js'\nimport * as d3 from 'd3'\n\nimport { environment } from '../../environments/environment';\nimport { GlobalService } from \"../global.service\";\nimport { PollPage } from '../poll/poll.module';  \n\nconst svgcolors = {\n  \"vodlered\": \"#d33939\",\n  \"vodleblue\": \"#3465a4\",\n  \"vodlegreen\": \"#62a73b\",\n  \"vodledarkgreen\": \"#4c822e\"\n  },\n  r_avatar = 7;\n\n@Component({\n  selector: 'app-analysis',\n  templateUrl: './analysis.page.html',\n  styleUrls: ['./analysis.page.scss'],\n})\nexport class AnalysisPage implements OnInit {\n\n  @Input() P: PollPage;\n  @ViewChild(IonContent, { static: false }) content: IonContent;\n\n  Array = Array;\n  Math = Math;\n  Object = Object;\n  window = window;\n  document = document;\n  environment = environment;\n  JSON = JSON;\n\n  page = \"analysis\";\n\n  // LIFECYCLE:\n\n  constructor(\n      public translate: TranslateService,\n      private modalController: ModalController,\n      public G: GlobalService) {\n    this.G.L.entry(\"AnalysisPage.constructor\");\n  }\n\n  ngOnInit() {\n    this.G.L.entry(\"AnalysisPage.ngOnInit\");\n  }\n\n  ionViewWillEnter() {\n    this.G.L.entry(\"AnalysisPage.ionViewWillEnter\");\n    this.G.D.page = this;\n  }\n\n  ionViewDidEnter() {\n    this.G.L.entry(\"AnalysisPage.ionViewDidEnter\");\n    this.show_venn();\n  }\n\n  onDataReady() {\n    this.G.L.entry(\"AnalysisPage.onDataReady\");\n  }\n\n  onDataChange() {\n    this.G.L.entry(\"AnalysisPage.onDataChange\");\n  }\n\n  ionViewWillLeave() {\n    this.G.L.entry(\"AnalysisPage.ionViewWillLeave\");\n  }\n\n  ionViewDidLeave() {\n    this.G.L.entry(\"AnalysisPage.ionViewDidLeave\");\n  }\n\n  // UI:\n\n  close() {\n    this.modalController.dismiss();\n  }\n\n  // logics:\n\n  show_venn() {\n    // 1. filter oids with positive share in descending score order (at most 10 many):\n    const T = this.P.p.T,\n          shares_map = T.shares_map,\n          our_oids = [],\n          colors = [];\n    for (const [i, oid] of T.oids_descending.entries()) {\n      if (i == 10) {\n        break;\n      }\n      if (shares_map.has(oid) && shares_map.get(oid) > 0) {\n        our_oids.push(oid);\n        // set to same color as slider:\n        colors.push(this.P.slidercolor[oid]);\n      }\n    }\n    this.G.L.info(\"colors\", colors, svgcolors[colors[0]]);\n    // 2. count how many approve each possible exact combination:\n    const exact_combi_counts= {},\n          approvals_map = T.approvals_map,\n          chars = \"abcdefghij\";\n    for (const vid of this.P.p.T.all_vids_set) {\n      let combi = \"\";\n      for (const [i, oid] of our_oids.entries()) {\n        const amo = approvals_map.get(oid);\n        if (amo.has(vid) && amo.get(vid)) {\n          combi += chars[i];\n        }\n      }\n      if (combi in exact_combi_counts) {\n        exact_combi_counts[combi] += 1;\n      } else {\n        exact_combi_counts[combi] = 1;\n      }\n    }\n    this.G.L.info(\"exact_combi_counts\", exact_combi_counts);\n    // 3. count how many approve at least each possible combination:\n    const subset_counts = {};\n    for (const [combi, size] of Object.entries(exact_combi_counts)) {\n      const l = combi.length, n_subsets = 1 << l;\n      for (let mask = 1; mask < n_subsets; mask++) {\n        let subset = \"\";\n        for (let i = 0; i < l; i++) {\n          if( (mask & (1 << i)) !== 0){\n            subset += combi[i];\n          }\n        }\n        if (subset in subset_counts) {\n          subset_counts[subset] += size;\n        } else {\n          subset_counts[subset] = size;\n        }  \n      }      \n    }\n    this.G.L.info(\"subset_counts\", subset_counts);\n    // 4. convert to array of objects of arrays as needed by venn.js:\n    const sets_array = [],\n          n_not_abstaining = T.n_not_abstaining; \n    for (const [i, oid] of our_oids.entries()) {\n      sets_array.push({ \n          sets: [chars[i]], \n          size: subset_counts[chars[i]], \n          label: this.P.p.options[oid].name // + \": \" + (shares_map.get(oid) * 100).toFixed(1) + \"%\" \n        });\n    }\n    for (const [subset, size] of Object.entries(subset_counts)) {\n      if (subset.length > 1) {\n        sets_array.push({ sets: [...subset], size: size });\n      }\n    }\n    sets_array.reverse(); // so that topmost option is painted last\n    // 5. paint the diagram:\n    const div = d3.select(\"#venn\"),\n          div_bbox = div.node().getBoundingClientRect(),\n          div_width = div_bbox.width;\n    var chart = venn.VennDiagram().width(div_width).height(.9*div_width);\n    d3.select(\"#venn\").datum(sets_array).call(chart);\n    d3.selectAll(\"#venn .venn-circle path\")\n    // lower options appear successively paler:\n    .style(\"fill-opacity\", 0)\n    .style(\"fill\", function(d, i) { return svgcolors[colors[our_oids.length - 1 - i]]; })\n    .style(\"stroke-width\", 1)\n    .style(\"stroke-opacity\", 0)\n    .style(\"stroke\", \"white\");\n    d3.selectAll(\"#venn .venn-circle text\")\n    .style(\"fill\", \"white\")\n    .style(\"fill-opacity\", 0)\n    .style(\"stroke-width\", 0)\n    .style(\"font-size\", \"14px\")\n    .style(\"font-style\", \"italic\")\n    .style(\"font-weight\", \"bold\");\n    // 6. add voter avatars at random positions:\n    const circle_data = [], svg = d3.select(\"#venn > svg\"), svg_gs = [];\n    for (const [i, oid] of our_oids.entries()) {\n      const svg_g0 = d3.select('g[data-venn-sets=\"'+chars[i]+'\"]'),\n            svg_circle = svg_g0.select('path'),\n            bbox = svg_circle.node().getBBox(),\n            R = bbox.width / 2,\n            cx = bbox.x + R,\n            cy = bbox.y + R,\n            n = n_not_abstaining <= 100 \n                ? T.n_votes_map.get(oid)\n                : Math.round(T.shares_map.get(oid) * 100),\n            svg_g = svg.append(\"g\"),\n            positions = [];\n      let fine = false;\n      circle_data.push({cx:cx, cy:cy, R:R});\n      svg_gs.push(svg_g);\n      // put individual voters on that disc:\n      for (let k=0; k<n; k++) {\n        var x, y;\n        // find a valid place:\n        for (let it=0; it<100; it++) {\n          // draw a random point on that disc:\n          const r = (R - 1.5*r_avatar) * Math.sqrt(Math.random()),\n                phi = 2 * Math.PI * Math.random();\n          x = cx + r * Math.sin(phi);\n          y = cy + r * Math.cos(phi);\n          // check whether it is not overlapping an earlier dot:\n          fine = true;\n          for (let j=0; j<k; j++) {\n            const pos = positions[j],\n                  d2 = (x - pos.x)**2 + (y - pos.y)**2;\n            if (d2 < (3*r_avatar)**2) {\n              fine = false;\n              break;\n            }\n          }\n          if (fine) {\n            // check whether it is outside all earlier discs:\n            for (let j=0; j<i; j++) {\n              const c = circle_data[j],\n                    d2 = (x - c.cx)**2 + (y - c.cy)**2;\n              if (d2 < (c.R + 1.5*r_avatar)**2) {\n                fine = false;\n                break;\n              }\n            }\n          }\n          if (fine) break;\n        }\n        positions.push([x, y]);\n        if (fine) {\n        // draw the avatar:\n        svg_g.append(\"circle\")\n          .style(\"stroke\", \"black\")\n          .style(\"stroke-opacity\", 0)\n          .style(\"fill\", \"black\")\n          .style(\"fill-opacity\", 0)\n          .attr(\"r\", r_avatar)\n          .attr(\"cx\", x)\n          .attr(\"cy\", y);\n        }\n      }\n    }\n    // finally place labels on top and fade in:\n    for (const [i, oid] of our_oids.entries()) {\n      const svg_g0 = d3.select('g[data-venn-sets=\"'+chars[i]+'\"]'),\n            svg_circle = svg_g0.select('path'),\n            svg_text = svg_g0.select('text'),\n            svg_g = svg_gs[i];\n      // move label to front:\n      svg.append(() => svg_text.node());\n      const cloned_text = svg_text.clone(true);\n      svg_text.style(\"stroke-width\", 2).style(\"stroke\", \"black\").style(\"stroke-opacity\", 0);\n      // fade in:\n      svg_circle.transition().duration(2000).delay(1000*i)\n        .style(\"fill-opacity\", .95 - .05 * i)\n        .style(\"stroke-opacity\", 1);\n      svg_text.transition().duration(2000).delay(1000*i)\n        .style(\"stroke-opacity\", 0.75);\n      cloned_text.transition().duration(2000).delay(1000*i)\n        .style(\"fill-opacity\", 1);\n      svg_g.selectAll(\"circle\").transition().duration(2000).delay(1000*i)\n        .style(\"fill-opacity\", 0.3);\n    }\n  }\n}\n","import { Component, OnInit, ElementRef, Renderer2, Input, ViewChild } from '@angular/core';\n\n@Component({\n  selector: 'app-expandable',\n  templateUrl: './expandable.component.html',\n  styleUrls: ['./expandable.component.scss']\n})\nexport class ExpandableComponent implements OnInit {\n\n  @ViewChild('expandWrapper', {read: ElementRef}) expandWrapper;\n  @Input('expanded') expanded;\n  @Input('expandHeight') expandHeight;\n\n  constructor(public renderer: Renderer2) {\n\n  }\n\n  ngAfterViewInit(){\n      this.renderer.setStyle(this.expandWrapper.nativeElement, 'height', this.expandHeight + 'px');    \n  }\n\n  ngOnInit() { }\n}\n","<div #expandWrapper class='expand-wrapper' [class.collapsed]=\"!expanded\">\n  <ng-content></ng-content>\n</div>","<!--\n(C) Copyright 20152022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n-->\n\n<!--\n  TODO: \n  - \"fix\" slider element's absolute vertical position on screen while using it, even when note above it changes height. achieve this by automatically \"scrolling\" to compensate such layout changes.  \n-->\n\n<!--\nSuggestion\n\nvodle suggests that you look for a possible compromise between\nY\nand Z.\n\nWhy?\n\nY currently gets the share of A% of the participants, including yours.\nEither: You don't approve Z, but it gets the share of B% of the participants.\nOr: The share of another B% goes to Z.\nTogether, you might be able to agree on a better compromise with all these participants.\n\nHow?\n\nTry to find some other option X that appeals to both groups.\nMaybe this option is already on the list, or you might have to add it.\nThen suggest that all participants whose share now goes to Y or Z \nconsider giving option X a wap of more than 100-C.\nIf they all do so, then they all approve X.\nThe share of all these participants will then move to X.\nYou yourself would have to give X a wap of more than 100-C as well, of course. \nYour share will then also move to X, \nbut only if the others approve X as well.\n\nInstead of having A% Y plus B% Z, you would then have C% X (or more, if even more approve X).\n\n[Diagram: Pie A + Pie B -> Pie C for some other option X?]\n\n-->\n\n<!-- HEADER: -->\n\n<ion-header \n    (pointerup)=\"onBodyPointerup($event)\"\n    (touchup)=\"onBodyTouchup($event)\">\n  <ion-toolbar style=\"padding-right: 11px; padding-left: 16px;\">\n    <ion-buttons slot=\"start\" style=\"margin-right: 0px; margin-left: 0px; padding-left: 0px; padding-right: 0px;\">\n      <ion-menu-button style=\"padding-left: 0px!important; padding-right: 0px!important; position: relative; left: -9px;\"></ion-menu-button>\n    </ion-buttons>\n    <ion-text *ngIf=\"scroll_position < 70\" \n      style=\"font-weight: bold; font-size: larger; padding-left: 0px;\"\n      [innerHtml]=\"'poll.-page-title' | translate\">\n    </ion-text>\n    <ion-text *ngIf=\"scroll_position >= 70\"><b><i [innerHtml]=\"p.title\"></i></b></ion-text>\n    <ion-buttons slot=\"end\">\n\n      <!-- OFFLINE SIGN -->\n      <ng-container *ngIf=\"!window.navigator.onLine\">\n        <ion-icon name=\"cloud-offline-outline\" color=\"grey\"\n          style=\"position: relative; bottom: -1px;\">\n        </ion-icon>\n        <ion-icon name=\"alert-outline\" color=\"grey\">\n        </ion-icon>\n      </ng-container> \n\n      <!-- SYNCING SIGN -->\n      <ion-spinner *ngIf=\"!!p && p.syncing && window.navigator.onLine\" name=\"crescent\" color=\"grey\"></ion-spinner>\n\n      <!-- TRANSMITTED SIGN -->\n      <ion-button *ngIf=\"!!p && p.have_acted && !p.syncing && window.navigator.onLine\" class=\"ion-no-margin ion-no-padding\" fill=\"clear\" (click)=\"checkmark_clicked()\">\n        <ion-icon size=\"large\" name=\"checkmark\" color=\"grey\" slot=\"icon-only\"></ion-icon>\n      </ion-button>\n\n      <!-- DELEGATE BUTTON: -->\n      <ion-button *ngIf=\"!!p && delegation_status!='agreed' && p.allow_voting\"\n          (click)=\"delegate_dialog($event)\" \n          shape=\"round\" size=\"large\" color=\"primary\" class=\"ion-no-padding ion-no-margin\">\n        <span *ngIf=\"scroll_position < 70\"\n          [innerHtml]=\"'poll.delegate-button' | translate\">\n        </span><ion-button class=\"ion-no-margin ion-no-padding\"\n            [disabled]=\"!E.delegation.enabled\"\n            style=\"position: relative; right: -4px;\"\n            shape=\"round\" fill=\"solid\" color=\"primary\">\n          <ion-icon class=\"ion-no-margin ion-no-padding\" src=\"./assets/icon/delegate-simple.svg\">\n          </ion-icon>\n        </ion-button>\n      </ion-button>\n\n    </ion-buttons>\n  </ion-toolbar>\n</ion-header>\n\n<!-- SCROLLABLE CONTENT: -->\n\n<ion-content *ngIf=\"ready && !!p\" \n    (pointerup)=\"onBodyPointerup($event)\"\n    [scrollEvents]=\"true\"\n    (ionScroll)=\"onScroll($event)\"    \n    >\n  <ion-list lines=\"full\" class=\"ion-no-margin ion-no-padding\">\n\n    <!-- NEWS -->\n\n    <ion-card *ngFor=\"let n of news\">\n      <ion-card-content class=\"ion-no-margin ion-no-padding\">\n        <ion-item lines=\"none\" class=\"ion-no-margin ion-no-padding item-text-wrap\" color=\"warning\">\n          &nbsp;&nbsp;\n          <ion-label class=\"ion-no-margin ion-no-padding\">\n            {{n.title}}\n            <small *ngIf=\"n.body\">\n              <br/>\n              {{n.body}}\n            </small>  \n          </ion-label>\n          <ion-button slot=\"end\" class=\"ion-no-margin ion-no-padding\" fill=\"clear\" size=\"small\" (click)=\"news.delete(n);G.N.dismiss(n.key)\">\n            <ion-icon slot=\"icon-only\" name=\"close-outline\" style=\"color:gray!important\">\n            </ion-icon>    \n          </ion-button>  \n        </ion-item>\n      </ion-card-content>\n    </ion-card>\n\n    <!-- GENERAL POLL INFORMATION -->\n\n    <ion-item color=\"primary\" class=\"ion-no-margin\" lines=\"none\">\n      <ion-grid class=\"ion-no-padding ion-no-margin\">\n        <ion-row class=\"ion-no-padding ion-no-margin\">\n          <ion-col class=\"ion-no-padding ion-no-margin\">\n\n            <!-- NOTIFY OF DIFFERENT LANGUAGE: -->\n\n            <small *ngIf=\"(!!p.language) && (p.language != G.S.language)\">\n              <p [innerHtml]=\"'poll.different-language' | translate: {language: G.S.language_names[p.language]}\"></p>\n            </small>\n\n            <!-- POLL TITLE -->\n\n            <h3><b><i [innerHtml]=\"p.title\"></i></b></h3>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ion-item>\n    <ion-item *ngIf=\"(p.desc||'')!='' || (p.url||'') != ''\"\n        color=\"primary\" class=\"ion-padding-left ion-padding-right\" \n        style=\"cursor: pointer; --min-height: 0!important;\"\n        (click)=\"details_expanded =! details_expanded\">\n      <ion-grid class=\"ion-no-padding ion-padding-bottom ion-no-margin\" style=\"width: 100%;\">\n        <ion-row class=\"ion-no-padding ion-no-margin\">\n          <ion-col class=\"ion-no-padding ion-no-margin\">\n\n            <!-- POLL DESCRIPTION, \"READ MORE\" LINK -->\n\n            <div [style]=\"\n                details_expanded\n                ? 'white-space: normal; overflow: hidden; text-overflow: ellipsis; width: 100%!important;'\n                : 'white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%!important;'\n                \">\n              <i *ngIf=\"(p.desc||'')!=''\" [innerHtml]=\"p.desc\"></i><span *ngIf=\"(p.desc||'')!='' && (p.url||'') != ''\">&nbsp;</span>\n              <small *ngIf=\"(p.url||'') != ''\">\n                (<span (click)=\"G.open_url_in_new_tab(G.D.fix_url(p.url));details_expanded=!details_expanded\"><ion-text \n                  class=\"externallink\"  \n                  [innerHtml]=\"'read-more' | translate\">\n                </ion-text>&nbsp;<ion-icon name=\"open-outline\" style=\"position: relative; top: 2px;\"></ion-icon></span>)\n              </small>\n              <small *ngIf=\"details_expanded\">\n                &nbsp;\n                (<ion-text \n                  class=\"externallink\" \n                  [innerHtml]=\"'hide' | translate\">\n                </ion-text>)\n              </small>\n            </div>\n\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ion-item>\n    <ion-item color=\"primary\" class=\"ion-no-margin ion-padding-left ion-padding-right\" >\n      <ion-grid class=\"ion-no-padding ion-no-margin\">\n        <ion-row class=\"ion-no-padding ion-no-margin\">\n          <ion-col class=\"ion-no-padding ion-no-margin\" style=\"padding-bottom:8px; padding-top:2px;\">\n\n            <!-- ASSIST BUTTON: -->\n\n            <ion-button *ngIf=\"p.allow_voting\"\n                (click)=\"assist_dialog()\" \n                size=\"small\" fill=\"clear\" class=\"ion-float-right ion-no-padding ion-no-margin\"\n                style=\"position: relative; top: 5px; right: 10px; margin-left:20px; margin-bottom:5px!important;\">\n              <ion-label *ngIf=\"details_expanded\" style=\"color:#88e950; white-space: normal; text-align: right; font-size: 11.5px;\"\n                [innerHtml]=\"'poll.assist-me-button' | translate\">\n              </ion-label>&nbsp;<ion-button shape=\"round\" class=\"ion-no-padding ion-no-margin\" color=\"success\">\n                <ion-icon name=\"color-wand-outline\" slot=\"icon-only\" \n                  style=\"margin: 5px;\"></ion-icon>\n              </ion-button>\n            </ion-button>\n\n            <!-- CLOSING DATE, CLOSING SOON BADGE: -->\n\n            <small>\n              <span style=\"white-space: nowrap;\">\n                <ion-badge *ngIf=\"p.allow_voting && p.is_closing_soon\" \n                  class=\"ion-no-margin\" \n                  style=\"position: relative; bottom: -5.5px; font-size: 11.5px;\" \n                  color=\"danger\" \n                  [innerHtml]=\"'badges.closing-soon'|translate\">\n                </ion-badge>\n                <span *ngIf=\"p.allow_voting && !p.is_closing_soon\"\n                  [innerHtml]=\"'poll.closes' | translate\">\n                </span><span *ngIf=\"!p.allow_voting\"\n                  [innerHtml]=\"'poll.closed' | translate\">\n                </span>&nbsp;<b \n                  [innerHtml]=\"G.D.format_date(p.due)\">\n                </b>\n              </span><br/>\n              <span style=\"white-space: nowrap;\">\n                <ion-icon color=\"light\" style=\"position: relative; top: 2px\" [name]=\"(p.type=='share')?'cut-outline':'trophy-outline'\"></ion-icon>&nbsp;<span [innerHtml]=\"((p.type=='share')?'poll.type-share':'poll.type-winner')|translate\"></span>\n              </span>\n            </small>\n            <br/>\n\n            <!-- STATISTICS: -->\n\n            <small style=\"white-space: nowrap;\">\n              <span style=\"white-space: nowrap;\">\n                <ion-icon \n                    color=\"light\" style=\"position: relative; top: 2px\" \n                    name=\"people-outline\">\n                </ion-icon>&nbsp;<b>{{p.T.n_not_abstaining}}</b>&nbsp;<span class=\"externallink\" (click)=\"glossary('non-abstaining')\" [innerHtml]=\"'non-abstaining-voters'|translate\"></span>&nbsp;&nbsp;&nbsp;\n  <!--              <ion-button\n                    class=\"ion-no-padding ion-no-margin\" fill=\"clear\" size=\"small\" \n                    [routerLink]=\"'/inviteto/'+p.pid\" >\n                  <ion-icon \n                      class=\"ion-no-padding ion-no-margin\" \n                      style=\"font-size: 14px; position: relative; top: -1px\"\n                      name=\"share-social-outline\" \n                      color=\"light\">\n                  </ion-icon>\n                </ion-button>&nbsp;<span class=\"externallink\" [routerLink]=\"'/inviteto/'+p.pid\">Mehr einladen</span>-->\n                <br/>\n              </span>\n            </small>\n            <small style=\"white-space: nowrap;\">\n              <span style=\"white-space: nowrap;\">\n                <ion-icon \n                    color=\"light\" style=\"position: relative; top: 2px;\" \n                    [name]=\"p.agreement_level == 1 ? 'checkmark-done-outline' : 'analytics-outline'\">\n                </ion-icon><b>&nbsp;{{(p.agreement_level * 100).toFixed(1)}}</b>%&nbsp;<span \n                    class=\"externallink\" \n                    (click)=\"glossary('level-of-agreement')\" \n                    [innerHtml]=\"'level-of-agreement'|translate\"\n                  ></span>&nbsp;(<span \n                  class=\"externallink\" \n                  (click)=\"analysis_dialog()\" \n                  [innerHtml]=\"'poll.analysis-details'|translate\"\n                ></span>)\n              </span>&nbsp;\n\n              <!-- SUGGESTIONS BUTTON (TODO: place somewhere else): -->\n\n              <ion-badge *ngIf=\"false\"\n                    class=\"ion-no-margin\" \n                    style=\"position: relative; bottom:-6px; font-size: 11.5px; padding-top:2px\" \n                    color=\"success\" \n                    (click)=\"analysis_dialog()\"\n                    >\n                <ion-icon name=\"bulb-outline\" class=\"ion-no-padding ion-no-margin\"\n                  style=\"position: relative; top: 1.5px;\"></ion-icon>&nbsp;<span [innerHtml]=\"'suggestions'\"></span> \n              </ion-badge>\n\n              <!-- LIVE SCORES TOGGLE: -->\n\n              <ion-button [disabled]=\"!p.allow_voting\"\n                  (click)=\"toggle_show_live()\" \n                  size=\"small\" fill=\"clear\" class=\"ion-no-padding ion-no-margin\"\n                  style=\"position: absolute; right:8.5px; bottom:8px;\" \n                  >\n                <ng-container *ngIf=\"p.allow_voting\">\n                  <span style=\"color:#88e950; white-space: normal; text-align: right; font-size: 11.5px;\"\n                    [innerHtml]=\"'poll.show-live' | translate\">\n                  </span>&nbsp;<ion-button size=\"small\" shape=\"round\" color=\"success\" class=\"ion-no-border ion-no-padding\"><ion-icon slot=\"icon-only\" [name]=\"show_live?'eye-off-outline':'eye-outline'\" style=\"padding-left:4px;padding-right:5px\"></ion-icon></ion-button><!--<ion-toggle [checked]=\"show_live\" color=\"warning\" style=\"padding-left: 0px!important;\"></ion-toggle>-->\n                </ng-container>\n              </ion-button>\n\n            </small>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ion-item>\n\n    <!-- VOTE STATUS BANNER: -->\n\n    <ng-container *ngIf=\"p.allow_voting\">\n      <ion-item *ngIf=\"!p.have_acted && !p.am_abstaining\" color=\"warning\">\n        <small>\n          <p>\n            <span style=\"font-size: medium\" [innerHtml]=\"'poll.hint-first-time-1'|translate\"></span>&nbsp;<wbr/>\n            <span [innerHtml]=\"'poll.hint-first-time-2-before-wap'|translate\"></span><wbr/><span (click)=\"glossary('wap')\" style=\"cursor: pointer; white-space: nowrap\"><span class=\"externallink\" [innerHtml]=\"'poll.hint-first-time-2-wap'|translate\"></span><ion-icon name=\"help-circle-outline\" style=\"font-size: 16px; position: relative; top:4px;\"></ion-icon></span><span [innerHtml]=\"'poll.hint-first-time-2-after-wap'|translate\"></span>\n            <!-- assist link: -->\n            &nbsp;<wbr/><span style=\"white-space: nowrap;\">\n              (<a \n                (click)=\"assist_dialog()\"\n                [innerHtml]=\"'poll.assist-me-inline' | translate\">\n              </a>)\n            </span>\n          </p>\n        </small>\n      </ion-item>\n      <ion-item *ngIf=\"p.am_abstaining\" color=\"danger\">\n        <small>\n          <p>\n            <span style=\"font-size: medium\" [innerHtml]=\"'poll.hint-abstaining-1'|translate\"></span>&nbsp;<wbr/>\n            <span [innerHtml]=\"'poll.hint-abstaining-2-before-wap'|translate\"></span><wbr/><span (click)=\"glossary('wap')\" style=\"cursor: pointer; white-space: nowrap\"><span class=\"externallink\" [innerHtml]=\"'poll.hint-abstaining-2-wap'|translate\"></span><ion-icon name=\"help-circle-outline\" style=\"font-size: 16px; position: relative; top:4px;\"></ion-icon></span><span [innerHtml]=\"'poll.hint-abstaining-2-after-wap'|translate\"></span>\n            <!-- assist link: -->\n            &nbsp;<wbr/><span style=\"white-space: nowrap;\">\n              (<a \n                (click)=\"assist_dialog()\"\n                [innerHtml]=\"'poll.assist-me-inline' | translate\">\n              </a>)\n            </span>\n          </p>\n        </small>\n      </ion-item>\n      <ion-item *ngIf=\"p.my_n_rated_positive == 1\" color=\"warning\">\n        <small>\n          <p>\n            <span style=\"font-size: medium\" [innerHtml]=\"'poll.hint-only1positive-1-before-wap'|translate\"></span><wbr/><span (click)=\"glossary('wap')\" style=\"cursor: pointer; white-space: nowrap\"><span style=\"font-size: medium\" class=\"externallink\" [innerHtml]=\"'poll.hint-only1positive-1-wap'|translate\"></span><ion-icon name=\"help-circle-outline\" style=\"font-size: 16px; position: relative; top:3px;\"></ion-icon></span><span style=\"font-size: medium\" [innerHtml]=\"'poll.hint-only1positive-1-after-wap'|translate\"></span>&nbsp;<wbr/>\n            <span [innerHtml]=\"'poll.hint-only1positive-2'|translate\"></span>\n            <!-- assist link: -->\n            &nbsp;<wbr/><span style=\"white-space: nowrap;\">\n              (<a \n                (click)=\"assist_dialog()\"\n                [innerHtml]=\"'poll.assist-me-inline' | translate\">\n              </a>)\n            </span>\n          </p>\n        </small>\n      </ion-item>\n      <ion-item *ngIf=\"show_live && p.my_n_rated_positive != 1 && p.my_n_approved == 1\" color=\"secondary\">\n        <small>\n          <p>\n            <span style=\"font-size: medium\" [innerHtml]=\"'poll.hint-only1approved-1-before-approving'|translate\"></span><wbr/><span (click)=\"glossary('approve')\" style=\"cursor: pointer; white-space: nowrap\"><span style=\"font-size: medium\" class=\"externallink\" [innerHtml]=\"'poll.hint-only1approved-1-approving'|translate\"></span><ion-icon name=\"help-circle-outline\" style=\"font-size: 16px; position: relative; top:3px;\"></ion-icon></span><span style=\"font-size: medium\" [innerHtml]=\"'poll.hint-only1approved-1-after-approving'|translate\"></span>&nbsp;<wbr/>\n            <span [innerHtml]=\"'poll.hint-only1approved-2-before-wap'|translate\"></span><wbr/><span (click)=\"glossary('wap')\" style=\"cursor: pointer; white-space: nowrap\"><span class=\"externallink\" [innerHtml]=\"'poll.hint-only1approved-2-wap'|translate\"></span><ion-icon name=\"help-circle-outline\" style=\"font-size: 16px; position: relative; top:4px;\"></ion-icon></span><span [innerHtml]=\"'poll.hint-only1approved-2-after-wap'|translate\"></span>\n            <!-- assist link: -->\n            &nbsp;<wbr/><span style=\"white-space: nowrap;\">\n              (<a \n                (click)=\"assist_dialog()\"\n                [innerHtml]=\"'poll.assist-me-inline' | translate\">\n              </a>)\n            </span>\n          </p>\n        </small>\n      </ion-item>\n      <ion-item *ngIf=\"show_live && p.my_n_approved > 1 && !p.T.approvals_map.get(oidsorted[0]).get(p.myvid)\" color=\"light\">\n        <small>\n          <p>\n            <span [innerHtml]=\"'poll.hint-mostapproved-1'|translate\"></span>\n          </p>\n        </small>\n      </ion-item>\n      \n    </ng-container>\n\n    <!-- FINAL RESULTS (if ended and results are ready): -->\n\n    <!-- winner exists: -->\n    <ng-container *ngIf=\"p.has_results && p.type=='winner'\">\n      <ion-item color=\"light\">\n        <p [innerHtml]=\"'poll.results'|translate\">\n        </p>\n      </ion-item>\n      <ion-item color=\"danger\">\n        <h3>\n          <b [innerHtml]=\"'poll.winner-is'|translate:{winner:p.options[p.winner].name}\"></b>\n        </h3>\n      </ion-item>\n      <ion-item color=\"warning\">\n        <p>\n          <b [innerHtml]=\"'poll.reason'|translate\"></b>&nbsp;\n          <span \n            *ngIf=\"p.T.n_not_abstaining == 0\" \n            [innerHtml]=\"'poll.reason-all-abstained'|translate:{}\"></span>\n          <span \n            *ngIf=\"p.T.n_not_abstaining > 0 && p.T.approval_scores_map.get(oidsorted[0]) == p.T.n_not_abstaining && p.T.approval_scores_map.get(oidsorted[1]) < p.T.n_not_abstaining\" \n            [innerHtml]=\"'poll.reason-full-consensus-unique'|translate:{}\"></span>\n          <span \n            *ngIf=\"p.T.n_not_abstaining > 0 && p.T.approval_scores_map.get(oidsorted[0]) == p.T.n_not_abstaining && p.T.approval_scores_map.get(oidsorted[1]) == p.T.n_not_abstaining\" \n            [innerHtml]=\"'poll.reason-full-consensus-highest'|translate:{}\"></span>\n          <span \n            *ngIf=\"p.T.n_not_abstaining > 0 && p.T.approval_scores_map.get(oidsorted[0]) < p.T.n_not_abstaining && p.winner == oidsorted[0]\" \n            [innerHtml]=\"'poll.reason-largest-approval'|translate:{\n              approval:(p.T.approval_scores_map.get(oidsorted[0])/p.T.n_not_abstaining*100).toFixed(1),\n              disapproval:(100-p.T.approval_scores_map.get(oidsorted[0])/p.T.n_not_abstaining*100).toFixed(1)}\"></span>\n          <span \n            *ngIf=\"p.T.n_not_abstaining > 0 && p.T.approval_scores_map.get(oidsorted[0]) < p.T.n_not_abstaining && p.winner != oidsorted[0]\" \n            [innerHtml]=\"'poll.reason-smaller-approval'|translate:{\n              share:(p.T.shares_map.get(p.winner)*100).toFixed(1)}\"></span>\n        </p>\n      </ion-item>\n    </ng-container>\n\n    <!-- shares exist: -->\n    <ng-container *ngIf=\"p.has_results && p.type=='share'\">\n      <ion-item color=\"light\">\n        <p [innerHtml]=\"'poll.results'|translate\">\n        </p>\n      </ion-item>\n      <ion-item color=\"danger\">\n        <ion-text>\n          <ng-container *ngFor=\"let item of [].constructor(oidsorted.length); let i = index\">\n            <ng-container *ngIf=\"p.T.shares_map.get(oidsorted[i]) > 0\">\n                <h3><b>\n                  <span [innerHtml]=\"'poll.of-the-budget-go-to'|translate:{share:(p.T.shares_map.get(oidsorted[i])*100).toFixed(1), option:p.options[oidsorted[i]].name}\"></span>\n                </b></h3> \n            </ng-container>\n          </ng-container>\n        </ion-text>   \n      </ion-item>\n    </ng-container>\n\n    <!-- results not ready yet: -->\n    <ng-container *ngIf=\"!p.allow_voting && !p.has_results\">\n      <ion-item color=\"warning\">\n        <p [innerHtml]=\"'poll.wait-for-results'|translate\">\n        </p>\n      </ion-item>\n    </ng-container>\n\n    <!-- FINAL WAPS EXPANDER (if ended): -->\n\n    <ion-item *ngIf=\"!p.allow_voting\" \n        color=\"light\"\n        (click)=\"final_expanded=!final_expanded\"\n        style=\"cursor: pointer;\">\n      <ion-icon \n        [name]=\"final_expanded?'caret-down-outline':'caret-forward-outline'\" \n        size=\"small\" color=\"primary\">\n      </ion-icon>&nbsp;&nbsp;<ion-label>\n        <span [innerHtml]=\"'poll.final-ratings'|translate\"></span>\n      </ion-label>\n    </ion-item>\n    \n    <!-- POTENTIALLY HIDDEN CONTENT: -->\n\n    <div [style.display]=\"p.allow_voting || final_expanded ? 'block' : 'none'\">\n\n      <!-- INCOMING DELEGATIONS BANNER: -->\n\n      <ion-item *ngIf=\"(accepted_requests.length > 0) || (declined_requests.length > 0)\"\n          color=\"light\">\n        <ion-grid class=\"ion-no-padding ion-no-margin\">\n\n          <!-- SUMMARY: -->\n\n          <ion-row \n              class=\"ion-no-padding ion-no-margin\" \n              style=\"padding-top: 5px; padding-bottom: 6px; cursor: pointer;\"\n              (click)=\"incoming_delegation_expanded =! incoming_delegation_expanded\">\n            <ion-col class=\"ion-no-margin ion-padding-right\" >\n              <small>\n                <ion-icon \n                  [name]=\"(incoming_delegation_expanded) ? 'chevron-down-outline' : 'chevron-forward-outline'\" \n                  size=\"smaller\" class=\"ion-no-margin\" \n                  style=\"color:black; position: relative; left: -2px; top: 2px;\">\n                </ion-icon>\n                <span *ngIf=\"accepted_requests.length > 0\" \n                  [innerHtml]=\"\n                    ((n_indirect_clients == 1 ? 'poll.also-for-other' : 'poll.also-for-others' )\n                    | translate: {n_others: n_indirect_clients})\n                    + ' '\n                  \">\n                </span>\n                <span *ngIf=\"declined_requests.length > 0\" \n                  [innerHtml]=\"(n_indirect_clients == 0 ? 'poll.declined-all' : 'poll.declined-some') | translate\">\n                </span>\n                &nbsp;\n              </small>\n            </ion-col>\n          </ion-row>\n\n          <!-- EXPANDABLE DETAILS: -->\n\n          <!-- Accepted requests: -->\n\n          <ion-row *ngIf=\"incoming_delegation_expanded && accepted_requests.length > 0\">\n            <ion-col class=\"ion-text-right\">\n              <small>\n                <span [innerHtml]=\"'poll.have-accepted' | translate\"></span>\n                <ion-chip *ngFor=\"let r of accepted_requests\" \n                    [routerLink]=\"r.url\" \n                    outline=\"true\">\n                  <ion-icon \n                    name=\"mail-open-outline\"\n                    style=\"color:grey\" size=\"small\">\n                  </ion-icon>\n                  <small>{{r.from}}</small>\n                </ion-chip>\n              </small>\n            </ion-col>\n          </ion-row>\n\n          <!-- Declined requests: -->\n\n          <ion-row *ngIf=\"incoming_delegation_expanded && declined_requests.length > 0\">\n            <ion-col class=\"ion-text-right\">\n              <small>\n                <span [innerHtml]=\"'poll.have-declined' | translate\"></span>\n                <ion-chip *ngFor=\"let r of declined_requests\" \n                    [routerLink]=\"r.url\" \n                    outline=\"true\">\n                  <ion-icon \n                    name=\"mail-open-outline\"\n                    style=\"color:grey\" size=\"small\">\n                  </ion-icon>\n                  <small>{{r.from}}</small>\n                </ion-chip>\n              </small>\n            </ion-col>\n          </ion-row>\n\n        </ion-grid>\n      </ion-item>\n\n      <!-- OUTGOING DELEGATION BANNER: -->\n\n      <ion-item *ngIf=\"delegation_status=='pending'\" \n          color=\"warning\"> \n        <ion-grid class=\"ion-no-padding ion-no-margin\">\n          <ion-row class=\"ion-no-padding ion-no-margin ion-align-items-center\">\n\n            <!-- Info about how many ratings the delegate controls: -->\n\n            <ion-col class=\"ion-no-margin ion-padding-right\">\n              <small>\n                <p>\n                  <span style=\"font-size: medium;\">{{delegate}}</span>&nbsp;\n                  <span [innerHtml]=\"\n                    'poll.delegate-not-responded' | translate\n                    \">\n                  </span>\n                </p>\n              </small>\n            </ion-col>\n\n            <!-- Revoke delegation button: -->\n\n            <ion-col size=\"auto\" class=\"ion-no-margin\">\n              <ion-button \n                  [disabled]=\"!p.allow_voting\"\n                  fill=\"clear\" (click)=\"revoke_delegation_dialog()\">\n                <ion-icon name=\"trash-outline\" style=\"color:black\"></ion-icon>\n              </ion-button>\n            </ion-col>\n\n          </ion-row>\n        </ion-grid>\n      </ion-item>\n\n      <ion-item *ngIf=\"delegation_status=='agreed'\" \n          color=\"warning\"> \n        <ion-grid class=\"ion-no-padding ion-no-margin\">\n          <ion-row class=\"ion-no-padding ion-no-margin ion-align-items-center\">\n\n            <!-- Info about how many ratings the delegate controls: -->\n\n            <ion-col class=\"ion-no-margin ion-padding-right\">\n              <small>\n                <p>\n                  <span style=\"font-size: medium;\">{{delegate}}</span>&nbsp;\n                  <span [innerHtml]=\"\n                    'poll.delegate-controls-' \n                    + (n_delegated == oidsorted.length ? 'all' \n                      : 2*n_delegated > oidsorted.length ? 'most' \n                      : n_delegated > 0 ? 'some' : 'none'\n                      ) | translate\n                    \">\n                  </span>\n                </p>\n              </small>\n            </ion-col>\n\n            <!-- Revoke delegation button: -->\n\n            <ion-col size=\"auto\" class=\"ion-no-margin\">\n              <ion-button fill=\"clear\" (click)=\"revoke_delegation_dialog()\">\n                <ion-icon name=\"trash-outline\" style=\"color:black\"></ion-icon>\n              </ion-button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n            </ion-col>\n\n            <!-- Help text for delegation toggles: -->\n\n            <ion-col \n                size=\"auto\" \n                class=\"ion-no-padding ion-no-margin ion-padding-left ion-text-right\" \n                style=\"padding-bottom:3px;\">\n              <small>\n                <p>\n                  <span [innerHtml]=\"'poll.choose-whose-ratings' | translate\"></span>&nbsp;\n                  <ion-icon \n                    name=\"arrow-down-outline\" \n                    style=\"position:relative;top:3px;\">\n                  </ion-icon>\n                </p>\n              </small>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ion-item>\n\n      <!-- TABLE HEADER: -->\n\n      <ion-item class=\"ion-no-padding ion-no-margin\" lines=\"none\"\n            style=\"--min-height: 0px!important; font-weight: bold;\">\n        <small (click)=\"(show_live||!p.allow_voting)?glossary('share'):null\" style=\"padding-top: 8px!important;padding-left: 6px; width: 68px!important; color: #769596; text-align: center;\">\n          <span *ngIf=\"show_live||!p.allow_voting\" style=\"width: 100%!important\" class=\"externallink\" [innerHtml]=\"'share'|translate\"></span>\n        </small>\n        <small (click)=\"glossary('wap')\" style=\"padding-left: 6px!important; padding-top: 8px!important; flex-grow: 1; color: #769596;\"><!--#62a73b;-->\n          <span class=\"externallink\" [innerHtml]=\"'poll.your-wap'|translate\"></span><!-- &rarr;-->\n        </small>\n        <!-- TODO: make padding robustly correct accross devices: -->\n        <small (click)=\"(show_live||!p.allow_voting)?glossary('approve'):null\" [style]=\"'padding-top: 8px!important; padding-right: '+(delegation_status=='agreed'?62:10)+'px; color: #769596;'\"><!--#9abcbd--><!--&larr; -->\n          <ng-container *ngIf=\"show_live||!p.allow_voting\">\n            <ion-icon name=\"caret-down\" style=\"position: relative; top: 2px;\"></ion-icon>&nbsp;<span class=\"externallink\" [innerHtml]=\"'approval'|translate\"></span>\n          </ng-container>\n        </small>\n      </ion-item>\n\n      <!-- OPTIONS: -->\n\n      <ion-item *ngFor=\"let item of [].constructor(oidsorted.length); let i = index\" style=\"align-items:flex-start\">\n\n        <!-- ALWAYS VISIBLE STUFF: -->\n\n        <ion-grid class=\"ion-no-padding ion-no-margin\">\n\n          <ion-row class=\"ion-no-padding ion-no-margin\">\n\n            <!-- PIE CHART WITH WINNING PROBABILITY: -->\n\n            <ion-col size=\"auto\" class=\"ion-no-padding ion-no-margin\">\n              <div style=\"width: 60px!important\"></div>\n              <svg [attr.display]=\"(show_live||!p.allow_voting)?'inline':'none'\" xmlns=\"http://www.w3.org/2000/svg\" width=\"60px\" height=\"60px\" style=\"position:absolute; bottom:0px;\"><!--top:12px;-->\n                <circle cx=\"21\" cy=\"25\" r=\"20\" fill=\"#bce4e5\" stroke=\"none\" />\n                <path [id]=\"'pie_'+oidsorted[i]\" d=\"M 21,25 l 0,-20 a 20 20 0 0 1 0 0 Z\" fill=\"#9abcbd\" />\n                <line [attr.display]=\"option_expanded[oidsorted[i]] ? 'inline' : 'none'\"\n                  x1=\"21\" y1=\"48\" x2=\"21\" y2=\"60\" stroke=\"#769596\" stroke-width=\"1\" stroke-dasharray=\"1 1\"></line>\n              </svg>\n            </ion-col>\n\n            <ion-col>\n\n              <ion-grid class=\"ion-no-padding ion-no-margin\">\n\n                <ion-row class=\"ion-no-padding ion-no-margin\" style=\"padding-top: 8px; cursor: pointer; position: relative; left: -6px; z-index:20; \"\n                    (click)=\"expand(oidsorted[i])\">\n                  <ion-col class=\"ion-no-padding ion-no-margin\">\n\n                    <ion-input style=\"display: none;\"></ion-input><!--this is needed so that the following ion-label is not greyed out when the ion-range below is disabled!-->\n                    <ion-label class=\"ion-no-padding ion-no-margin\" style=\"max-width: 100%!important;\">\n    \n                      <ion-icon \n                        [name]=\"(option_expanded[oidsorted[i]]) ? 'chevron-down-outline' : 'chevron-forward-outline'\" \n                        size=\"small\" class=\"ion-no-margin\" \n                        style=\"color:black; position: relative; top: 3px;\">\n                      </ion-icon>\n\n                      <!-- OPTION NAME: -->\n    \n                      <b><i>&nbsp;<span [innerHtml]=\"p.options[oidsorted[i]].name\"></span>&nbsp;</i></b>\n                    </ion-label>\n    \n                  </ion-col>\n                </ion-row>\n\n                <!-- RATING CONTROLS: -->\n\n                <ion-row class=\"ion-no-padding ion-no-margin\">\n\n                  <ion-col \n                      [id]=\"'_slider_'+oidsorted[i]+'_'+sortingcounter\"\n                      class=\"ion-no-padding ion-no-margin\" \n                      (click)=\"onRatingColClick(oidsorted[i], $event)\" \n                      (pointerdown)=\"onRatingColPointerdown(oidsorted[i], $event)\" \n                      (touchstart)=\"onRatingColTouchstart(oidsorted[i], $event)\" \n                      (touchup)=\"onRatingColTouchup(oidsorted[i], $event)\"\n                      (pointerup)=\"onRatingColPointerup(oidsorted[i], $event)\"\n                      >\n\n                    <!-- SLIDER: -->\n\n                    <!-- TODO: sometimes looks strange in Chrome (white shadowed large knob, bar displaced too low)-->\n                    <ion-range \n                        [disabled]=\"!p.allow_voting\"\n                        [id]=\"'slider_'+oidsorted[i]+'_'+sortingcounter\" \n                        [color]=\"show_live?slidercolor[oidsorted[i]]:'vodleblue'\"\n                        [value]=\"p.get_my_proxy_rating(oidsorted[i])\" \n                        (ionFocus)=\"onRatingSliderFocus(oidsorted[i])\" \n                        (ionChange)=\"onRatingSliderChange(oidsorted[i])\" \n                        (ionBlur)=\"onRatingSliderBlur(oidsorted[i])\"\n                        mode=\"md\" pin=\"true\"\n                        min=\"0\" max=\"100\" step=\"1\" snaps=\"true\" ticks=\"false\"\n                        [style]=\"''\n                          + (rate_yourself_toggle[oidsorted[i]] || delegation_status!='agreed'\n                          ? 'pointer-events:; --bar-height: 7px; --knob-size: 35px'\n                          : 'pointer-events: none; --bar-height: 5px; --knob-size: 17px')\" \n                        class=\"ion-no-padding ion-no-margin\">\n\n                      <ion-label \n                          slot=\"end\" \n                          class=\"ion-no-padding ion-no-margin\" \n                          style=\"margin-right:12px;\">\n                          <!--don't do width:100% in ion-label since otherwise the slider is not working properly!-->\n\n                        <!-- APPROVAL BAR: -->\n\n                        <div style=\"position: absolute; bottom: 0px; right: 11px; z-index: -10; width: 100%; padding-left: 11px\">\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"35px\">\n                            <rect [id]=\"'bar_' + oidsorted[i]\"\n                              [attr.display]=\"(show_live||!p.allow_voting)?'inline':'none'\" \n                              x=\"100%\" width=\"0%\" y=\"8\" height=\"18\" \n                              fill=\"#bce4e5\" stroke=\"none\" /><!--Note: width will change dynamically-->\n                            <line [attr.display]=\"(show_live||!p.allow_voting)?'inline':'none'\" \n                              x1=\"100%\" y1=\"0\" x2=\"100%\" y2=\"34\" fill=\"none\" stroke=\"#bce4e5\" stroke-width=\"5\" \n                              />\n                            <line x1=\"0%\" x2=\"100%\" y1=\"17\" y2=\"17\" stroke=\"#b4dbdb\" stroke-width=\"2\" stroke-dasharray=\"2 2\" />\n                            <!--<rect x=\"0%\" width=\"100%\" y=\"16\" height=\"2\" fill=\"#b4dbdb\" stroke=\"none\" />-->\n                          </svg>\n                        </div>\n\n                        <!-- Numerical annotations when expanded: -->\n\n                        <div style=\"position: absolute; bottom: 0px; right: 11px; z-index: 10; width: 100%; padding-left: 11px; pointer-events: none;\">\n                          <svg [attr.display]=\"((show_live||!p.allow_voting) && option_expanded[oidsorted[i]]) ? 'inline' : 'none'\" \n                              xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"45px\">\n                            <!--\n                            <text x=\"0%\" y=\"20\" \n                              style=\"font-weight: bold; font-size: 12px;\" fill=\"slidercolor[oidsorted[i]]\" \n                              [innerHtml]=\"p.get_my_proxy_rating(oidsorted[i])\">\n                            </text>\n                            -->\n                            <text x=\"100%\" y=\"15\" \n                              style=\"font-weight: bold; font-size: 12px;\" text-anchor=\"end\" fill=\"#9abcbd\" [innerHtml]=\"\n                                (p.T.approval_scores_map.get(oidsorted[i]) / Math.max(1, p.T.n_not_abstaining) * 100).toFixed(1) + '%&nbsp;&nbsp;'\n                              \">\n                            </text>\n                          </svg>\n                        </div>\n\n                        <!-- DELEGATE'S RATING -->\n\n                        <div style=\"position: absolute; top: -2px; right: 11px; z-index: -5; width: 100%; padding-left: 11px\"\n                            [style.display]=\"delegation_status=='agreed' && rate_yourself_toggle[oidsorted[i]] ? 'inline' : 'none'\">\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"15px\">\n                            <line [id]=\"'del_needle_' + oidsorted[i]\" x1=\"0\" y1=\"8\" x2=\"50%\" y2=\"8\" fill=\"none\" stroke=\"#9abcbd\" stroke-width=\"2\" stroke-dasharray=\"3 2\" />\n                            <circle [id]=\"'del_knob_' + oidsorted[i]\" cx=\"50%\" cy=\"8\" r=\"5\" fill=\"#9abcbd\" stroke=\"none\"/>\n                            <!--FIXME: circle is cropped when close to either endpoint. how to avoid this?-->\n                          </svg>\n                        </div>\n\n                      </ion-label>\n                    </ion-range>\n                  </ion-col>\n\n                  <!-- DELEGATION TOGGLE: -->\n\n                  <ion-col *ngIf=\"delegation_status=='agreed'\" \n                      class=\"ion-no-margin ion-no-padding\" \n                      size=\"auto\">&nbsp;&nbsp;&nbsp;\n                    <ion-toggle [id]=\"'rate_yourself_toggle_' + oidsorted[i]\" \n                      [disabled]=\"!p.allow_voting\"\n                      (ionChange)=\"on_rate_yourself_toggle_change(oidsorted[i])\"\n                      class=\"ion-no-margin ion-no-padding ion-padding-bottom ion-padding-top\" \n                      style=\"position:relative; top:-8px;\" \n                      [(ngModel)]=\"rate_yourself_toggle[oidsorted[i]]\">\n                    </ion-toggle>\n                    <div style=\"position:absolute; z-index:10; top:22px; right:1px; text-align:right;\">\n                      <small [innerHtml]=\"\n                        rate_yourself_toggle[oidsorted[i]] \n                        ? ('poll.my-own' | translate) \n                        : ('poll.delegate-s' | translate: {delegate: delegate})\n                        \" >\n                      </small>\n                    </div>\n                  </ion-col>  \n                </ion-row>\n              </ion-grid>\n            </ion-col>\n          </ion-row>\n          <ion-row class=\"ion-no-padding ion-no-margin\">\n            <ion-col class=\"ion-no-padding ion-no-margin\">\n              <ion-grid class=\"ion-no-padding ion-no-margin\">\n\n                <!-- EXPANDABLE OPTION DETAILS -->\n\n                <!-- TODO: replace by simpler container: -->\n                <app-expandable [id]=\"'expander_'+oidsorted[i]+'_'+sortingcounter\" \n                    [expanded]=\"option_expanded[oidsorted[i]]\">\n                  <ion-row class=\"ion-no-padding ion-padding-bottom ion-no-margin\">\n                    <ion-col class=\"ion-no-padding ion-no-margin\">\n\n                      <!-- Live results: -->\n\n                      <b [style.display]=\"(show_live||!p.allow_voting)?'inline':'none'\">\n                        <!-- Winning chance/budget share: -->\n                        <span style=\"color:#769596;\">\n                          <span style=\"white-space: nowrap;\" [innerHtml]=\"\n                            (p.type == 'winner' \n                                ? (p.allow_voting?'poll.chance-to-win':'poll.final-chance-to-win') \n                                : (p.allow_voting?'poll.of-the-budget':'poll.final-budget')) \n                            | translate: {percentage: \n                              (p.T.shares_map.get(oidsorted[i]) * 100).toFixed(1)\n                            }\">\n                          </span><small><wbr> <span style=\"color:#4c822e;\" \n                              [style.display]=\"(votedfor == oidsorted[i]) ? 'inline' : 'none'\"\n                              [innerHtml]=\"'poll.including-your-share' | translate\">\n                            </span>,\n                          </small>\n                        </span><small><wbr> </small>\n                        <!-- Approval: -->\n                        <span style=\"color:#9abcbd; white-space: nowrap;\">\n                          <span [innerHtml]=\"\n                            'poll.approved-by' | translate: {percentage:\n                              (p.T.approval_scores_map.get(oidsorted[i]) / Math.max(1, p.T.n_not_abstaining) * 100).toFixed(1)\n                            }\">\n                          </span>\n                        </span>\n                        <small>\n                          <span style=\"color:#62a73b\" \n                            [style.display]=\"approved[oidsorted[i]] ? 'inline' : 'none'\"\n                            [innerHtml]=\"'poll.including-you' | translate\">\n                          </span>\n                        </small>\n                        <small>\n                          <!-- avg. rating: -->\n                          <span *ngIf=\"(i>0 \n                                    && p.T.approval_scores_map.get(oidsorted[i-1]) \n                                    == p.T.approval_scores_map.get(oidsorted[i])) \n                                || (i<oidsorted.length-1 \n                                    && p.T.approval_scores_map.get(oidsorted[i+1]) \n                                    == p.T.approval_scores_map.get(oidsorted[i]))\" \n                                style=\"color:#9abcbd\">,\n                            <span style=\"white-space: nowrap;\" [innerHtml]=\"\n                              'poll.average-rating' | translate: {average:\n                                (p.T.total_effective_ratings_map.get(oidsorted[i]) / Math.max(1, p.T.n_not_abstaining)).toFixed(1)\n                              }\">\n                            </span>\n                          </span>&nbsp;\n                          <!-- explanation link: -->\n                          <span style=\"color:#9abcbd; white-space: nowrap;\">\n                            (<a \n                              (click)=\"explain_approval_dialog(oidsorted[i])\"\n                              [innerHtml]=\"'poll.explain' | translate\">\n                            </a>)\n                          </span>\n                        </small>\n                      </b>\n\n                      <!-- Description: -->\n                      \n                      <span [style.display]=\"((show_live||!p.allow_voting) && (!!p.options[oidsorted[i]].desc || !!p.options[oidsorted[i]].url)) ? 'inline' : 'none'\">\n                        <br/>\n                      </span>\n                      <span [style.display]=\"p.options[oidsorted[i]].desc != '' ? 'inline' : 'none'\">\n                        <i><span [innerHtml]=\"p.options[oidsorted[i]].desc\"></span>&nbsp;&nbsp;</i>\n                      </span>\n                      <span [style.display]=\"p.options[oidsorted[i]].url != '' ? 'inline' : 'none'\">\n                        <small>\n                          (<span (click)=\"G.open_url_in_new_tab(G.D.fix_url(p.options[oidsorted[i]].url))\"><ion-text \n                              class=\"externallink\"  \n                              [innerHtml]=\"'read-more' | translate\">\n                          </ion-text>&nbsp;<ion-icon name=\"open-outline\" style=\"position: relative; top: 2px;\"></ion-icon></span>)\n                        </small>\n                      </span>\n\n                      <!-- debugging info: - ->\n\n                      <small>\n                        <br/>direct_delegation_map: {{G.map2str(p.direct_delegation_map.get(oidsorted[i]))}}\n                        <br/>inv_direct_delegation_map: {{G.map2str(p.inv_direct_delegation_map.get(oidsorted[i]))}}\n                        <br/>indirect_delegation_map: {{G.map2str(p.indirect_delegation_map.get(oidsorted[i]))}}\n                        <br/>inv_indirect_delegation_map: {{G.map2str(p.inv_indirect_delegation_map.get(oidsorted[i]))}}\n                        <br/>effective_delegation_map: {{G.map2str(p.effective_delegation_map.get(oidsorted[i]))}}\n                        <br/>inv_effective_delegation_map: {{G.map2str(p.inv_effective_delegation_map.get(oidsorted[i]))}}\n                        <br/>ratings_ascending_map: {{G.map2str(p.T.ratings_ascending_map)}}\n                        <br/>thresholds_map: {{G.map2str(p.T.thresholds_map)}}\n                        <br/>approval_scores_map: {{G.map2str(p.T.approval_scores_map)}}\n                        <br/>total_effective_ratings_map: {{G.map2str(p.T.total_effective_ratings_map)}}\n                        <br/>votes_map: {{G.map2str(p.T.votes_map)}}\n                        <br/>n_votes_map: {{G.map2str(p.T.n_votes_map)}}\n                        <br/>shares_map: {{G.map2str(p.T.shares_map)}}\n                      </small>\n                      <!---->\n                      \n                    </ion-col>\n                  </ion-row>\n                </app-expandable>\n              </ion-grid>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n\n      </ion-item>\n\n      <!-- ADD OPTION BUTTON: -->\n\n      <ng-container *ngIf=\"p.allow_voting\">\n        <ion-item lines=\"none\" class=\"ion-no-padding\" style=\"padding-left: 10px; padding-top: 10px;\">\n          <ion-fab-button \n            size=\"small\" (click)=\"add_option($event)\" fill=\"clear\" color=\"primary\">\n            <ion-icon name=\"add\"></ion-icon>\n          </ion-fab-button>\n          <ion-button \n            class=\"ion-no-padding ion-no-margin\" fill=\"clear\" (click)=\"add_option($event)\"\n            [innerHtml]=\"'poll.add-option' | translate\"> \n          </ion-button>\n        </ion-item>\n        <ion-item lines=\"none\" style=\"padding-bottom: 10px!important;\">\n          <small [innerHtml]=\"'poll.add-option-info' | translate\"></small>\n        </ion-item>\n      </ng-container>\n\n    </div>\n\n    <!-- DEBUGGING AREA (not in production mode): -->\n\n    <ng-container *ngIf=\"false && !E.production\">\n      <ion-item></ion-item>\n      <ion-item class=\"ion-text-right\" lines=\"none\">\n        <ion-col><small><p style=\"color: grey;\">\n          Debugging info: state={{p.state}}, vid={{p.myvid}}, oids={{p.oids}}, oidsorted={{oidsorted}}/{{p.T.oids_descending}}, scores_map={{G.map2str(p.T.scores_map)}}. \n          Simulate state (off:closed, on:running): \n        </p></small></ion-col>\n        <ion-buttons slot=\"end\">\n          <!-- only in debug: simulate closing -->\n          <ion-toggle color=\"light\"\n            [(ngModel)]=\"p.allow_voting\">\n          </ion-toggle>\n        </ion-buttons>\n      </ion-item>\n    </ng-container>\n\n  </ion-list>\n</ion-content>\n\n<!-- OPTIONAL GLOSSARY: -->\n\n<ion-footer *ngIf=\"show_glossary\" style=\"box-shadow: 0px -3px 4px #eeeeee;\">\n  <ion-item color=\"light\">\n    <ion-text>\n    <ion-button (click)=\"dismiss_glossary()\" fill=\"clear\" class=\"ion-float-right ion-margin-right ion-margin-left ion-no-padding\"\n        style=\"position: relative; right: -6px; top: 3px;\">\n      <ion-icon class=\"ion-no-margin ion-no-padding\" slot=\"icon-only\" name=\"close\" color=\"primary\"></ion-icon>\n    </ion-button>\n    <small [innerHtml]=\"'glossary.'+glossary_key|translate\"></small>\n  </ion-text>\n  </ion-item>\n</ion-footer>\n\n","/*\n(C) Copyright 20152022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { Component, OnInit, ViewChild, ChangeDetectorRef } from '@angular/core';\nimport { Router, ActivatedRoute } from \"@angular/router\";\nimport { TranslateService } from '@ngx-translate/core';\nimport { LoadingController, IonContent, IonRouterOutlet, PopoverController, AlertController, ModalController } from '@ionic/angular'; \n\nimport { environment } from '../../environments/environment';\nimport { GlobalService } from \"../global.service\";\nimport { Poll } from '../poll.service';\nimport { news_t } from '../data.service';\n\nimport { DelegationDialogPage } from '../delegation-dialog/delegation-dialog.module';  \nimport { AssistPage } from '../assist/assist.module';  \nimport { AnalysisPage } from '../analysis/analysis.module';  \nimport { AddoptionDialogPage } from '../addoption-dialog/addoption-dialog.module';  \nimport { ExplainApprovalPage } from '../explain-approval/explain-approval.module';  \n\n@Component({\n  selector: 'app-poll',\n  templateUrl: './poll.page.html',\n  styleUrls: ['./poll.page.scss'],\n})\nexport class PollPage implements OnInit {\n\n  Array = Array;\n  Math = Math;\n  Object = Object;\n  window = window;\n  E = environment;\n\n  @ViewChild(IonContent, { static: false }) content: IonContent;\n\n  page = \"poll\";\n\n  pid: string;\n  p: Poll;\n\n  delegate: string;\n  delegation_status = \"none\";\n\n  n_indirect_clients = 1;\n  accepted_requests = [];\n  declined_requests = [];\n\n  oidsorted: string[] = [];\n  sortingcounter: number = 0;\n\n  approved = {}; // whether option is approved by me\n  votedfor = null; // oid my prob. share goes to\n\n  // gui layout choices by user:\n  show_live = false;\n  final_expanded = false;\n  details_expanded = true;\n  incoming_delegation_expanded = false;\n  option_expanded = {};\n\n  // other:\n\n  pieradius = 20;\n  two_pi = 2*Math.PI; \n  slidercolor = {};\n\n  refresh_paused = false;\n  needs_refresh = false;\n\n  scroll_position = 0;\n  rate_yourself_toggle: Record<string, boolean> = {};\n  n_delegated = 0;\n\n  news: Set<news_t> = new Set();\n\n  // LIFECYCLE:\n\n  ready = false;  \n\n  constructor(\n      private changeDetector: ChangeDetectorRef,\n      private router: Router,\n      private route: ActivatedRoute,\n      private routerOutlet: IonRouterOutlet,\n      public loadingController: LoadingController,\n      public alertCtrl: AlertController,\n      private popover: PopoverController,\n      private modalController: ModalController,\n      public translate: TranslateService,\n      public G: GlobalService) {\n    this.G.L.entry(\"PollsPage.constructor\");\n    // get pid of opened poll:\n    this.route.params.subscribe( params => { \n      this.pid = params['pid'];\n    } );\n  }\n\n  ngOnInit() {\n    this.G.L.entry(\"PollsPage.ngOnInit\");\n  }\n\n  ionViewWillEnter() {\n    this.G.L.entry(\"PollPage.ionViewWillEnter\");\n    this.G.D.page = this;\n    const f = (ev => { this.changeDetector.detectChanges(); });\n    window.addEventListener('offline', f);\n    window.addEventListener('online', f);\n    // get gui state:\n    const specs = JSON.parse(this.G.D.getp(this.pid, \"poll_page\") || \"{}\");\n    this.show_live = (specs['show_live'] == true);\n    this.details_expanded = (specs['details_expanded'] != false);\n    this.incoming_delegation_expanded = (specs['incoming_delegation_expanded'] == true);\n    this.option_expanded = specs['option_expanded'] || {};\n    this.G.L.exit(\"PollPage.ionViewWillEnter\", specs);\n  }\n\n  ionViewDidEnter() {\n    this.G.L.entry(\"PollPage.ionViewDidEnter\");\n    if (this.G.D.ready) {\n      this.onDataReady();\n    }\n    this.G.L.debug(\"PollPage.ready:\", this.ready);\n  }\n\n  onDataReady() {\n    // called when DataService initialization was slower than view initialization\n    this.G.L.entry(\"PollPage.onDataReady\");\n    if (this.pid in this.G.P.polls) {\n      this.p = this.G.P.polls[this.pid];\n      if (this.p.state == 'draft') {\n        this.G.L.error(\"PollPage not showing draft poll, redirecting to mypolls page\", this.pid);\n        this.router.navigate([\"/mypolls\"]);\n      } else {\n        this.G.L.info(\"PollPage showing poll\", this.pid);\n      }\n      // TODO: check if running or closed!\n    } else {\n      this.G.L.warn(\"PollPage unknown pid ignored, redirecting to mypolls page\", this.pid, this.G.P.polls);\n      this.router.navigate([\"/mypolls\"]);\n      return;\n    }\n    if (this.p.allow_voting) {\n      this.G.L.info(\"PollPage checking if default waps are needed\", this.pid);\n      for (let oid of this.p.oids) {\n        const orm = this.p.own_ratings_map.get(oid);\n        if (!orm.has(this.p.myvid)) {\n          this.G.L.info(\"PollPage setting default wap\", this.pid, oid, this.G.S.default_wap);\n          this.p.set_my_own_rating(oid, this.G.S.default_wap, true);\n        }\n      }  \n    }\n    this.p.tally_all();\n    // TODO: optimize sorting performance:\n    this.oidsorted = [...this.p.T.oids_descending]; \n    this.ready = true;\n    this.update_order(true);\n    /*\n    for (let oid of this.oidsorted) {\n      this.option_expanded[oid] = false;\n    }\n    */\n    window.setTimeout(() => {\n      this.update_order.bind(this)(true);\n      this.show_stats.bind(this)();\n    }, 200);\n    this.update_delegation_info();\n    this.on_delegate_toggle_change();\n    this.p.have_seen = true;\n    if (this.p.has_results) {\n      this.p.have_seen_results = true;\n    }\n    this.G.L.exit(\"PollPage.onDataReady\");\n  }\n\n  onDataChange() {\n    this.G.L.entry(\"PollPage.onDataChange\");\n    this.p.tally_all();\n    this.update_order();\n    this.update_delegation_info();\n    this.news = this.G.N.filter({pid: this.pid});\n    this.changeDetector.detectChanges();\n    this.G.L.exit(\"PollPage.onDataChange\");\n  }\n\n  ionViewWillLeave() {\n    // make sure current slider values are really stored in database:\n    for (let oid of this.oidsorted) {\n      if (!this.delegate || this.rate_yourself_toggle[oid]) {\n        this.p.set_my_own_rating(oid, Math.round(this.get_slider_value(oid)), true);\n      }\n    }\n    // dismiss auto-dismissing news:\n    for (const news of this.news) {\n      if (news.auto_dismiss) {\n        this.G.N.dismiss(news.key);\n      }\n    }\n    // store gui state:\n    const specs = {\n      'show_live': this.show_live,\n      'details_expanded': this.details_expanded,\n      'incoming_delegation_expanded': this.incoming_delegation_expanded,\n      'option_expanded': this.option_expanded\n    }\n    this.G.D.setp(this.pid, \"poll_page\", JSON.stringify(specs));\n    this.G.L.exit(\"PollPage.ionViewWillLeave\", specs);\n  }\n\n  ionViewDidLeave() {\n    this.G.L.entry(\"PollPage.ionViewDidLeave\");\n    this.G.D.save_state();\n    this.G.L.exit(\"PollPage.ionViewDidLeave\");\n  }\n\n  update_delegation_info() {\n    // determine own weight:\n    this.n_indirect_clients = this.p.get_n_indirect_clients(this.p.myvid);\n    // find incoming delegations:\n    const cache = this.G.D.incoming_dids_caches[this.pid];\n    this.accepted_requests = [];\n    this.declined_requests = [];\n    if (cache) {\n      for (const [did, [from, url, status]] of cache) {\n        if (status == 'agreed') {\n          this.accepted_requests.push({from:from, url:url});\n        } else if (status.startsWith('declined')) {\n          this.declined_requests.push({from:from, url:url});\n        } \n      }\n    }\n    // find outgoing delegation:\n    const did = this.G.Del.get_my_outgoing_dids_cache(this.pid).get(\"*\");\n    this.G.L.trace(\"PollPage.update_delegation_info did\", did);\n    if (did) {\n      this.delegate = this.G.Del.get_delegate_nickname(this.pid, did);\n      const agreement = this.G.Del.get_agreement(this.pid, did);\n      this.G.L.trace(\"PollPage.update_delegation_info agreement\", agreement);\n      this.delegation_status = agreement.status;\n    }\n    this.update_delegation_toggles();\n  }\n\n  update_delegation_toggles() {\n    for (let oid of this.oidsorted) {\n      let did = this.G.Del.get_my_outgoing_dids_cache(this.pid).get(oid);\n      if (!did) {\n        did = this.G.Del.get_my_outgoing_dids_cache(this.pid).get(\"*\");\n      }\n      if (did) {\n        const a = this.G.Del.get_agreement(this.pid, did);\n        this.G.L.trace(\"PollPage found did, agreement\", oid, did, a, [...a.accepted_oids], [...a.active_oids]);\n        this.rate_yourself_toggle[oid] = !a.active_oids.has(oid);\n      } else {\n        this.G.L.trace(\"PollPage found no did for\", oid);\n        this.rate_yourself_toggle[oid] = true;\n      }\n    }\n  }\n\n  async onScroll(ev) {\n    /** find scroll position to be able to react to it */ \n    // TODO: make sure the page does not scroll away under a \"held\" slider?\n    // if so, this.scroll_position needs to be used somehow to adjust the window's actual scroll position in that case...\n    /*\n    const elem = this.content;\n  \n    // the ion content has its own associated scrollElement\n    const scrollElement = await ( elem as any).getScrollElement();\n  \n    const totalContentHeight = scrollElement.scrollHeight;\n    const viewportHeight = scrollElement.offsetHeight;\n    const scrollPosition = ev.detail.scrollTop;\n    this.scroll_position = scrollPosition / (totalContentHeight - viewportHeight);\n    */\n    this.scroll_position = ev.detail.scrollTop;      \n  }\n\n  on_rate_yourself_toggle_change(oid:string) {\n//    const new_rating = this.p.own_ratings_map.get(oid).get(this.p.myvid);\n    // update delegation data:\n    this.G.Del.update_my_delegation(this.pid, oid, !this.rate_yourself_toggle[oid]);\n    // update slider value:\n//    this.get_slider(oid).value = new_rating.toString();\n    this.on_delegate_toggle_change();\n  }\n\n  on_delegate_toggle_change() {\n    // update n_delegated: // TODO: make more efficient\n    let sum = 0;\n    for (let [oid, b] of Object.entries(this.rate_yourself_toggle)) {\n      if (!b) sum++;\n    }\n    this.n_delegated = sum;\n  }\n\n  show_stats() { \n    /** update pies and bars, but not order! */\n    if (!this.ready) {\n      return\n    }\n    this.G.L.entry(\"PollPage.show_stats\");\n    const p = this.p, T = p.T, myvid = p.myvid, \n          approval_scores_map = T.approval_scores_map,\n          shares_map = T.shares_map, approvals_map = T.approvals_map;\n    this.votedfor = T.votes_map.get(this.p.myvid);\n    for (const oid of p.oids) {\n      // FIXME: bar and pie are sometimes null here, but not when running the getElementById in the console. why?\n      const a = (approval_scores_map.get(oid) / T.n_not_abstaining) || 0,\n            share = shares_map.get(oid),\n            bar = <SVGRectElement><unknown>document.getElementById('bar_'+oid),\n            pie = <SVGPathElement><unknown>document.getElementById('pie_'+oid),\n            R = this.pieradius,\n            dx = R * Math.sin(this.two_pi * share),\n            dy = R * (1 - Math.cos(this.two_pi * share)),\n            more_than_180_degrees_flag = share > 0.5 ? 1 : 0; \n      this.approved[oid] = approvals_map.get(oid).get(myvid);\n      if (bar) {\n        bar.width.baseVal.valueAsString = (100 * a).toString() + '%';\n        bar.x.baseVal.valueAsString = (100 * (1 - a)).toString() + '%';\n      } else {\n        this.G.L.warn(\"PollPage.show_stats couldn't change slider bar\", oid);\n      }\n      if (pie) {\n        if (share < 1) {\n          pie.setAttribute('d', \"M 21,25 l 0,-\"+R+\" a \"+R+\" \"+R+\" 0 \"+more_than_180_degrees_flag+\" 1 \"+dx+\" \"+dy+\" Z\");\n        } else { // a full circle\n          pie.setAttribute('d', \"M 21,25 l 0,-20 a 20 20 0 1 1 0 \"+(2*R)+\" a 20 20 0 1 1 0 \"+(-2*R)+\" Z\");\n        }\n      } else {\n        this.G.L.warn(\"PollPage.show_stats couldn't change pie piece\", oid);\n      }\n      this.set_slider_color(oid, p.get_my_proxy_rating(oid));\n      if (this.rate_yourself_toggle[oid]) {\n        // update dashed needle showing delegate's rating\n        const needle = <SVGLineElement><unknown>document.getElementById('del_needle_'+oid),\n              knob = <SVGCircleElement><unknown>document.getElementById('del_knob_'+oid),\n              delegate_vid = this.G.Del.get_potential_effective_delegate(this.pid, oid);\n//        this.G.L.trace(\"PollPage.show_stats needle know delegate_vid\", needle, knob, delegate_vid);\n        if (delegate_vid) {\n          const rating = (this.p.proxy_ratings_map.get(oid)||new Map()).get(delegate_vid)||0;\n          this.G.L.trace(\"PollPage.show_stats rating\", rating);\n          if (needle) {\n            needle.x2.baseVal.valueAsString = (rating).toString() + '%';\n          }\n          if (knob) {\n            knob.cx.baseVal.valueAsString = (rating).toString() + '%';\n          }    \n        }\n      }\n    }\n  }\n\n  listeners: Map<any, any[]> = new Map(); // cache for event listeners used in update_order\n  final_rand: number = 0;\n\n  async update_order(force=false) {\n    // TODO: rather have this triggered by tally function!\n    if (this.oidsorted.length != this.p.oids.length) {\n      this.needs_refresh = true;\n    } else {\n      for (let i in this.oidsorted) { // loops over the indices\n        if (this.oidsorted[i] != this.p.T.oids_descending[i]) {\n  //        this.G.L.trace(\"PollPage.update_order\", this.oidsorted[i], this.p.T.oids_descending[i]);\n          this.needs_refresh = true;\n          break;\n        }\n      }  \n    }\n    if (force || (this.show_live && this.needs_refresh && !(this.refresh_paused) && !this.dragged_oid)) {\n      if (!force) {\n        const loadingElement = await this.loadingController.create({\n          message: this.translate.instant('poll.sorting'),\n          spinner: 'crescent',\n          duration: 100\n        });\n        await loadingElement.present();\n        await loadingElement.onDidDismiss();\n      }\n      // now actually tell html to use the new ordering:\n      this.oidsorted = [...this.p.T.oids_descending];\n      this.sortingcounter++;\n      this.needs_refresh = false;\n      setTimeout(()=>{\n        this.show_stats.bind(this)();\n        // add event listeners to catch events outside knob also on Android:\n        for (let i in this.oidsorted) {\n          const oid = this.oidsorted[i],\n                col = document.getElementById('_slider_'+this.oidsorted[i]+\"_\"+this.sortingcounter),\n                // new event listeners:\n                l1 = (ev => { this.onRatingColPointerdown.bind(this)(oid, ev) }),\n                l2 = (ev => { this.onRatingColPointerup.bind(this)(oid, ev) }),\n                l3 = (ev => { this.onRatingColTouchstart.bind(this)(oid, ev) }),\n                l4 = (ev => { this.onRatingColTouchup.bind(this)(oid, ev) });\n          if (!!col) {\n            if (this.listeners.has(col)) {\n              // remove previous listeners since they might belong to a different oid:\n              this.G.L.trace(\"PollPage.update_order removing old event listeners\");\n              const old = this.listeners.get(col);\n              col.removeEventListener(\"pointerdown\", old[0], true);\n              col.removeEventListener(\"pointerup\", old[1], true);\n              col.removeEventListener(\"touchstart\", old[2], true);\n              col.removeEventListener(\"touchup\", old[3], true);\n            }\n            // add new listeners for this oid:\n            col.addEventListener(\"pointerdown\", l1, true);\n            col.addEventListener(\"pointerup\", l2, true);\n            col.addEventListener(\"touchstart\", l3 , true);\n            col.addEventListener(\"touchup\", l4, true);\n            this.listeners.set(col, [l1, l2, l3, l4]);  \n          }\n        }  \n        //window.alert(\"updated\");\n        this.G.L.trace(\"PollPage.update_order registered event listeners\", this.sortingcounter);\n      }, 100);\n    } \n  }\n\n  set_slider_color(oid: string, value: number) {\n    this.slidercolor[oid] = \n      (value == 0) ? 'vodlered' : \n      (this.votedfor == oid) ? 'vodledarkgreen' :\n      (value + ((this.p.T.approval_scores_map.get(oid) / this.p.T.n_not_abstaining) || 0) * 100 <= 100) ? 'vodleblue' : \n      'vodlegreen';\n  }\n\n  // CONTROLS:\n\n  toggle_show_live() {\n    this.show_live = !this.show_live;\n    if (this.show_live) {\n      this.update_order();\n    }\n  }\n\n  expand(oid: string) {\n    this.option_expanded[oid] = !this.option_expanded[oid];\n  }\n\n  // rating slider:\n  // TODO: 1 second after any change to a rating, wait another second if the pointer/mouse is currently down, else call rating_change_ended().\n\n  get_slider(oid: string) {\n    this.G.L.trace(\"PollPage.get_slider \", this.sortingcounter);\n    return <HTMLInputElement>document.getElementById('slider_'+oid+\"_\"+this.sortingcounter);\n  }\n\n  set_slider_values() {\n    /** update slider knob positions to current proxy ratings from cache */\n    for (let oid of this.p.oids) {\n      this.get_slider(oid).value = this.p.proxy_ratings_map.get(oid).get(this.p.myvid).toString();\n    }\n  }\n\n  get_slider_value(oid: string) {\n    /** get slider knob position */\n    const slider = this.get_slider(oid);\n    return !slider ? 0 : Number(slider.value);\n  }\n\n  apply_sliders_rating(oid: string) {\n    /** update own rating in cache on basis of slider knob position,\n     *  but don't store it in the database yet (see also rating_change_ended()).\n     */\n    if (!this.delegate || this.rate_yourself_toggle[oid]) {\n      this.p.set_my_own_rating(oid, Math.round(this.get_slider_value(oid)), false);\n    }\n    this.show_stats();\n  }\n\n  onRatingSliderFocus(oid: string): boolean {\n    /** called as soon as range slider gets focus */\n    this.G.L.entry(\"PollPage.onRatingSliderFocus\");\n    return true;\n  }\n\n  onRatingSliderChange(oid: string): boolean {\n    /** called whenever a slider is moved */\n    var slider = this.get_slider(oid),\n        value = Number(slider.value);\n    // window.alert(\"onRatingChange \" + value);\n    this.set_slider_color(oid, value);\n    this.apply_sliders_rating(oid);\n    return true;\n  }\n\n  onRatingSliderBlur(oid: string): boolean {\n    /** called when the slider loses focus */\n    this.G.L.entry(\"PollPage.onRatingSliderBlur\");\n    this.rating_change_ended(oid);\n    return true;\n  }\n\n  rating_change_ended(oid: string) {\n    /** Called right after releasing the slider. \n     *  Stores slider position in own rating cache AND database. */\n    // TODO: make sure this is really always called right after releasing the slider!\n    this.G.L.entry(\"PollPage.rating_change_ended\");\n    this.p.have_acted = true;\n    if (!this.delegate || this.rate_yourself_toggle[oid]) {\n      this.p.set_my_own_rating(oid, Math.round(this.get_slider_value(oid)), true);\n    }\n    this.update_order();\n    this.G.D.save_state();\n  }\n\n  dragged_oid: string = undefined; // used in onRatingColPointerdown\n\n  // The following three handlers prevent the slider from responding when pointer is not on knob:\n  \n  onRatingColPointerdown(oid: string, ev: Event): boolean {\n    /** event listener called when user starts clicking slider */\n    this.p.end_if_past_due();\n    if (!this.p.allow_voting) return false;\n    this.dragged_oid = oid;\n    const pos = this.get_knob_pos(oid), x = !ev ? 0 : (ev instanceof PointerEvent) ? (<PointerEvent>ev).clientX : (<TouchEvent>ev).touches[0].clientX;\n    this.G.L.entry(\"onRatingColPointerdown\", this.sortingcounter, oid, this.p.options[oid].name, x, pos);\n    // window.alert(\"onRatingColPointerdown \" + pos.left + \" \" + x + \" \" + pos.right);\n    if ((x < pos.left) || (x > pos.right)) {\n      this.swallow_event(ev);\n      return false;\n    }\n    return true;\n  }\n\n  onRatingColTouchstart(oid: string, ev: Event): boolean {\n    /** event listener called when user starts touching slider */\n    this.p.end_if_past_due();\n    if (!this.p.allow_voting) return false;\n    this.dragged_oid = oid;\n    const pos = this.get_knob_pos(oid), x = !ev ? 0 : (ev instanceof PointerEvent) ? (<PointerEvent>ev).clientX : (<TouchEvent>ev).touches[0].clientX;\n    this.G.L.entry(\"onRatingColTouchstart\", oid, x, pos);\n    // window.alert(\"onRatingColTouchstart \" + pos.left + \" \" + x + \" \" + pos.right);\n    if ((x < pos.left) || (x > pos.right)) {\n      this.swallow_event(ev);\n      return false;\n    }\n    return true;\n  }\n\n  onRatingColPointerup(oid: string, ev: Event): boolean {\n    /** event listener called when user stops clicking slider */\n    this.p.end_if_past_due();\n    if (!this.p.allow_voting) return false;\n    // FIXME: not always firing on Android if click is too short\n    this.G.L.entry(\"onRatingColPointerup\", oid, this.dragged_oid);\n    if (oid != this.dragged_oid) {\n      this.swallow_event(ev);\n      this.dragged_oid = null;\n      this.update_order();\n      return false;\n    } else {\n      this.rating_change_ended(oid);\n      this.dragged_oid = null;\n      return true;\n    }\n  }\n\n  onRatingColTouchup(oid: string, ev: Event): boolean {\n    /** event listener called when user stops touching slider */\n    this.p.end_if_past_due();\n    if (!this.p.allow_voting) return false;\n    // FIXME: not always firing on Android if click is too short\n    this.G.L.entry(\"onRatingColTouchup\", oid, this.dragged_oid);\n    if (oid != this.dragged_oid) {\n      this.swallow_event(ev);\n      this.dragged_oid = null;\n      this.update_order();\n      return false;\n    } else {\n      this.rating_change_ended(oid);\n      this.dragged_oid = null;\n      return true;\n    }\n  }\n\n  onRatingColClick(oid: string, ev: MouseEvent): boolean {\n    /** event listener called after clicking or touching slider has ended */\n    this.p.end_if_past_due();\n    if (!this.p.allow_voting) return false;\n    const pos = this.get_knob_pos(oid), x = ev.clientX;\n    this.G.L.entry(\"onRatingColClick\", oid, this.p.options[oid].name, x, pos);\n    // window.alert(\"onRatingColClick \" + pos.left + \" \" + x + \" \" + pos.right);\n    if ((x < pos.left) || (x > pos.right)) {\n      this.swallow_event(ev);\n      return false;\n    }\n    return true;\n  }\n\n  onBodyPointerup(ev: Event): boolean {\n    /** event listener called when click ended outside slider area */\n    this.p.end_if_past_due();\n    if (!this.p.allow_voting) return false;\n    // if clicking started in a slider, call that slider's pointerup handler:\n    if (this.dragged_oid) {\n      this.G.L.entry(\"onBodyPointerup\");\n      this.onRatingColPointerup(this.dragged_oid, ev);\n    }\n    return true;\n  }\n\n  onBodyTouchup(ev: Event): boolean {\n    /** event listener called when touching ended outside slider area */\n    this.p.end_if_past_due();\n    if (!this.p.allow_voting) return false;\n    // if touching started in a slider, call that slider's touchup handler:\n    if (this.dragged_oid) {\n      this.G.L.entry(\"onBodyTouchup\");\n      this.onRatingColTouchup(this.dragged_oid, ev);\n    }\n    return true;\n  }\n\n  get_knob_pos(oid: string) {\n    /** get the slider knob position (left and right pixel coordinates)\n     *  to be able to compare with click/touch coordinate:\n     */\n    const slider = this.get_slider(oid), \n          slider_rect = this.get_screen_coords(slider),\n          value = this.get_slider_value(oid),\n          knob_center_x = slider_rect.left + (slider_rect.right - slider_rect.left) * value / 100;\n    this.G.L.trace(\"pointer slider value\", value);\n    return {left: knob_center_x - 20, right: knob_center_x + 20}\n  }\n\n  get_screen_coords(element: HTMLElement): DOMRect {\n    /** get the screen coordinates of an HTML element */\n    if (!element) return new DOMRect();\n    return element.getBoundingClientRect();\n  }\n\n  swallow_event(ev: Event) {\n    /** Stop any form of propagation of an event. \n     *  Used to disable slider reaction outside knob. */\n    this.G.L.trace(\"swallowing event\", ev);\n    // window.alert(\"swallow 1\");\n    // FIXME: does not work in Android app and Chrome-simulated mobile devices yet!\n    if (!!ev) {\n      // window.alert(\"swallow 2\");\n      ev.stopPropagation();\n      ev.stopImmediatePropagation();\n      ev.preventDefault();  \n    }\n  }\n\n  // DIALOGS:\n\n  currentModal = null;\n\n  async checkmark_clicked() {\n    const confirm = await this.alertCtrl.create({ \n      message: this.translate.instant(\n        'poll.checkmark-clicked'), \n      buttons: [\n        { \n          text: this.translate.instant('OK'),\n          role: 'Ok', \n          handler: () => {\n          } \n        } \n      ] \n    }); \n    await confirm.present(); \n  }\n\n  delegate_dialog(event: Event) {\n    /** open the delegation dialog popover */\n    this.p.end_if_past_due();\n    if (this.p.allow_voting) {\n      this.popover.create({\n        event, \n        component: DelegationDialogPage, \n        translucent: true,\n        showBackdrop: true,\n        componentProps: {parent: this}\n      })\n      .then((popoverElement)=>{\n        popoverElement.present();\n      });\n    }\n  }\n\n  async assist_dialog() {\n    /** open the assist modal */\n    this.p.end_if_past_due();\n    if (this.p.allow_voting) {\n      const modal = await this.modalController.create({\n          component: AssistPage, \n  //        translucent: true,\n  //        cssClass: 'assist',\n  //        showBackdrop: true,\n          componentProps: {P: this},\n          backdropDismiss: false\n  //        swipeToClose: true,\n  //        presentingElement: this.routerOutlet.nativeEl\n      });\n      modal.present();\n\n      this.currentModal = modal;\n    }\n  }\n  \n  async analysis_dialog() {\n    /** open the analysis modal */\n    this.p.end_if_past_due();\n    const modal = await this.modalController.create({\n        component: AnalysisPage, \n//        translucent: true,\n        cssClass: 'analysis',\n//        showBackdrop: true,\n        componentProps: {P: this},\n        backdropDismiss: true\n//        swipeToClose: true,\n//        presentingElement: this.routerOutlet.nativeEl\n    });\n    modal.present();\n\n    this.currentModal = modal;\n  }\n\n  explain_approval_dialog(oid: string) {\n    /** open the explanation dialog modal */\n    this.modalController.create({\n        component: ExplainApprovalPage, \n//        translucent: true,\n        cssClass: 'explain-approval',\n        showBackdrop: true,\n        componentProps: {parent: this, oid: oid},\n        swipeToClose: true,\n        presentingElement: this.routerOutlet.nativeEl\n    })\n    .then((modalElement)=>{\n      modalElement.present();\n    })\n  }\n\n  async revoke_delegation_dialog() { \n    /** open the delegation revokation confirmation dialog alert */\n    this.p.end_if_past_due();\n    if (this.p.allow_voting) {\n      const confirm = await this.alertCtrl.create({ \n        message: this.translate.instant(\n          'poll.revoke_delegation', {nickname: this.delegate}), \n        buttons: [\n          { \n            text: this.translate.instant('cancel'), \n            role: 'Cancel',\n            handler: () => { \n              console.log('Confirm Cancel.');  \n            } \n          },\n          { \n            text: this.translate.instant('OK'),\n            role: 'Ok', \n            handler: () => {\n              this.G.Del.revoke_delegation(this.pid, this.G.Del.get_my_outgoing_dids_cache(this.pid).get(\"*\"), '*');\n              this.delegate = null;\n              this.delegation_status = 'none';\n              this.update_delegation_info();\n              this.G.D.save_state();\n            } \n          } \n        ] \n      }); \n      await confirm.present(); \n    }\n  } \n\n  add_option(event: Event) {\n    /** open the add option dialog popover */\n    this.p.end_if_past_due();\n    if (this.p.allow_voting) {\n      // TODO: also add delegation if ospec.type == \"-\"?\n      this.popover.create({\n        event, // TODO: use this from Ionic v6 on!\n        side: 'top', // TODO: use this from Ionic v6 on!\n        component: AddoptionDialogPage, \n        translucent: true,\n        showBackdrop: true,\n        cssClass: 'add-option-class',\n        componentProps: {parent: this}\n      })\n      .then((popoverElement)=>{\n        popoverElement.present();\n      });\n    }\n  }\n\n  // Glossary buttons:\n\n  show_glossary = false;\n  glossary_key: string;\n\n  glossary(key: string) {\n    this.glossary_key = key;\n    this.show_glossary = true;\n  }\n  dismiss_glossary() {\n    this.show_glossary=false;\n  }\n\n}\n","/*\n(C) Copyright 20152022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PollPage } from './poll.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PollPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PollPageRoutingModule {}\n","/*\n(C) Copyright 20152022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PollPageRoutingModule } from './poll-routing.module';\nimport { SharedcomponentsModule } from '../sharedcomponents/sharedcomponents.module';\n\nimport { PollPage } from './poll.page';\nexport { PollPage } from './poll.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PollPageRoutingModule,\n    SharedcomponentsModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [PollPage]\n})\nexport class PollPageModule {}\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-selection'), require('d3-transition')) :\n\ttypeof define === 'function' && define.amd ? define(['exports', 'd3-selection', 'd3-transition'], factory) :\n\t(factory((global.venn = {}),global.d3,global.d3));\n}(this, (function (exports,d3Selection,d3Transition) { 'use strict';\n\nvar SMALL = 1e-10;\n\n/** Returns the intersection area of a bunch of circles (where each circle\n is an object having an x,y and radius property) */\nfunction intersectionArea(circles, stats) {\n    // get all the intersection points of the circles\n    var intersectionPoints = getIntersectionPoints(circles);\n\n    // filter out points that aren't included in all the circles\n    var innerPoints = intersectionPoints.filter(function (p) {\n        return containedInCircles(p, circles);\n    });\n\n    var arcArea = 0, polygonArea = 0, arcs = [], i;\n\n    // if we have intersection points that are within all the circles,\n    // then figure out the area contained by them\n    if (innerPoints.length > 1) {\n        // sort the points by angle from the center of the polygon, which lets\n        // us just iterate over points to get the edges\n        var center = getCenter(innerPoints);\n        for (i = 0; i < innerPoints.length; ++i ) {\n            var p = innerPoints[i];\n            p.angle = Math.atan2(p.x - center.x, p.y - center.y);\n        }\n        innerPoints.sort(function(a,b) { return b.angle - a.angle;});\n\n        // iterate over all points, get arc between the points\n        // and update the areas\n        var p2 = innerPoints[innerPoints.length - 1];\n        for (i = 0; i < innerPoints.length; ++i) {\n            var p1 = innerPoints[i];\n\n            // polygon area updates easily ...\n            polygonArea += (p2.x + p1.x) * (p1.y - p2.y);\n\n            // updating the arc area is a little more involved\n            var midPoint = {x : (p1.x + p2.x) / 2,\n                            y : (p1.y + p2.y) / 2},\n                arc = null;\n\n            for (var j = 0; j < p1.parentIndex.length; ++j) {\n                if (p2.parentIndex.indexOf(p1.parentIndex[j]) > -1) {\n                    // figure out the angle halfway between the two points\n                    // on the current circle\n                    var circle = circles[p1.parentIndex[j]],\n                        a1 = Math.atan2(p1.x - circle.x, p1.y - circle.y),\n                        a2 = Math.atan2(p2.x - circle.x, p2.y - circle.y);\n\n                    var angleDiff = (a2 - a1);\n                    if (angleDiff < 0) {\n                        angleDiff += 2*Math.PI;\n                    }\n\n                    // and use that angle to figure out the width of the\n                    // arc\n                    var a = a2 - angleDiff/2,\n                        width = distance(midPoint, {\n                            x : circle.x + circle.radius * Math.sin(a),\n                            y : circle.y + circle.radius * Math.cos(a)\n                        });\n\n                    // clamp the width to the largest is can actually be\n                    // (sometimes slightly overflows because of FP errors)\n                    if (width > circle.radius * 2) {\n                        width = circle.radius * 2;\n                    }\n\n                    // pick the circle whose arc has the smallest width\n                    if ((arc === null) || (arc.width > width)) {\n                        arc = { circle : circle,\n                                width : width,\n                                p1 : p1,\n                                p2 : p2};\n                    }\n                }\n            }\n\n            if (arc !== null) {\n                arcs.push(arc);\n                arcArea += circleArea(arc.circle.radius, arc.width);\n                p2 = p1;\n            }\n        }\n    } else {\n        // no intersection points, is either disjoint - or is completely\n        // overlapped. figure out which by examining the smallest circle\n        var smallest = circles[0];\n        for (i = 1; i < circles.length; ++i) {\n            if (circles[i].radius < smallest.radius) {\n                smallest = circles[i];\n            }\n        }\n\n        // make sure the smallest circle is completely contained in all\n        // the other circles\n        var disjoint = false;\n        for (i = 0; i < circles.length; ++i) {\n            if (distance(circles[i], smallest) > Math.abs(smallest.radius - circles[i].radius)) {\n                disjoint = true;\n                break;\n            }\n        }\n\n        if (disjoint) {\n            arcArea = polygonArea = 0;\n\n        } else {\n            arcArea = smallest.radius * smallest.radius * Math.PI;\n            arcs.push({circle : smallest,\n                       p1: { x: smallest.x,        y : smallest.y + smallest.radius},\n                       p2: { x: smallest.x - SMALL, y : smallest.y + smallest.radius},\n                       width : smallest.radius * 2 });\n        }\n    }\n\n    polygonArea /= 2;\n    if (stats) {\n        stats.area = arcArea + polygonArea;\n        stats.arcArea = arcArea;\n        stats.polygonArea = polygonArea;\n        stats.arcs = arcs;\n        stats.innerPoints = innerPoints;\n        stats.intersectionPoints = intersectionPoints;\n    }\n\n    return arcArea + polygonArea;\n}\n\n/** returns whether a point is contained by all of a list of circles */\nfunction containedInCircles(point, circles) {\n    for (var i = 0; i < circles.length; ++i) {\n        if (distance(point, circles[i]) > circles[i].radius + SMALL) {\n            return false;\n        }\n    }\n    return true;\n}\n\n/** Gets all intersection points between a bunch of circles */\nfunction getIntersectionPoints(circles) {\n    var ret = [];\n    for (var i = 0; i < circles.length; ++i) {\n        for (var j = i + 1; j < circles.length; ++j) {\n            var intersect = circleCircleIntersection(circles[i],\n                                                          circles[j]);\n            for (var k = 0; k < intersect.length; ++k) {\n                var p = intersect[k];\n                p.parentIndex = [i,j];\n                ret.push(p);\n            }\n        }\n    }\n    return ret;\n}\n\n/** Circular segment area calculation. See http://mathworld.wolfram.com/CircularSegment.html */\nfunction circleArea(r, width) {\n    return r * r * Math.acos(1 - width/r) - (r - width) * Math.sqrt(width * (2 * r - width));\n}\n\n/** euclidean distance between two points */\nfunction distance(p1, p2) {\n    return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) +\n                     (p1.y - p2.y) * (p1.y - p2.y));\n}\n\n\n/** Returns the overlap area of two circles of radius r1 and r2 - that\nhave their centers separated by distance d. Simpler faster\ncircle intersection for only two circles */\nfunction circleOverlap(r1, r2, d) {\n    // no overlap\n    if (d >= r1 + r2) {\n        return 0;\n    }\n\n    // completely overlapped\n    if (d <= Math.abs(r1 - r2)) {\n        return Math.PI * Math.min(r1, r2) * Math.min(r1, r2);\n    }\n\n    var w1 = r1 - (d * d - r2 * r2 + r1 * r1) / (2 * d),\n        w2 = r2 - (d * d - r1 * r1 + r2 * r2) / (2 * d);\n    return circleArea(r1, w1) + circleArea(r2, w2);\n}\n\n/** Given two circles (containing a x/y/radius attributes),\nreturns the intersecting points if possible.\nnote: doesn't handle cases where there are infinitely many\nintersection points (circles are equivalent):, or only one intersection point*/\nfunction circleCircleIntersection(p1, p2) {\n    var d = distance(p1, p2),\n        r1 = p1.radius,\n        r2 = p2.radius;\n\n    // if to far away, or self contained - can't be done\n    if ((d >= (r1 + r2)) || (d <= Math.abs(r1 - r2))) {\n        return [];\n    }\n\n    var a = (r1 * r1 - r2 * r2 + d * d) / (2 * d),\n        h = Math.sqrt(r1 * r1 - a * a),\n        x0 = p1.x + a * (p2.x - p1.x) / d,\n        y0 = p1.y + a * (p2.y - p1.y) / d,\n        rx = -(p2.y - p1.y) * (h / d),\n        ry = -(p2.x - p1.x) * (h / d);\n\n    return [{x: x0 + rx, y : y0 - ry },\n            {x: x0 - rx, y : y0 + ry }];\n}\n\n/** Returns the center of a bunch of points */\nfunction getCenter(points) {\n    var center = {x: 0, y: 0};\n    for (var i =0; i < points.length; ++i ) {\n        center.x += points[i].x;\n        center.y += points[i].y;\n    }\n    center.x /= points.length;\n    center.y /= points.length;\n    return center;\n}\n\n/** finds the zeros of a function, given two starting points (which must\n * have opposite signs */\nfunction bisect(f, a, b, parameters) {\n    parameters = parameters || {};\n    var maxIterations = parameters.maxIterations || 100,\n        tolerance = parameters.tolerance || 1e-10,\n        fA = f(a),\n        fB = f(b),\n        delta = b - a;\n\n    if (fA * fB > 0) {\n        throw \"Initial bisect points must have opposite signs\";\n    }\n\n    if (fA === 0) return a;\n    if (fB === 0) return b;\n\n    for (var i = 0; i < maxIterations; ++i) {\n        delta /= 2;\n        var mid = a + delta,\n            fMid = f(mid);\n\n        if (fMid * fA >= 0) {\n            a = mid;\n        }\n\n        if ((Math.abs(delta) < tolerance) || (fMid === 0)) {\n            return mid;\n        }\n    }\n    return a + delta;\n}\n\n// need some basic operations on vectors, rather than adding a dependency,\n// just define here\nfunction zeros(x) { var r = new Array(x); for (var i = 0; i < x; ++i) { r[i] = 0; } return r; }\nfunction zerosM(x,y) { return zeros(x).map(function() { return zeros(y); }); }\n\nfunction dot(a, b) {\n    var ret = 0;\n    for (var i = 0; i < a.length; ++i) {\n        ret += a[i] * b[i];\n    }\n    return ret;\n}\n\nfunction norm2(a)  {\n    return Math.sqrt(dot(a, a));\n}\n\nfunction scale(ret, value, c) {\n    for (var i = 0; i < value.length; ++i) {\n        ret[i] = value[i] * c;\n    }\n}\n\nfunction weightedSum(ret, w1, v1, w2, v2) {\n    for (var j = 0; j < ret.length; ++j) {\n        ret[j] = w1 * v1[j] + w2 * v2[j];\n    }\n}\n\n/** minimizes a function using the downhill simplex method */\nfunction nelderMead(f, x0, parameters) {\n    parameters = parameters || {};\n\n    var maxIterations = parameters.maxIterations || x0.length * 200,\n        nonZeroDelta = parameters.nonZeroDelta || 1.05,\n        zeroDelta = parameters.zeroDelta || 0.001,\n        minErrorDelta = parameters.minErrorDelta || 1e-6,\n        minTolerance = parameters.minErrorDelta || 1e-5,\n        rho = (parameters.rho !== undefined) ? parameters.rho : 1,\n        chi = (parameters.chi !== undefined) ? parameters.chi : 2,\n        psi = (parameters.psi !== undefined) ? parameters.psi : -0.5,\n        sigma = (parameters.sigma !== undefined) ? parameters.sigma : 0.5,\n        maxDiff;\n\n    // initialize simplex.\n    var N = x0.length,\n        simplex = new Array(N + 1);\n    simplex[0] = x0;\n    simplex[0].fx = f(x0);\n    simplex[0].id = 0;\n    for (var i = 0; i < N; ++i) {\n        var point = x0.slice();\n        point[i] = point[i] ? point[i] * nonZeroDelta : zeroDelta;\n        simplex[i+1] = point;\n        simplex[i+1].fx = f(point);\n        simplex[i+1].id = i+1;\n    }\n\n    function updateSimplex(value) {\n        for (var i = 0; i < value.length; i++) {\n            simplex[N][i] = value[i];\n        }\n        simplex[N].fx = value.fx;\n    }\n\n    var sortOrder = function(a, b) { return a.fx - b.fx; };\n\n    var centroid = x0.slice(),\n        reflected = x0.slice(),\n        contracted = x0.slice(),\n        expanded = x0.slice();\n\n    for (var iteration = 0; iteration < maxIterations; ++iteration) {\n        simplex.sort(sortOrder);\n\n        if (parameters.history) {\n            // copy the simplex (since later iterations will mutate) and\n            // sort it to have a consistent order between iterations\n            var sortedSimplex = simplex.map(function (x) {\n                var state = x.slice();\n                state.fx = x.fx;\n                state.id = x.id;\n                return state;\n            });\n            sortedSimplex.sort(function(a,b) { return a.id - b.id; });\n\n            parameters.history.push({x: simplex[0].slice(),\n                                     fx: simplex[0].fx,\n                                     simplex: sortedSimplex});\n        }\n\n        maxDiff = 0;\n        for (i = 0; i < N; ++i) {\n            maxDiff = Math.max(maxDiff, Math.abs(simplex[0][i] - simplex[1][i]));\n        }\n\n        if ((Math.abs(simplex[0].fx - simplex[N].fx) < minErrorDelta) &&\n            (maxDiff < minTolerance)) {\n            break;\n        }\n\n        // compute the centroid of all but the worst point in the simplex\n        for (i = 0; i < N; ++i) {\n            centroid[i] = 0;\n            for (var j = 0; j < N; ++j) {\n                centroid[i] += simplex[j][i];\n            }\n            centroid[i] /= N;\n        }\n\n        // reflect the worst point past the centroid  and compute loss at reflected\n        // point\n        var worst = simplex[N];\n        weightedSum(reflected, 1+rho, centroid, -rho, worst);\n        reflected.fx = f(reflected);\n\n        // if the reflected point is the best seen, then possibly expand\n        if (reflected.fx < simplex[0].fx) {\n            weightedSum(expanded, 1+chi, centroid, -chi, worst);\n            expanded.fx = f(expanded);\n            if (expanded.fx < reflected.fx) {\n                updateSimplex(expanded);\n            }  else {\n                updateSimplex(reflected);\n            }\n        }\n\n        // if the reflected point is worse than the second worst, we need to\n        // contract\n        else if (reflected.fx >= simplex[N-1].fx) {\n            var shouldReduce = false;\n\n            if (reflected.fx > worst.fx) {\n                // do an inside contraction\n                weightedSum(contracted, 1+psi, centroid, -psi, worst);\n                contracted.fx = f(contracted);\n                if (contracted.fx < worst.fx) {\n                    updateSimplex(contracted);\n                } else {\n                    shouldReduce = true;\n                }\n            } else {\n                // do an outside contraction\n                weightedSum(contracted, 1-psi * rho, centroid, psi*rho, worst);\n                contracted.fx = f(contracted);\n                if (contracted.fx < reflected.fx) {\n                    updateSimplex(contracted);\n                } else {\n                    shouldReduce = true;\n                }\n            }\n\n            if (shouldReduce) {\n                // if we don't contract here, we're done\n                if (sigma >= 1) break;\n\n                // do a reduction\n                for (i = 1; i < simplex.length; ++i) {\n                    weightedSum(simplex[i], 1 - sigma, simplex[0], sigma, simplex[i]);\n                    simplex[i].fx = f(simplex[i]);\n                }\n            }\n        } else {\n            updateSimplex(reflected);\n        }\n    }\n\n    simplex.sort(sortOrder);\n    return {fx : simplex[0].fx,\n            x : simplex[0]};\n}\n\n/// searches along line 'pk' for a point that satifies the wolfe conditions\n/// See 'Numerical Optimization' by Nocedal and Wright p59-60\n/// f : objective function\n/// pk : search direction\n/// current: object containing current gradient/loss\n/// next: output: contains next gradient/loss\n/// returns a: step size taken\nfunction wolfeLineSearch(f, pk, current, next, a, c1, c2) {\n    var phi0 = current.fx, phiPrime0 = dot(current.fxprime, pk),\n        phi = phi0, phi_old = phi0,\n        phiPrime = phiPrime0,\n        a0 = 0;\n\n    a = a || 1;\n    c1 = c1 || 1e-6;\n    c2 = c2 || 0.1;\n\n    function zoom(a_lo, a_high, phi_lo) {\n        for (var iteration = 0; iteration < 16; ++iteration) {\n            a = (a_lo + a_high)/2;\n            weightedSum(next.x, 1.0, current.x, a, pk);\n            phi = next.fx = f(next.x, next.fxprime);\n            phiPrime = dot(next.fxprime, pk);\n\n            if ((phi > (phi0 + c1 * a * phiPrime0)) ||\n                (phi >= phi_lo)) {\n                a_high = a;\n\n            } else  {\n                if (Math.abs(phiPrime) <= -c2 * phiPrime0) {\n                    return a;\n                }\n\n                if (phiPrime * (a_high - a_lo) >=0) {\n                    a_high = a_lo;\n                }\n\n                a_lo = a;\n                phi_lo = phi;\n            }\n        }\n\n        return 0;\n    }\n\n    for (var iteration = 0; iteration < 10; ++iteration) {\n        weightedSum(next.x, 1.0, current.x, a, pk);\n        phi = next.fx = f(next.x, next.fxprime);\n        phiPrime = dot(next.fxprime, pk);\n        if ((phi > (phi0 + c1 * a * phiPrime0)) ||\n            (iteration && (phi >= phi_old))) {\n            return zoom(a0, a, phi_old);\n        }\n\n        if (Math.abs(phiPrime) <= -c2 * phiPrime0) {\n            return a;\n        }\n\n        if (phiPrime >= 0 ) {\n            return zoom(a, a0, phi);\n        }\n\n        phi_old = phi;\n        a0 = a;\n        a *= 2;\n    }\n\n    return a;\n}\n\nfunction conjugateGradient(f, initial, params) {\n    // allocate all memory up front here, keep out of the loop for perfomance\n    // reasons\n    var current = {x: initial.slice(), fx: 0, fxprime: initial.slice()},\n        next = {x: initial.slice(), fx: 0, fxprime: initial.slice()},\n        yk = initial.slice(),\n        pk, temp,\n        a = 1,\n        maxIterations;\n\n    params = params || {};\n    maxIterations = params.maxIterations || initial.length * 20;\n\n    current.fx = f(current.x, current.fxprime);\n    pk = current.fxprime.slice();\n    scale(pk, current.fxprime,-1);\n\n    for (var i = 0; i < maxIterations; ++i) {\n        a = wolfeLineSearch(f, pk, current, next, a);\n\n        // todo: history in wrong spot?\n        if (params.history) {\n            params.history.push({x: current.x.slice(),\n                                 fx: current.fx,\n                                 fxprime: current.fxprime.slice(),\n                                 alpha: a});\n        }\n\n        if (!a) {\n            // faiiled to find point that satifies wolfe conditions.\n            // reset direction for next iteration\n            scale(pk, current.fxprime, -1);\n\n        } else {\n            // update direction using PolakRibiere CG method\n            weightedSum(yk, 1, next.fxprime, -1, current.fxprime);\n\n            var delta_k = dot(current.fxprime, current.fxprime),\n                beta_k = Math.max(0, dot(yk, next.fxprime) / delta_k);\n\n            weightedSum(pk, beta_k, pk, -1, next.fxprime);\n\n            temp = current;\n            current = next;\n            next = temp;\n        }\n\n        if (norm2(current.fxprime) <= 1e-5) {\n            break;\n        }\n    }\n\n    if (params.history) {\n        params.history.push({x: current.x.slice(),\n                             fx: current.fx,\n                             fxprime: current.fxprime.slice(),\n                             alpha: a});\n    }\n\n    return current;\n}\n\n/** given a list of set objects, and their corresponding overlaps.\nupdates the (x, y, radius) attribute on each set such that their positions\nroughly correspond to the desired overlaps */\nfunction venn(areas, parameters) {\n    parameters = parameters || {};\n    parameters.maxIterations = parameters.maxIterations || 500;\n    var initialLayout = parameters.initialLayout || bestInitialLayout;\n    var loss = parameters.lossFunction || lossFunction;\n\n    // add in missing pairwise areas as having 0 size\n    areas = addMissingAreas(areas);\n\n    // initial layout is done greedily\n    var circles = initialLayout(areas, parameters);\n\n    // transform x/y coordinates to a vector to optimize\n    var initial = [], setids = [], setid;\n    for (setid in circles) {\n        if (circles.hasOwnProperty(setid)) {\n            initial.push(circles[setid].x);\n            initial.push(circles[setid].y);\n            setids.push(setid);\n        }\n    }\n\n    // optimize initial layout from our loss function\n    var solution = nelderMead(\n        function(values) {\n            var current = {};\n            for (var i = 0; i < setids.length; ++i) {\n                var setid = setids[i];\n                current[setid] = {x: values[2 * i],\n                                  y: values[2 * i + 1],\n                                  radius : circles[setid].radius,\n                                 // size : circles[setid].size\n                                 };\n            }\n            return loss(current, areas);\n        },\n        initial,\n        parameters);\n\n    // transform solution vector back to x/y points\n    var positions = solution.x;\n    for (var i = 0; i < setids.length; ++i) {\n        setid = setids[i];\n        circles[setid].x = positions[2 * i];\n        circles[setid].y = positions[2 * i + 1];\n    }\n\n    return circles;\n}\n\nvar SMALL$1 = 1e-10;\n\n/** Returns the distance necessary for two circles of radius r1 + r2 to\nhave the overlap area 'overlap' */\nfunction distanceFromIntersectArea(r1, r2, overlap) {\n    // handle complete overlapped circles\n    if (Math.min(r1, r2) * Math.min(r1,r2) * Math.PI <= overlap + SMALL$1) {\n        return Math.abs(r1 - r2);\n    }\n\n    return bisect(function(distance$$1) {\n        return circleOverlap(r1, r2, distance$$1) - overlap;\n    }, 0, r1 + r2);\n}\n\n/** Missing pair-wise intersection area data can cause problems:\n treating as an unknown means that sets will be laid out overlapping,\n which isn't what people expect. To reflect that we want disjoint sets\n here, set the overlap to 0 for all missing pairwise set intersections */\nfunction addMissingAreas(areas) {\n    areas = areas.slice();\n\n    // two circle intersections that aren't defined\n    var ids = [], pairs = {}, i, j, a, b;\n    for (i = 0; i < areas.length; ++i) {\n        var area = areas[i];\n        if (area.sets.length == 1) {\n            ids.push(area.sets[0]);\n        } else if (area.sets.length == 2) {\n            a = area.sets[0];\n            b = area.sets[1];\n            pairs[[a, b]] = true;\n            pairs[[b, a]] = true;\n        }\n    }\n    ids.sort(function(a, b) { return a > b; });\n\n    for (i = 0; i < ids.length; ++i) {\n        a = ids[i];\n        for (j = i + 1; j < ids.length; ++j) {\n            b = ids[j];\n            if (!([a, b] in pairs)) {\n                areas.push({'sets': [a, b],\n                            'size': 0});\n            }\n        }\n    }\n    return areas;\n}\n\n/// Returns two matrices, one of the euclidean distances between the sets\n/// and the other indicating if there are subset or disjoint set relationships\nfunction getDistanceMatrices(areas, sets, setids) {\n    // initialize an empty distance matrix between all the points\n    var distances = zerosM(sets.length, sets.length),\n        constraints = zerosM(sets.length, sets.length);\n\n    // compute required distances between all the sets such that\n    // the areas match\n    areas.filter(function(x) { return x.sets.length == 2; })\n        .map(function(current) {\n        var left = setids[current.sets[0]],\n            right = setids[current.sets[1]],\n            r1 = Math.sqrt(sets[left].size / Math.PI),\n            r2 = Math.sqrt(sets[right].size / Math.PI),\n            distance$$1 = distanceFromIntersectArea(r1, r2, current.size);\n\n        distances[left][right] = distances[right][left] = distance$$1;\n\n        // also update constraints to indicate if its a subset or disjoint\n        // relationship\n        var c = 0;\n        if (current.size + 1e-10 >= Math.min(sets[left].size,\n                                             sets[right].size)) {\n            c = 1;\n        } else if (current.size <= 1e-10) {\n            c = -1;\n        }\n        constraints[left][right] = constraints[right][left] = c;\n    });\n\n    return {distances: distances, constraints: constraints};\n}\n\n/// computes the gradient and loss simulatenously for our constrained MDS optimizer\nfunction constrainedMDSGradient(x, fxprime, distances, constraints) {\n    var loss = 0, i;\n    for (i = 0; i < fxprime.length; ++i) {\n        fxprime[i] = 0;\n    }\n\n    for (i = 0; i < distances.length; ++i) {\n        var xi = x[2 * i], yi = x[2 * i + 1];\n        for (var j = i + 1; j < distances.length; ++j) {\n            var xj = x[2 * j], yj = x[2 * j + 1],\n                dij = distances[i][j],\n                constraint = constraints[i][j];\n\n            var squaredDistance = (xj - xi) * (xj - xi) + (yj - yi) * (yj - yi),\n                distance$$1 = Math.sqrt(squaredDistance),\n                delta = squaredDistance - dij * dij;\n\n            if (((constraint > 0) && (distance$$1 <= dij)) ||\n                ((constraint < 0) && (distance$$1 >= dij))) {\n                continue;\n            }\n\n            loss += 2 * delta * delta;\n\n            fxprime[2*i]     += 4 * delta * (xi - xj);\n            fxprime[2*i + 1] += 4 * delta * (yi - yj);\n\n            fxprime[2*j]     += 4 * delta * (xj - xi);\n            fxprime[2*j + 1] += 4 * delta * (yj - yi);\n        }\n    }\n    return loss;\n}\n\n/// takes the best working variant of either constrained MDS or greedy\nfunction bestInitialLayout(areas, params) {\n    var initial = greedyLayout(areas, params);\n    var loss = params.lossFunction || lossFunction;\n\n    // greedylayout is sufficient for all 2/3 circle cases. try out\n    // constrained MDS for higher order problems, take its output\n    // if it outperforms. (greedy is aesthetically better on 2/3 circles\n    // since it axis aligns)\n    if (areas.length >= 8) {\n        var constrained  = constrainedMDSLayout(areas, params),\n            constrainedLoss = loss(constrained, areas),\n            greedyLoss = loss(initial, areas);\n\n        if (constrainedLoss + 1e-8 < greedyLoss) {\n            initial = constrained;\n        }\n    }\n    return initial;\n}\n\n/// use the constrained MDS variant to generate an initial layout\nfunction constrainedMDSLayout(areas, params) {\n    params = params || {};\n    var restarts = params.restarts || 10;\n\n    // bidirectionally map sets to a rowid  (so we can create a matrix)\n    var sets = [], setids = {}, i;\n    for (i = 0; i < areas.length; ++i ) {\n        var area = areas[i];\n        if (area.sets.length == 1) {\n            setids[area.sets[0]] = sets.length;\n            sets.push(area);\n        }\n    }\n\n    var matrices = getDistanceMatrices(areas, sets, setids),\n        distances = matrices.distances,\n        constraints = matrices.constraints;\n\n    // keep distances bounded, things get messed up otherwise.\n    // TODO: proper preconditioner?\n    var norm = norm2(distances.map(norm2))/(distances.length);\n    distances = distances.map(function (row) {\n        return row.map(function (value) { return value / norm; });});\n\n    var obj = function(x, fxprime) {\n        return constrainedMDSGradient(x, fxprime, distances, constraints);\n    };\n\n    var best, current;\n    for (i = 0; i < restarts; ++i) {\n        var initial = zeros(distances.length*2).map(Math.random);\n\n        current = conjugateGradient(obj, initial, params);\n        if (!best || (current.fx < best.fx)) {\n            best = current;\n        }\n    }\n    var positions = best.x;\n\n    // translate rows back to (x,y,radius) coordinates\n    var circles = {};\n    for (i = 0; i < sets.length; ++i) {\n        var set = sets[i];\n        circles[set.sets[0]] = {\n            x: positions[2*i] * norm,\n            y: positions[2*i + 1] * norm,\n            radius:  Math.sqrt(set.size / Math.PI)\n        };\n    }\n\n    if (params.history) {\n        for (i = 0; i < params.history.length; ++i) {\n            scale(params.history[i].x, norm);\n        }\n    }\n    return circles;\n}\n\n/** Lays out a Venn diagram greedily, going from most overlapped sets to\nleast overlapped, attempting to position each new set such that the\noverlapping areas to already positioned sets are basically right */\nfunction greedyLayout(areas, params) {\n    var loss = params && params.lossFunction ? params.lossFunction : lossFunction;\n    // define a circle for each set\n    var circles = {}, setOverlaps = {}, set;\n    for (var i = 0; i < areas.length; ++i) {\n        var area = areas[i];\n        if (area.sets.length == 1) {\n            set = area.sets[0];\n            circles[set] = {x: 1e10, y: 1e10,\n                            rowid: circles.length,\n                            size: area.size,\n                            radius: Math.sqrt(area.size / Math.PI)};\n            setOverlaps[set] = [];\n        }\n    }\n    areas = areas.filter(function(a) { return a.sets.length == 2; });\n\n    // map each set to a list of all the other sets that overlap it\n    for (i = 0; i < areas.length; ++i) {\n        var current = areas[i];\n        var weight = current.hasOwnProperty('weight') ? current.weight : 1.0;\n        var left = current.sets[0], right = current.sets[1];\n\n        // completely overlapped circles shouldn't be positioned early here\n        if (current.size + SMALL$1 >= Math.min(circles[left].size,\n                                             circles[right].size)) {\n            weight = 0;\n        }\n\n        setOverlaps[left].push ({set:right, size:current.size, weight:weight});\n        setOverlaps[right].push({set:left,  size:current.size, weight:weight});\n    }\n\n    // get list of most overlapped sets\n    var mostOverlapped = [];\n    for (set in setOverlaps) {\n        if (setOverlaps.hasOwnProperty(set)) {\n            var size = 0;\n            for (i = 0; i < setOverlaps[set].length; ++i) {\n                size += setOverlaps[set][i].size * setOverlaps[set][i].weight;\n            }\n\n            mostOverlapped.push({set: set, size:size});\n        }\n    }\n\n    // sort by size desc\n    function sortOrder(a,b) {\n        return b.size - a.size;\n    }\n    mostOverlapped.sort(sortOrder);\n\n    // keep track of what sets have been laid out\n    var positioned = {};\n    function isPositioned(element) {\n        return element.set in positioned;\n    }\n\n    // adds a point to the output\n    function positionSet(point, index) {\n        circles[index].x = point.x;\n        circles[index].y = point.y;\n        positioned[index] = true;\n    }\n\n    // add most overlapped set at (0,0)\n    positionSet({x: 0, y: 0}, mostOverlapped[0].set);\n\n    // get distances between all points. TODO, necessary?\n    // answer: probably not\n    // var distances = venn.getDistanceMatrices(circles, areas).distances;\n    for (i = 1; i < mostOverlapped.length; ++i) {\n        var setIndex = mostOverlapped[i].set,\n            overlap = setOverlaps[setIndex].filter(isPositioned);\n        set = circles[setIndex];\n        overlap.sort(sortOrder);\n\n        if (overlap.length === 0) {\n            // this shouldn't happen anymore with addMissingAreas\n            throw \"ERROR: missing pairwise overlap information\";\n        }\n\n        var points = [];\n        for (var j = 0; j < overlap.length; ++j) {\n            // get appropriate distance from most overlapped already added set\n            var p1 = circles[overlap[j].set],\n                d1 = distanceFromIntersectArea(set.radius, p1.radius,\n                                               overlap[j].size);\n\n            // sample positions at 90 degrees for maximum aesthetics\n            points.push({x : p1.x + d1, y : p1.y});\n            points.push({x : p1.x - d1, y : p1.y});\n            points.push({y : p1.y + d1, x : p1.x});\n            points.push({y : p1.y - d1, x : p1.x});\n\n            // if we have at least 2 overlaps, then figure out where the\n            // set should be positioned analytically and try those too\n            for (var k = j + 1; k < overlap.length; ++k) {\n                var p2 = circles[overlap[k].set],\n                    d2 = distanceFromIntersectArea(set.radius, p2.radius,\n                                                   overlap[k].size);\n\n                var extraPoints = circleCircleIntersection(\n                    { x: p1.x, y: p1.y, radius: d1},\n                    { x: p2.x, y: p2.y, radius: d2});\n\n                for (var l = 0; l < extraPoints.length; ++l) {\n                    points.push(extraPoints[l]);\n                }\n            }\n        }\n\n        // we have some candidate positions for the set, examine loss\n        // at each position to figure out where to put it at\n        var bestLoss = 1e50, bestPoint = points[0];\n        for (j = 0; j < points.length; ++j) {\n            circles[setIndex].x = points[j].x;\n            circles[setIndex].y = points[j].y;\n            var localLoss = loss(circles, areas);\n            if (localLoss < bestLoss) {\n                bestLoss = localLoss;\n                bestPoint = points[j];\n            }\n        }\n\n        positionSet(bestPoint, setIndex);\n    }\n\n    return circles;\n}\n\n/** Given a bunch of sets, and the desired overlaps between these sets - computes\nthe distance from the actual overlaps to the desired overlaps. Note that\nthis method ignores overlaps of more than 2 circles */\nfunction lossFunction(sets, overlaps) {\n    var output = 0;\n\n    function getCircles(indices) {\n        return indices.map(function(i) { return sets[i]; });\n    }\n\n    for (var i = 0; i < overlaps.length; ++i) {\n        var area = overlaps[i], overlap;\n        if (area.sets.length == 1) {\n            continue;\n        } else if (area.sets.length == 2) {\n            var left = sets[area.sets[0]],\n                right = sets[area.sets[1]];\n            overlap = circleOverlap(left.radius, right.radius,\n                                    distance(left, right));\n        } else {\n            overlap = intersectionArea(getCircles(area.sets));\n        }\n\n        var weight = area.hasOwnProperty('weight') ? area.weight : 1.0;\n        output += weight * (overlap - area.size) * (overlap - area.size);\n    }\n\n    return output;\n}\n\n// orientates a bunch of circles to point in orientation\nfunction orientateCircles(circles, orientation, orientationOrder) {\n    if (orientationOrder === null) {\n        circles.sort(function (a, b) { return b.radius - a.radius; });\n    } else {\n        circles.sort(orientationOrder);\n    }\n\n    var i;\n    // shift circles so largest circle is at (0, 0)\n    if (circles.length > 0) {\n        var largestX = circles[0].x,\n            largestY = circles[0].y;\n\n        for (i = 0; i < circles.length; ++i) {\n            circles[i].x -= largestX;\n            circles[i].y -= largestY;\n        }\n    }\n\n    if (circles.length == 2) {\n        // if the second circle is a subset of the first, arrange so that\n        // it is off to one side. hack for https://github.com/benfred/venn.js/issues/120\n        var dist = distance(circles[0], circles[1]);\n        if (dist < Math.abs(circles[1].radius - circles[0].radius)) {\n            circles[1].x = circles[0].x + circles[0].radius - circles[1].radius - 1e-10;\n            circles[1].y = circles[0].y;\n        }\n    }\n\n    // rotate circles so that second largest is at an angle of 'orientation'\n    // from largest\n    if (circles.length > 1) {\n        var rotation = Math.atan2(circles[1].x, circles[1].y) - orientation,\n            c = Math.cos(rotation),\n            s = Math.sin(rotation), x, y;\n\n        for (i = 0; i < circles.length; ++i) {\n            x = circles[i].x;\n            y = circles[i].y;\n            circles[i].x = c * x - s * y;\n            circles[i].y = s * x + c * y;\n        }\n    }\n\n    // mirror solution if third solution is above plane specified by\n    // first two circles\n    if (circles.length > 2) {\n        var angle = Math.atan2(circles[2].x, circles[2].y) - orientation;\n        while (angle < 0) { angle += 2* Math.PI; }\n        while (angle > 2*Math.PI) { angle -= 2* Math.PI; }\n        if (angle > Math.PI) {\n            var slope = circles[1].y / (1e-10 + circles[1].x);\n            for (i = 0; i < circles.length; ++i) {\n                var d = (circles[i].x + slope * circles[i].y) / (1 + slope*slope);\n                circles[i].x = 2 * d - circles[i].x;\n                circles[i].y = 2 * d * slope - circles[i].y;\n            }\n        }\n    }\n}\n\nfunction disjointCluster(circles) {\n    // union-find clustering to get disjoint sets\n    circles.map(function(circle) { circle.parent = circle; });\n\n    // path compression step in union find\n    function find(circle) {\n        if (circle.parent !== circle) {\n            circle.parent = find(circle.parent);\n        }\n        return circle.parent;\n    }\n\n    function union(x, y) {\n        var xRoot = find(x), yRoot = find(y);\n        xRoot.parent = yRoot;\n    }\n\n    // get the union of all overlapping sets\n    for (var i = 0; i < circles.length; ++i) {\n        for (var j = i + 1; j < circles.length; ++j) {\n            var maxDistance = circles[i].radius + circles[j].radius;\n            if (distance(circles[i], circles[j]) + 1e-10 < maxDistance) {\n                union(circles[j], circles[i]);\n            }\n        }\n    }\n\n    // find all the disjoint clusters and group them together\n    var disjointClusters = {}, setid;\n    for (i = 0; i < circles.length; ++i) {\n        setid = find(circles[i]).parent.setid;\n        if (!(setid in disjointClusters)) {\n            disjointClusters[setid] = [];\n        }\n        disjointClusters[setid].push(circles[i]);\n    }\n\n    // cleanup bookkeeping\n    circles.map(function(circle) { delete circle.parent; });\n\n    // return in more usable form\n    var ret = [];\n    for (setid in disjointClusters) {\n        if (disjointClusters.hasOwnProperty(setid)) {\n            ret.push(disjointClusters[setid]);\n        }\n    }\n    return ret;\n}\n\nfunction getBoundingBox(circles) {\n    var minMax = function(d) {\n        var hi = Math.max.apply(null, circles.map(\n                                function(c) { return c[d] + c.radius; } )),\n            lo = Math.min.apply(null, circles.map(\n                                function(c) { return c[d] - c.radius;} ));\n        return {max:hi, min:lo};\n    };\n\n    return {xRange: minMax('x'), yRange: minMax('y')};\n}\n\nfunction normalizeSolution(solution, orientation, orientationOrder) {\n    if (orientation === null){\n        orientation = Math.PI/2;\n    }\n\n    // work with a list instead of a dictionary, and take a copy so we\n    // don't mutate input\n    var circles = [], i, setid;\n    for (setid in solution) {\n        if (solution.hasOwnProperty(setid)) {\n            var previous = solution[setid];\n            circles.push({x: previous.x,\n                          y: previous.y,\n                          radius: previous.radius,\n                          setid: setid});\n        }\n    }\n\n    // get all the disjoint clusters\n    var clusters = disjointCluster(circles);\n\n    // orientate all disjoint sets, get sizes\n    for (i = 0; i < clusters.length; ++i) {\n        orientateCircles(clusters[i], orientation, orientationOrder);\n        var bounds = getBoundingBox(clusters[i]);\n        clusters[i].size = (bounds.xRange.max - bounds.xRange.min) * (bounds.yRange.max - bounds.yRange.min);\n        clusters[i].bounds = bounds;\n    }\n    clusters.sort(function(a, b) { return b.size - a.size; });\n\n    // orientate the largest at 0,0, and get the bounds\n    circles = clusters[0];\n    var returnBounds = circles.bounds;\n\n    var spacing = (returnBounds.xRange.max - returnBounds.xRange.min)/50;\n\n    function addCluster(cluster, right, bottom) {\n        if (!cluster) return;\n\n        var bounds = cluster.bounds, xOffset, yOffset, centreing;\n\n        if (right) {\n            xOffset = returnBounds.xRange.max  - bounds.xRange.min + spacing;\n        } else {\n            xOffset = returnBounds.xRange.max  - bounds.xRange.max;\n            centreing = (bounds.xRange.max - bounds.xRange.min) / 2 -\n                        (returnBounds.xRange.max - returnBounds.xRange.min) / 2;\n            if (centreing < 0) xOffset += centreing;\n        }\n\n        if (bottom) {\n            yOffset = returnBounds.yRange.max  - bounds.yRange.min + spacing;\n        } else {\n            yOffset = returnBounds.yRange.max  - bounds.yRange.max;\n            centreing = (bounds.yRange.max - bounds.yRange.min) / 2 -\n                        (returnBounds.yRange.max - returnBounds.yRange.min) / 2;\n            if (centreing < 0) yOffset += centreing;\n        }\n\n        for (var j = 0; j < cluster.length; ++j) {\n            cluster[j].x += xOffset;\n            cluster[j].y += yOffset;\n            circles.push(cluster[j]);\n        }\n    }\n\n    var index = 1;\n    while (index < clusters.length) {\n        addCluster(clusters[index], true, false);\n        addCluster(clusters[index+1], false, true);\n        addCluster(clusters[index+2], true, true);\n        index += 3;\n\n        // have one cluster (in top left). lay out next three relative\n        // to it in a grid\n        returnBounds = getBoundingBox(circles);\n    }\n\n    // convert back to solution form\n    var ret = {};\n    for (i = 0; i < circles.length; ++i) {\n        ret[circles[i].setid] = circles[i];\n    }\n    return ret;\n}\n\n/** Scales a solution from venn.venn or venn.greedyLayout such that it fits in\na rectangle of width/height - with padding around the borders. also\ncenters the diagram in the available space at the same time */\nfunction scaleSolution(solution, width, height, padding) {\n    var circles = [], setids = [];\n    for (var setid in solution) {\n        if (solution.hasOwnProperty(setid)) {\n            setids.push(setid);\n            circles.push(solution[setid]);\n        }\n    }\n\n    width -= 2*padding;\n    height -= 2*padding;\n\n    var bounds = getBoundingBox(circles),\n        xRange = bounds.xRange,\n        yRange = bounds.yRange;\n\n    if ((xRange.max == xRange.min) ||\n        (yRange.max == yRange.min)) {\n        console.log(\"not scaling solution: zero size detected\");\n        return solution;\n    }\n\n    var xScaling = width  / (xRange.max - xRange.min),\n        yScaling = height / (yRange.max - yRange.min),\n        scaling = Math.min(yScaling, xScaling),\n\n        // while we're at it, center the diagram too\n        xOffset = (width -  (xRange.max - xRange.min) * scaling) / 2,\n        yOffset = (height - (yRange.max - yRange.min) * scaling) / 2;\n\n    var scaled = {};\n    for (var i = 0; i < circles.length; ++i) {\n        var circle = circles[i];\n        scaled[setids[i]] = {\n            radius: scaling * circle.radius,\n            x: padding + xOffset + (circle.x - xRange.min) * scaling,\n            y: padding + yOffset + (circle.y - yRange.min) * scaling,\n        };\n    }\n\n    return scaled;\n}\n\n/*global console:true*/\n\nfunction VennDiagram() {\n    var width = 600,\n        height = 350,\n        padding = 15,\n        duration = 1000,\n        orientation = Math.PI / 2,\n        normalize = true,\n        wrap = true,\n        styled = true,\n        fontSize = null,\n        orientationOrder = null,\n\n        // mimic the behaviour of d3.scale.category10 from the previous\n        // version of d3\n        colourMap = {},\n\n        // so this is the same as d3.schemeCategory10, which is only defined in d3 4.0\n        // since we can support older versions of d3 as long as we don't force this,\n        // I'm hackily redefining below. TODO: remove this and change to d3.schemeCategory10\n        colourScheme = [\"#1f77b4\", \"#ff7f0e\", \"#2ca02c\", \"#d62728\", \"#9467bd\", \"#8c564b\", \"#e377c2\", \"#7f7f7f\", \"#bcbd22\", \"#17becf\"],\n        colourIndex = 0,\n        colours = function(key) {\n            if (key in colourMap) {\n                return colourMap[key];\n            }\n            var ret = colourMap[key] = colourScheme[colourIndex];\n            colourIndex += 1;\n            if (colourIndex >= colourScheme.length) {\n                colourIndex = 0;\n            }\n            return ret;\n        },\n        layoutFunction = venn,\n        loss = lossFunction;\n\n\n    function chart(selection) {\n        var data = selection.datum();\n\n        // handle 0-sized sets by removing from input\n        var toremove = {};\n        data.forEach(function(datum) {\n            if ((datum.size == 0) && datum.sets.length == 1) {\n                toremove[datum.sets[0]] = 1;\n            }\n        });\n        data = data.filter(function(datum) {\n            return !datum.sets.some(function(set) { return set in toremove; });\n        });\n\n        var circles = {};\n        var textCentres = {};\n\n        if (data.length > 0) {\n            var solution = layoutFunction(data, {lossFunction: loss});\n\n            if (normalize) {\n                solution = normalizeSolution(solution,\n                                            orientation,\n                                            orientationOrder);\n            }\n\n            circles = scaleSolution(solution, width, height, padding);\n            textCentres = computeTextCentres(circles, data);\n        }\n\n        // Figure out the current label for each set. These can change\n        // and D3 won't necessarily update (fixes https://github.com/benfred/venn.js/issues/103)\n        var labels = {};\n        data.forEach(function(datum) {\n            if (datum.label) {\n                labels[datum.sets] = datum.label;\n            }\n        });\n\n        function label(d) {\n            if (d.sets in labels) {\n                return labels[d.sets];\n            }\n            if (d.sets.length == 1) {\n                return '' + d.sets[0];\n            }\n        }\n\n        // create svg if not already existing\n        selection.selectAll(\"svg\").data([circles]).enter().append(\"svg\");\n\n        var svg = selection.select(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height);\n\n        // to properly transition intersection areas, we need the\n        // previous circles locations. load from elements\n        var previous = {}, hasPrevious = false;\n        svg.selectAll(\".venn-area path\").each(function (d) {\n            var path = d3Selection.select(this).attr(\"d\");\n            if ((d.sets.length == 1) && path) {\n                hasPrevious = true;\n                previous[d.sets[0]] = circleFromPath(path);\n            }\n        });\n\n        // interpolate intersection area paths between previous and\n        // current paths\n        var pathTween = function(d) {\n            return function(t) {\n                var c = d.sets.map(function(set) {\n                    var start = previous[set], end = circles[set];\n                    if (!start) {\n                        start = {x : width/2, y : height/2, radius : 1};\n                    }\n                    if (!end) {\n                        end = {x : width/2, y : height/2, radius : 1};\n                    }\n                    return {'x' : start.x * (1 - t) + end.x * t,\n                            'y' : start.y * (1 - t) + end.y * t,\n                            'radius' : start.radius * (1 - t) + end.radius * t};\n                });\n                return intersectionAreaPath(c);\n            };\n        };\n\n        // update data, joining on the set ids\n        var nodes = svg.selectAll(\".venn-area\")\n            .data(data, function(d) { return d.sets; });\n\n        // create new nodes\n        var enter = nodes.enter()\n            .append('g')\n            .attr(\"class\", function(d) {\n                return \"venn-area venn-\" +\n                    (d.sets.length == 1 ? \"circle\" : \"intersection\");\n            })\n            .attr(\"data-venn-sets\", function(d) {\n                return d.sets.join(\"_\");\n            });\n\n        var enterPath = enter.append(\"path\"),\n            enterText = enter.append(\"text\")\n            .attr(\"class\", \"label\")\n            .text(function (d) { return label(d); } )\n            .attr(\"text-anchor\", \"middle\")\n            .attr(\"dy\", \".35em\")\n            .attr(\"x\", width/2)\n            .attr(\"y\", height/2);\n\n\n        // apply minimal style if wanted\n        if (styled) {\n            enterPath.style(\"fill-opacity\", \"0\")\n                .filter(function (d) { return d.sets.length == 1; } )\n                .style(\"fill\", function(d) { return colours(d.sets); })\n                .style(\"fill-opacity\", \".25\");\n\n            enterText\n                .style(\"fill\", function(d) { return d.sets.length == 1 ? colours(d.sets) : \"#444\"; });\n        }\n\n        // update existing, using pathTween if necessary\n        var update = selection;\n        if (hasPrevious) {\n            update = selection.transition(\"venn\").duration(duration);\n            update.selectAll(\"path\")\n                .attrTween(\"d\", pathTween);\n        } else {\n            update.selectAll(\"path\")\n                .attr(\"d\", function(d) {\n                    return intersectionAreaPath(d.sets.map(function (set) { return circles[set]; }));\n                });\n        }\n\n        var updateText = update.selectAll(\"text\")\n            .filter(function (d) { return d.sets in textCentres; })\n            .text(function (d) { return label(d); } )\n            .attr(\"x\", function(d) { return Math.floor(textCentres[d.sets].x);})\n            .attr(\"y\", function(d) { return Math.floor(textCentres[d.sets].y);});\n\n        if (wrap) {\n            if (hasPrevious) {\n                // d3 4.0 uses 'on' for events on transitions,\n                // but d3 3.0 used 'each' instead. switch appropiately\n                if ('on' in updateText) {\n                    updateText.on(\"end\", wrapText(circles, label));\n                } else {\n                    updateText.each(\"end\", wrapText(circles, label));\n                }\n            } else {\n                updateText.each(wrapText(circles, label));\n            }\n        }\n\n        // remove old\n        var exit = nodes.exit().transition('venn').duration(duration).remove();\n        exit.selectAll(\"path\")\n            .attrTween(\"d\", pathTween);\n\n        var exitText = exit.selectAll(\"text\")\n            .attr(\"x\", width/2)\n            .attr(\"y\", height/2);\n\n        // if we've been passed a fontSize explicitly, use it to\n        // transition\n        if (fontSize !== null) {\n            enterText.style(\"font-size\", \"0px\");\n            updateText.style(\"font-size\", fontSize);\n            exitText.style(\"font-size\", \"0px\");\n        }\n\n\n        return {'circles': circles,\n                'textCentres': textCentres,\n                'nodes': nodes,\n                'enter': enter,\n                'update': update,\n                'exit': exit};\n    }\n\n    chart.wrap = function(_) {\n        if (!arguments.length) return wrap;\n        wrap = _;\n        return chart;\n    };\n\n    chart.width = function(_) {\n        if (!arguments.length) return width;\n        width = _;\n        return chart;\n    };\n\n    chart.height = function(_) {\n        if (!arguments.length) return height;\n        height = _;\n        return chart;\n    };\n\n    chart.padding = function(_) {\n        if (!arguments.length) return padding;\n        padding = _;\n        return chart;\n    };\n\n    chart.colours = function(_) {\n        if (!arguments.length) return colours;\n        colours = _;\n        return chart;\n    };\n\n    chart.fontSize = function(_) {\n        if (!arguments.length) return fontSize;\n        fontSize = _;\n        return chart;\n    };\n\n    chart.duration = function(_) {\n        if (!arguments.length) return duration;\n        duration = _;\n        return chart;\n    };\n\n    chart.layoutFunction = function(_) {\n        if (!arguments.length) return layoutFunction;\n        layoutFunction = _;\n        return chart;\n    };\n\n    chart.normalize = function(_) {\n        if (!arguments.length) return normalize;\n        normalize = _;\n        return chart;\n    };\n\n    chart.styled = function(_) {\n        if (!arguments.length) return styled;\n        styled = _;\n        return chart;\n    };\n\n    chart.orientation = function(_) {\n        if (!arguments.length) return orientation;\n        orientation = _;\n        return chart;\n    };\n\n    chart.orientationOrder = function(_) {\n        if (!arguments.length) return orientationOrder;\n        orientationOrder = _;\n        return chart;\n    };\n\n    chart.lossFunction = function(_) {\n      if (!arguments.length) return loss;\n      loss = _;\n      return chart;\n    };\n\n    return chart;\n}\n// sometimes text doesn't fit inside the circle, if thats the case lets wrap\n// the text here such that it fits\n// todo: looks like this might be merged into d3 (\n// https://github.com/mbostock/d3/issues/1642),\n// also worth checking out is\n// http://engineering.findthebest.com/wrapping-axis-labels-in-d3-js/\n// this seems to be one of those things that should be easy but isn't\nfunction wrapText(circles, labeller) {\n    return function() {\n        var text = d3Selection.select(this),\n            data = text.datum(),\n            width = circles[data.sets[0]].radius || 50,\n            label = labeller(data) || '';\n\n            var words = label.split(/\\s+/).reverse(),\n            maxLines = 3,\n            minChars = (label.length + words.length) / maxLines,\n            word = words.pop(),\n            line = [word],\n            joined,\n            lineNumber = 0,\n            lineHeight = 1.1, // ems\n            tspan = text.text(null).append(\"tspan\").text(word);\n\n        while (true) {\n            word = words.pop();\n            if (!word) break;\n            line.push(word);\n            joined = line.join(\" \");\n            tspan.text(joined);\n            if (joined.length > minChars && tspan.node().getComputedTextLength() > width) {\n                line.pop();\n                tspan.text(line.join(\" \"));\n                line = [word];\n                tspan = text.append(\"tspan\").text(word);\n                lineNumber++;\n            }\n        }\n\n        var initial = 0.35 - lineNumber * lineHeight / 2,\n            x = text.attr(\"x\"),\n            y = text.attr(\"y\");\n\n        text.selectAll(\"tspan\")\n            .attr(\"x\", x)\n            .attr(\"y\", y)\n            .attr(\"dy\", function(d, i) {\n                 return (initial + i * lineHeight) + \"em\";\n            });\n    };\n}\n\nfunction circleMargin(current, interior, exterior) {\n    var margin = interior[0].radius - distance(interior[0], current), i, m;\n    for (i = 1; i < interior.length; ++i) {\n        m = interior[i].radius - distance(interior[i], current);\n        if (m <= margin) {\n            margin = m;\n        }\n    }\n\n    for (i = 0; i < exterior.length; ++i) {\n        m = distance(exterior[i], current) - exterior[i].radius;\n        if (m <= margin) {\n            margin = m;\n        }\n    }\n    return margin;\n}\n\n// compute the center of some circles by maximizing the margin of\n// the center point relative to the circles (interior) after subtracting\n// nearby circles (exterior)\nfunction computeTextCentre(interior, exterior) {\n    // get an initial estimate by sampling around the interior circles\n    // and taking the point with the biggest margin\n    var points = [], i;\n    for (i = 0; i < interior.length; ++i) {\n        var c = interior[i];\n        points.push({x: c.x, y: c.y});\n        points.push({x: c.x + c.radius/2, y: c.y});\n        points.push({x: c.x - c.radius/2, y: c.y});\n        points.push({x: c.x, y: c.y + c.radius/2});\n        points.push({x: c.x, y: c.y - c.radius/2});\n    }\n    var initial = points[0], margin = circleMargin(points[0], interior, exterior);\n    for (i = 1; i < points.length; ++i) {\n        var m = circleMargin(points[i], interior, exterior);\n        if (m >= margin) {\n            initial = points[i];\n            margin = m;\n        }\n    }\n\n    // maximize the margin numerically\n    var solution = nelderMead(\n                function(p) { return -1 * circleMargin({x: p[0], y: p[1]}, interior, exterior); },\n                [initial.x, initial.y],\n                {maxIterations:500, minErrorDelta:1e-10}).x;\n    var ret = {x: solution[0], y: solution[1]};\n\n    // check solution, fallback as needed (happens if fully overlapped\n    // etc)\n    var valid = true;\n    for (i = 0; i < interior.length; ++i) {\n        if (distance(ret, interior[i]) > interior[i].radius) {\n            valid = false;\n            break;\n        }\n    }\n\n    for (i = 0; i < exterior.length; ++i) {\n        if (distance(ret, exterior[i]) < exterior[i].radius) {\n            valid = false;\n            break;\n        }\n    }\n\n    if (!valid) {\n        if (interior.length == 1) {\n            ret = {x: interior[0].x, y: interior[0].y};\n        } else {\n            var areaStats = {};\n            intersectionArea(interior, areaStats);\n\n            if (areaStats.arcs.length === 0) {\n                ret = {'x': 0, 'y': -1000, disjoint:true};\n\n            } else if (areaStats.arcs.length == 1) {\n                ret = {'x': areaStats.arcs[0].circle.x,\n                       'y': areaStats.arcs[0].circle.y};\n\n            } else if (exterior.length) {\n                // try again without other circles\n                ret = computeTextCentre(interior, []);\n\n            } else {\n                // take average of all the points in the intersection\n                // polygon. this should basically never happen\n                // and has some issues:\n                // https://github.com/benfred/venn.js/issues/48#issuecomment-146069777\n                ret = getCenter(areaStats.arcs.map(function (a) { return a.p1; }));\n            }\n        }\n    }\n\n    return ret;\n}\n\n// given a dictionary of {setid : circle}, returns\n// a dictionary of setid to list of circles that completely overlap it\nfunction getOverlappingCircles(circles) {\n    var ret = {}, circleids = [];\n    for (var circleid in circles) {\n        circleids.push(circleid);\n        ret[circleid] = [];\n    }\n    for (var i  = 0; i < circleids.length; i++) {\n        var a = circles[circleids[i]];\n        for (var j = i + 1; j < circleids.length; ++j) {\n            var b = circles[circleids[j]],\n                d = distance(a, b);\n\n            if (d + b.radius <= a.radius + 1e-10) {\n                ret[circleids[j]].push(circleids[i]);\n\n            } else if (d + a.radius <= b.radius + 1e-10) {\n                ret[circleids[i]].push(circleids[j]);\n            }\n        }\n    }\n    return ret;\n}\n\nfunction computeTextCentres(circles, areas) {\n    var ret = {}, overlapped = getOverlappingCircles(circles);\n    for (var i = 0; i < areas.length; ++i) {\n        var area = areas[i].sets, areaids = {}, exclude = {};\n        for (var j = 0; j < area.length; ++j) {\n            areaids[area[j]] = true;\n            var overlaps = overlapped[area[j]];\n            // keep track of any circles that overlap this area,\n            // and don't consider for purposes of computing the text\n            // centre\n            for (var k = 0; k < overlaps.length; ++k) {\n                exclude[overlaps[k]] = true;\n            }\n        }\n\n        var interior = [], exterior = [];\n        for (var setid in circles) {\n            if (setid in areaids) {\n                interior.push(circles[setid]);\n            } else if (!(setid in exclude)) {\n                exterior.push(circles[setid]);\n            }\n        }\n        var centre = computeTextCentre(interior, exterior);\n        ret[area] = centre;\n        if (centre.disjoint && (areas[i].size > 0)) {\n            console.log(\"WARNING: area \" + area + \" not represented on screen\");\n        }\n    }\n    return  ret;\n}\n\n// sorts all areas in the venn diagram, so that\n// a particular area is on top (relativeTo) - and\n// all other areas are so that the smallest areas are on top\nfunction sortAreas(div, relativeTo) {\n\n    // figure out sets that are completly overlapped by relativeTo\n    var overlaps = getOverlappingCircles(div.selectAll(\"svg\").datum());\n    var exclude = {};\n    for (var i = 0; i < relativeTo.sets.length; ++i) {\n        var check = relativeTo.sets[i];\n        for (var setid in overlaps) {\n            var overlap = overlaps[setid];\n            for (var j = 0; j < overlap.length; ++j) {\n                if (overlap[j] == check) {\n                    exclude[setid] = true;\n                    break;\n                }\n            }\n        }\n    }\n\n    // checks that all sets are in exclude;\n    function shouldExclude(sets) {\n        for (var i = 0; i < sets.length; ++i) {\n            if (!(sets[i] in exclude)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    // need to sort div's so that Z order is correct\n    div.selectAll(\"g\").sort(function (a, b) {\n        // highest order set intersections first\n        if (a.sets.length != b.sets.length) {\n            return a.sets.length - b.sets.length;\n        }\n\n        if (a == relativeTo) {\n            return shouldExclude(b.sets) ? -1 : 1;\n        }\n        if (b == relativeTo) {\n            return shouldExclude(a.sets) ? 1 : -1;\n        }\n\n        // finally by size\n        return b.size - a.size;\n    });\n}\n\nfunction circlePath(x, y, r) {\n    var ret = [];\n    ret.push(\"\\nM\", x, y);\n    ret.push(\"\\nm\", -r, 0);\n    ret.push(\"\\na\", r, r, 0, 1, 0, r *2, 0);\n    ret.push(\"\\na\", r, r, 0, 1, 0,-r *2, 0);\n    return ret.join(\" \");\n}\n\n// inverse of the circlePath function, returns a circle object from an svg path\nfunction circleFromPath(path) {\n    var tokens = path.split(' ');\n    return {'x' : parseFloat(tokens[1]),\n            'y' : parseFloat(tokens[2]),\n            'radius' : -parseFloat(tokens[4])\n            };\n}\n\n/** returns a svg path of the intersection area of a bunch of circles */\nfunction intersectionAreaPath(circles) {\n    var stats = {};\n    intersectionArea(circles, stats);\n    var arcs = stats.arcs;\n\n    if (arcs.length === 0) {\n        return \"M 0 0\";\n\n    } else if (arcs.length == 1) {\n        var circle = arcs[0].circle;\n        return circlePath(circle.x, circle.y, circle.radius);\n\n    } else {\n        // draw path around arcs\n        var ret = [\"\\nM\", arcs[0].p2.x, arcs[0].p2.y];\n        for (var i = 0; i < arcs.length; ++i) {\n            var arc = arcs[i], r = arc.circle.radius, wide = arc.width > r;\n            ret.push(\"\\nA\", r, r, 0, wide ? 1 : 0, 1,\n                     arc.p1.x, arc.p1.y);\n        }\n        return ret.join(\" \");\n    }\n}\n\nexports.intersectionArea = intersectionArea;\nexports.circleCircleIntersection = circleCircleIntersection;\nexports.circleOverlap = circleOverlap;\nexports.circleArea = circleArea;\nexports.distance = distance;\nexports.venn = venn;\nexports.greedyLayout = greedyLayout;\nexports.scaleSolution = scaleSolution;\nexports.normalizeSolution = normalizeSolution;\nexports.bestInitialLayout = bestInitialLayout;\nexports.lossFunction = lossFunction;\nexports.disjointCluster = disjointCluster;\nexports.distanceFromIntersectArea = distanceFromIntersectArea;\nexports.VennDiagram = VennDiagram;\nexports.wrapText = wrapText;\nexports.computeTextCentres = computeTextCentres;\nexports.computeTextCentre = computeTextCentre;\nexports.sortAreas = sortAreas;\nexports.circlePath = circlePath;\nexports.circleFromPath = circleFromPath;\nexports.intersectionAreaPath = intersectionAreaPath;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import creator from \"./creator\";\nimport select from \"./select\";\n\nexport default function(name) {\n  return select(creator(name).call(document.documentElement));\n}\n","var nextId = 0;\n\nexport default function local() {\n  return new Local;\n}\n\nfunction Local() {\n  this._ = \"@\" + (++nextId).toString(36);\n}\n\nLocal.prototype = local.prototype = {\n  constructor: Local,\n  get: function(node) {\n    var id = this._;\n    while (!(id in node)) if (!(node = node.parentNode)) return;\n    return node[id];\n  },\n  set: function(node, value) {\n    return node[this._] = value;\n  },\n  remove: function(node) {\n    return this._ in node && delete node[this._];\n  },\n  toString: function() {\n    return this._;\n  }\n};\n","import {event} from \"./selection/on\";\n\nexport default function() {\n  var current = event, source;\n  while (source = current.sourceEvent) current = source;\n  return current;\n}\n","export default function(node, event) {\n  var svg = node.ownerSVGElement || node;\n\n  if (svg.createSVGPoint) {\n    var point = svg.createSVGPoint();\n    point.x = event.clientX, point.y = event.clientY;\n    point = point.matrixTransform(node.getScreenCTM().inverse());\n    return [point.x, point.y];\n  }\n\n  var rect = node.getBoundingClientRect();\n  return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n}\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node) {\n  var event = sourceEvent();\n  if (event.changedTouches) event = event.changedTouches[0];\n  return point(node, event);\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : selector], root);\n}\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node, touches, identifier) {\n  if (arguments.length < 3) identifier = touches, touches = sourceEvent().changedTouches;\n\n  for (var i = 0, n = touches ? touches.length : 0, touch; i < n; ++i) {\n    if ((touch = touches[i]).identifier === identifier) {\n      return point(node, touch);\n    }\n  }\n\n  return null;\n}\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node, touches) {\n  if (touches == null) touches = sourceEvent().touches;\n\n  for (var i = 0, n = touches ? touches.length : 0, points = new Array(n); i < n; ++i) {\n    points[i] = point(node, touches[i]);\n  }\n\n  return points;\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_join from \"./join\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(function(elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  end: transition_end\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {Transition} from \"./transition/index.js\";\nimport {SCHEDULED} from \"./transition/schedule.js\";\n\nvar root = [null];\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      i;\n\n  if (schedules) {\n    name = name == null ? null : name + \"\";\n    for (i in schedules) {\n      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {\n        return new Transition([[node]], root, name, +i);\n      }\n    }\n  }\n\n  return null;\n}\n"],"x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193]}