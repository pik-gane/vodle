{"version":3,"file":"src_app_logout_logout_module_ts.js","mappings":"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","sources":["./src/app/logout/logout.page.scss","./src/app/logout/logout-routing.module.ts","./src/app/logout/logout.page.ts","./src/app/logout/logout.module.ts"],"sourcesContent":["// Imports\nvar ___CSS_LOADER_API_SOURCEMAP_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\");\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@charset \"UTF-8\";\n/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/app/logout/logout.page.scss\"],\"names\":[],\"mappings\":\"AAAA,gBAAgB;AAAhB;;;;;;;;;;;;;;;;;CAAA\",\"sourcesContent\":[\"/*\\r\\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\\r\\n\\r\\nThis file is part of vodle.\\r\\n\\r\\nvodle is free software: you can redistribute it and/or modify it under the \\r\\nterms of the GNU Affero General Public License as published by the Free \\r\\nSoftware Foundation, either version 3 of the License, or (at your option) \\r\\nany later version.\\r\\n\\r\\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \\r\\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \\r\\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \\r\\ndetails.\\r\\n\\r\\nYou should have received a copy of the GNU Affero General Public License \\r\\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \\r\\n*/\\r\\n\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___.toString();\n","/*\r\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\r\n\r\nThis file is part of vodle.\r\n\r\nvodle is free software: you can redistribute it and/or modify it under the \r\nterms of the GNU Affero General Public License as published by the Free \r\nSoftware Foundation, either version 3 of the License, or (at your option) \r\nany later version.\r\n\r\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \r\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \r\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \r\ndetails.\r\n\r\nYou should have received a copy of the GNU Affero General Public License \r\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \r\n*/\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LogoutPage } from './logout.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LogoutPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LogoutPageRoutingModule {}\r\n","/*\r\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\r\n\r\nThis file is part of vodle.\r\n\r\nvodle is free software: you can redistribute it and/or modify it under the \r\nterms of the GNU Affero General Public License as published by the Free \r\nSoftware Foundation, either version 3 of the License, or (at your option) \r\nany later version.\r\n\r\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \r\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \r\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \r\ndetails.\r\n\r\nYou should have received a copy of the GNU Affero General Public License \r\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \r\n*/\r\n\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Location } from '@angular/common'\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\nimport { LocalNotifications } from '@capacitor/local-notifications';\r\n\r\nimport { GlobalService } from \"../global.service\";\r\n\r\n// PAGE:\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CommonModule } from '@angular/common';\r\n@Component({\r\n  imports: [ CommonModule, IonicModule, TranslateModule ],\r\n  selector: 'app-logout',\r\n  templateUrl: './logout.page.html',\r\n  styleUrls: ['./logout.page.scss'],\r\n})\r\nexport class LogoutPage implements OnInit {\r\n\r\n  // LIFECYCLE:\r\n\r\n  constructor(      \r\n      private location: Location,\r\n      public alertCtrl: AlertController,\r\n      public translate: TranslateService,\r\n      public G: GlobalService) { \r\n    this.G.L.entry(\"LogoutPage.constructor\");\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.G.L.entry(\"LogoutPage.ngOnInit\");\r\n  }\r\n  \r\n  ionViewWillEnter() {\r\n    this.G.L.entry(\"LogoutPage.ionViewWillEnter\");\r\n    this.G.D.save_state();\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.G.L.entry(\"LogoutPage.ionViewDidEnter\");\r\n    // TODO: query whether really logout:\r\n    if (this.G.D.ready) {\r\n      this.confirm_dialog();\r\n    }\r\n  }\r\n\r\n  onDataReady() {\r\n    // called when DataService initialization was slower than view initialization\r\n    this.G.L.entry(\"LogoutPage.onDataReady\");\r\n  }\r\n\r\n  ionViewDidLeave() {\r\n    this.G.L.entry(\"LogoutPage.ionViewDidLeave\");\r\n  }\r\n\r\n  async confirm_dialog() {\r\n    const dialog = await this.alertCtrl.create({ \r\n      header: this.translate.instant('logout.confirm-header'), \r\n      message: this.translate.instant('logout.confirm-intro'), \r\n      buttons: [\r\n        { \r\n          text: this.translate.instant('cancel'), \r\n          role: 'cancel',\r\n          handler: () => { \r\n            this.G.L.trace('LogoutPage.confirm_dialog cancel');\r\n            // TODO: navigate back\r\n            this.location.back();\r\n          } \r\n        },\r\n        { \r\n          text: this.translate.instant('logout.confirm-button'),\r\n          role: 'ok', \r\n          handler: () => {\r\n            this.G.L.trace('LogoutPage.confirm_dialog logout');\r\n            // clear all local storage:\r\n            this.G.D.clear_all_local().then(() => {\r\n              // now reload page, which will reinit the app and redirect us to the login page\r\n              // (at least in browsers – what about native apps?):\r\n/*              LocalNotifications.schedule({ notifications: [{ id: null,\r\n                title: \"Reloading...\",\r\n                body: null\r\n              }]});\r\n*/\r\n              window.location.reload();\r\n            }).catch(error => {\r\n              LocalNotifications.schedule({ notifications: [{ id: null,\r\n                  title: this.translate.instant(\"logout.failed\"),\r\n                  body: null\r\n              }]});\r\n              // go back to previous page:\r\n              this.location.back();\r\n            })\r\n          } \r\n        } \r\n      ] \r\n    }); \r\n    await dialog.present(); \r\n  }\r\n\r\n}\r\n","/*\r\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\r\n\r\nThis file is part of vodle.\r\n\r\nvodle is free software: you can redistribute it and/or modify it under the \r\nterms of the GNU Affero General Public License as published by the Free \r\nSoftware Foundation, either version 3 of the License, or (at your option) \r\nany later version.\r\n\r\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \r\nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \r\nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \r\ndetails.\r\n\r\nYou should have received a copy of the GNU Affero General Public License \r\nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \r\n*/\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LogoutPageRoutingModule } from './logout-routing.module';\r\n\r\nimport { LogoutPage } from './logout.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LogoutPageRoutingModule,\r\n    TranslateModule.forChild(),\r\n    LogoutPage\r\n  ]\r\n})\r\nexport class LogoutPageModule {}\r\n"],"names":["NgModule","RouterModule","LogoutPage","routes","path","component","LogoutPageRoutingModule","__decorate","imports","forChild","exports","Component","Location","TranslateService","AlertController","LocalNotifications","GlobalService","IonicModule","TranslateModule","CommonModule","constructor","location","alertCtrl","translate","G","L","entry","ngOnInit","ionViewWillEnter","D","save_state","ionViewDidEnter","ready","confirm_dialog","onDataReady","ionViewDidLeave","_this","_asyncToGenerator","dialog","create","header","instant","message","buttons","text","role","handler","trace","back","clear_all_local","then","window","reload","catch","error","schedule","notifications","id","title","body","present","selector","template","__NG_CLI_RESOURCE__0","FormsModule","LogoutPageModule"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}