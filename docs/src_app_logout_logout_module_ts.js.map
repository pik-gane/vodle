{"version":3,"file":"src_app_logout_logout_module_ts.js","mappings":"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","sources":["./src/app/logout/logout-routing.module.ts","./src/app/logout/logout.module.ts","./src/app/logout/logout.page.ts"],"sourcesContent":["/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LogoutPage } from './logout.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LogoutPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LogoutPageRoutingModule {}\n","/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LogoutPageRoutingModule } from './logout-routing.module';\n\nimport { LogoutPage } from './logout.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LogoutPageRoutingModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [LogoutPage]\n})\nexport class LogoutPageModule {}\n","/*\n(C) Copyright 2015–2022 Potsdam Institute for Climate Impact Research (PIK), authors, and contributors, see AUTHORS file.\n\nThis file is part of vodle.\n\nvodle is free software: you can redistribute it and/or modify it under the \nterms of the GNU Affero General Public License as published by the Free \nSoftware Foundation, either version 3 of the License, or (at your option) \nany later version.\n\nvodle is distributed in the hope that it will be useful, but WITHOUT ANY \nWARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR \nA PARTICULAR PURPOSE. See the GNU Affero General Public License for more \ndetails.\n\nYou should have received a copy of the GNU Affero General Public License \nalong with vodle. If not, see <https://www.gnu.org/licenses/>. \n*/\n\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { Location } from '@angular/common'\nimport { TranslateService } from '@ngx-translate/core';\nimport { AlertController } from '@ionic/angular';\n\nimport { LocalNotifications } from '@capacitor/local-notifications';\n\nimport { GlobalService } from \"../global.service\";\n\n// PAGE:\n\n@Component({\n  selector: 'app-logout',\n  templateUrl: './logout.page.html',\n  styleUrls: ['./logout.page.scss'],\n})\nexport class LogoutPage implements OnInit {\n\n  // LIFECYCLE:\n\n  constructor(      \n      private location: Location,\n      public alertCtrl: AlertController,\n      public translate: TranslateService,\n      public G: GlobalService) { \n    this.G.L.entry(\"LogoutPage.constructor\");\n  }\n\n  ngOnInit() {\n    this.G.L.entry(\"LogoutPage.ngOnInit\");\n  }\n  \n  ionViewWillEnter() {\n    this.G.L.entry(\"LogoutPage.ionViewWillEnter\");\n    this.G.D.save_state();\n  }\n\n  ionViewDidEnter() {\n    this.G.L.entry(\"LogoutPage.ionViewDidEnter\");\n    // TODO: query whether really logout:\n    if (this.G.D.ready) {\n      this.confirm_dialog();\n    }\n  }\n\n  onDataReady() {\n    // called when DataService initialization was slower than view initialization\n    this.G.L.entry(\"LogoutPage.onDataReady\");\n  }\n\n  ionViewDidLeave() {\n    this.G.L.entry(\"LogoutPage.ionViewDidLeave\");\n  }\n\n  async confirm_dialog() {\n    const dialog = await this.alertCtrl.create({ \n      header: this.translate.instant('logout.confirm-header'), \n      message: this.translate.instant('logout.confirm-intro'), \n      buttons: [\n        { \n          text: this.translate.instant('cancel'), \n          role: 'cancel',\n          handler: () => { \n            this.G.L.trace('LogoutPage.confirm_dialog cancel');\n            // TODO: navigate back\n            this.location.back();\n          } \n        },\n        { \n          text: this.translate.instant('logout.confirm-button'),\n          role: 'ok', \n          handler: () => {\n            this.G.L.trace('LogoutPage.confirm_dialog logout');\n            // clear all local storage:\n            this.G.D.clear_all_local().then(() => {\n              // now reload page, which will reinit the app and redirect us to the login page\n              // (at least in browsers – what about native apps?):\n/*              LocalNotifications.schedule({ notifications: [{ id: null,\n                title: \"Reloading...\",\n                body: null\n              }]});\n*/\n              window.location.reload();\n            }).catch(error => {\n              LocalNotifications.schedule({ notifications: [{ id: null,\n                  title: this.translate.instant(\"logout.failed\"),\n                  body: null\n              }]});\n              // go back to previous page:\n              this.location.back();\n            })\n          } \n        } \n      ] \n    }); \n    await dialog.present(); \n  }\n\n}\n"],"names":["Component","Location","TranslateService","AlertController","LocalNotifications","GlobalService","LogoutPage","constructor","location","alertCtrl","translate","G","L","entry","ngOnInit","ionViewWillEnter","D","save_state","ionViewDidEnter","ready","confirm_dialog","onDataReady","ionViewDidLeave","dialog","create","header","instant","message","buttons","text","role","handler","trace","back","clear_all_local","then","window","reload","catch","error","schedule","notifications","id","title","body","present","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}