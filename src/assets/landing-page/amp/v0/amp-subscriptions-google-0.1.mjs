;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-subscriptions-google",ev:"0.1",l:!0,f:function(t,e){(()=>{var e=(t,e)=>function(){return t&&(e=(0,t[Object.keys(t)[0]])(t=0)),e};function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}var n=e({"node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js"(){}}),i=e({"node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"(){n()}});function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,h=e({"node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelperLoose.js"(){i()}});function l(){return o||(o=Promise.resolve(void 0))}var u,c,g=e({"src/core/data-structures/promise.js"(){h(),a=class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}}}),p=(u={"node_modules/web-activities/activity-ports.js"(t,e){g(),g();var s,n={IFRAME:"iframe",POPUP:"popup",REDIRECT:"redirect"},i={OK:"ok",CANCELED:"canceled",FAILED:"failed"},r=class{constructor(t,e,s,n,r,o){this.code=t,this.data=t==i.OK?e:null,this.mode=s,this.origin=n,this.originVerified=r,this.secureChannel=o,this.ok=t==i.OK,this.error=t==i.FAILED?new Error(String(e)||""):null}},o="AbortError";function a(t){return function(t){if(t.origin)return t.origin;const e=t.protocol;let s=t.host;return"https:"==e&&s.indexOf(":443")==s.length-4?s=s.replace(":443",""):"http:"==e&&s.indexOf(":80")==s.length-3&&(s=s.replace(":80","")),e+"//"+s}(function(t){return s||(s=document.createElement("a")),s.href=t,s}(t))}function h(t,e){const s="AbortError"+(e?": "+e:"");let n=null;if("function"==typeof t.DOMException){const e=t.DOMException;try{n=new e(s,o)}catch(t){}}return n||(n=new Error(s),n.name=o,n.code=20),n}function u(t,e,s){if(e.ok)s(e);else{const n=e.error||h(t);n.activityResult=e,s(Promise.reject(n))}}function c(t){const e=t.navigator;return/Trident|MSIE|IEMobile/i.test(e&&e.userAgent)}function p(t){const e=t.navigator;return/Edge/i.test(e&&e.userAgent)}var d="__ACTIVITIES__",m=class{constructor(t,e,s,n){this.win_=t,this.targetOrCallback_=e,this.targetOrigin_=s,this.requireTarget_=n,this.target_=null,this.acceptsChannel_=!1,this.port_=null,this.onCommand_=null,this.onCustomMessage_=null,this.channels_=null,this.boundHandleEvent_=this.handleEvent_.bind(this)}connect(t){if(this.onCommand_)throw new Error("already connected");this.onCommand_=t,this.win_.addEventListener("message",this.boundHandleEvent_)}disconnect(){if(this.onCommand_&&(this.onCommand_=null,this.port_&&(f(this.port_),this.port_=null),this.win_.removeEventListener("message",this.boundHandleEvent_),this.channels_)){for(const t in this.channels_){const e=this.channels_[t];e.port1&&f(e.port1),e.port2&&f(e.port2)}this.channels_=null}}isConnected(){return null!=this.targetOrigin_}getTarget(){const t=this.getOptionalTarget_();if(!t)throw new Error("not connected");return t}getOptionalTarget_(){return this.onCommand_&&!this.target_&&("function"==typeof this.targetOrCallback_?this.target_=this.targetOrCallback_():this.target_=this.targetOrCallback_),this.target_}getTargetOrigin(){if(null==this.targetOrigin_)throw new Error("not connected");return this.targetOrigin_}sendConnectCommand(){const t=c(this.win_)||p(this.win_);this.sendCommand("connect",{"acceptsChannel":t})}sendStartCommand(t){let e=null;this.acceptsChannel_&&"function"==typeof this.win_.MessageChannel&&(e=new this.win_.MessageChannel),e?(this.sendCommand("start",t,[e.port2]),this.switchToChannel_(e.port1)):this.sendCommand("start",t)}sendCommand(t,e,s){const n={"sentinel":d,"cmd":t,"payload":e||null};if(this.port_)this.port_.postMessage(n,s||void 0);else{const e=this.getTarget(),i="connect"==t?null!=this.targetOrigin_?this.targetOrigin_:"*":this.getTargetOrigin();e.postMessage(n,i,s||void 0)}}customMessage(t){this.sendCommand("msg",t)}onCustomMessage(t){this.onCustomMessage_=t}startChannel(t){const e=t||"",s=this.getChannelObj_(e);if(!s.port1){const t=new this.win_.MessageChannel;s.port1=t.port1,s.port2=t.port2,s.resolver(s.port1)}return s.port2&&(this.sendCommand("cnset",{"name":e},[s.port2]),s.port2=null),s.promise}askChannel(t){const e=t||"",s=this.getChannelObj_(e);return s.port1||this.sendCommand("cnget",{"name":e}),s.promise}receiveChannel_(t,e){const s=this.getChannelObj_(t);s.port1=e,s.resolver(e)}getChannelObj_(t){this.channels_||(this.channels_={});let e=this.channels_[t];if(!e){let s;const n=new Promise((t=>{s=t}));e={port1:null,port2:null,resolver:s,promise:n},this.channels_[t]=e}return e}switchToChannel_(t){this.port_&&f(this.port_),this.port_=t,this.port_.onmessage=t=>{const e=t.data,s=e&&e.cmd,n=e&&e.payload||null;s&&this.handleCommand_(s,n,t)}}handleEvent_(t){if(this.requireTarget_&&this.getOptionalTarget_()!=t.source)return;const e=t.data;if(!e||e.sentinel!=d)return;const s=e.cmd;if(this.port_&&"connect"!=s&&"start"!=s)return;const n=t.origin,i=e.payload||null;null==this.targetOrigin_&&"start"==s&&(this.targetOrigin_=n),null==this.targetOrigin_&&t.source&&this.getOptionalTarget_()==t.source&&(this.targetOrigin_=n),n==this.targetOrigin_&&this.handleCommand_(s,i,t)}handleCommand_(t,e,s){if("connect"==t)this.port_&&(f(this.port_),this.port_=null),this.acceptsChannel_=e&&e.acceptsChannel||!1,this.onCommand_(t,e);else if("start"==t){const n=s.ports&&s.ports[0];n&&this.switchToChannel_(n),this.onCommand_(t,e)}else if("msg"==t)null!=this.onCustomMessage_&&null!=e&&this.onCustomMessage_(e);else if("cnget"==t){const t=e.name;this.startChannel(t)}else if("cnset"==t){const t=e.name,n=s.ports[0];this.receiveChannel_(t,n)}else this.onCommand_(t,e)}};function f(t){try{t.close()}catch(t){}}var b=class{constructor(t,e,s){this.iframe_=t,this.url_=e,this.args_=s||null,this.win_=this.iframe_.ownerDocument.defaultView,this.targetOrigin_=a(e),this.connected_=!1,this.connectedResolver_=null,this.connectedPromise_=new Promise((t=>{this.connectedResolver_=t})),this.readyResolver_=null,this.readyPromise_=new Promise((t=>{this.readyResolver_=t})),this.resultResolver_=null,this.resultPromise_=new Promise((t=>{this.resultResolver_=t})),this.onResizeRequest_=null,this.requestedHeight_=null,this.messenger_=new m(this.win_,(()=>this.iframe_.contentWindow),this.targetOrigin_,!0)}getMode(){return n.IFRAME}connect(){if(!function(t){if("isConnected"in t)return t.isConnected;const e=t.ownerDocument&&t.ownerDocument.documentElement;return e&&e.contains(t)||!1}(this.iframe_))throw new Error("iframe must be in DOM");return this.messenger_.connect(this.handleCommand_.bind(this)),this.iframe_.src=this.url_,this.connectedPromise_}disconnect(){this.connected_=!1,this.messenger_.disconnect()}acceptResult(){return this.resultPromise_}getTargetWin(){return this.iframe_.contentWindow||null}message(t){this.messenger_.customMessage(t)}onMessage(t){this.messenger_.onCustomMessage(t)}messageChannel(t){return this.messenger_.askChannel(t)}whenReady(){return this.readyPromise_}onResizeRequest(t){this.onResizeRequest_=t,l().then((()=>{null!=this.requestedHeight_&&t(this.requestedHeight_)}))}resized(){if(!this.connected_)return;const t=this.iframe_.offsetHeight;this.messenger_.sendCommand("resized",{"height":t})}handleCommand_(t,e){if("connect"==t)this.connected_=!0,this.messenger_.sendStartCommand(this.args_),this.connectedResolver_();else if("result"==t){if(this.resultResolver_){const t=e.code,s=t==i.FAILED?new Error(e.data||""):e.data,o=new r(t,s,n.IFRAME,this.messenger_.getTargetOrigin(),!0,!0);u(this.win_,o,this.resultResolver_),this.resultResolver_=null,this.messenger_.sendCommand("close"),this.disconnect()}}else"ready"==t?this.readyResolver_&&(this.readyResolver_(),this.readyResolver_=null):"resize"==t&&(this.requestedHeight_=e.height,this.onResizeRequest_&&this.onResizeRequest_(this.requestedHeight_))}},w=class{constructor(t,e,s,n,i,r){if(!n||"_blank"!=n&&"_top"!=n&&"_"==n[0])throw new Error('The only allowed targets are "_blank", "_top" and name targets');this.win_=t,this.requestId_=e,this.url_=s,this.openTarget_=n,this.args_=i||null,this.options_=r||{},this.connectedResolver_=null,this.connectedPromise_=new Promise((t=>{this.connectedResolver_=t})),this.resultResolver_=null,this.resultPromise_=new Promise((t=>{this.resultResolver_=t})),this.targetWin_=null,this.heartbeatInterval_=null,this.messenger_=null}getMode(){return"_top"==this.openTarget_?n.REDIRECT:n.POPUP}open(){return this.openInternal_()}whenConnected(){return this.connectedPromise_}disconnect(){if(this.heartbeatInterval_&&(this.win_.clearInterval(this.heartbeatInterval_),this.heartbeatInterval_=null),this.messenger_&&(this.messenger_.disconnect(),this.messenger_=null),this.targetWin_){try{this.targetWin_.close()}catch(t){}this.targetWin_=null}this.resultResolver_=null}getTargetWin(){return this.targetWin_}acceptResult(){return this.resultPromise_}message(t){this.messenger_.customMessage(t)}onMessage(t){this.messenger_.onCustomMessage(t)}messageChannel(t){return this.messenger_.askChannel(t)}openInternal_(){const t=this.buildFeatures_();let e,s=this.url_;if(!this.options_.skipRequestInUrl){const t=this.options_.returnUrl||function(t){const e=t.indexOf("#");return-1==e?t:t.substring(0,e)}(this.win_.location.href);s=function(t,e,s){return t+(-1==t.indexOf("#")?"#":"&")+encodeURIComponent("__WA__")+"="+encodeURIComponent(s)}(s,0,function(t){const e={"requestId":t.requestId,"returnUrl":t.returnUrl,"args":t.args};return void 0!==t.origin&&(e.origin=t.origin),void 0!==t.originVerified&&(e.originVerified=t.originVerified),JSON.stringify(e)}({requestId:this.requestId_,returnUrl:t,args:this.args_}))}let n=this.openTarget_;"_top"!=n&&c(this.win_)&&(n="_top");try{e=this.win_.open(s,n,t)}catch(t){}if(!e&&"_top"!=n&&!this.options_.disableRedirectFallback){n="_top";try{e=this.win_.open(s,n)}catch(t){}}return e?(this.targetWin_=e,"_top"!=n&&this.setupPopup_()):this.disconnectWithError_(new Error("failed to open window")),this.resultPromise_.catch((()=>{}))}buildFeatures_(){const t=this.win_.screen,e=t.availWidth||t.width,s=t.availHeight||t.height,n=this.isTopWindow_(),i=p(this.win_),r=n&&this.win_.outerWidth>this.win_.innerWidth?Math.min(100,this.win_.outerWidth-this.win_.innerWidth):i?100:0,o=n&&this.win_.outerHeight>this.win_.innerHeight?Math.min(100,this.win_.outerHeight-this.win_.innerHeight):i?100:0,a=Math.max(e-r,.5*e),h=Math.max(s-o,.5*s);let l=Math.floor(Math.min(600,.9*a)),u=Math.floor(Math.min(600,.9*h));this.options_.width&&(l=Math.min(this.options_.width,a)),this.options_.height&&(u=Math.min(this.options_.height,h));const c=Math.floor((t.width-l)/2),g=Math.floor((t.height-u)/2),d={"height":u,"width":l,"resizable":"yes","scrollbars":"yes"};i||(d.left=c,d.top=g);let m="";for(const t in d)m&&(m+=","),m+=`${t}=${d[t]}`;return m}isTopWindow_(){return this.win_==this.win_.top}setupPopup_(){this.heartbeatInterval_=this.win_.setInterval((()=>{this.check_(!0)}),500),this.messenger_=new m(this.win_,this.targetWin_,null,!0),this.messenger_.connect(this.handleCommand_.bind(this))}check_(t){this.targetWin_&&!this.targetWin_.closed||(this.heartbeatInterval_&&(this.win_.clearInterval(this.heartbeatInterval_),this.heartbeatInterval_=null),this.win_.setTimeout((()=>{try{this.result_(i.CANCELED,null)}catch(t){this.disconnectWithError_(t)}}),t?3e3:0))}disconnectWithError_(t){this.resultResolver_&&this.resultResolver_(Promise.reject(t)),this.disconnect()}result_(t,e){if(this.resultResolver_){const s=this.messenger_.isConnected(),i=new r(t,e,n.POPUP,s?this.messenger_.getTargetOrigin():a(this.url_),s,s);u(this.win_,i,this.resultResolver_),this.resultResolver_=null}this.messenger_&&this.messenger_.sendCommand("close"),this.disconnect()}handleCommand_(t,e){if("connect"==t)this.messenger_.sendStartCommand(this.args_),this.connectedResolver_();else if("result"==t){const t=e.code,s=t==i.FAILED?new Error(e.data||""):e.data;this.result_(t,s)}else"check"==t&&this.win_.setTimeout((()=>this.check_()),200)}};var v=class{constructor(t,e,s,n,i){this.win_=t,this.code_=e,this.data_=s,this.targetOrigin_=n,this.targetOriginVerified_=i}getMode(){return n.REDIRECT}acceptResult(){const t=new r(this.code_,this.data_,n.REDIRECT,this.targetOrigin_,this.targetOriginVerified_,!1);return new Promise((e=>{u(this.win_,t,e)}))}};e.exports={ActivityPorts:class{constructor(t){this.version="1.24",this.win_=t,this.fragment_=t.location.hash,this.requestHandlers_={},this.resultBuffer_={},this.redirectErrorResolver_=null,this.redirectErrorPromise_=new Promise((t=>{this.redirectErrorResolver_=t}))}openIframe(t,e,s){const n=new b(t,e,s);return n.connect().then((()=>n))}open(t,e,s,n,i){return{targetWin:this.openWin_(t,e,s,n,i).getTargetWin()}}openWithMessaging(t,e,s,n,i){const r=this.openWin_(t,e,s,n,i);return r.whenConnected().then((()=>r))}onResult(t,e){let s=this.requestHandlers_[t];s||(s=[],this.requestHandlers_[t]=s),s.push(e);const n=this.discoverResult_(t);n&&this.consumeResult_(n,e)}onRedirectError(t){this.redirectErrorPromise_.then(t)}openWin_(t,e,s,n,i){const r=new w(this.win_,t,e,s,n,i);return r.open().then((()=>{this.consumeResultAll_(t,r)})),r}discoverResult_(t){let e=this.resultBuffer_[t];if(!e&&this.fragment_){try{e=function(t,e,s){const n=(i=e,i?(/^[?#]/.test(i)?i.slice(1):i).split("&").reduce(((t,e)=>{const s=e.split("="),n=decodeURIComponent(s[0]||""),i=decodeURIComponent(s[1]||"");return n&&(t[n]=i),t}),{}):{}).__WA_RES__;var i;if(!n)return null;const r=JSON.parse(n);if(!r||r.requestId!=s)return null;const o=function(t,e){if(!t)return t;const s=encodeURIComponent("__WA_RES__")+"=";let n=-1;do{if(n=t.indexOf(s,n),-1!=n){const e=n>0?t.substring(n-1,n):"";if(""==e||"?"==e||"#"==e||"&"==e){let e=t.indexOf("&",n+1);-1==e&&(e=t.length),t=t.substring(0,n)+t.substring(e+1)}else n++}}while(-1!=n&&n<t.length);return t}(t.location.hash)||"";if(o!=t.location.hash&&t.history&&t.history.replaceState)try{t.history.replaceState(t.history.state,"",o)}catch(t){}const h=r.code,l=r.data,u=r.origin,c=t.document.referrer&&a(t.document.referrer);return new v(t,h,l,u,u==c)}(this.win_,this.fragment_,t)}catch(t){!function(t){setTimeout((()=>{throw t}))}(t),this.redirectErrorResolver_(t)}e&&(this.resultBuffer_[t]=e)}return e}consumeResult_(t,e){l().then((()=>{e(t)}))}consumeResultAll_(t,e){const s=this.requestHandlers_[t];s&&s.forEach((t=>{this.consumeResult_(e,t)})),this.resultBuffer_[t]=e}},ActivityIframePort:b,ActivityMessagingPort:class{getTargetWin(){}message(t){}onMessage(t){}messageChannel(t){}},ActivityMode:n,ActivityOpenOptions:void 0,ActivityPort:class{getMode(){}acceptResult(){}},ActivityRequest:void 0,ActivityResult:r,ActivityResultCode:i,ActivityWindowPort:w,createAbortError:h,isAbortError:function(t){return!(!t||"object"!=typeof t)&&t.name===o}}}},function(){return c||(0,u[Object.keys(u)[0]])((c={exports:{}}).exports,c),c.exports});g(),h();var{hasOwnProperty:d,toString:m}=Object.prototype;function f(t){const e=Object.create(null);return t&&Object.assign(e,t),e}function b(t,e){return d.call(t,e)}function w(t,e){if("."==e)return t;let s=t;for(var n,i=r(e.split("."),!0);!(n=i()).done;){const t=n.value;if(!(t&&s&&void 0!==s[t]&&"object"==typeof s&&b(s,t))){s=void 0;break}s=s[t]}return s}var v=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function x(t,e=""){try{return decodeURIComponent(t)}catch(t){return e}}function y(t){const e=f();if(!t)return e;let s;for(;s=v.exec(t);){const t=x(s[1],s[1]),n=s[2]?x(s[2].replace(/\+/g," "),s[2]):"";e[t]=n}return e}function A(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function I(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function k(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?I(Object(s),!0).forEach((function(e){A(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):I(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}h();var{isArray:C}=Array;h();var E=self.AMP_CONFIG||{},N=("string"==typeof E.thirdPartyFrameRegex?new RegExp(E.thirdPartyFrameRegex):E.thirdPartyFrameRegex,("string"==typeof E.cdnProxyRegex?new RegExp(E.cdnProxyRegex):E.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function T(t){if(!self.document||!self.document.head)return null;if(self.location&&N.test(self.location.origin))return null;const e=self.document.head.querySelector(`meta[name="${t}"]`);return e&&e.getAttribute("content")||null}E.thirdPartyUrl,E.thirdPartyFrameHost,E.cdnUrl||T("runtime-host"),E.errorReportingUrl,E.betaErrorReportingUrl,E.localDev,E.geoApiUrl||T("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var P=self.__AMP_LOG;function _(t){return P.user||(P.user=L()),function(t,e){return e&&e.ownerDocument.defaultView!=t}(P.user.win,t)?P.userForEmbed||(P.userForEmbed=L()):P.user}function L(t){return function(t,e){throw new Error("failed to call initLogConstructor")}()}function S(t,e,s,n,i,r,o,a,h,l,u){return t}function O(t,e,s,n,i,r,o,a,h,l,u){return _().assert(t,e,s,n,i,r,o,a,h,l,u)}function M(t,e){return G(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),e)}function R(t,e){return G(z(D(t)),e)}function j(t,e){return function(t,e){const s=B(t,e);if(s)return s;const n=F(t);return n[e]=function(){const t=new a,{promise:e,reject:s,resolve:n}=t;return e.catch((()=>{})),{obj:null,promise:e,resolve:n,reject:s,context:null,ctor:null}}(),n[e].promise}(z(t),e)}function U(t,e){return B(z(t),e)}function D(t){return t.nodeType?(e=t,s=(e.ownerDocument||e).defaultView,M(s,"ampdoc")).getAmpDoc(t):t;var e,s}function z(t){const e=D(t);return e.isSingleDoc()?e.win:e}function G(t,e){S(V(t,e));const s=F(t)[e];return s.obj||(S(s.ctor),S(s.context),s.obj=new s.ctor(s.context),S(s.obj),s.context=null,s.resolve&&s.resolve(s.obj)),s.obj}function B(t,e){const s=F(t)[e];return s?s.promise?s.promise:(G(t,e),s.promise=Promise.resolve(s.obj)):null}function F(t){let e=t.__AMP_SERVICES;return e||(e=t.__AMP_SERVICES={}),e}function V(t,e){const s=t.__AMP_SERVICES&&t.__AMP_SERVICES[e];return!(!s||!s.ctor)}g();var $="__AMP__EXPERIMENT_TOGGLES";function K(t){var e,s,n,i,o;if(t[$])return t[$];t[$]=f();const a=t[$],h=k(k({},null!==(e=t.AMP_CONFIG)&&void 0!==e?e:{}),null!==(s=t.AMP_EXP)&&void 0!==s?s:(l=(null===(n=t.__AMP_EXP)||void 0===n?void 0:n.textContent)||"{}",JSON.parse(l)));var l;for(const t in h){const e=h[t];"number"==typeof e&&e>=0&&e<=1&&(a[t]=Math.random()<e)}const u=null===(i=t.AMP_CONFIG)||void 0===i?void 0:i["allow-doc-opt-in"];if(C(u)&&u.length){const e=t.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(e)for(var c,g,p=r((null===(c=e.getAttribute("content"))||void 0===c?void 0:c.split(","))||[],!0);!(g=p()).done;){const t=g.value;u.includes(t)&&(a[t]=!0)}}Object.assign(a,function(t){var e;let s="";try{var n;"localStorage"in t&&(s=null!==(n=t.localStorage.getItem("amp-experiment-toggles"))&&void 0!==n?n:"")}catch(t){}const i=(null===(e=s)||void 0===e?void 0:e.split(/\s*,\s*/g))||[],o=f();for(var a,h=r(i,!0);!(a=h()).done;){const t=a.value;t&&("-"==t[0]?o[t.substr(1)]=!1:o[t]=!0)}return o}(t));const d=null===(o=t.AMP_CONFIG)||void 0===o?void 0:o["allow-url-opt-in"];if(C(d)&&d.length){const e=y(t.location.originalHash||t.location.hash);for(var m,b=r(d,!0);!(m=b()).done;){const t=m.value,s=e[`e-${t}`];"1"==s&&(a[t]=!0),"0"==s&&(a[t]=!1)}}return a}function W(t,e,s,n){return function(t,e,s,n){const i=U(t,e);if(i)return i;const r=D(t);return r.whenExtensionsKnown().then((()=>{const t=r.getExtensionVersion(s);return t?M(r.win,"extensions").waitForExtension(s,t):null})).then((s=>s?n?U(t,e):j(t,e):null))}(t,e,s,n).then((t=>function(t,e,s){return O(t,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.",e,s,s,s)}(t,e,s)))}var q=t=>function(t,e){const s=z(D(t));return V(s,e)?G(s,e):null}(t,"url-replace");g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),g(),h();var H=t=>"paywall"===t||"ad_shown"===t||"offers_shown"===t||"subscriptions_landing_page"===t||"offer_selected"===t||"payment_flow_start"===t||"payment_complete"===t||"custom"===t,Y=1001,J=1005,Z=1006,Q=2e3,X=3007,tt=3008,et=3009,st=3010,nt=4e3,it=1003,rt=class{constructor(t=[],e=!0){const s=e?1:0;this.complete_=null==t[s]?null:t[s]}getComplete(){return this.complete_}setComplete(t){this.complete_=t}toArray(t=!0){const e=[this.complete_];return t&&e.unshift(this.label()),e}label(){return"AccountCreationRequest"}},ot=class{constructor(t=[],e=!0){const s=e?1:0;this.subscriberOrMember_=null==t[s]?null:t[s],this.linkRequested_=null==t[1+s]?null:t[1+s]}getSubscriberOrMember(){return this.subscriberOrMember_}setSubscriberOrMember(t){this.subscriberOrMember_=t}getLinkRequested(){return this.linkRequested_}setLinkRequested(t){this.linkRequested_=t}toArray(t=!0){const e=[this.subscriberOrMember_,this.linkRequested_];return t&&e.unshift(this.label()),e}label(){return"AlreadySubscribedResponse"}},at=class{constructor(t=[],e=!0){const s=e?1:0;this.embedderOrigin_=null==t[s]?null:t[s],this.transactionId_=null==t[1+s]?null:t[1+s],this.referringOrigin_=null==t[2+s]?null:t[2+s],this.utmSource_=null==t[3+s]?null:t[3+s],this.utmCampaign_=null==t[4+s]?null:t[4+s],this.utmMedium_=null==t[5+s]?null:t[5+s],this.sku_=null==t[6+s]?null:t[6+s],this.readyToPay_=null==t[7+s]?null:t[7+s],this.label_=t[8+s]||[],this.clientVersion_=null==t[9+s]?null:t[9+s],this.url_=null==t[10+s]?null:t[10+s],this.clientTimestamp_=null==t[11+s]||null==t[11+s]?null:new xt(t[11+s],e)}getEmbedderOrigin(){return this.embedderOrigin_}setEmbedderOrigin(t){this.embedderOrigin_=t}getTransactionId(){return this.transactionId_}setTransactionId(t){this.transactionId_=t}getReferringOrigin(){return this.referringOrigin_}setReferringOrigin(t){this.referringOrigin_=t}getUtmSource(){return this.utmSource_}setUtmSource(t){this.utmSource_=t}getUtmCampaign(){return this.utmCampaign_}setUtmCampaign(t){this.utmCampaign_=t}getUtmMedium(){return this.utmMedium_}setUtmMedium(t){this.utmMedium_=t}getSku(){return this.sku_}setSku(t){this.sku_=t}getReadyToPay(){return this.readyToPay_}setReadyToPay(t){this.readyToPay_=t}getLabelList(){return this.label_}setLabelList(t){this.label_=t}getClientVersion(){return this.clientVersion_}setClientVersion(t){this.clientVersion_=t}getUrl(){return this.url_}setUrl(t){this.url_=t}getClientTimestamp(){return this.clientTimestamp_}setClientTimestamp(t){this.clientTimestamp_=t}toArray(t=!0){const e=[this.embedderOrigin_,this.transactionId_,this.referringOrigin_,this.utmSource_,this.utmCampaign_,this.utmMedium_,this.sku_,this.readyToPay_,this.label_,this.clientVersion_,this.url_,this.clientTimestamp_?this.clientTimestamp_.toArray(t):[]];return t&&e.unshift(this.label()),e}label(){return"AnalyticsContext"}},ht=class{constructor(t=[],e=!0){const s=e?1:0;this.eventOriginator_=null==t[s]?null:t[s],this.isFromUserAction_=null==t[1+s]?null:t[1+s]}getEventOriginator(){return this.eventOriginator_}setEventOriginator(t){this.eventOriginator_=t}getIsFromUserAction(){return this.isFromUserAction_}setIsFromUserAction(t){this.isFromUserAction_=t}toArray(t=!0){const e=[this.eventOriginator_,this.isFromUserAction_];return t&&e.unshift(this.label()),e}label(){return"AnalyticsEventMeta"}},lt=class{constructor(t=[],e=!0){const s=e?1:0;this.context_=null==t[s]||null==t[s]?null:new at(t[s],e),this.event_=null==t[1+s]?null:t[1+s],this.meta_=null==t[2+s]||null==t[2+s]?null:new ht(t[2+s],e),this.params_=null==t[3+s]||null==t[3+s]?null:new pt(t[3+s],e)}getContext(){return this.context_}setContext(t){this.context_=t}getEvent(){return this.event_}setEvent(t){this.event_=t}getMeta(){return this.meta_}setMeta(t){this.meta_=t}getParams(){return this.params_}setParams(t){this.params_=t}toArray(t=!0){const e=[this.context_?this.context_.toArray(t):[],this.event_,this.meta_?this.meta_.toArray(t):[],this.params_?this.params_.toArray(t):[]];return t&&e.unshift(this.label()),e}label(){return"AnalyticsRequest"}},ut=class{constructor(t=[],e=!0){const s=e?1:0;this.jwt_=null==t[s]?null:t[s],this.source_=null==t[1+s]?null:t[1+s]}getJwt(){return this.jwt_}setJwt(t){this.jwt_=t}getSource(){return this.source_}setSource(t){this.source_=t}toArray(t=!0){const e=[this.jwt_,this.source_];return t&&e.unshift(this.label()),e}label(){return"EntitlementJwt"}},ct=class{constructor(t=[],e=!0){const s=e?1:0;this.usedEntitlement_=null==t[s]||null==t[s]?null:new ut(t[s],e),this.clientEventTime_=null==t[1+s]||null==t[1+s]?null:new xt(t[1+s],e),this.entitlementSource_=null==t[2+s]?null:t[2+s],this.entitlementResult_=null==t[3+s]?null:t[3+s],this.token_=null==t[4+s]?null:t[4+s],this.isUserRegistered_=null==t[5+s]?null:t[5+s]}getUsedEntitlement(){return this.usedEntitlement_}setUsedEntitlement(t){this.usedEntitlement_=t}getClientEventTime(){return this.clientEventTime_}setClientEventTime(t){this.clientEventTime_=t}getEntitlementSource(){return this.entitlementSource_}setEntitlementSource(t){this.entitlementSource_=t}getEntitlementResult(){return this.entitlementResult_}setEntitlementResult(t){this.entitlementResult_=t}getToken(){return this.token_}setToken(t){this.token_=t}getIsUserRegistered(){return this.isUserRegistered_}setIsUserRegistered(t){this.isUserRegistered_=t}toArray(t=!0){const e=[this.usedEntitlement_?this.usedEntitlement_.toArray(t):[],this.clientEventTime_?this.clientEventTime_.toArray(t):[],this.entitlementSource_,this.entitlementResult_,this.token_,this.isUserRegistered_];return t&&e.unshift(this.label()),e}label(){return"EntitlementsRequest"}},gt=class{constructor(t=[],e=!0){const s=e?1:0;this.jwt_=null==t[s]?null:t[s],this.swgUserToken_=null==t[1+s]?null:t[1+s]}getJwt(){return this.jwt_}setJwt(t){this.jwt_=t}getSwgUserToken(){return this.swgUserToken_}setSwgUserToken(t){this.swgUserToken_=t}toArray(t=!0){const e=[this.jwt_,this.swgUserToken_];return t&&e.unshift(this.label()),e}label(){return"EntitlementsResponse"}},pt=class{constructor(t=[],e=!0){const s=e?1:0;this.smartboxMessage_=null==t[s]?null:t[s],this.gpayTransactionId_=null==t[1+s]?null:t[1+s],this.hadLogged_=null==t[2+s]?null:t[2+s],this.sku_=null==t[3+s]?null:t[3+s],this.oldTransactionId_=null==t[4+s]?null:t[4+s],this.isUserRegistered_=null==t[5+s]?null:t[5+s],this.subscriptionFlow_=null==t[6+s]?null:t[6+s]}getSmartboxMessage(){return this.smartboxMessage_}setSmartboxMessage(t){this.smartboxMessage_=t}getGpayTransactionId(){return this.gpayTransactionId_}setGpayTransactionId(t){this.gpayTransactionId_=t}getHadLogged(){return this.hadLogged_}setHadLogged(t){this.hadLogged_=t}getSku(){return this.sku_}setSku(t){this.sku_=t}getOldTransactionId(){return this.oldTransactionId_}setOldTransactionId(t){this.oldTransactionId_=t}getIsUserRegistered(){return this.isUserRegistered_}setIsUserRegistered(t){this.isUserRegistered_=t}getSubscriptionFlow(){return this.subscriptionFlow_}setSubscriptionFlow(t){this.subscriptionFlow_=t}toArray(t=!0){const e=[this.smartboxMessage_,this.gpayTransactionId_,this.hadLogged_,this.sku_,this.oldTransactionId_,this.isUserRegistered_,this.subscriptionFlow_];return t&&e.unshift(this.label()),e}label(){return"EventParams"}},dt=class{constructor(t=[],e=!0){const s=e?1:0;this.complete_=null==t[s]?null:t[s],this.error_=null==t[1+s]?null:t[1+s]}getComplete(){return this.complete_}setComplete(t){this.complete_=t}getError(){return this.error_}setError(t){this.error_=t}toArray(t=!0){const e=[this.complete_,this.error_];return t&&e.unshift(this.label()),e}label(){return"FinishedLoggingResponse"}},mt=class{constructor(t=[],e=!0){const s=e?1:0;this.authCode_=null==t[s]?null:t[s],this.token_=null==t[1+s]?null:t[1+s]}getAuthCode(){return this.authCode_}setAuthCode(t){this.authCode_=t}getToken(){return this.token_}setToken(t){this.token_=t}toArray(t=!0){const e=[this.authCode_,this.token_];return t&&e.unshift(this.label()),e}label(){return"LinkSaveTokenRequest"}},ft=class{constructor(t=[],e=!0){const s=e?1:0;this.requested_=null==t[s]?null:t[s]}getRequested(){return this.requested_}setRequested(t){this.requested_=t}toArray(t=!0){const e=[this.requested_];return t&&e.unshift(this.label()),e}label(){return"LinkingInfoResponse"}},bt=class{constructor(t=[],e=!0){const s=e?1:0;this.sku_=null==t[s]?null:t[s],this.oldSku_=null==t[1+s]?null:t[1+s],this.oneTime_=null==t[2+s]?null:t[2+s],this.playOffer_=null==t[3+s]?null:t[3+s],this.oldPlayOffer_=null==t[4+s]?null:t[4+s],this.customMessage_=null==t[5+s]?null:t[5+s],this.anonymous_=null==t[6+s]?null:t[6+s]}getSku(){return this.sku_}setSku(t){this.sku_=t}getOldSku(){return this.oldSku_}setOldSku(t){this.oldSku_=t}getOneTime(){return this.oneTime_}setOneTime(t){this.oneTime_=t}getPlayOffer(){return this.playOffer_}setPlayOffer(t){this.playOffer_=t}getOldPlayOffer(){return this.oldPlayOffer_}setOldPlayOffer(t){this.oldPlayOffer_=t}getCustomMessage(){return this.customMessage_}setCustomMessage(t){this.customMessage_=t}getAnonymous(){return this.anonymous_}setAnonymous(t){this.anonymous_=t}toArray(t=!0){const e=[this.sku_,this.oldSku_,this.oneTime_,this.playOffer_,this.oldPlayOffer_,this.customMessage_,this.anonymous_];return t&&e.unshift(this.label()),e}label(){return"SkuSelectedResponse"}},wt=class{constructor(t=[],e=!0){const s=e?1:0;this.isClicked_=null==t[s]?null:t[s]}getIsClicked(){return this.isClicked_}setIsClicked(t){this.isClicked_=t}toArray(t=!0){const e=[this.isClicked_];return t&&e.unshift(this.label()),e}label(){return"SmartBoxMessage"}},vt=class{constructor(t=[],e=!0){const s=e?1:0;this.subscribe_=null==t[s]?null:t[s]}getSubscribe(){return this.subscribe_}setSubscribe(t){this.subscribe_=t}toArray(t=!0){const e=[this.subscribe_];return t&&e.unshift(this.label()),e}label(){return"SubscribeResponse"}},xt=class{constructor(t=[],e=!0){const s=e?1:0;this.seconds_=null==t[s]?null:t[s],this.nanos_=null==t[1+s]?null:t[1+s]}getSeconds(){return this.seconds_}setSeconds(t){this.seconds_=t}getNanos(){return this.nanos_}setNanos(t){this.nanos_=t}toArray(t=!0){const e=[this.seconds_,this.nanos_];return t&&e.unshift(this.label()),e}label(){return"Timestamp"}},yt=class{constructor(t=[],e=!0){const s=e?1:0;this.close_=null==t[s]?null:t[s]}getClose(){return this.close_}setClose(t){this.close_=t}toArray(t=!0){const e=[this.close_];return t&&e.unshift(this.label()),e}label(){return"ToastCloseRequest"}},At=class{constructor(t=[],e=!0){const s=e?1:0;this.native_=null==t[s]?null:t[s]}getNative(){return this.native_}setNative(t){this.native_=t}toArray(t=!0){const e=[this.native_];return t&&e.unshift(this.label()),e}label(){return"ViewSubscriptionsResponse"}},It={"AccountCreationRequest":rt,"ActionRequest":class{constructor(t=[],e=!0){const s=e?1:0;this.action_=null==t[s]?null:t[s]}getAction(){return this.action_}setAction(t){this.action_=t}toArray(t=!0){const e=[this.action_];return t&&e.unshift(this.label()),e}label(){return"ActionRequest"}},"AlreadySubscribedResponse":ot,"AnalyticsContext":at,"AnalyticsEventMeta":ht,"AnalyticsRequest":lt,"AudienceActivityClientLogsRequest":class{constructor(t=[],e=!0){const s=e?1:0;this.event_=null==t[s]?null:t[s]}getEvent(){return this.event_}setEvent(t){this.event_=t}toArray(t=!0){const e=[this.event_];return t&&e.unshift(this.label()),e}label(){return"AudienceActivityClientLogsRequest"}},"CompleteAudienceActionResponse":class{constructor(t=[],e=!0){const s=e?1:0;this.swgUserToken_=null==t[s]?null:t[s],this.actionCompleted_=null==t[1+s]?null:t[1+s],this.userEmail_=null==t[2+s]?null:t[2+s]}getSwgUserToken(){return this.swgUserToken_}setSwgUserToken(t){this.swgUserToken_=t}getActionCompleted(){return this.actionCompleted_}setActionCompleted(t){this.actionCompleted_=t}getUserEmail(){return this.userEmail_}setUserEmail(t){this.userEmail_=t}toArray(t=!0){const e=[this.swgUserToken_,this.actionCompleted_,this.userEmail_];return t&&e.unshift(this.label()),e}label(){return"CompleteAudienceActionResponse"}},"EntitlementJwt":ut,"EntitlementsRequest":ct,"EntitlementsResponse":gt,"EventParams":pt,"FinishedLoggingResponse":dt,"LinkSaveTokenRequest":mt,"LinkingInfoResponse":ft,"OpenDialogRequest":class{constructor(t=[],e=!0){const s=e?1:0;this.urlPath_=null==t[s]?null:t[s]}getUrlPath(){return this.urlPath_}setUrlPath(t){this.urlPath_=t}toArray(t=!0){const e=[this.urlPath_];return t&&e.unshift(this.label()),e}label(){return"OpenDialogRequest"}},"SkuSelectedResponse":bt,"SmartBoxMessage":wt,"SubscribeResponse":vt,"Timestamp":xt,"ToastCloseRequest":yt,"ViewSubscriptionsResponse":At};function kt(t,e,s,n){return t.acceptResult().then((t=>{if(t.origin!=e||s&&!t.originVerified||n&&!t.secureChannel)throw new Error("channel mismatch");return t.data}))}function Ct(t){if(/swg.debug=1/.test(self.location.hash)){const t=Array.prototype.slice.call(arguments,0);t.unshift("[Subscriptions]"),Et.apply(Et,t)}}function Et(t){console.log.apply(console,arguments)}function Nt(t){console.warn.apply(console,arguments)}function Tt(t,e,s){let n;if(!t){const t=(e=e||"Assertion failed").split("%s"),s=t.shift();let i=s;const r=[];Pt(r,s);for(let e=2;e<arguments.length;e++){const s=arguments[e];s&&s.tagName&&(n=s);const o=t.shift();r.push(s),Pt(r,o.trim()),i+=_t(s)+o}const o=new Error(i);throw o.fromAssert=!0,o.associatedElement=n,o.messageArray=r,o}return t}function Pt(t,e){""!=e&&t.push(e)}function _t(t){return t&&1==t.nodeType?t.tagName.toLowerCase()+(t.id?"#"+t.id:""):t}function Lt(t,e){if(!t)return null;const s=t.length||0;if(s>0)for(let n=0;n<s;n++){const s=t[n];if(e(s,n,t))return s}return null}var St={"-":"+","_":"/"},Ot={"+":"-","/":"_","=":""};function Mt(t){const e=new Uint8Array(t.length);for(let s=0;s<t.length;s++){const n=t.charCodeAt(s);Tt(n<=255,"Characters must be in range [0,255]"),e[s]=n}return e}function Rt(t){const e=new Array(t.length);for(let s=0;s<t.length;s++)e[s]=String.fromCharCode(t[s]);return e.join("")}function jt(t){if("undefined"!=typeof TextDecoder)return new TextDecoder("utf-8").decode(t);const e=Rt(new Uint8Array(t));return decodeURIComponent(escape(e))}function Ut(t){return"undefined"!=typeof TextEncoder?new TextEncoder("utf-8").encode(t):Mt(unescape(encodeURIComponent(t)))}function Dt(t){return Mt(atob(t.replace(/[-_]/g,(t=>St[t]))))}function zt(t){const e=Rt(t);return btoa(e).replace(/[+/=]/g,(t=>Ot[t]))}var Gt,Bt="0123456789ABCDEF";function Ft(){let t=function(){const t=Date.now().toString(16);return t.substring(t.length-8).toUpperCase()}()+"-",e=0;const s=function(t,e){const s=new Uint8Array(23),n=self.msCrypto?self.msCrypto:self.crypto;if(n&&n.getRandomValues){n.getRandomValues(s);for(let t=s.length-1;t>-1;t--)s[t]=s[t]%16}else for(let t=s.length-1;t>-1;t--)s[t]=Math.floor(16*Math.random());return s}();for(let i=9;i<36;i++)switch(i){case 13:case 18:case 23:t+="-";break;case 14:t+="4";break;case 19:t+=(n=s[e++],Bt[3&n|8]);break;default:t+=Bt[s[e++]]}var n;return t}function Vt(t){const e=self.crypto||self.msCrypto,s=null==e?void 0:e.subtle;if(!s){const t="Swgjs only works on secure (HTTPS or localhost) pages.";return Nt(t),Promise.reject(t)}return s.digest("SHA-512",Ut(t)).then((t=>function(t){const e=[],s=new DataView(t);for(let t=0;t<s.byteLength;t+=4){const n=s.getUint32(t).toString(16);e.push(("00000000"+n).slice(-"00000000".length))}return e.join("")}(t)))}var $t=["Webkit","webkit","Moz","moz","ms","O","o"],Kt={"align-content":"normal","animation":"none","align-items":"normal","align-self":"auto","alignment-baseline":"auto","backface-visibility":"hidden","background-clip":"border-box","background-image":"none","baseline-shift":"0","block-size":"auto","border":"none","border-collapse":"separate","bottom":"0","box-sizing":"border-box","break-after":"auto","break-before":"auto","break-inside":"auto","buffered-rendering":"auto","caption-side":"top","caret-color":"rgb(51, 51, 51)","clear":"none","color":"rgb(51, 51, 51)","color-rendering":"auto","column-count":"auto","column-fill":"balance","column-gap":"normal","column-rule-color":"rgb(51, 51, 51)","column-rule-style":"none","column-rule-width":"0","column-span":"none","column-width":"auto","contain":"none","counter-increment":"none","counter-reset":"none","cursor":"auto","direction":"inherit","display":"block","empty-cells":"show","filter":"none","flex":"none","flex-flow":"row nowrap","float":"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1","font":"none","font-size":"medium","font-family":"","height":"auto","hyphens":"manual","image-rendering":"auto","inline-size":"","isolation":"auto","justify-content":"normal","justify-items":"normal","justify-self":"auto","letter-spacing":"normal","lighting-color":"rgb(255, 255, 255)","line-break":"auto","line-height":"normal","margin-bottom":"0","mask":"none","max-block-size":"none","max-height":"none","max-inline-size":"none","max-width":"none","min-block-size":"none","min-height":"0","min-inline-size":"0","min-width":"0","mix-blend-mode":"normal","object-fit":"fill","offset-distance":"none","offset-path":"none","offset-rotate":"auto 0deg","opacity":"1","order":"0","orphans":"2","outline":"none","overflow-anchor":"auto","overflow-wrap":"normal","overflow":"visible","padding":"0","page":"","perspective":"none","pointer-events":"auto","position":"static","quotes":"","resize":"none","right":"0","scroll-behavior":"auto","tab-size":"8","table-layout":"auto","text-align":"start","text-align-last":"auto","text-anchor":"start","text-combine-upright":"none","text-decoration":"none","text-indent":"0","text-orientation":"mixed","text-overflow":"clip","text-rendering":"auto","text-shadow":"none","text-size-adjust":"auto","text-transform":"none","text-underline-position":"auto","top":"auto","touch-action":"auto","transform":"none","transition":"none 0s ease 0s","unicode-bidi":"normal","user-select":"auto","vector-effect":"none","vertical-align":"baseline","visibility":"visible","white-space":"normal","widows":"2","word-break":"normal","word-spacing":"0","word-wrap":"normal","writing-mode":"horizontal-tb","zoom":"1","z-index":"auto"};function Wt(t,e,s){if(!("--".length>(n=e).length)&&0==n.lastIndexOf("--",0))return e;var n;Gt||(Gt=Object.create(null));let i=Gt[e];if(!i||s){if(i=e,void 0===t[e]){const s=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(e),n=function(t,e){for(let s=0;s<$t.length;s++){const n=$t[s]+e;if(void 0!==t[n])return n}return""}(t,s);void 0!==t[n]&&(i=n)}s||(Gt[e]=i)}return i}function qt(t,e){for(const s in e)t.style.setProperty(Wt(e,s),e[s].toString(),"important")}function Ht(t,e,s,n,i){const r=Wt(t.style,e,i);r&&(t.style[r]=n?s+n:s)}function Yt(t,e){for(const s in e)Ht(t,s,e[s])}function Jt(t,e,s,n){const i=t.createElement(e);if(function(t,e){for(const s in e)"style"==s?Yt(t,e[s]):t.setAttribute(s,e[s])}(i,s),null!=n)if("string"==typeof n)i.textContent=n;else if(n.nodeType)i.appendChild(n);else if("length"in n)for(let t=0;t<n.length;t++)i.appendChild(n[t]);else Tt(!1,"Unsupported content: %s",n);return i}function Zt(t,e){const s=Jt(t.getWin().document,"style",{"type":"text/css"});return s.textContent=e,t.getHead().appendChild(s),s}var{createAbortError:Qt,isAbortError:Xt}=p();function te(t){return Xt(t)}function ee(t,e){return Qt(t,e)}var se=class{static throwAsync(t){setTimeout((()=>{throw t}))}},ne={"frameborder":"0","scrolling":"no"},ie=class extends class{constructor(){}getElement(){}init(t){}resized(){}whenComplete(){}shouldFadeBody(){}hasLoadingIndicator(){}}{constructor(t,e,s,n,i=!1,r=!1){super(),this.win_=t,this.doc_=this.win_.document,this.iframe_=Jt(this.doc_,"iframe",ne),this.activityPorts_=e,this.src_=s,this.args_=n||{},this.shouldFadeBody_=i,this.hasLoadingIndicator_=r,this.port_=null,this.portResolver_=null,this.portPromise_=new Promise((t=>{this.portResolver_=t}))}getElement(){return this.iframe_}init(t){return this.activityPorts_.openIframe(this.iframe_,this.src_,this.args_).then((e=>this.onOpenIframeResponse_(e,t)))}shouldFadeBody(){return this.shouldFadeBody_}hasLoadingIndicator(){return this.hasLoadingIndicator_}onOpenIframeResponse_(t,e){return this.port_=t,this.portResolver_(t),this.port_.onResizeRequest((t=>{e.resizeView(this,t)})),this.port_.whenReady()}getPortPromise_(){return this.portPromise_}on(t,e){this.getPortPromise_().then((s=>{s.on(t,e)}))}execute(t){this.getPortPromise_().then((e=>{e.execute(t)}))}acceptResult(){return this.getPortPromise_().then((t=>t.acceptResult()))}acceptResultAndVerify(t,e,s){return this.getPortPromise_().then((n=>kt(n,t,e,s)))}whenComplete(){return this.acceptResult()}onCancel(t){this.acceptResult().catch((e=>{throw te(e)&&t(),e}))}resized(){this.port_&&this.port_.resized()}},re={};function oe(t){return JSON.parse(t)}function ae(t,e){try{return oe(t)}catch(t){return void(e&&e(t))}}function he(t,e){const s=ae(t);return s&&s[e]||null}re.USER_TOKEN="USER_TOKEN";var le,ue,ce=class{constructor(){}decode(t){return this.decodeInternal_(t).payload}decodeInternal_(t){function e(){throw new Error(`Invalid token: "${t}"`)}const s=t.split(".");3!=s.length&&e();const n=Dt(s[0]),i=Dt(s[1]);return{header:ae(jt(n),e),payload:ae(jt(i),e),verifiable:`${s[0]}.${s[1]}`,sig:s[2]}}},ge="google:metering",pe=class{constructor(t,e,s,n,i,r,o,a){this.service=t,this.raw=e,this.entitlements=s,this.isReadyToPay=o||!1,this.decryptedDocumentKey=a||null,this.product_=n,this.ackHandler_=i,this.consumeHandler_=r}clone(){return new pe(this.service,this.raw,this.entitlements.map((t=>t.clone())),this.product_,this.ackHandler_,this.consumeHandler_,this.isReadyToPay,this.decryptedDocumentKey)}json(){return{"service":this.service,"entitlements":this.entitlements.map((t=>t.json())),"isReadyToPay":this.isReadyToPay}}enablesThisWithCacheableEntitlements(){return!!this.getEntitlementForThis()&&!this.enablesThisWithGoogleMetering()&&!this.enablesThisWithGoogleDevMode()}enablesThisWithGoogleMetering(){const t=this.getEntitlementForThis();return!!t&&t.source===ge}enablesThisWithGoogleDevMode(){const t=this.getEntitlementForThis();if(!t)return!1;const e="google"===t.source&&-1!==t.subscriptionToken.indexOf("GOOGLE_DEV_MODE_ORDER"),s="GOOGLE_DEV_MODE_TOKEN"===t.subscriptionToken;return e||s}enablesThis(t){return this.enables(this.product_,t)}enablesAny(t){for(let e=0;e<this.entitlements.length;e++)if(this.entitlements[e].products.length>0&&(!t||t==this.entitlements[e].source))return!0;return!1}enables(t,e){return!!t&&!!this.getEntitlementFor(t,e)}getEntitlementForThis(t){return this.getEntitlementFor(this.product_,t)}getEntitlementFor(t,e){if(!t)return Nt("SwG needs this article to define a product ID (e.g. example.com:premium). Articles can define a product ID using JSON+LD. SwG can check entitlements after this article defines a product ID."),null;const s=this.entitlements.filter((s=>s.enables(t)&&(!e||e===s.source))),n=Lt(s,(t=>t.source!==ge)),i=Lt(s,(t=>t.source===ge));return n||i||null}getEntitlementForSource(t){if(this.entitlements.length>0)for(let e=0;e<this.entitlements.length;e++)if(this.entitlements[e].subscriptionToken&&t==this.entitlements[e].source)return this.entitlements[e];return null}ack(){this.ackHandler_(this)}consume(t){this.consumeHandler_(this,t)}},de=class{constructor(t,e,s,n){this.source=t,this.products=e,this.subscriptionToken=s,this.subscriptionTokenContents=n}clone(){return new de(this.source,this.products.slice(0),this.subscriptionToken,this.subscriptionTokenContents)}json(){return{"source":this.source,"products":this.products,"subscriptionToken":this.subscriptionToken}}enables(t){if(!t)return!1;const e=t.indexOf(":");if(-1!=e){const s=t.substring(0,e+1);if(s+"*"==t&&this.products.filter((t=>t.substring(0,e+1)==s)).length>=1)return Ct("enabled with wildcard productId"),!0;if(this.products.includes(s+"*"))return Ct("enabled with wildcard entitlement"),!0}return this.products.includes(t)}static parseFromJson(t,e){t||(t={});const s=t.source||"",n=t.products||[],i=t.subscriptionToken;let r;try{r=i?e.decode(i):null}catch(t){r=null}return new de(s,n,i,r)}static parseListFromJson(t,e){return(Array.isArray(t)?t:[t]).map((t=>de.parseFromJson(t,e)))}getSku(){if("google"!==this.source)return null;const t=he(this.subscriptionToken,"productId")||null;return t||Nt("Unable to retrieve SKU from SwG subscription token"),t}},me=class{constructor(t,e){this.idToken=t,this.data=e,this.id=e.sub,this.email=e.email,this.emailVerified=e.email_verified,this.name=e.name,this.givenName=e.given_name,this.familyName=e.family_name,this.pictureUrl=e.picture}clone(){return new me(this.idToken,this.data)}json(){return{"id":this.id,"email":this.email,"emailVerified":this.emailVerified,"name":this.name,"givenName":this.givenName,"familyName":this.familyName,"pictureUrl":this.pictureUrl}}},fe=class{constructor(t,e,s,n,i,r,o=null,a=null,h=null,l=null){this.raw=t,this.purchaseData=e,this.userData=s,this.entitlements=n,this.productType=i,this.completeHandler_=r,this.oldSku=o,this.swgUserToken=a,this.paymentRecurrence=h,this.requestMetadata=l}clone(){return new fe(this.raw,this.purchaseData,this.userData,this.entitlements,this.productType,this.completeHandler_,this.oldSku,this.swgUserToken)}json(){return{"purchaseData":this.purchaseData.json(),"userData":this.userData?this.userData.json():null,"entitlements":this.entitlements?this.entitlements.json():null,"oldSku":this.oldSku,"productType":this.productType,"swgUserToken":this.swgUserToken}}complete(){return this.completeHandler_()}},be=class{constructor(t,e){this.raw=t,this.data=t,this.signature=e}clone(){return new be(this.raw,this.signature)}json(){return{"data":this.raw,"signature":this.signature}}},we=class{constructor(t,e,s,n){this.entitlements=t,this.userData=e,this.purchaseDataList=s,this.purchaseData=s[0],this.completeHandler_=n}clone(){return new we(this.entitlements,this.userData,this.purchaseDataList,this.completeHandler_)}json(){return{"entitlements":this.entitlements.json(),"userData":this.userData.json(),"purchaseDataList":this.purchaseDataList.map((t=>t.json())),"purchaseData":this.purchaseData.json()}}complete(){return this.completeHandler_()}},ve={UNKNOWN:"unknown",NON_SUBSCRIBER:"non_subscriber",SUBSCRIBER:"subscriber",PAST_SUBSCRIBER:"past_subscriber"},xe="paywall",ye="ad_shown",Ae="offers_shown",Ie="subscriptions_landing_page",ke="offer_selected",Ce="payment_flow_start",Ee="payment_complete",Ne="custom",Te={GENERAL:"general",PAYWALL:"paywall"},Pe="showOffers",_e="showSubscribeOption",Le="showAbbrvOffer",Se="showContributionOptions",Oe="subscribe",Me="contribute",Re="completeDeferredAccountCreation",je="linkAccount",Ue="showLoginPrompt",De="auto",ze="redirect",Ge="SUBSCRIPTION",Be="UI_CONTRIBUTION",Fe=/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/;function Ve(t){le||(le=self.document.createElement("a"),ue=self.UrlCache||(self.UrlCache=Object.create(null)));const e=ue[t];if(e)return e;const s=function(t,e){t.href=e;const s={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:""};return t.origin&&"null"!=t.origin?s.origin=t.origin:"data:"!=s.protocol&&s.host?s.origin=s.protocol+"//"+s.host:s.origin=s.href,s}(le,t);return ue[t]=s}function $e(t){return t?(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce(((t,e)=>{const s=e.split("=");try{const e=decodeURIComponent(s[0]||""),n=decodeURIComponent(s[1]||"");e&&(t[e]=n)}catch(t){Nt(`SwG could not parse a URL query param: ${s[0]}`)}return t}),{}):{}}function Ke(t,e,s){const n=t.indexOf("?"),i=t.indexOf("#");let r="";return-1!=i&&(r=t.substring(i),t=t.substring(0,i)),-1==n?t+="?":n<t.length-1&&(t+="&"),(t+=encodeURIComponent(e)+"="+encodeURIComponent(s))+r}function We(t){return JSON.stringify(t.toArray(!1))}function qe(t){const e=t.getRootNode().querySelector("link[rel='canonical']");return e&&e.href||""}var He=Ve(self.window.location.href),Ye=Ve(self.document.referrer);function Je(t){return"https"===(t=t||He).protocol||"https:"===t.protocol}var Ze={"zero":0,"nocache":1,"hr1":36e5,"hr12":432e5},Qe={"default":{frontEnd:"https://news.google.com",payEnv:"PRODUCTION",playEnv:"PROD",feCache:"hr1"},"prod":{frontEnd:"https://news.google.com",payEnv:"PRODUCTION",playEnv:"PROD",feCache:Ze.hr1},"autopush":{frontEnd:"https://subscribe-autopush.sandbox.google.com",payEnv:"PRODUCTION",playEnv:"AUTOPUSH",feCache:Ze.nocache},"qual":{frontEnd:"https://subscribe-qual.sandbox.google.com",payEnv:"SANDBOX",playEnv:"STAGING",feCache:Ze.hr1}};function Xe(){const t=$e(self.location.hash)["swg.mode"];return t&&Qe[t]?Qe[t]:Qe.default}function ts(){return Ve(Xe().frontEnd).origin}function es(t){return`${Xe().frontEnd}/swg/_/api/v1`+t}function ss(t){return"https://pubads.g.doubleclick.net"+t}function ns(t,e={},s=!1,n=""){const i=n?s?`swg/${n}`:`${n}/swg`:"swg";t=is(`${Xe().frontEnd}/${i}/_/ui/v1${t}`);const r=$e(self.location.hash)["swg.boqjsmode"];void 0!==r&&(t=Ke(t,"jsmode",r));for(const s in e)t=Ke(t,s,e[s]);return t}function is(t){return Ke(t,"_",function(t){let e=Ze[t];if(null==e&&(e=1),0===e)return"_";const s=Date.now();return String(e<=1?s:Math.floor(s/e))}(Xe().feCache))}function rs(t){return Object.assign(t,{"_client":"SwG 0.1.22.209"})}var os={"IMMEDIATE_WITH_TIME_PRORATION":1};function as(t,e=null){return new pt([,,,,t,,,e])}var hs=class{constructor(t,e,s="SUBSCRIPTION"){this.deps_=t,this.payClient_=t.payClient(),this.pageConfig_=t.pageConfig(),this.dialogManager_=t.dialogManager(),this.subscriptionRequest_=e,this.productType_=s,this.analyticsService_=t.analytics(),this.eventManager_=t.eventManager(),this.clientConfigManager_=t.clientConfigManager()}start(){return this.clientConfigManager_.getClientConfig().then((t=>{this.start_(t.paySwgVersion)}))}start_(t){const e={"skuId":this.subscriptionRequest_.skuId,"publicationId":this.pageConfig_.getPublicationId()};if(t&&(e.swgVersion=t),this.subscriptionRequest_.oldSku){e.oldSku=this.subscriptionRequest_.oldSku;const t=this.subscriptionRequest_.replaceSkuProrationMode;e.replaceSkuProrationMode=t?os[t]:os.IMMEDIATE_WITH_TIME_PRORATION,this.analyticsService_.setSku(e.oldSku)}this.subscriptionRequest_.oneTime&&(e.paymentRecurrence=2),this.subscriptionRequest_.metadata&&(e.metadata=this.subscriptionRequest_.metadata);const s=this.productType_==Be?Me:Oe;return this.deps_.callbacks().triggerFlowStarted(s,this.subscriptionRequest_),this.eventManager_.logSwgEvent(J,!0,as(e.skuId)),ls.waitingForPayClient_=!0,this.payClient_.start({"apiVersion":1,"allowedPaymentMethods":["CARD"],"environment":Xe().payEnv,"playEnvironment":Xe().playEnv,"swg":e,"i":{"startTimeMs":Date.now(),"productType":this.productType_}},{forceRedirect:this.deps_.config().windowOpenMode==ze,forceDisableNative:"2"==t}),l()}},ls=class{static configurePending(t){const e=t.eventManager();t.payClient().onResponse((s=>{t.entitlementsManager().blockNextNotification();const n=new ls(t),i=function(t,e,s){const n=!ls.waitingForPayClient_;return ls.waitingForPayClient_=!1,e.then((e=>{let i,r=0;if("object"==typeof e&&e.googleTransactionId){const s=t.analytics().getTransactionId(),o=e.googleTransactionId;n?(t.analytics().setTransactionId(o),r=3004):s===o?r=3001:(i=new pt,i.setGpayTransactionId(o),r=3002)}else i=new pt,i.setHadLogged(!n),r=3003;return t.eventManager().logSwgEvent(r,!0,i),function(t,e,s){let n=null,i=null,r=Ge,o=null,a=null,h=null;if(e)if("string"==typeof e)i=e;else{const t=e;if("swgCallbackData"in t?n=t.swgCallbackData:"integratorClientCallbackData"in t&&(i=t.integratorClientCallbackData),"paymentRequest"in e){const t=e.paymentRequest.swg||{};o=t.oldSku,a=t.paymentRecurrence,h=t.metadata,r=(e.paymentRequest.i||{}).productType||Ge}else"productType"in e&&(r=e.productType)}if(i&&!n&&(i=atob(i),i)&&(n=oe(i).swgCallbackData),!n)throw new Error("unexpected payment response");return i=JSON.stringify(n),new fe(i,function(t){const e=t.purchaseData,s=t.purchaseDataSignature;return new be(e,s)}(n),function(t){const e=t.idToken;if(!e)return null;const s=(new ce).decode(e);return new me(e,s)}(n),function(t,e){return e.signedEntitlements?t.entitlementsManager().parseEntitlements(e):null}(t,n),r,s,o,n.swgUserToken,a,h)}(t,e,s)}))}(t,s,n.complete.bind(n));return t.callbacks().triggerPaymentResponse(i),i.then((s=>{const i=us(s.purchaseData);t.analytics().setSku(i||""),e.logSwgEvent(Y,!0,as(i||"",s.productType==Be?Me:Oe)),n.start(s)}),(e=>{if(!te(e))throw t.eventManager().logSwgEvent(Q,!1),t.jserror().error("Pay failed",e),e;{const s=e.productType==Be?Me:Oe;t.callbacks().triggerFlowCanceled(s),t.eventManager().logSwgEvent(1014,!0)}}))}))}constructor(t){this.win_=t.win(),this.deps_=t,this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.activityIframeViewPromise_=null,this.readyPromise_=null,this.analyticsService_=t.analytics(),this.eventManager_=t.eventManager(),this.clientConfigManager_=t.clientConfigManager(),this.sku_=null}start(t){this.sku_=us(t.purchaseData),this.eventManager_.logSwgEvent(10,!0,as(this.sku_||"")),this.deps_.entitlementsManager().reset(!0);const e={"publicationId":this.deps_.pageConfig().getPublicationId(),"productType":t.productType,"isSubscriptionUpdate":!!t.oldSku,"isOneTime":!!t.paymentRecurrence};t.userData&&t.entitlements?(e.idToken=t.userData.idToken,this.deps_.entitlementsManager().pushNextEntitlements(t.entitlements.raw),t.swgUserToken&&this.deps_.storage().set(re.USER_TOKEN,t.swgUserToken,!0)):e.loginHint=t.userData&&t.userData.email;const s={};if("VIRTUAL_GIFT"===e.productType){Object.assign(s,{productType:e.productType,publicationId:e.publicationId,offerId:this.sku_,origin:Ve(this.win_.location.href).origin,isPaid:!0,checkOrderStatus:!0}),t.requestMetadata&&(s.canonicalUrl=t.requestMetadata.contentId,s.isAnonymous=t.requestMetadata.anonymous,e.contentTitle=t.requestMetadata.contentTitle),t.swgUserToken&&(e.swgUserToken=t.swgUserToken);const n=he(t.purchaseData.raw,"orderId")||null;n&&(e.orderId=n)}this.clientConfigManager_.shouldForceLangInIframes()&&(s.hl=this.clientConfigManager_.getLanguage());const n=ns("/payconfirmiframe",s);return this.activityIframeViewPromise_=this.clientConfigManager_.getClientConfig().then((t=>(e.useUpdatedConfirmUi=t.useUpdatedOfferFlows,e.skipAccountCreationScreen=t.skipAccountCreationScreen,new ie(this.win_,this.activityPorts_,n,rs(e),!0)))).then((t=>(t.on(gt,this.handleEntitlementsResponse_.bind(this)),t.acceptResult().then((()=>{this.dialogManager_.completeView(t)})),this.readyPromise_=this.dialogManager_.openView(t),this.readyPromise_.then((()=>{this.deps_.callbacks().triggerPayConfirmOpened(t)})),t)))}handleEntitlementsResponse_(t){const e=t.getJwt();e&&this.deps_.entitlementsManager().pushNextEntitlements(e)}complete(){return this.eventManager_.logSwgEvent(1002,!0,as(this.sku_||"")),this.deps_.entitlementsManager().unblockNextNotification(),Promise.all([this.activityIframeViewPromise_,this.readyPromise_,this.clientConfigManager_.getClientConfig()]).then((t=>{const e=t[0],s=t[2];if(!s.skipAccountCreationScreen){const t=new rt;t.setComplete(!0),e.execute(t)}return e.acceptResult().catch((()=>{})).then((()=>{s.skipAccountCreationScreen||this.eventManager_.logSwgEvent(1003,!0,as(this.sku_||"")),this.deps_.entitlementsManager().setToastShown(!0)}))}))}};function us(t){return he(t.raw,"productId")||null}ls.waitingForPayClient_=!1;var cs=class{constructor(t,e){var s;this.deps_=t,this.win_=t.win(),this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.eventManager_=t.eventManager(),this.clientConfigManager_=t.clientConfigManager(),this.activityIframeView_=null;const n=null!==(s=null==e?void 0:e.isClosable)&&void 0!==s&&s,i=t.activities().addDefaultArguments({"showNative":t.callbacks().hasSubscribeRequestCallback(),"productType":Ge,"list":e&&e.list||"default","skus":e&&e.skus||null,"isClosable":n});if(e&&e.oldSku){i.oldSku=e.oldSku,Tt(i.skus,"Need a sku list if old sku is provided!");let t=i.skus;const s=i.oldSku;t=t.filter((t=>t!==s)),Tt(t.length>0,"Sku list only contained offer user already has"),i.skus=t}if(i.skus&&1===i.skus.length){const t=i.skus[0],e=i.oldSku;if(e){const s=new bt;return s.setSku(t),s.setOldSku(e),void this.startPayFlow_(s)}}this.skus_=i.skus||["*"],this.clientConfig_=this.clientConfigManager_.getClientConfig(),this.activityIframeViewPromise_=this.clientConfig_.then((e=>this.shouldShow_(e)?new ie(this.win_,this.activityPorts_,this.getUrl_(e,t.pageConfig()),i,!0):null))}startPayFlow_(t){const e=t.getSku();if(e){const s={"skuId":e},n=t.getOldSku();n&&(s.oldSku=n,this.deps_.analytics().setSku(n)),this.eventManager_.logSwgEvent(Z,!0,function(t){return new pt([,,,,t])}(e)),new hs(this.deps_,s).start()}}handleLinkRequest_(t){t.getSubscriberOrMember()&&(this.eventManager_.logSwgEvent(1009,!0),this.deps_.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()}))}startNativeFlow_(t){t.getNative()&&this.deps_.callbacks().triggerSubscribeRequest()}start(){return this.activityIframeViewPromise_?this.activityIframeViewPromise_.then((t=>t?(this.deps_.callbacks().triggerFlowStarted(Pe,{skus:this.skus_,source:"SwG"}),t.onCancel((()=>{this.deps_.callbacks().triggerFlowCanceled(Pe)})),t.on(bt,this.startPayFlow_.bind(this)),t.on(ot,this.handleLinkRequest_.bind(this)),t.on(At,this.startNativeFlow_.bind(this)),this.activityIframeView_=t,this.clientConfig_.then((t=>{if(this.activityIframeView_)return this.dialogManager_.openView(this.activityIframeView_,!1,this.getDialogConfig_(t))}))):l())):l()}shouldShow_(t){var e;return!1!==(null===(e=t.uiPredicates)||void 0===e?void 0:e.canDisplayAutoPrompt)}getDialogConfig_(t){return t.useUpdatedOfferFlows?{desktopConfig:{isCenterPositioned:!0,supportsWideScreen:!0}}:{}}getUrl_(t,e){return t.useUpdatedOfferFlows?this.clientConfigManager_.shouldForceLangInIframes()?ns("/subscriptionoffersiframe",{"hl":this.clientConfigManager_.getLanguage(),"publicationId":e.getPublicationId()}):ns("/subscriptionoffersiframe",{"publicationId":e.getPublicationId()}):ns("/offersiframe")}showNoEntitlementFoundToast(){this.activityIframeView_&&this.activityIframeView_.execute(new gt)}},{ActivityIframePort:gs,ActivityPorts:ps}=p();function ds(t){return"[object Object]"===Object.prototype.toString.call(t)}function ms(t){return"function"==typeof t}function fs(t){return"boolean"==typeof t}function bs(t,e){return"Event has an invalid "+t+"("+e+")"}var ws=class{static isPublisherEvent(t){return 3===t.eventOriginator||5===t.eventOriginator||2===t.eventOriginator}constructor(t){this.listeners_=[],this.filterers_=[],this.lastAction_=null,this.isReadyPromise_=t}registerEventListener(t){if(!ms(t))throw new Error("Event manager listeners must be a function");this.listeners_.push(t)}registerEventFilterer(t){if(!ms(t))throw new Error("Event manager filterers must be a function");this.filterers_.push(t)}logEvent(t){!function(t){if(!ds(t))throw new Error("Event must be a valid object");if(0!==(e=t.eventType)&&1!==e&&2!==e&&3!==e&&4!==e&&5!==e&&6!==e&&7!==e&&8!==e&&9!==e&&10!==e&&11!==e&&12!==e&&13!==e&&14!==e&&15!==e&&16!==e&&17!==e&&18!==e&&19!==e&&20!==e&&21!==e&&22!==e&&23!==e&&24!==e&&25!==e&&26!==e&&27!==e&&28!==e&&29!==e&&30!==e&&31!==e&&32!==e&&33!==e&&34!==e&&35!==e&&1e3!==e&&1001!==e&&1002!==e&&1003!==e&&1004!==e&&1005!==e&&1006!==e&&1007!==e&&1008!==e&&1009!==e&&1010!==e&&1011!==e&&1012!==e&&1013!==e&&1014!==e&&1015!==e&&1016!==e&&1017!==e&&1018!==e&&1019!==e&&1020!==e&&1021!==e&&1022!==e&&1023!==e&&1024!==e&&1025!==e&&1026!==e&&1027!==e&&1028!==e&&1029!==e&&1030!==e&&1031!==e&&1032!==e&&1033!==e&&1034!==e&&1035!==e&&1036!==e&&1037!==e&&1038!==e&&1039!==e&&1040!==e&&1041!==e&&1042!==e&&1043!==e&&1044!==e&&1045!==e&&1046!==e&&1047!==e&&1048!==e&&1049!==e&&1050!==e&&1051!==e&&1052!==e&&1053!==e&&1054!==e&&1055!==e&&1056!==e&&1057!==e&&1058!==e&&1059!==e&&2e3!==e&&2001!==e&&2002!==e&&3e3!==e&&3001!==e&&3002!==e&&3003!==e&&3004!==e&&3005!==e&&3006!==e&&3007!==e&&3008!==e&&3009!==e&&3010!==e&&3011!==e&&3012!==e&&3013!==e&&3014!==e&&3015!==e&&3016!==e&&3017!==e&&3018!==e&&3019!==e&&3020!==e&&3021!==e&&3022!==e&&3023!==e&&3024!==e&&4e3!==e)throw new Error(bs("eventType",t.eventType));var e;if(!(t=>0===t||1===t||2===t||3===t||4===t||5===t||6===t)(t.eventOriginator))throw new Error(bs("eventOriginator",t.eventOriginator));if(!ds(t.additionalParameters)&&null!=t.additionalParameters)throw new Error(bs("additionalParameters",t.additionalParameters));if(null!=t.isFromUserAction&&!fs(t.isFromUserAction))throw new Error(bs("isFromUserAction",t.isFromUserAction))}(t),this.lastAction_=this.isReadyPromise_.then((()=>{for(let e=0;e<this.filterers_.length;e++)try{if(1===this.filterers_[e](t))return l()}catch(t){Et(t)}for(let e=0;e<this.listeners_.length;e++)try{this.listeners_[e](t)}catch(t){Et(t)}return l()}))}logSwgEvent(t,e=!1,s=null){this.logEvent({eventType:t,eventOriginator:1,isFromUserAction:e,additionalParameters:s})}getReadyPromise(){return this.isReadyPromise_}},vs="replace-subscription",xs="c",ys=null;function As(t){if(!ys){ys={};let n="";try{const e=$e(t.location.hash)["swg.experiments"];e&&(n+=","+e)}catch(t){se.throwAsync(t)}for(var e,s=r(n.split(","),!0);!(e=s()).done;){let s=e.value;if(s=s.trim(),s)try{Is(t,ys,s)}catch(t){se.throwAsync(t)}}}return ys}function Is(t,e,s){let n,i,r=!1;const o=s.indexOf(":");if(-1==o?(n=s,i=100,r=!1):(n=s.substring(0,o).trim(),(s=s.substring(o+1)).substring(s.length-1)==xs&&(r=!0,s=s.substring(0,s.length-1)),i=parseInt(s,10)),isNaN(i))throw new Error("invalid fraction");let a;if(i>99)a=!0;else if(i<1)a=!1;else if(t.sessionStorage){r=r&&i<=20;try{const e="subscribe.google.com:e:"+n+":"+i+(r?"c":"");let s="e"==(h=t.sessionStorage.getItem(e))?"e":h==xs?xs:null;!s&&100*t.Math.random()<=i*(r?2:1)&&(s=!r||t.Math.random()<=.5?"e":xs,t.sessionStorage.setItem(e,s)),a=!!s,s==xs&&(n="c-"+n)}catch(t){a=!1,se.throwAsync(t)}}else a=!1;var h;e[n]=a}function ks(t,e){return As(t)[e]||!1}function Cs(t){const e=As(t),s=[];for(const t in e)e[t]&&s.push(t);return s}function Es(t){return new xt([Math.floor(t/1e3),t%1e3*1e6],!1)}var Ns={opacity:"0",position:"absolute",top:"-10px",left:"-10px",height:"1px",width:"1px"},Ts="AnalyticsService timed out waiting for a response";function Ps(t){const e=new dt;return e.setComplete(!1),e.setError(t),e}var _s={"en":"Subscribe with Google","ar":"Google ","de":"Abonnieren mit Google","en-au":"Subscribe with Google","en-ca":"Subscribe with Google","en-gb":"Subscribe with Google","en-us":"Subscribe with Google","es":"Suscrbete con Google","es-419":"Suscrbete con Google","es-latam":"Suscrbete con Google","es-latn":"Suscrbete con Google","fr":"S'abonner avec Google","fr-ca":"S'abonner avec Google","hi":"Google   ","id":"Berlangganan dengan Google","it":"Abbonati con Google","jp":"Google ","ko":"Google  ","ms":"Langgan dengan Google","nl":"Abonneren via Google","no":"Abonner med Google","pl":"Subskrybuj z Google","pt":"Subscrever com o Google","pt-br":"Assine com o Google","ru":"c  Google","se":"Prenumerera med Google","th":" Google","tr":"Google ile Abone Ol","uk":"  Google","zh-cn":" Google ","zh-hk":" Google ","zh-tw":" Google "},Ls={"en":"Contribute with Google","ar":"  Google","de":"Mit Google beitragen","en-au":"Contribute with Google","en-ca":"Contribute with Google","en-gb":"Contribute with Google","en-us":"Contribute with Google","es":"\tContribuye con Google","es-419":"Contribuir con Google","es-latam":"Contribuir con Google","es-latn":"Contribuye con Google","fr":"Contribuer avec Google","fr-ca":"Contribuer avec Google","hi":"Google      ","id":"Berkontribusi dengan Google","it":"Contribuisci con Google","jp":"Google ","ko":"Google  ","ms":"Sumbangkan dengan Google","nl":"Bijdragen met Google","no":"Bidra med Google","pl":"Wesprzyj publikacj przez Google","pt":"Contribuir utilizando o Google","pt-br":"Contribua usando o Google","ru":"   Google","se":"Bidra med Google","th":" Google","tr":"Google ile Katkda Bulun","uk":"   Google","zh-cn":" Google ","zh-hk":" Google ","zh-tw":" Google "},Ss={"frameborder":"0","scrolling":"no"},Os="light";function Ms(t,e){const s=t.en;if("object"!=typeof t||!e)return s;let n="string"==typeof e?e:(i=e).lang?i.lang:i.ownerDocument&&i.ownerDocument.documentElement.lang?i.ownerDocument.documentElement.lang:"en";var i;n=n.toLowerCase(),n=n.replace(/_/g,"-");const r=n.split("-");for(;r.length;){const e=r.join("-");if(e in t)return t[e];r.pop()}return s}var Rs='<div class="swg-button-v2-icon-$theme$"></div>$textContent$',js=class{constructor({attributionParams:t,autoPromptConfig:e,paySwgVersion:s,uiPredicates:n,usePrefixedHostPath:i,useUpdatedOfferFlows:r,skipAccountCreationScreen:o}={}){this.autoPromptConfig=e,this.paySwgVersion=s,this.usePrefixedHostPath=i||!1,this.useUpdatedOfferFlows=r||!1,this.skipAccountCreationScreen=o||!1,this.uiPredicates=n,this.attributionParams=t}},Us={"frameborder":0,"scrolling":"no","src":"about:blank"};function Ds(t,e,s,n){const i=t.ownerDocument.defaultView,r=t.style.transition||"";return new Promise((r=>{i.setTimeout((()=>{i.setTimeout(r,s);const o=`${s}ms ${n}`;qt(t,Object.assign({"transition":`transform ${o}, opacity ${o}`},e))}))})).then((()=>{qt(t,{"transition":r})}))}var zs=class{constructor(t,e){this.doc_=t,this.fadeBackground_=this.doc_.getWin().document.createElement("swg-popup-background"),qt(this.fadeBackground_,{"z-index":e,"display":"none","pointer-events":"none","position":"fixed","top":0,"right":0,"bottom":0,"left":0,"background-color":"rgba(32, 33, 36, .6)"})}getElement(){return this.fadeBackground_}isAttached(){return!!this.fadeBackground_.parentNode}attach(){this.doc_.getBody().appendChild(this.fadeBackground_)}destroy(){this.doc_.getBody().removeChild(this.fadeBackground_)}show(t=!0){if(qt(this.fadeBackground_,{"display":"block","opacity":t?0:1}),t)return Ds(this.fadeBackground_,{"opacity":1},300,"ease-out")}hide(t=!0){if(t)return Ds(this.fadeBackground_,{"opacity":0},300,"ease-out").then((()=>{qt(this.fadeBackground_,{"display":"none"})}));qt(this.fadeBackground_,{"display":"none"})}};function Gs(t){const e=function(t){return t.readyState}(t);return"loading"!=e&&"uninitialized"!=e}function Bs(t){return 9===t.nodeType||t.document?new class{constructor(t){const e=!!t.document;this.win_=e?t:t.defaultView,this.doc_=e?t.document:t}getWin(){return this.win_}getRootNode(){return this.doc_}getRootElement(){return this.doc_.documentElement}getHead(){return this.doc_.head}getBody(){return this.doc_.body}isReady(){return Gs(this.doc_)}whenReady(){return t=this.doc_,new Promise((e=>{!function(t,e){!function(t,e,s){if(e(t))return void s(t);let n=!1;const i=()=>{e(t)&&!n&&(s(t),n=!0,t.removeEventListener("readystatechange",i))};t.addEventListener("readystatechange",i)}(t,Gs,e)}(t,e)}));var t}addToFixedLayer(t){return l()}}(t):t}var Fs=2147483647,Vs={"min-height":"50px","border":"none","display":"block","position":"fixed","z-index":Fs,"box-sizing":"border-box"},$s={"position":"absolute","top":"0","left":"0","right":"0","bottom":"0","opacity":0,"height":0,"max-height":"100%","max-width":"100%","min-height":"100%","min-width":"100%","width":0},Ks="rgba(60, 64, 67, 0.3) 0px -2px 5px, rgba(60, 64, 67, 0.15) 0px -5px 5px",Ws={1:"/metertoastiframe",2:"/meteriframe"},qs={"height":0},Hs={"frameborder":"0","scrolling":"no","class":"swg-toast"},Ys={[xe]:1,[ye]:2,[Ae]:3,[Ie]:1004,[ke]:Z,[Ce]:J,[Ee]:Y,[Ne]:3e3},Js={0:null,1:xe,2:ye,3:Ae,4:null,5:null,1e3:null,[Y]:Ee,1002:null,1003:null,1004:Ie,[J]:Ce,[Z]:ke,[Q]:null,3e3:Ne},Zs={"EVENT_SHOWCASE_METER_OFFERED":[st,3011],"EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION":[X],"EVENT_SHOWCASE_UNLOCKED_BY_METER":[st,tt],"EVENT_SHOWCASE_UNLOCKED_FREE_PAGE":[3012],"EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL":[et,22,23],"EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL":[et,1],"EVENT_SHOWCASE_INELIGIBLE_PAYWALL":[3013,et]},Qs={22:2001,[tt]:it,[X]:1001,3012:1002,1:2002,3013:2003},Xs=(t,e,s,n)=>({eventCategory:t,eventAction:e,eventLabel:s,nonInteraction:n}),tn={3:Xs("NTG paywall","paywall modal impression","",!0),26:Xs("NTG membership","offer impressions","",!0),[Z]:Xs("NTG paywall","click","",!1),1030:Xs("NTG subscription","marketing modal click","",!1),24:Xs("NTG subscription","marketing modal impression","",!0),1031:Xs("NTG membership","marketing modal click","",!1),25:Xs("NTG membership","membership modal impression","",!0)},en={[Y]:Xs("NTG subscription","submit","success",!1)},sn={[Y]:Xs("NTG membership","submit","success",!1)};function nn(t){return Ys[t]}function rn(t,e=!1){const s=$e(t);return!(!(s.gaa_at&&s.gaa_n&&s.gaa_sig&&s.gaa_ts)||!e&&"na"===s.gaa_at||parseInt(s.gaa_ts,16)<Date.now()/1e3)}var on="toast",an="ents",hn="isreadytopay";function ln(t,e){const s=$e(t.hash)["swg.deventitlement"];return void 0===s?e:Ke(e,"devEnt",s)}var un=["GET","POST"],cn={document:1,text:2};function gn(t,e){return new Promise((function(s,n){const i=function(t,e){const s=new XMLHttpRequest;if(!("withCredentials"in s))throw new Error("CORS is not supported");return s.open(t,e,!0),s}(e.method||"GET",t);if("include"==e.credentials&&(i.withCredentials=!0),e.responseType in cn&&(i.responseType=e.responseType),e.headers)for(var r=0,o=Object.keys(e.headers);r<o.length;r++){const t=o[r];i.setRequestHeader(t,e.headers[t])}i.onreadystatechange=()=>{if(!(i.readyState<2))return i.status<100||i.status>599?(i.onreadystatechange=null,void n(new Error(`Unknown HTTP status ${i.status}`))):void(4==i.readyState&&s(new pn(i)))},i.onerror=()=>{n(new Error("Network failure"))},i.onabort=()=>{n(new Error("Request aborted"))},"POST"==e.method?i.send(e.body):i.send()}))}var pn=class{constructor(t){this.xhr_=t,this.status=this.xhr_.status,this.ok=this.status>=200&&this.status<300,this.headers=new dn(t),this.bodyUsed=!1,this.body=null}clone(){return Tt(!this.bodyUsed,"Body already used"),new pn(this.xhr_)}drainText_(){return Tt(!this.bodyUsed,"Body already used"),this.bodyUsed=!0,Promise.resolve(this.xhr_.responseText)}text(){return this.drainText_()}json(){return this.drainText_().then(oe)}arrayBuffer(){return this.drainText_().then(Ut)}},dn=class{constructor(t){this.xhr_=t}get(t){return this.xhr_.getResponseHeader(t)}has(t){return null!=this.xhr_.getResponseHeader(t)}},mn=/^(\)\]\}'\n)/;function fn(t){let e=null,s="";for(let t=0;t<arguments.length;t++){const n=arguments[t];n instanceof Error&&!e?e=bn(n):(s&&(s+=" "),s+=n)}return e?s&&(e.message=s+": "+e.message):e=new Error(s),e}function bn(t){const e=Object.getOwnPropertyDescriptor(t,"message");if(e&&e.writable)return t;const{message:s,stack:n}=t,i=new Error(s);for(const e in t)i[e]=t[e];return i.stack=n,i}var wn="swg-link",vn=class{static configurePending(t){t.activities().onResult(wn,(function(e){return t.entitlementsManager().blockNextNotification(),t.callbacks().triggerLinkProgress(),t.dialogManager().popupClosed(),kt(e,ts(),!1,!1).then((e=>{t.eventManager().logSwgEvent(1011,!0),new vn(t,e).start()}),(e=>{te(e)?(t.eventManager().logSwgEvent(1012,!0),t.callbacks().triggerFlowCanceled(je)):t.eventManager().logSwgEvent(1011,!0)}))}))}constructor(t,e){this.deps_=t,this.win_=t.win(),this.clientConfigManager_=t.clientConfigManager(),this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.entitlementsManager_=t.entitlementsManager(),this.callbacks_=t.callbacks();const s=e&&e.index||"0";this.activityIframeView_=null,this.activityIframeViewPromise_=this.clientConfigManager_.getClientConfig().then((e=>new ie(this.win_,this.activityPorts_,ns("/linkconfirmiframe",{},e.usePrefixedHostPath,"u/"+s),rs({"productId":t.pageConfig().getProductId(),"publicationId":t.pageConfig().getPublicationId()}),!0))),this.completeResolver_=null,this.completePromise_=new Promise((t=>{this.completeResolver_=t}))}start(){return this.activityIframeViewPromise_.then((t=>(this.activityIframeView_=t,this.activityIframeView_.acceptResultAndVerify(ts(),!0,!0).then((t=>{this.complete_(t)})).catch((t=>{setTimeout((()=>{throw t}))})).then((()=>{this.dialogManager_.completeView(this.activityIframeView_)})),this.deps_.eventManager().logSwgEvent(3005,!0),this.deps_.eventManager().logSwgEvent(14,!0),this.dialogManager_.openView(this.activityIframeView_))))}complete_(t){this.deps_.eventManager().logSwgEvent(1013,!0),this.callbacks_.triggerLinkComplete(),this.callbacks_.resetLinkProgress(),this.entitlementsManager_.setToastShown(!0),this.entitlementsManager_.unblockNextNotification(),this.entitlementsManager_.reset(t&&t.success||!1),t&&t.entitlements&&this.entitlementsManager_.pushNextEntitlements(t.entitlements),this.completeResolver_()}whenComplete(){return this.completePromise_}},xn={Environment:{LOCAL:"LOCAL",PREPROD:"PREPROD",PRODUCTION:"PRODUCTION",SANDBOX:"SANDBOX",TEST:"TEST",TIN:"TIN"},PaymentMethod:{CARD:"CARD",TOKENIZED_CARD:"TOKENIZED_CARD",UPI:"UPI"},AuthMethod:{CRYPTOGRAM_3DS:"CRYPTOGRAM_3DS",PAN_ONLY:"PAN_ONLY"},ResponseStatus:{CANCELED:"CANCELED",DEVELOPER_ERROR:"DEVELOPER_ERROR"},TotalPriceStatus:{ESTIMATED:"ESTIMATED",FINAL:"FINAL",NOT_CURRENTLY_KNOWN:"NOT_CURRENTLY_KNOWN"},ButtonType:{SHORT:"short",LONG:"long"},ButtonColor:{DEFAULT:"default",BLACK:"black",WHITE:"white"},Id:{POPUP_WINDOW_CONTAINER:"popup-window-container"},STORAGE_KEY_PREFIX:"google.payments.api.storage"};xn.IS_READY_TO_PAY_RESULT_KEY=xn.STORAGE_KEY_PREFIX+".isreadytopay.result",xn.UPI_CAN_MAKE_PAYMENT_CACHE_KEY=xn.STORAGE_KEY_PREFIX+".upi.canMakePaymentCache",xn.CLASS_PREFIX="google-payments-",xn.IFRAME_ACTIVE_CONTAINER_CLASS=`${xn.CLASS_PREFIX}activeContainer`,xn.IFRAME_CONTAINER_CLASS=`${xn.CLASS_PREFIX}dialogContainer`,xn.IFRAME_STYLE_CENTER_CLASS=`${xn.CLASS_PREFIX}dialogCenter`,xn.IFRAME_STYLE_CLASS=`${xn.CLASS_PREFIX}dialog`,xn.IFRAME_STYLE=`\n.${xn.IFRAME_STYLE_CLASS} {\n    animation: none 0s ease 0s 1 normal none running;\n    background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n    background-blend-mode: normal;\n    border: 0 none #333;\n    border-radius: 8px 8px 0 0;\n    border-collapse: separate;\n    bottom: 0;\n    box-shadow: #808080 0 3px 0 0, #808080 0 0 22px;\n    box-sizing: border-box;\n    letter-spacing: normal;\n    max-height: 100%;\n    overflow: visible;\n    position: fixed;\n    width: 100%;\n    z-index: 2147483647;\n    -webkit-appearance: none;\n    left: 0;\n}\n@media (min-width: 480px) {\n  .${xn.IFRAME_STYLE_CLASS} {\n    width: 480px !important;\n    left: -240px !important;\n    margin-left: calc(100vw - 100vw / 2) !important;\n  }\n}\n.${xn.IFRAME_CONTAINER_CLASS} {\n  background-color: rgba(0,0,0,0.26);\n  bottom: 0;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  right: 0;\n}\n.iframeContainer {\n  -webkit-overflow-scrolling: touch;\n}\n`,xn.IFRAME_STYLE_CENTER=`\n.${xn.IFRAME_STYLE_CENTER_CLASS} {\n  animation: none 0s ease 0s 1 normal none running;\n  background-blend-mode: normal;\n  background: none 0 0 / auto repeat scroll padding-box border-box #fff;\n  border-collapse: separate;\n  border-radius: 8px;\n  border: 0px none #333;\n  bottom: auto;\n  box-shadow: #808080 0 0 22px;\n  box-sizing: border-box;\n  left: -240px;\n  letter-spacing: normal;\n  margin-left: calc(100vw - 100vw / 2) !important;\n  max-height: 90%;\n  overflow: visible;\n  position: absolute;\n  top: 100%;\n  transform: scale(0.8);\n  width: 480px;\n  z-index: 2147483647;\n  -webkit-appearance: none;\n}\n@media (min-height: 667px) {\n  .${xn.IFRAME_STYLE_CENTER_CLASS} {\n    max-height: 600px;\n  }\n}\n.${xn.IFRAME_ACTIVE_CONTAINER_CLASS} {\n  top: 50%;\n  transform: scale(1.0) translateY(-50%);\n}\n`,xn.GPAY_BUTTON_WITH_CARD_INFO_IMAGE="background-image: url(https://pay.google.com/gp/p/generate_gpay_btn_img);",xn.BUTTON_LOCALE_TO_MIN_WIDTH={"en":152,"bg":163,"cs":192,"de":183,"es":183,"fr":183,"hr":157,"id":186,"ja":148,"ko":137,"ms":186,"nl":167,"pl":182,"pt":193,"ru":206,"sk":157,"sl":211,"sr":146,"tr":161,"uk":207,"zh":156},xn.GPAY_GRAYPANE="gpay-graypane",xn.GPAY_BUTTON_CLASS="gpay-button",xn.BUTTON_STYLE=`\n.${xn.GPAY_BUTTON_CLASS} {\n  background-origin: content-box;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  border: 0px;\n  border-radius: 4px;\n  box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n  cursor: pointer;\n  height: 40px;\n  min-height: 40px;\n  padding: 11px 24px;\n}\n\n.${xn.GPAY_BUTTON_CLASS}.black {\n  background-color: #000;\n  box-shadow: none;\n  padding: 12px 24px 10px;\n}\n\n.${xn.GPAY_BUTTON_CLASS}.white {\n  background-color: #fff;\n}\n\n.${xn.GPAY_BUTTON_CLASS}.short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.${xn.GPAY_BUTTON_CLASS}.black.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/dark_gpay.svg);\n}\n\n.${xn.GPAY_BUTTON_CLASS}.white.short {\n  background-image: url(https://www.gstatic.com/instantbuy/svg/light_gpay.svg);\n}\n\n.${xn.GPAY_BUTTON_CLASS}.black.active {\n  background-color: #5f6368;\n}\n\n.${xn.GPAY_BUTTON_CLASS}.black.hover {\n  background-color: #3c4043;\n}\n\n.${xn.GPAY_BUTTON_CLASS}.white.active {\n  background-color: #fff;\n}\n\n.${xn.GPAY_BUTTON_CLASS}.white.focus {\n  box-shadow: #e8e8e8 0 1px 1px 0, #e8e8e8 0 1px 3px;\n}\n\n.${xn.GPAY_BUTTON_CLASS}.white.hover {\n  background-color: #f8f8f8;\n}\n`,xn.GPAY_BUTTON_WITH_OFFER_ICON_ADDITIONAL_STYLE="position: relative;",xn.GPAY_OFFER_ICON_CLASS="gpay-offer-icon",xn.GPAY_OFFER_ICON_SVG='<svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="gpay-offer-icon"><defs><path d="M19.41,9.58 L10.41,0.58 C10.05,0.22 9.55,0 9,0 L2,0 C0.9,0 0,0.9 0,2 L0,9 C0,9.55 0.22,10.05 0.59,10.42 L9.59,19.42 C9.95,19.78 10.45,20 11,20 C11.55,20 12.05,19.78 12.41,19.41 L19.41,12.41 C19.78,12.05 20,11.55 20,11 C20,10.45 19.77,9.94 19.41,9.58 Z" id="path-1"></path></defs><g id="buttons_10.05" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Artboard" transform="translate(-40.000000, -43.000000)"><g id="Group-3" transform="translate(40.000000, 43.000000)"><g id="Group-2-Copy-2"><g id="Group-Copy"><g id="ic_loyalty_24px"><mask id="mask-2" fill="white"><use xlink:href="#path-1"></use></mask><use id="gpay-Shape" fill="#FF6100" fill-rule="nonzero" xlink:href="#path-1"></use><path d="M3.5,5 C2.67,5 2,4.33 2,3.5 C2,2.67 2.67,2 3.5,2 C4.33,2 5,2.67 5,3.5 C5,4.33 4.33,5 3.5,5 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero" mask="url(#mask-2)"></path></g></g></g><g id="Group-13-Copy-7" transform="translate(6.000000, 6.000000)" fill="#FFFFFF" fill-rule="nonzero"><g id="Group-13-Copy-2"><path d="M2.15217391,4.55172414 C0.963561082,4.55172414 1.99840144e-14,3.53278598 1.99840144e-14,2.27586207 C1.99840144e-14,1.01893816 0.963561082,6.30606678e-14 2.15217391,6.30606678e-14 C3.34078674,6.30606678e-14 4.30434783,1.01893816 4.30434783,2.27586207 C4.30434783,3.53278598 3.34078674,4.55172414 2.15217391,4.55172414 Z M2.15217391,3.31034483 C2.69245247,3.31034483 3.13043478,2.84719112 3.13043478,2.27586207 C3.13043478,1.70453302 2.69245247,1.24137931 2.15217391,1.24137931 C1.61189535,1.24137931 1.17391304,1.70453302 1.17391304,2.27586207 C1.17391304,2.84719112 1.61189535,3.31034483 2.15217391,3.31034483 Z" id="Combined-Shape"></path><path d="M6.84782609,9 C5.65921326,9 4.69565217,7.98106184 4.69565217,6.72413793 C4.69565217,5.46721402 5.65921326,4.44827586 6.84782609,4.44827586 C8.03643892,4.44827586 9,5.46721402 9,6.72413793 C9,7.98106184 8.03643892,9 6.84782609,9 Z M6.84782609,7.75862069 C7.38810465,7.75862069 7.82608696,7.29546698 7.82608696,6.72413793 C7.82608696,6.15280888 7.38810465,5.68965517 6.84782609,5.68965517 C6.30754753,5.68965517 5.86956522,6.15280888 5.86956522,6.72413793 C5.86956522,7.29546698 6.30754753,7.75862069 6.84782609,7.75862069 Z" id="Combined-Shape"></path><polygon id="Rectangle" transform="translate(4.497720, 4.541938) rotate(34.000000) translate(-4.497720, -4.541938) " points="3.77901778 -0.202295978 4.9740273 -0.171019161 5.21642263 9.28617278 4.02141311 9.25489596"></polygon></g></g></g></g></g></svg>',xn.GPAY_OFFER_ICON_STYLE=`\n.${xn.GPAY_OFFER_ICON_CLASS} {\n  position: absolute;\n  right: -5px;\n  top: -5px;\n}\n\n#ic_loyalty_24px use.hover {\n  fill: #FC853B;\n}\n`,xn.GPAY_OFFER_DESCRIPTION_CLASS="gpay-offer-description",xn.GPAY_OFFER_DESCRIPTION_STYLE=`\n@import url(//fonts.googleapis.com/css?family=Google+Sans:500);\n.${xn.GPAY_OFFER_DESCRIPTION_CLASS} {\n  text-align: center;\n  font: 10px 'Google Sans';\n  margin-top: 2px;\n  margin-bottom: 0px;\n}\n\n.${xn.GPAY_OFFER_DESCRIPTION_CLASS}.gpay-btn-clicked {\n  color: #3C4043;\n}\n\n.${xn.GPAY_OFFER_DESCRIPTION_CLASS}.short {\n  min-width: 90px;\n  width: 160px;\n}\n\n.${xn.GPAY_OFFER_DESCRIPTION_CLASS}.long {\n  min-width: 152px;\n  width: 240px;\n}\n`,xn.GPAY_BUTTON_CARD_INFO_CLASS="gpay-card-info-btn",xn.GPAY_BUTTON_CARD_INFO_BUTTON_STYLE=`\n  .${xn.GPAY_BUTTON_CARD_INFO_CLASS} {\n    background-origin: content-box;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    border: 0px;\n    border-radius: 4px;\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 1px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\n    cursor: pointer;\n    height: 40px;\n    min-height: 40px;\n    padding: 11px 24px;\n    background-color: #000;\n    box-shadow: none;\n    padding: 9px 24px 10px;\n    min-width: 190px;\n    width: 240px;\n  }\n\n  .${xn.GPAY_BUTTON_CARD_INFO_CLASS}.active {\n    background-color: #5f6368;\n  }\n\n  .${xn.GPAY_BUTTON_CARD_INFO_CLASS}.hover {\n    background-color: #3c4043;\n  }\n  `,xn.TRUSTED_DOMAIN=".google.com";var yn=null,An=null,In=null,kn=null,Cn=Date.now(),En=null,Nn=!1,Tn=[],Pn=class{static load(){if(yn)return;const t=window.gpayInitParams||{};In=t.environment||xn.Environment.PRODUCTION,(yn=document.createElement("iframe")).src=Pn.getIframeUrl_(window.location.origin,t.merchantInfo&&t.merchantInfo.merchantId),Pn.postMessage({"eventType":15,"clientLatencyStartMs":Date.now()}),yn.height="0",yn.width="0",yn.style.display="none",yn.style.visibility="hidden",yn.onload=function(){Pn.postMessage({"eventType":17,"clientLatencyStartMs":Date.now()}),Pn.iframeLoaded()},document.body?Pn.initialize_():document.addEventListener("DOMContentLoaded",(()=>Pn.initialize_()))}static initialize_(){document.body.appendChild(yn),An=new class{constructor(t){this.window_=t}postMessage(t,e){this.window_.postMessage(t,e)}}(yn.contentWindow)}static sendAndWaitForResponse(t,e,s,n){Pn.addMessageEventListener_((function t(e){e.data[s]&&(n(e),Pn.removeMessageEventListener_(t))}));const i=Object.assign({"eventType":e},t);Pn.postMessage(i)}static addMessageEventListener_(t){window.addEventListener("message",t)}static removeMessageEventListener_(t){window.removeEventListener("message",t)}static postMessage(t){if(!Nn)return void Tn.push(t);const e=Object.assign({"buyFlowActivityMode":En,"googleTransactionId":kn,"originTimeMs":Cn},t);An.postMessage(e,Pn.getIframeOrigin_())}static setBuyFlowActivityMode(t){En=t}static setGoogleTransactionId(t){kn=t}static setOriginTimeMs(t){Cn=t}static setPostMessageService(t){An=t}static reset(){yn=null,Tn.length=0,Nn=!1,En=null}static setIframeLoaded(t){Nn=t}static iframeLoaded(){Nn=!0,Tn.forEach((function(t){Pn.postMessage(t)})),Tn.length=0}static getBuffer(){return Tn}static injectIframeForTesting(){Pn.reset(),yn=document.createElement("p"),Pn.iframeLoaded()}static getIframeOrigin_(){let t="https://pay";return In==xn.Environment.SANDBOX?t+=".sandbox":In==xn.Environment.PREPROD&&(t+="-preprod.sandbox"),t+".google.com"}static getIframeUrl_(t,e){return`https://pay${In==xn.Environment.PREPROD?"-preprod.sandbox":In==xn.Environment.SANDBOX?".sandbox":""}.google.com/gp/p/ui/payframe?origin=${t}&mid=%{merchantId}`}};function _n(t,e){for(const s in e)t.style.setProperty(s,e[s].toString(),"important")}function Ln(t,e,s,n){const i=t.ownerDocument.defaultView,r=t.style.transition||"";return new Promise((r=>{i.setTimeout((()=>{i.setTimeout(r,s);const o=`${s}ms ${n}`;_n(t,Object.assign({"transition":`transform ${o}, opacity ${o}`},e))}))})).then((()=>{_n(t,Object.assign({"transition":r},e))}))}function Sn(){if(-1!=window.navigator.userAgent.indexOf("OPR/"))return!1;const t=window.navigator.userAgent.match(/Android/i),e=window.navigator.userAgent.match(/Chrome\/([0-9]+)\./i);return null!=t&&"PaymentRequest"in window&&"Google Inc."==window.navigator.vendor&&null!=e&&Number(e[1])>=59}function On(t){if(t.apiVersion>=2){const e=Gn(t);if(e&&1==e.length&&e[0]==xn.AuthMethod.CRYPTOGRAM_3DS)return!0}return 1==t.allowedPaymentMethods.length&&t.allowedPaymentMethods[0]==xn.PaymentMethod.TOKENIZED_CARD}function Mn(t,e){if(t.apiVersion>=2){const s=Gn(t);return!(!s||!s.includes(e))}return!1}function Rn(){return window.location.hostname.endsWith(xn.TRUSTED_DOMAIN)||void 0===window.isSecureContext||window.isSecureContext?null:"Google Pay APIs should be called in secure context!"}function jn(t){return Object.values(xn.PaymentMethod).includes(t)}function Un(t){return Object.values(xn.AuthMethod).includes(t)}function Dn(t){if(!t)return"paymentDataRequest must be set!";if(t.swg)return(e=t.swg)?e.skuId&&e.publicationId?null:"Both skuId and publicationId must be provided":"Swg parameters must be provided";var e;if(!t.transactionInfo)return"transactionInfo must be set!";if(!t.transactionInfo.currencyCode)return"currencyCode in transactionInfo must be set!";if(!t.transactionInfo.totalPriceStatus||!Object.values(xn.TotalPriceStatus).includes(t.transactionInfo.totalPriceStatus))return"totalPriceStatus in transactionInfo must be set to one of NOT_CURRENTLY_KNOWN, ESTIMATED or FINAL!";if("NOT_CURRENTLY_KNOWN"!==t.transactionInfo.totalPriceStatus&&!t.transactionInfo.totalPrice)return"totalPrice in transactionInfo must be set when totalPriceStatus is ESTIMATED or FINAL!";const s=zn(t);if(s){if(!s.parameters)return"parameters must be set in allowedPaymentMethod!";var n=s.parameters;if(!n.payeeVpa)return"payeeVpa in allowedPaymentMethod parameters must be set!";if(!n.payeeName)return"payeeName in allowedPaymentMethod parameters must be set!";if(!n.referenceUrl)return"referenceUrl in allowedPaymentMethod parameters must be set!";if(!n.mcc)return"mcc in allowedPaymentMethod parameters must be set!";if(!n.transactionReferenceId)return"transactionReferenceId in allowedPaymentMethod parameters must be set!";if("INR"!==t.transactionInfo.currencyCode)return"currencyCode in transactionInfo must be set to INR!";if("FINAL"!==t.transactionInfo.totalPriceStatus)return"totalPriceStatus in transactionInfo must be set to FINAL!";if(!t.transactionInfo.transactionNote)return"transactionNote in transactionInfo must be set!"}return null}function zn(t){return!Sn()||t.apiVersion<2||!t.allowedPaymentMethods?null:Bn(t,xn.PaymentMethod.UPI)}function Gn(t){if(t.allowedPaymentMethods){const e=Bn(t,xn.PaymentMethod.CARD);if(e&&e.parameters)return e.parameters.allowedAuthMethods}return null}function Bn(t,e){for(var s=0;s<t.allowedPaymentMethods.length;s++){const n=t.allowedPaymentMethods[s];if(n.type==e)return n}return null}var{ActivityPort:Fn,ActivityPorts:Vn,ActivityIframePort:$n}=p(),Kn="GPAY",Wn="Safari",qn=class{},Hn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");qn.uuid=function(t,e){var s,n,i=Hn,r=[];if(e=e||i.length,t)for(s=0;s<t;s++)r[s]=i[0|Math.random()*e];else for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",s=0;s<36;s++)r[s]||(n=0|16*Math.random(),r[s]=i[19==s?3&n|8:n]);return r.join("")},qn.uuidFast=function(){for(var t,e=Hn,s=new Array(36),n=0,i=0;i<36;i++)8==i||13==i||18==i||23==i?s[i]="-":14==i?s[i]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,s[i]=e[19==i?3&t|8:t]);return s.join("")},qn.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},p();var Yn=["actions.google.com","amp-actions.sandbox.google.com","amp-actions-staging.sandbox.google.com","amp-actions-autopush.sandbox.google.com","payments.developers.google.com","payments.google.com"],Jn=class{constructor(t,e,s,n){var i;this.onPaymentResponse_=e,function(t){if(t.environment&&!Object.values(xn.Environment).includes(t.environment))throw new Error("Parameter environment in PaymentOptions can optionally be set to PRODUCTION, otherwise it defaults to TEST. "+t.environment)}(t),this.loadPaymentDataApiStartTimeMs_=null,this.environment_=t.environment||xn.Environment.TEST,Jn.googleTransactionId_||(Jn.googleTransactionId_=this.isInTrustedDomain_()&&t.i&&t.i.googleTransactionId?t.i.googleTransactionId:(i=this.environment_,qn.uuidFast()+"."+i)),this.paymentOptions_=t,this.webActivityDelegate_=new class{constructor(t,e,s,n,i){this.environment_=t,this.activities=n||new Vn(window),this.graypane_=new class{constructor(t){this.doc_=t,this.element_=t.createElement(xn.GPAY_GRAYPANE),_n(this.element_,{"z-index":2147483647,"display":"none","position":"fixed","top":0,"right":0,"bottom":0,"left":0,"background-color":"rgba(32, 33, 36, .6)"}),this.popupWindow_=null,this.element_.addEventListener("click",(()=>{if(this.popupWindow_)try{this.popupWindow_.focus()}catch(t){}}))}show(t){return this.popupWindow_=t||null,this.doc_.body.appendChild(this.element_),_n(this.element_,{"display":"block","opacity":0}),Ln(this.element_,{"opacity":1},300,"ease-out")}hide(){if(this.popupWindow_=null,this.element_.parentElement)return Ln(this.element_,{"opacity":0},300,"ease-out").then((()=>{_n(this.element_,{"display":"none"}),this.doc_.body.removeChild(this.element_)}))}}(window.document),this.callback_=null,this.prefetchedObjects_=null,this.shouldHandleResizing_=!1,this.port_=null,this.dismissPromiseResolver_=null,this.googleTransactionId_=e,this.redirectKey_=i||null,this.savedResizePayload_=null}onResult(t){this.callback_||(this.callback_=t,this.activities.onResult(Kn,this.onActivityResult_.bind(this)))}onActivityResult_(t){this.graypane_.hide(),this.callback_(t.acceptResult().then((t=>{if(t.origin!=this.getOrigin_())throw new Error("channel mismatch");const e=t.data;if(e.redirectEncryptedCallbackData)return Pn.setBuyFlowActivityMode(3),this.fetchRedirectResponse_(e.redirectEncryptedCallbackData).then((t=>{const s=Object.assign({},e);return delete s.redirectEncryptedCallbackData,Object.assign(s,t)}));if(!t.originVerified||!t.secureChannel)throw new Error("channel mismatch");return e}),(t=>{const e=t.message;let s=t.message;try{s=JSON.parse(e.substring("Error: ".length))}catch(t){}return s.statusCode&&-1==["DEVELOPER_ERROR","MERCHANT_ACCOUNT_ERROR"].indexOf(s.statusCode)&&(s={"statusCode":"CANCELED"}),"AbortError"==s&&(s={"statusCode":"CANCELED"}),Promise.reject(s)})))}fetchRedirectResponse_(t){return new Promise(((e,s)=>{const n=this.getDecryptionUrl_(),i=new XMLHttpRequest;i.open("POST",n,!0),"withCredentials"in i&&(i.withCredentials=!0),i.onreadystatechange=()=>{if(!(i.readyState<2)){if(i.status<100||i.status>599)return i.onreadystatechange=null,void s(new Error(`Unknown HTTP status ${i.status}`));if(4==i.readyState)try{e(JSON.parse(i.responseText))}catch(t){s(t)}}},i.onerror=()=>{s(new Error("Network failure"))},i.onabort=()=>{s(new Error("Request aborted"))},i.send(t)}))}isReadyToPay(t){return new Promise(((e,s)=>{if(On(t))return void e({"result":!1});const n=window.navigator.userAgent;if(n.indexOf("GSA/")>0&&n.indexOf(Wn)>0)return void e({"result":!1});if(n.indexOf("FxiOS")>0)return void e({"result":!1});const i=n.indexOf("Chrome")>0||n.indexOf("Firefox")>0||n.indexOf(Wn)>0;i&&t.apiVersion>=2&&t.existingPaymentMethodRequired?(t.environment=this.environment_,Pn.sendAndWaitForResponse(t,6,"isReadyToPayResponse",(function(s){const n={"result":i};t.existingPaymentMethodRequired&&(n.paymentMethodPresent="READY_TO_PAY"==s.data.isReadyToPayResponse),e(n)}))):e({"result":i})}))}prefetchPaymentData(t){}loadPaymentData(t){t.swg||t.apiVersion||(t.apiVersion=1),t.environment=this.environment_,Pn.setBuyFlowActivityMode(t.forceRedirect?3:2);const e=this.activities.open(Kn,this.getHostingPageUrl_(),this.getRenderMode_(t),t,{"width":600,"height":600});this.graypane_.show(e&&e.targetWin)}getRenderMode_(t){return t.forceRedirect?"_top":"gp-js-popup"}getOrigin_(){if(this.environment_==xn.Environment.LOCAL)return"";let t;return t=this.environment_==xn.Environment.PREPROD?"pay-preprod.sandbox":this.environment_==xn.Environment.SANDBOX?"pay.sandbox":"pay","https://"+t+".google.com"}getBasePath_(){return this.getOrigin_()+"/gp/p"}getDecryptionUrl_(){let t=this.getBasePath_()+"/apis/buyflow/process";return this.redirectKey_&&(t+="?rk="+encodeURIComponent(this.redirectKey_)),t}getHostingPageUrl_(){return this.environment_==xn.Environment.TIN?"/ui/pay":this.getBasePath_()+"/ui/pay"}getIframeUrl(t,e){let s=`https://pay.google.com/gp/p/ui/pay?origin=${e}`;return t!=xn.Environment.SANDBOX&&t!=xn.Environment.PREPROD||(s=`https://pay'+  (environment == Constants.Environment.PREPROD ? '-preprod' : '')+  '.sandbox.google.com/gp/p/ui/pay?origin=${e}`),s}removeIframeAndContainer_(t,e){this.setTransition_(e,"all 250ms ease 0s"),e.height="0px",setTimeout((()=>{t.parentNode&&t.parentNode.removeChild(t)}),250)}injectIframe_(t){const e=function(t){const e=document.createElement("div");e.classList.add(xn.IFRAME_CONTAINER_CLASS);const s=document.createElement("div");s.classList.add("iframeContainer");const n=document.createElement("iframe");return n.classList.add(t),n.setAttribute("frameborder","0"),n.setAttribute("scrolling","no"),s.appendChild(n),e.appendChild(s),document.body.appendChild(e),{"container":e,"iframe":n}}(this.isVerticalCenterExperimentEnabled_(t)?xn.IFRAME_STYLE_CENTER_CLASS:xn.IFRAME_STYLE_CLASS),s=e.iframe,n=e.container;return n.addEventListener("click",this.closeActionHandler_.bind(this,e)),n.style.display="none",s.style.display="none",s.height="0px",this.setTransition_(s,"all 250ms ease 0s"),this.shouldHandleResizing_=!1,e}backButtonHandler_(t){this.dismissIframe_(t)}closeActionHandler_(t){t.container.parentNode&&history.back()}dismissIframe_(t){t.container.parentNode&&(this.dismissPromiseResolver_(Promise.reject({"errorCode":"CANCELED"})),this.removeIframeAndContainer_(t.container,t.iframe),this.port_&&this.port_.disconnect())}isVerticalCenterExperimentEnabled_(t){return null}showContainerAndIframeWithAnimation_(t,e,s){t.style.display="block",e.style.display="block",setTimeout((()=>{e.height="280px",this.isVerticalCenterExperimentEnabled_(s)&&e.classList.add(xn.IFRAME_ACTIVE_CONTAINER_CLASS),setTimeout((()=>{this.shouldHandleResizing_=!0,this.savedResizePayload_&&(this.setTransition_(e,this.savedResizePayload_.transition),e.height=this.savedResizePayload_.height,this.savedResizePayload_=null)}),250)}),1)}setTransition_(t,e){t.style.setProperty("transition",e),t.style.setProperty("-webkit-transition",e)}openIframe_(t,e,s){let n;s.swg||s.apiVersion||(s.apiVersion=1),s.environment=this.environment_;const i=this.getIframeUrl(this.environment_,window.location.origin);return this.activities.openIframe(e,i,s).then((t=>(this.port_=t,t.onMessage((t=>{"resize"===t.type&&this.shouldHandleResizing_?(n||(n=Date.now()),Date.now()<n+250?this.setTransition_(e,t.transition+", height 250ms"):this.setTransition_(e,t.transition),e.height=t.height):this.savedResizePayload_={"height":t.height,"transition":t.transition}})),t.acceptResult()))).then((s=>(this.removeIframeAndContainer_(t,e),history.back(),s.data)),(s=>(this.removeIframeAndContainer_(t,e),history.back(),Promise.reject(s))))}}(this.environment_,Jn.googleTransactionId_,s,n,t.i&&t.i.redirectKey),this.buyFlowMode_=5;const r=Sn();this.delegate_=r&&!s?new class{constructor(t){this.environment_=t,this.callback_=null}onResult(t){this.callback_=t}isReadyToPay(t){const e=this.createPaymentRequest_(t);return new Promise(((s,n)=>{e.canMakePayment().then((e=>{window.sessionStorage.setItem(xn.IS_READY_TO_PAY_RESULT_KEY,e.toString());const n={"result":e};t.apiVersion>=2&&t.existingPaymentMethodRequired&&(n.paymentMethodPresent=e),s(n)})).catch((function(t){window.sessionStorage.getItem(xn.IS_READY_TO_PAY_RESULT_KEY)?s({"result":"true"==window.sessionStorage.getItem(xn.IS_READY_TO_PAY_RESULT_KEY)}):s({"result":!1})}))}))}prefetchPaymentData(t){this.createPaymentRequest_(t,this.environment_,t.transactionInfo.currencyCode,t.transactionInfo.totalPrice)}loadPaymentData(t){this.loadPaymentDataThroughPaymentRequest_(t)}createPaymentRequest_(t,e,s,n){let i={};return t&&(i=JSON.parse(JSON.stringify(t))),i.apiVersion||(i.apiVersion=1),i.swg&&(i.allowedPaymentMethods=[xn.PaymentMethod.CARD]),e&&e==xn.Environment.TEST&&(i.environment=e),new PaymentRequest([{"supportedMethods":["https://google.com/pay"],"data":i}],{"total":{"label":"Estimated Total Price","amount":{"currency":s||"USD","value":n||"0"}}})}loadPaymentDataThroughPaymentRequest_(t){const e=t.transactionInfo&&t.transactionInfo.currencyCode||void 0,s=t.transactionInfo&&t.transactionInfo.totalPrice||void 0,n=this.createPaymentRequest_(t,this.environment_,e,s);this.callback_(n.show().then((t=>(t.complete("success"),t.details))).catch((function(t){throw t.statusCode=xn.ResponseStatus.CANCELED,t})))}}(this.environment_):this.webActivityDelegate_,this.upiHandler_=new class{constructor(){}isUpiRequest(t){return!!zn(t)}isReadyToPay(t){if(zn(t))return t.existingPaymentMethodRequired?Promise.resolve({"result":!0,"paymentMethodPresent":!0}):Promise.resolve({"result":!0});throw new Error("No Upi payment method found in handler")}loadPaymentData(t,e,s){const n=e.parameters,i=t.transactionInfo,r=[{"supportedMethods":["https://tez.google.com/pay"],"data":{"pa":n.payeeVpa,"pn":n.payeeName,"tr":n.transactionReferenceId,"url":n.referenceUrl,"mc":n.mcc,"tn":i.transactionNote}}];n.transactionId&&(r[0].data.tid=n.transactionId);const o={"total":{"label":"Total","amount":{"currency":i.currencyCode,"value":i.totalPrice}},"displayItems":[{"label":"Original Amount","amount":{"currency":i.currencyCode,"value":i.totalPrice}}]};let a=new PaymentRequest(r,o);s(this.checkCanMakePayment_(a).then((t=>t?this.showUi_(a):this.redirectToGooglePlay_())).then((s=>this.processData_(s,t,e))).catch((t=>(t.statusCode=xn.ResponseStatus.CANCELED,Promise.reject(t)))))}showUi_(t){return t.show().then((t=>(t.complete("success"),t.details)))}checkCanMakePayment_(t){const e=window.sessionStorage.getItem(xn.UPI_CAN_MAKE_PAYMENT_CACHE_KEY);return e?Promise.resolve("true"===e):t.canMakePayment?t.canMakePayment().then((t=>(t&&window.sessionStorage.setItem(xn.UPI_CAN_MAKE_PAYMENT_CACHE_KEY,t.toString()),t))):Promise.resolve(!0)}redirectToGooglePlay_(){return window.location.replace("https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.paisa.user"),Promise.reject({"errorMessage":"Cannot redirect to Tez page in Google Play."})}processData_(t,e,s){const n=JSON.parse(t.tezResponse);if("FAILURE"===n.Status){let t;switch(n.responseCode){case"ZM":t={"errorCode":3,"errorMessage":"Payment failure due to invalid MPIN."};break;case"Z9":t={"errorCode":3,"errorMessage":"Payment failure due to insufficient funds."};break;case"91":t={"errorCode":1,"errorMessage":"Payment failure due to transaction timeout or connection issue."};break;default:t={"errorMessage":"Payment cancelled."}}return Promise.reject(t)}const i={"paymentMethodType":"UPI","payeeVpa":s.parameters.payeeVpa,"status":n.Status,"transactionReferenceId":s.parameters.transactionReferenceId,"transactionId":s.parameters.transactionId?s.parameters.transactionId:n.txnId,"transactionInfo":e.transactionInfo};let r={"apiVersion":e.apiVersion,"apiVersionMinor":e.apiVersionMinor,"paymentMethodData":{"type":s.type,"tokenizationData":{"type":"DIRECT","token":{"protocolVersion":"ECv1","signature":"","signedMessage":i}}}};return Promise.resolve(r)}},this.webActivityDelegate_.onResult(this.onResult_.bind(this)),this.delegate_.onResult(this.onResult_.bind(this)),Pn.load(),r&&Pn.setBuyFlowActivityMode(4),Pn.setGoogleTransactionId(Jn.googleTransactionId_),Pn.postMessage({"eventType":9,"clientLatencyStartMs":Date.now()}),window.addEventListener("message",(t=>this.handleMessageEvent_(t)))}isReadyToPay(t){t&&(t=Object.assign({},this.paymentOptions_,t));const e=Date.now(),s=Rn()||function(t){if(!t)return"isReadyToPayRequest must be set!";if(t.apiVersion>=2){if(!("apiVersionMinor"in t))return"apiVersionMinor must be set!";if(!t.allowedPaymentMethods||!Array.isArray(t.allowedPaymentMethods)||0==t.allowedPaymentMethods.length)return"for v2 allowedPaymentMethods must be set to an array containing a list of accepted payment methods";for(var e=0;e<t.allowedPaymentMethods.length;e++){let i=t.allowedPaymentMethods[e];if(i.type==xn.PaymentMethod.CARD){if(!i.parameters)return"Field parameters must be setup in each allowedPaymentMethod";var s=i.parameters.allowedCardNetworks;if(!s||!Array.isArray(s)||0==s.length)return"allowedCardNetworks must be setup in parameters for type CARD";var n=i.parameters.allowedAuthMethods;if(!n||!Array.isArray(n)||0==n.length||!n.every(Un))return"allowedAuthMethods must be setup in parameters for type 'CARD'  and must contain 'CRYPTOGRAM_3DS' and/or 'PAN_ONLY'"}}return null}return t.allowedPaymentMethods&&Array.isArray(t.allowedPaymentMethods)&&0!=t.allowedPaymentMethods.length&&t.allowedPaymentMethods.every(jn)?null:"allowedPaymentMethods must be set to an array containing 'CARD' and/or 'TOKENIZED_CARD'!"}(t);if(s)return new Promise(((t,e)=>{Jn.logDevErrorToConsole_("isReadyToPay",s),Pn.postMessage({"eventType":0,"error":2}),e({"statusCode":xn.ResponseStatus.DEVELOPER_ERROR,"statusMessage":s})}));const n=this.isReadyToPay_(t);return n.then((t=>(Pn.postMessage({"eventType":0,"clientLatencyStartMs":e,"isReadyToPayApiResponse":t}),t))),n}isReadyToPay_(t){if(this.upiHandler_.isUpiRequest(t))return this.upiHandler_.isReadyToPay(t);if(Sn()&&!Zn(t)){if(t.apiVersion>=2)return this.isReadyToPayApiV2ForChromePaymentRequest_(t);{const e=this.webActivityDelegate_.isReadyToPay(t),s=this.delegate_.isReadyToPay(t);return On(t)?s:s.then((()=>e))}}return this.webActivityDelegate_.isReadyToPay(t)}isReadyToPayApiV2ForChromePaymentRequest_(t){let e=Promise.resolve({"result":!1});t.existingPaymentMethodRequired&&(e=Promise.resolve({"result":!1,"paymentMethodPresent":!1}));let s=e;if(Mn(t,xn.AuthMethod.CRYPTOGRAM_3DS)){const e=JSON.parse(JSON.stringify(t));for(let t=0;t<e.allowedPaymentMethods.length;t++)e.allowedPaymentMethods[t].type==xn.PaymentMethod.CARD&&(e.allowedPaymentMethods[t].parameters.allowedAuthMethods=[xn.AuthMethod.CRYPTOGRAM_3DS]);s=this.delegate_.isReadyToPay(e)}let n=e;return Mn(t,xn.AuthMethod.PAN_ONLY)&&(n=this.webActivityDelegate_.isReadyToPay(t)),s.then((t=>1==(t&&t.result)?t:n))}prefetchPaymentData(t){const e=Rn()||Dn(t);e?Jn.logDevErrorToConsole_("prefetchPaymentData",e):(this.assignInternalParams_(t),Sn()&&!Zn(t)?this.delegate_.prefetchPaymentData(t):this.webActivityDelegate_.prefetchPaymentData(t))}loadPaymentData(t){Pn.postMessage({"eventType":5});const e=Rn()||Dn(t);if(this.buyFlowMode_=t&&t.swg?6:5,e)return void this.onPaymentResponse_(new Promise(((t,s)=>{Pn.postMessage({"eventType":1,"error":2,"buyFlowMode":this.buyFlowMode_}),Jn.logDevErrorToConsole_("loadPaymentData",e),s({"statusCode":xn.ResponseStatus.DEVELOPER_ERROR,"statusMessage":e})})));const s=zn(t);s?this.upiHandler_.loadPaymentData(t,s,this.onResult_.bind(this)):(this.loadPaymentDataApiStartTimeMs_=Date.now(),this.assignInternalParams_(t),Zn(t)?this.webActivityDelegate_.loadPaymentData(t):this.delegate_.loadPaymentData(t))}static logDevErrorToConsole_(t,e){console.error("DEVELOPER_ERROR in "+t+" : "+e)}createButton(t={}){const e=Date.now();return Pn.postMessage({"eventType":2,"clientLatencyStartMs":e}),null}handleMessageEvent_(t){this.isInTrustedDomain_()&&"logPaymentData"===t.data.name&&Pn.postMessage(t.data.data)}isInTrustedDomain_(){return-1!=Yn.indexOf(window.location.hostname)}onResult_(t){t.then((t=>{Pn.postMessage({"eventType":1,"clientLatencyStartMs":this.loadPaymentDataApiStartTimeMs_,"buyFlowMode":this.buyFlowMode_})})).catch((t=>{t.errorCode?Pn.postMessage({"eventType":1,"error":t.errorCode,"buyFlowMode":this.buyFlowMode_}):Pn.postMessage({"eventType":1,"error":6,"buyFlowMode":this.buyFlowMode_})})),this.onPaymentResponse_(t)}assignInternalParams_(t){const e={"startTimeMs":Date.now(),"googleTransactionId":Jn.googleTransactionId_};return t.i=t.i?Object.assign(e,t.i):e,t}};function Zn(t){return!0===(t.i&&t.i.disableNative)}var Qn=class{constructor(t){this.doc_=t}preconnect(t){this.pre_(t,"preconnect")}dnsPrefetch(t){this.pre_(t,"dns-prefetch")}prefetch(t){this.pre_(t,"preconnect prefetch")}preload(t,e){this.pre_(t,"preconnect preload",e)}pre_(t,e,s){const n=Jt(this.doc_,"link",{"rel":e,"href":t});s&&n.setAttribute("as",s),this.doc_.head.appendChild(n)}},Xn="subscribe.google.com:rk",ti={"PRODUCTION":"https://pay.google.com","SANDBOX":"https://pay.sandbox.google.com"};function ei(t,e,s){t.i=Object.assign(t.i||{},{[e]:s})}function si(t){return"subscribe.google.com:"+t}h();var ni={"bg":"   Google","bn":"Google-     ","cs":"Zskejte s&nbsp;Googlem vc","da":"F adgang til mere med Google","de":"Immer gut informiert mit Google","el":"    Google","en":"Get more with Google","es":"Disfruta de ms artculos con Google","es-419":"Disfruta ms artculos con Google","es-ar":"Disfruta ms artculos con Google","fr":"Plus de contenus avec Google","fr-ca":"Aller plus loin avec Google","hi":"Google       ","it":"Con Google puoi avere di pi","ja":"Google ","kn":"Google    ","lt":"Gaukite daugiau su Google","lv":"Iegstiet vairk ar Google","ml":"Google    ","mr":"Google    ","nl":"Krijg meer met Google","pl":"Z&nbsp;Google dostajesz wicej","pt-br":"Veja mais com o Google","pt-pt":"Obtenha mais com a Google","ro":"Mai multe beneficii cu Google","sk":"Zskajte viac s&nbsp;Googlom","sl":"Izkoristite ve z Googlom","sv":"F mer med Google","ta":"Google     ","te":"Google   "},ii={"bg":'<strong></strong>     ,  Google           ,     <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>     Google.',"bn":'<strong></strong>          Google                  Google     <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>-   ',"cs":'<strong></strong>Tento obsah je obvykle zpoplatnn, ale pokud se do publikace <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> zaregistrujete pomoc tu Google, zskte od Googlu pstup zdarma.',"da":'<strong></strong>Du skal normalt betale for at f adgang til dette indhold, men hvis du tilmelder dig <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> med din Google-konto, giver Google dig gratis adgang til artiklen og andet indhold.',"de":'<strong></strong>Dieser Inhalt ist normalerweise kostenpflichtig. Google gewhrt dir jedoch kostenlos Zugriff auf diesen Artikel und andere Inhalte, wenn du dich mit deinem Google-Konto bei <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> registrierst.',"el":'<strong></strong>      ,   Google             ,     <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>      Google.',"en":'<strong></strong>This content usually requires payment, but Google is giving you free access to this article and more when you register with <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> using your Google Account.',"es":'<strong></strong>Normalmente, es necesario pagar para ver este contenido, pero Google te ofrece acceso gratuito a este y otros artculos si te registras en <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> con tu cuenta de Google.',"es-419":'<strong></strong>Normalmente, es necesario pagar para ver este contenido, pero Google te ofrece acceso gratuito a este y otros artculos si te registras en <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> con tu Cuenta&nbsp;de&nbsp;Google.',"es-ar":'<strong></strong>Normalmente, es necesario pagar para ver este contenido, pero Google te ofrece acceso gratuito a este y otros artculos si te registras en <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> con tu Cuenta&nbsp;de&nbsp;Google.',"fr":'<strong></strong>Ce contenu est gnralement payant, mais vous pouvez lire cet article et d\'autres contenus gratuitement grce  Google en vous inscrivant sur <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> avec votre compte Google.',"fr-ca":"<strong></strong>Ce contenu est gnralement payant, mais Google vous offre un accs gratuit  cet article et  d'autres si vous vous inscrivez  <ph name=\"PUBLICATION\"><ex>AP News</ex>{publication}</ph>  l'aide de votre compte Google.","hi":'<strong></strong>  ,          . , Google   ,             .  ,  Google    , <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>    .',"it":'<strong></strong>Generalmente questi contenuti sono a pagamento, ma Google ti offre accesso gratuito a questo e ad altri articoli se ti registri a <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> usando il tuo Account Google.',"ja":'<strong></strong> Google  <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> ',"kn":'<strong></strong>    ,   <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>   Google    Google         .',"lt":'<strong></strong>is turinys paprastai yra mokamas, taiau Google suteikia jums prieig prie io straipsnio ir kt. be papildomo mokesio, kai usiregistruojate <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> naudodami savo Google paskyr.',"lv":'<strong></strong>Parasti is ir maksas saturs, tau Google pieirs jums bezmaksas piekuvi im un citiem rakstiem, ja reistrsieties izdevumam <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> ar savu Google kontu.',"ml":'<strong></strong>    ,  Google   <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>   ,    Google    .',"mr":'<strong></strong>         Google   <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>    , Google          .',"nl":'<strong></strong>Voor deze content moet je eigenlijk betalen. Maar Google geeft je kosteloos toegang tot dit artikel en andere content als je je registreert bij <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> via je Google-account.',"pl":'<strong></strong>Te treci zazwyczaj wymagaj opaty, ale dziki Google moesz bezpatnie przeczyta ten artyku i&nbsp;korzysta z&nbsp;innych materiaw po zarejestrowaniu si w&nbsp;publikacji <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> za pomoc konta Google.',"pt-br":'<strong></strong>Normalmente,  preciso pagar por este contedo. Porm, basta voc se registrar na publicao <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> usando sua Conta do Google para ter acesso a esta matria e muito mais sem custos financeiros.',"pt-pt":'<strong></strong>Geralmente, este contedo requer um pagamento, mas a Google concede-lhe acesso gratuito a este artigo e muito mais ao registar-se na publicao <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> com a sua Conta Google.',"ro":'<strong></strong>Acest coninut este de obicei cu plat, dar Google v ofer acces fr costuri la acest articol i la altele cnd v nregistrai la <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> folosind Contul Google.',"sk":'<strong></strong>Tento obsah je obvykle platen, ale ak sa do publikcie <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> zaregistrujete tom Google, zskate od Googlu bezplatn prstup k&nbsp;tomuto lnku a&nbsp;alie vhody.',"sl":'<strong></strong>Za to vsebino je obiajno zahtevano plailo, vendar vam Google omogoa dostop do tega lanka in drugega brez strokov, e se z raunom Google registrirate pri publikaciji <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>.',"sv":'<strong></strong>Det krvs vanligtvis betalning fr det hr innehllet, men Google ger dig gratis tkomst till artikeln och annat innehll nr du registrerar dig hos <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> med ditt Google-konto.',"ta":'<strong></strong>      .  <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>   Google        Google   .',"te":'<strong></strong>      ,   Google   <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>  ,       Google,   .'},ri={"bg":"  ?","bn":"     ?","cs":"U mte et?","da":"Har du allerede en konto?","de":"Du hast bereits ein Konto?","el":"  ;","en":"Already have an account?","es":"Ya tienes una cuenta?","es-419":"Ya tienes una cuenta?","es-ar":"Ya tienes una cuenta?","fr":"Vous avez dj un compte&nbsp;?","fr-ca":"Vous avez dj un compte?","hi":"        ?","it":"Hai gi un account?","ja":"","kn":"  ?","lt":"Jau turite paskyr?","lv":"Vai jums jau ir konts?","ml":" ?","mr":"  ?","nl":"Heb je al een account?","pl":"Masz ju konto?","pt-br":"J tem uma conta?","pt-pt":"J tem uma conta?","ro":"Avei deja un cont?","sk":"U mte et?","sl":"e imate raun?","sv":"Har du redan ett konto?","ta":"  ?","te":"  ?"},oi={"bg":' <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>        <ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>  <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"bn":'<ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>- <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL <ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>  ',"cs":'Prostudujte si <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>podmnky CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> publikace <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"da":'Gennemg <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL-vilkrene<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> (Canadian Anti-Spam Legislation, canadisk lovgivning vedrrende antispam) for <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"de":'<ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL-Bedingungen<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> von <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> ansehen',"el":'     <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>  <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph> CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>',"en":'Review <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>\'s <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL terms<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>',"es":'Consulta los <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>trminos de la CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> de <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"es-419":'Consulta las <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>condiciones de CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> de <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"fr":'Consultez les <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>Conditions d\'utilisation LCAP (Loi canadienne anti-pourriel)<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> de <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"fr-ca":'Consulter les <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>conditions d\'utilisation relatives  la Loi canadienne antipourriel (LCAP)<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> de la publication <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"hi":'<ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>  <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph> ( - )   <ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>    ',"it":'Rileggi i <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>termini della legge CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> di <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"ja":'<ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>  <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL <ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>',"kn":'<ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>  <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL <ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>  ',"lt":'Perirkite <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL slygas<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>',"lv":'Prskatt izdevuma <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph> <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL noteikumus<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>',"ml":'<ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>  <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL <ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>  ',"mr":'<ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>  <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL <ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>   ',"nl":'Bekijk de <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL-voorwaarden<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> van <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"pl":'Zapoznaj si z&nbsp;<ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>warunkami CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> publikacji <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"pt-br":'Confira os <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>termos da CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> da publicao <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"pt-pt":'Analise os <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>termos da CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> da publicao <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"ro":'Examinai <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>Termenii CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> ai <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"sk":'Pretajte si <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>podmienky CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> publikcie <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"sl":'Preglejte <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>pogoje CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> za publikacijo <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"sv":'Ls <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>villkoren i lagstiftningen CASL<ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> fr <ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>',"ta":'<ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>  <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL <ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph> ',"te":'<ph name="PUBLICATION"><ex>AP News</ex>{publication}</ph>  <ph name="LINK_START"><ex>&lt;a&gt;</ex></ph>CASL <ph name="LINK_END"><ex>&lt;/a&gt;</ex></ph>  '};function ai(t){console.warn.apply(console,arguments)}var hi,li,ui,ci=3009,gi="EVENT_SHOWCASE_NO_ENTITLEMENTS_REGWALL";function pi(t){hi||(hi=self.document.createElement("a"),li=self.UrlCache||(self.UrlCache=Object.create(null)));const e=li[t];if(e)return e;const s=function(t,e){t.href=e;const s={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:""};return t.origin&&"null"!=t.origin?s.origin=t.origin:"data:"!=s.protocol&&s.host?s.origin=s.protocol+"//"+s.host:s.origin=s.href,s}(hi,t);return li[t]=s}function di(t,e){const s=t.en;if("object"!=typeof t||!e)return s;let n="string"==typeof e?e:mi(e);n=n.toLowerCase(),n=n.replace(/_/g,"-");const i=n.split("-");for(;i.length;){const e=i.join("-");if(e in t)return t[e];i.pop()}return s}function mi(t){return t.lang?t.lang:t.ownerDocument&&t.ownerDocument.documentElement.lang?t.ownerDocument.documentElement.lang:"en"}pi(self.window.location.href),pi(self.document.referrer);var fi=["Webkit","webkit","Moz","moz","ms","O","o"];function bi(t,e,s){if(!("--".length>(n=e).length)&&0==n.lastIndexOf("--",0))return e;var n;ui||(ui=Object.create(null));let i=ui[e];if(!i||s){if(i=e,void 0===t[e]){const s=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(e),n=function(t,e){for(let s=0;s<fi.length;s++){const n=fi[s]+e;if(void 0!==t[n])return n}return""}(t,s);void 0!==t[n]&&(i=n)}s||(ui[e]=i)}return i}function wi(t,e){for(const s in e)t.style.setProperty(bi(e,s),e[s].toString(),"important")}var vi={"EVENT_SHOWCASE_METER_OFFERED":[3010,3011],"EVENT_SHOWCASE_UNLOCKED_BY_SUBSCRIPTION":[3007],"EVENT_SHOWCASE_UNLOCKED_BY_METER":[3010,3008],"EVENT_SHOWCASE_UNLOCKED_FREE_PAGE":[3012],[gi]:[ci,22,23],"EVENT_SHOWCASE_NO_ENTITLEMENTS_PAYWALL":[ci,1],"EVENT_SHOWCASE_INELIGIBLE_PAYWALL":[3013,ci]},xi="swg-gaa-post-message-stamp",yi="swg-regwall-container",Ai=class{static show({iframeUrl:t,caslUrl:e}){if(!function(t,e=!1){const s=(n=t)?(/^[?#]/.test(n)?n.slice(1):n).split("&").reduce(((t,e)=>{const s=e.split("=");try{const e=decodeURIComponent(s[0]||""),n=decodeURIComponent(s[1]||"");e&&(t[e]=n)}catch(t){ai(`SwG could not parse a URL query param: ${s[0]}`)}return t}),{}):{};var n;return!(!(s.gaa_at&&s.gaa_n&&s.gaa_sig&&s.gaa_ts)||!e&&"na"===s.gaa_at||parseInt(s.gaa_ts,16)<Date.now()/1e3)}(Ei.getQueryString())){const t="[swg-gaa.js:GaaMeteringRegwall.show]: URL needs fresh GAA params.";return ai(t),Promise.reject(t)}return ki({showcaseEvent:gi,isFromUserAction:!1}),Ai.render_({iframeUrl:t,caslUrl:e}),Ai.sendIntroMessageToGsiIframe_({iframeUrl:t}),Ai.logButtonClickEvents_(),Ai.getGaaUser_().then((t=>(Ai.remove(),t))).catch((t=>{throw Ai.remove(),t}))}static remove(){const t=self.document.getElementById(yi);t&&t.remove()}static signOut(){return new Promise((t=>{const e=setInterval((()=>{self.gapi&&(clearInterval(e),t())}),50)})).then((()=>new Promise((t=>self.gapi.load("auth2",t))))).then((()=>self.gapi.auth2.getAuthInstance()||self.gapi.auth2.init())).then((()=>self.gapi.auth2.getAuthInstance().signOut()))}static render_({iframeUrl:t,caslUrl:e}){const s=mi(self.document.body),n=Ai.getPublisherNameFromPageConfig_(),i=/<ph name="PUBLICATION".+?\/ph>/g;t=function(t,e,s){const n=t.indexOf("?"),i=t.indexOf("#");let r="";return-1!=i&&(r=t.substring(i),t=t.substring(0,i)),-1==n?t+="?":n<t.length-1&&(t+="&"),(t+=encodeURIComponent("lang")+"="+encodeURIComponent(s))+r}(t,0,s);const r=self.document.createElement("div");r.id=yi,wi(r,{"all":"unset","background-color":"rgba(32, 33, 36, 0.6)","border":"none","bottom":"0","height":"100%","left":"0","opacity":"0","pointer-events":"none","position":"fixed","right":"0","transition":"opacity 0.5s","top":"0","width":"100%","z-index":2147483646});let o="";return e&&(o='\n<div class="gaa-metering-regwall--casl">\n  $SHOWCASE_REGWALL_CASL$\n</div>\n'.replace("$SHOWCASE_REGWALL_CASL$",di(oi,s)).replace(/<ph name="LINK_START".+?\/ph>/g,`<a href="${encodeURI(e)}" target="_blank">`).replace(/<ph name="LINK_END".+?\/ph>/g,"</a>").replace(i,`<strong>${n}</strong>`)),r.innerHTML='\n<style>\n  .gaa-metering-regwall--dialog-spacer,\n  .gaa-metering-regwall--dialog,\n  .gaa-metering-regwall--logo,\n  .gaa-metering-regwall--title,\n  .gaa-metering-regwall--description,\n  .gaa-metering-regwall--description strong,\n  .gaa-metering-regwall--iframe,\n  .gaa-metering-regwall--casl {\n    all: initial !important;\n    box-sizing: border-box !important;\n    font-family: Roboto, arial, sans-serif !important;\n  }\n\n  .gaa-metering-regwall--dialog-spacer {\n    background: linear-gradient(0, #808080, transparent) !important;\n    bottom: 0 !important;\n    display: block !important;\n    position: fixed !important;\n    width: 100% !important;\n  }\n\n  @keyframes slideUp {\n    from {transform: translate(0, 200px) !important;}\n    to {transform: translate(0, 0) !important;}\n  }\n\n  .gaa-metering-regwall--dialog {\n    animation: slideUp 0.5s !important;\n    background: white !important;\n    border-radius: 12px 12px 0 0 !important;\n    box-shadow: 0px -2px 6px rgba(0, 0, 0, 0.3) !important;\n    display: block !important;\n    margin: 0 auto !important;\n    max-width: 100% !important;\n    padding: 24px 20px !important;\n    pointer-events: auto !important;\n    width: 410px !important;\n  }\n\n  .gaa-metering-regwall--logo {\n    display: block !important;\n    margin: 0 auto 24px !important;\n  }\n\n  .gaa-metering-regwall--title {\n    color: #000 !important;\n    display: block !important;\n    font-size: 16px !important;\n    margin: 0 0 8px !important;\n    outline: none !important !important;\n  }\n\n  .gaa-metering-regwall--description {\n    color: #646464 !important;\n    display: block !important;\n    font-size: 14px !important;\n    line-height: 19px !important;\n    margin: 0 0 30px !important;\n  }\n\n  .gaa-metering-regwall--description strong {\n    color: #646464 !important;\n    font-size: 14px !important;\n    line-height: 19px !important;\n    font-weight: bold !important;\n  }\n\n  .gaa-metering-regwall--iframe {\n    border: none !important;\n    display: block !important;\n    height: 44px !important;\n    margin: 0 0 30px !important;\n    width: 100% !important;\n  }\n\n  .gaa-metering-regwall--casl {\n    color: #646464 !important;\n    display: block !important;\n    font-size: 12px !important;\n    text-align: center !important;\n    margin: -16px auto 32px !important;\n  }\n\n  .gaa-metering-regwall--casl a {\n    color: #1967d2 !important;\n  }\n\n  .gaa-metering-regwall--line {\n    background-color: #ddd !important;\n    display: block !important;\n    height: 1px !important;\n    margin: 0 0 24px !important;\n  }\n\n  .gaa-metering-regwall--publisher-sign-in-button {\n    color: #1967d2 !important;\n    cursor: pointer !important;\n    display: block !important;\n    font-size: 12px !important;\n    text-decoration: underline !important;\n  }\n\n  .gaa-metering-regwall--google-sign-in-button {\n    height: 36px !important;\n    margin: 0 auto 30px !important;\n  }\n\n  .gaa-metering-regwall--google-sign-in-button > div {\n    animation: swgGoogleSignInButtonfadeIn 0.32s !important;\n  }\n\n  @keyframes swgGoogleSignInButtonfadeIn {\n    from {\n      opacity: 0 !important;\n    }\n    to {\n      opacity: 1 !important;\n    }\n  }\n</style>\n\n<div class="gaa-metering-regwall--dialog-spacer">\n  <div role="dialog" aria-modal="true" class="gaa-metering-regwall--dialog" id="swg-regwall-dialog" aria-labelledby="swg-regwall-title">\n    <img alt="Google" class="gaa-metering-regwall--logo" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDc0IDI0Ij48cGF0aCBmaWxsPSIjNDI4NUY0IiBkPSJNOS4yNCA4LjE5djIuNDZoNS44OGMtLjE4IDEuMzgtLjY0IDIuMzktMS4zNCAzLjEtLjg2Ljg2LTIuMiAxLjgtNC41NCAxLjgtMy42MiAwLTYuNDUtMi45Mi02LjQ1LTYuNTRzMi44My02LjU0IDYuNDUtNi41NGMxLjk1IDAgMy4zOC43NyA0LjQzIDEuNzZMMTUuNCAyLjVDMTMuOTQgMS4wOCAxMS45OCAwIDkuMjQgMCA0LjI4IDAgLjExIDQuMDQuMTEgOXM0LjE3IDkgOS4xMyA5YzIuNjggMCA0LjctLjg4IDYuMjgtMi41MiAxLjYyLTEuNjIgMi4xMy0zLjkxIDIuMTMtNS43NSAwLS41Ny0uMDQtMS4xLS4xMy0xLjU0SDkuMjR6Ii8+PHBhdGggZmlsbD0iI0VBNDMzNSIgZD0iTTI1IDYuMTljLTMuMjEgMC01LjgzIDIuNDQtNS44MyA1LjgxIDAgMy4zNCAyLjYyIDUuODEgNS44MyA1LjgxczUuODMtMi40NiA1LjgzLTUuODFjMC0zLjM3LTIuNjItNS44MS01LjgzLTUuODF6bTAgOS4zM2MtMS43NiAwLTMuMjgtMS40NS0zLjI4LTMuNTIgMC0yLjA5IDEuNTItMy41MiAzLjI4LTMuNTJzMy4yOCAxLjQzIDMuMjggMy41MmMwIDIuMDctMS41MiAzLjUyLTMuMjggMy41MnoiLz48cGF0aCBmaWxsPSIjNDI4NUY0IiBkPSJNNTMuNTggNy40OWgtLjA5Yy0uNTctLjY4LTEuNjctMS4zLTMuMDYtMS4zQzQ3LjUzIDYuMTkgNDUgOC43MiA0NSAxMmMwIDMuMjYgMi41MyA1LjgxIDUuNDMgNS44MSAxLjM5IDAgMi40OS0uNjIgMy4wNi0xLjMyaC4wOXYuODFjMCAyLjIyLTEuMTkgMy40MS0zLjEgMy40MS0xLjU2IDAtMi41My0xLjEyLTIuOTMtMi4wN2wtMi4yMi45MmMuNjQgMS41NCAyLjMzIDMuNDMgNS4xNSAzLjQzIDIuOTkgMCA1LjUyLTEuNzYgNS41Mi02LjA1VjYuNDloLTIuNDJ2MXptLTIuOTMgOC4wM2MtMS43NiAwLTMuMS0xLjUtMy4xLTMuNTIgMC0yLjA1IDEuMzQtMy41MiAzLjEtMy41MiAxLjc0IDAgMy4xIDEuNSAzLjEgMy41NC4wMSAyLjAzLTEuMzYgMy41LTMuMSAzLjV6Ii8+PHBhdGggZmlsbD0iI0ZCQkMwNSIgZD0iTTM4IDYuMTljLTMuMjEgMC01LjgzIDIuNDQtNS44MyA1LjgxIDAgMy4zNCAyLjYyIDUuODEgNS44MyA1LjgxczUuODMtMi40NiA1LjgzLTUuODFjMC0zLjM3LTIuNjItNS44MS01LjgzLTUuODF6bTAgOS4zM2MtMS43NiAwLTMuMjgtMS40NS0zLjI4LTMuNTIgMC0yLjA5IDEuNTItMy41MiAzLjI4LTMuNTJzMy4yOCAxLjQzIDMuMjggMy41MmMwIDIuMDctMS41MiAzLjUyLTMuMjggMy41MnoiLz48cGF0aCBmaWxsPSIjMzRBODUzIiBkPSJNNTggLjI0aDIuNTF2MTcuNTdINTh6Ii8+PHBhdGggZmlsbD0iI0VBNDMzNSIgZD0iTTY4LjI2IDE1LjUyYy0xLjMgMC0yLjIyLS41OS0yLjgyLTEuNzZsNy43Ny0zLjIxLS4yNi0uNjZjLS40OC0xLjMtMS45Ni0zLjctNC45Ny0zLjctMi45OSAwLTUuNDggMi4zNS01LjQ4IDUuODEgMCAzLjI2IDIuNDYgNS44MSA1Ljc2IDUuODEgMi42NiAwIDQuMi0xLjYzIDQuODQtMi41N2wtMS45OC0xLjMyYy0uNjYuOTYtMS41NiAxLjYtMi44NiAxLjZ6bS0uMTgtNy4xNWMxLjAzIDAgMS45MS41MyAyLjIgMS4yOGwtNS4yNSAyLjE3YzAtMi40NCAxLjczLTMuNDUgMy4wNS0zLjQ1eiIvPjwvc3ZnPg==" />\n\n    <div class="gaa-metering-regwall--title" id="swg-regwall-title" tabindex="0">$SHOWCASE_REGWALL_TITLE$</div>\n\n    <div class="gaa-metering-regwall--description">\n      $SHOWCASE_REGWALL_DESCRIPTION$\n    </div>\n\n    <iframe\n        id="swg-google-sign-in-iframe"\n        class="gaa-metering-regwall--iframe"\n        src="$iframeUrl$">\n    </iframe>\n\n    $SHOWCASE_REGWALL_CASL$\n\n    <div class="gaa-metering-regwall--line"></div>\n\n    <a\n        id="swg-publisher-sign-in-button"\n        class="gaa-metering-regwall--publisher-sign-in-button"\n        tabindex="0"\n        href="#">\n      $SHOWCASE_REGWALL_PUBLISHER_SIGN_IN_BUTTON$\n    </a>\n  </div>\n</div>\n'.replace("$iframeUrl$",t).replace("$SHOWCASE_REGWALL_TITLE$",di(ni,s)).replace("$SHOWCASE_REGWALL_DESCRIPTION$",di(ii,s).replace(i,n)).replace("$SHOWCASE_REGWALL_PUBLISHER_SIGN_IN_BUTTON$",di(ri,s)).replace("$SHOWCASE_REGWALL_CASL$",o),self.document.body.appendChild(r),r.offsetHeight,wi(r,{"opacity":1}),Ai.addClickListenerOnPublisherSignInButton_(),self.document.getElementById("swg-regwall-dialog").addEventListener("animationend",(()=>{self.document.getElementById("swg-regwall-title").focus()})),r}static getPublisherNameFromPageConfig_(){const t=Ai.getPublisherNameFromJsonLdPageConfig_();if(t)return t;const e=Ai.getPublisherNameFromMicrodataPageConfig_();if(e)return e;throw new Error("Showcase articles must define a publisher name with either JSON-LD or Microdata.")}static getPublisherNameFromJsonLdPageConfig_(){const t=Array.prototype.slice.call(self.document.querySelectorAll('script[type="application/ld+json"]')).map((t=>{return e=t.textContent,JSON.parse(e);var e}));for(let s=0;s<t.length;s++){var e;const n=t[s],i=null==n||null===(e=n.publisher)||void 0===e?void 0:e.name;if(i)return i;n&&"object"==typeof n&&t.push(...Object.values(n))}}static getPublisherNameFromMicrodataPageConfig_(){for(var t,e=r(self.document.querySelectorAll('[itemscope][itemtype][itemprop="publisher"] [itemprop="name"]'),!0);!(t=e()).done;){const e=t.value.content;if(e)return e}}static addClickListenerOnPublisherSignInButton_(){self.document.getElementById("swg-publisher-sign-in-button").addEventListener("click",(t=>{t.preventDefault(),ki({analyticsEvent:1036,isFromUserAction:!0}),Ii((t=>t.triggerLoginRequest({linkRequested:!1})))}))}static getGaaUser_(){return new Promise(((t,e)=>{self.addEventListener("message",(s=>{s.data.stamp===xi&&("user"===s.data.command&&t(s.data.gaaUser||s.data.returnedJwt),"error"===s.data.command&&e("Google Sign-In could not render"))}))}))}static logButtonClickEvents_(){self.addEventListener("message",(t=>{t.data.stamp===xi&&"button-click"===t.data.command&&ki({analyticsEvent:1035,isFromUserAction:!0})}))}static sendIntroMessageToGsiIframe_({iframeUrl:t}){const e=self.document.getElementById("swg-google-sign-in-iframe");e.onload=()=>{e.contentWindow.postMessage({stamp:xi,command:"introduction"},new URL(t).origin)}}};function Ii(t){(self.SWG=self.SWG||[]).push(t)}function ki({analyticsEvent:t,showcaseEvent:e,isFromUserAction:s}={}){Ii((n=>{n.getEventManager().then((n=>{for(var i,o=r(e?vi[e]||[]:[t],!0);!(i=o()).done;){const t=i.value;n.logEvent({eventType:t,eventOriginator:1,isFromUserAction:s,additionalParameters:null})}}))}))}var Ci,Ei=class{static getQueryString(){return self.location.search}};function Ni(t,e,s){if(e[s])return e[s];const n=t.querySelector(`style[${s}], link[${s}]`);return n?(e[s]=n,n):null}function Ti(t,e){const s=t.styleSheets;for(let t=0;t<s.length;t++)if(s[t].ownerNode==e)return!0;return!1}function Pi(t,e){return Ci||(Ci=self.document.createElement("a")),function(t,e,s){return t.href="",new URL(e,t.href)}(Ci,t)}new Set(["c","v","a","ad"]);var _i="link",Li="subscribe",Si="contribute",Oi="showContributionOptions",Mi="showOffers",Ri="started",ji="rejected",Ui="success";function Di(t){const e=Object.getOwnPropertyDescriptor(t,"message");if(e&&e.writable)return t;const{message:s,stack:n}=t,i=new Error(s);for(const e in t)i[e]=t[e];return i.stack=n,i}function zi(t){let e=null,s="";for(let t=0;t<arguments.length;t++){const n=arguments[t];n instanceof Error&&!e?e=Di(n):(s&&(s+=" "),s+=n)}return e?s&&(e.message=s+": "+e.message):e=new Error(s),e}h(),g(),g();var Gi=class{constructor(t=""){this.suffix_=t}prepareError_(t){this.suffix_&&(t.message?-1===t.message.indexOf(this.suffix_)&&(t.message=this.suffix_):t.message=this.suffix_)}createError(t){const e=zi.apply(null,Array.prototype.slice.call(arguments));return this.prepareError_(e),e}createExpectedError(t){const e=zi.apply(null,Array.prototype.slice.call(arguments));return this.prepareError_(e),e.expected=!0,e}error(t){throw this.createError.apply(this,arguments)}expectedError(t){throw this.createExpectedError.apply(this,arguments)}};new Gi(self.__AMP_TOP?"":""),new Gi,new RegExp(["CreativeWork","Article","NewsArticle","Blog","Comment","Course","HowTo","Message","Review","WebPage"].join("|"));var Bi="SUBSCRIBER",Fi=class{static empty(t){return new Fi({source:"",raw:"",service:t,granted:!1})}constructor(t){const{dataObject:e,decryptedDocumentKey:s,grantReason:n="",granted:i=!1,raw:r="",service:o,source:a}=t;this.raw=r,this.source=a,this.service=o,this.granted=i,this.grantReason=n,this.data=e,this.decryptedDocumentKey=s}json(){return{"source":this.source,"service":this.service,"granted":this.granted,"grantReason":this.grantReason,"data":this.data}}jsonForPingback(){return k({"raw":this.raw},this.json())}static parseFromJson(t,e=null){t||(t={});const s=e||JSON.stringify(t),n=t.source||"",i=t.granted||!1,r=t.grantReason,o=t.data||null,a=t.decryptedDocumentKey||null;return new Fi({source:n,raw:s,service:"",granted:i,grantReason:r,dataObject:o,decryptedDocumentKey:a})}isSubscriber(){return this.granted&&this.grantReason===Bi}isFree(){return this.granted&&"UNLOCKED"===this.grantReason}},Vi="subscribe.google.com",$i=/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,Ki={1:!0,11:!0},Wi={"subscriptions-paywall-activated":1},qi={[Mi]:{[Ri]:null}},Hi=class{constructor(t,e,s){this.t1=s,this.Ci=t,this.br=M(t.win,"vsync"),this.e1=!1,this.s1=s.getAnalytics(),this.s1.registerEventListener(this.n1.bind(this)),this.i1=new class{constructor(t,e){const s=t.getHeadNode();this.PP=q(s),this.o1=e,this.a1=null}setAuthResponse(t){this.a1=t}buildUrl(t,e){return this.h1(e).then((e=>this.PP.expandUrlAsync(t,e)))}collectUrlVars(t,e){return this.h1(e).then((e=>this.PP.collectVars(t,e)))}h1(t){return this.o1.then((e=>{const s={"READER_ID":e,"ACCESS_READER_ID":e};return t&&(s.AUTHDATA=t=>{if(this.a1)return w(this.a1,t)}),s}))}}(this.Ci,this.t1.getReaderId("local")),this.Ee=(t=>G(t,"timer"))(this.Ci.win),this.l1=new Yi(t.win);const n={"experiments":Object.keys(K(t.win)).filter((e=>{return e.startsWith("swg-")&&(s=e,!!K(t.win)[s]);var s})).map((t=>t.substring(4)))};let i=null;this.u1=new class{constructor(t,e,s,n,i){(s=s||{}).configPromise=s.configPromise||l(),this.eventManager_=new ws(s.configPromise),this.doc_=Bs(t),this.win_=this.doc_.getWin(),this.config_={windowOpenMode:De,analyticsMode:0,enableSwgAnalytics:!1,enablePropensity:!1},function(t){const e=t.navigator;return/Edge/i.test(e&&e.userAgent)}(this.win_)&&(this.config_.windowOpenMode=ze),n&&this.configure_(n),this.pageConfig_=e,this.documentParsed_=this.doc_.whenReady(),this.jserror_=new class{constructor(t){this.doc_=t,this.microTask_=l()}error(t){const e=Array.prototype.slice.call(arguments,0);return this.microTask_.then((()=>{const t=fn.apply(null,e);t.reported||(this.doc_.getWin().document.createElement("img").src="https://news.google.com/_/SubscribewithgoogleClientUi/jserror?error="+encodeURIComponent(String(t))+"&script="+encodeURIComponent("https://news.google.com/swg/js/v1/swg.js")+"&line="+(t.lineNumber||1)+"&trace="+encodeURIComponent(t.stack),t.reported=!0)}))}}(this.doc_),this.fetcher_=s.fetcher||new class{constructor(t){this.xhr_=new class{constructor(t){this.win=t}fetch_(t,e){Tt("string"==typeof t,"Only URL supported: %s",t);const s=e.credentials;return Tt(void 0===s||"include"==s||"omit"==s,"Only credentials=include|omit support: %s",s),"document"==e.responseType?gn(t,e):(this.win.fetch||gn).apply(null,arguments)}fetch(t,e){return e=function(t,e){var s;return(t=t||{}).method=void 0===(s=t.method)?"GET":(s=s.toUpperCase(),Tt(un.includes(s),"Only one of %s is currently allowed. Got %s",un.join(", "),s),s),t.headers=t.headers||{},t}(e),this.fetch_(t,e).catch((e=>{const s=Ve(t).origin;throw new Error(`XHR Failed fetching (${s}/...): (Note: a CORS error above may indicate that this publisher or domain is not configured in Publisher Center. The CORS error happens becasue 4xx responses do not set CORS headers.)`,e&&e.message)})).then((t=>function(t){return new Promise((e=>{if(t.ok)return e(t);const{status:s}=t,n=new Error(`HTTP error ${s}`);throw n.retriable=function(t){return 415==t||t>=500&&t<600}(s),n.response=t,n}))}(t)))}}(t)}fetchCredentialedJson(t){return this.fetch(t,{method:"GET",headers:{"Accept":"text/plain, application/json"},credentials:"include"}).then((t=>t.text().then((t=>oe(t.replace(mn,""))))))}sendPost(t,e){const s={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},credentials:"include",body:"f.req="+We(e)};return this.fetch(t,s).then((t=>t?t.text().then((t=>{try{return oe(t.replace(mn,""))}catch(t){return se.throwAsync(t),{}}})):{}))}fetch(t,e){return this.xhr_.fetch(t,e)}sendBeacon(t,e){if(navigator.sendBeacon){const s={type:"application/x-www-form-urlencoded;charset=UTF-8"},n=new Blob(["f.req="+We(e)],s);navigator.sendBeacon(t,n)}else this.sendPost(t,e)}}(this.win_),this.storage_=new class{constructor(t){this.win_=t,this.values_={}}get(t,e=!1){return this.values_[t]||(this.values_[t]=new Promise((s=>{const n=e?this.win_.localStorage:this.win_.sessionStorage;if(n)try{s(n.getItem(si(t)))}catch(t){s(null)}else s(null)}))),this.values_[t]}set(t,e,s=!1){return this.values_[t]=Promise.resolve(e),new Promise((n=>{const i=s?this.win_.localStorage:this.win_.sessionStorage;if(i)try{i.setItem(si(t),e)}catch(t){}n()}))}remove(t,e=!1){return delete this.values_[t],new Promise((s=>{const n=e?this.win_.localStorage:this.win_.sessionStorage;if(n)try{n.removeItem(si(t))}catch(t){}s()}))}}(this.win_),this.dialogManager_=new class{constructor(t){this.doc_=t,this.dialog_=null,this.openPromise_=null,this.popupGraypane_=new zs(t,2147483647),this.popupWin_=null,this.popupGraypane_.getElement().addEventListener("click",(()=>{if(this.popupWin_)try{this.popupWin_.focus()}catch(t){}}))}openDialog(t=!1,e={}){return this.openPromise_||(this.dialog_=new class{constructor(t,e={},s={},n={}){this.doc_=t;const i=n.desktopConfig||{},r="swg-dialog "+(i.supportsWideScreen?"swg-wide-dialog":""),o=n.iframeCssClassOverride||r;this.iframe_=new class{constructor(t,e={}){const s=Object.assign({},Us,e);this.iframe_=Jt(t,"iframe",s),qt(this.iframe_,Kt),this.ready_=new Promise((t=>{this.iframe_.onload=t}))}whenReady(){return this.ready_}getElement(){return this.iframe_}getDocument(){const t=this.getElement().contentDocument||this.getElement().contentWindow&&this.getElement().contentWindow.document;if(!t)throw new Error("not loaded");return t}getBody(){return this.getDocument().body}isConnected(){return function(t){if("isConnected"in t)return t.isConnected;const e=t.ownerDocument&&t.ownerDocument.documentElement;return e&&e.contains(t)||!1}(this.getElement())}}(t.getWin().document,{"class":o}),this.graypane_=new zs(t,Fs-1);const a=Object.assign({},Vs,e);qt(this.iframe_.getElement(),a),Yt(this.iframe_.getElement(),s),this.loadingView_=null,this.container_=null,this.view_=null,this.animating_=null,this.animationNumber_=0,this.hidden_=!1,this.previousProgressView_=null,this.maxAllowedHeightRatio_=void 0!==n.maxAllowedHeightRatio?n.maxAllowedHeightRatio:.9,this.positionCenterOnDesktop_=!!i.isCenterPositioned,this.desktopMediaQuery_=this.doc_.getWin().matchMedia("(min-width: 641px)"),this.desktopMediaQueryListener_=null}open(t=!1){const e=this.iframe_;if(e.isConnected())throw new Error("already opened");return this.doc_.getBody().appendChild(e.getElement()),this.graypane_.attach(),t?(qt(e.getElement(),{"visibility":"hidden","opacity":0}),this.hidden_=t):this.show_(),e.whenReady().then((()=>(this.buildIframe_(),this)))}openInContainer(t){const e=this.iframe_;if(e.isConnected())throw new Error("already opened");return t.appendChild(e.getElement()),e.whenReady().then((()=>(this.buildIframe_(),this)))}buildIframe_(){const t=this.iframe_.getBody(),e=this.iframe_.getDocument();Zt(Bs(e),"body{margin:0;padding:0}swg-container,swg-loading,swg-loading-animate,swg-loading-image{display:block}swg-loading-container{-ms-flex-align:center!important;-ms-flex-pack:center!important;align-items:center!important;bottom:0!important;display:-ms-flexbox!important;display:flex!important;height:100%!important;justify-content:center!important;margin-top:5px!important;min-height:148px!important;width:100%!important;z-index:2147483647!important}@media (min-height:630px),(min-width:630px){swg-loading-container{background-color:#fff!important;border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 1px 1px rgba(60,64,67,.3),0 1px 4px 1px rgba(60,64,67,.15)!important;margin-left:auto!important;margin-right:auto!important;width:560px!important}swg-loading-container.centered-on-desktop{border-radius:8px!important;height:120px!important;min-height:120px!important}}swg-loading{animation:mspin-rotate 1568.63ms linear infinite;height:36px;overflow:hidden;width:36px;z-index:2147483647!important}swg-loading-animate{animation:mspin-revrot 5332ms steps(4) infinite}swg-loading-image{animation:swg-loading-film 5332ms steps(324) infinite;background-image:url(https://news.google.com/swg/js/v1/loader.svg);background-size:100%;height:36px;width:11664px}@keyframes swg-loading-film{0%{transform:translateX(0)}to{transform:translateX(-11664px)}}@keyframes mspin-rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes mspin-revrot{0%{transform:rotate(0deg)}to{transform:rotate(-1turn)}}\n/*# sourceURL=/./src/ui/ui.css*/\n");const s=[];this.isPositionCenterOnDesktop()&&s.push("centered-on-desktop"),this.loadingView_=new class{constructor(t,e={}){if(this.doc_=t,this.loadingContainer_=Jt(this.doc_,"swg-loading-container",{}),e.additionalClasses)for(var s,n=r(e.additionalClasses,!0);!(s=n()).done;){const t=s.value;this.loadingContainer_.classList.add(t)}this.loading_=Jt(this.doc_,"swg-loading",{}),this.loadingContainer_.appendChild(this.loading_),this.loadingContainer_.style.setProperty("display","none","important"),this.buildLoadingIndicator_()}getElement(){return this.loadingContainer_}show(){this.loadingContainer_.style.removeProperty("display")}hide(){this.loadingContainer_.style.setProperty("display","none","important")}buildLoadingIndicator_(){const t=this.loading_,e=Jt(this.doc_,"swg-loading-animate",{});t.appendChild(e);const s=Jt(this.doc_,"swg-loading-image",{});e.appendChild(s)}}(e,{additionalClasses:s}),t.appendChild(this.loadingView_.getElement()),this.container_=Jt(e,"swg-container",{}),t.appendChild(this.container_),this.setPosition_(),this.positionCenterOnDesktop_&&(this.desktopMediaQueryListener_=()=>{this.setPosition_()},this.desktopMediaQuery_.addListener(this.desktopMediaQueryListener_))}close(t=!0){let e;if(t){const t=this.shouldPositionCenter_()?{"opacity":0}:{"transform":"translateY(100%)"};e=this.animate_((()=>(this.graypane_.hide(!0),Ds(this.getElement(),t,300,"ease-out"))))}else e=l();return e.then((()=>{const t=this.iframe_.getElement();t.parentNode.removeChild(t),this.removePaddingToHtml_(),this.graypane_.destroy(),this.desktopMediaQueryListener_&&this.desktopMediaQuery_.removeListener(this.desktopMediaQueryListener_)}))}getContainer(){if(!this.container_)throw new Error("not opened yet");return this.container_}getIframe(){return this.iframe_}getElement(){return this.iframe_.getElement()}getLoadingView(){return this.loadingView_}getMaxAllowedHeightRatio(){return this.maxAllowedHeightRatio_}isPositionCenterOnDesktop(){return this.positionCenterOnDesktop_}entryTransitionToNextView_(){this.view_&&this.view_.hasLoadingIndicator()?this.previousProgressView_=this.view_:(this.getContainer().textContent="",this.loadingView_.show())}exitTransitionFromOldView_(){var t;this.previousProgressView_?((t=this.previousProgressView_.getElement()).parentElement&&t.parentElement.removeChild(t),this.previousProgressView_=null):this.loadingView_.hide()}getCurrentView(){return this.view_}openView(t){return qt(t.getElement(),$s),this.entryTransitionToNextView_(),this.view_=t,this.getContainer().appendChild(t.getElement()),t.shouldFadeBody()&&!this.hidden_&&this.graypane_.show(!0),t.init(this).then((()=>{qt(t.getElement(),{"opacity":1}),this.hidden_&&(t.shouldFadeBody()&&this.graypane_.show(!0),this.show_()),this.exitTransitionFromOldView_()}))}show_(){this.animate_((()=>(qt(this.getElement(),{"transform":"translateY(100%)","opactiy":1,"visibility":"visible"}),Ds(this.getElement(),{"transform":this.getDefaultTranslateY_(),"opacity":1,"visibility":"visible"},300,"ease-out").then((()=>{this.getElement().focus()}))))),this.hidden_=!1}resizeView(t,e,s=!0){if(this.view_!=t)return null;const n=this.getMaxAllowedHeight_(e),i=++this.animationNumber_,r=()=>i!==this.animationNumber_;let o;if(s){const t=this.getElement().offsetHeight;o=n>=t?this.animate_((()=>{if(r())return l();const e={"height":`${n}px`};return this.shouldPositionCenter_()||(e.transform=`translateY(${n-t}px)`),qt(this.getElement(),e),Ds(this.getElement(),{"transform":this.getDefaultTranslateY_()},300,"ease-out")})):this.animate_((()=>(r()?l():Ds(this.getElement(),{"transform":this.shouldPositionCenter_()?this.getDefaultTranslateY_():`translateY(${t-n}px)`},300,"ease-out")).then((()=>{r()||qt(this.getElement(),{"height":`${n}px`,"transform":this.getDefaultTranslateY_()})}))))}else qt(this.getElement(),{"height":`${n}px`}),o=l();return o.then((()=>{r()||(this.updatePaddingToHtml_(e),t.resized())}))}animate_(t){const e=this.animating_||l();return this.animating_=e.then((()=>t()),(()=>{})).then((()=>{this.animating_=null}))}getMaxAllowedHeight_(t){return Math.min(t,this.doc_.getWin().innerHeight*this.maxAllowedHeightRatio_)}updatePaddingToHtml_(t){if(this.shouldPositionCenter_())return void this.removePaddingToHtml_();const e=t+20;qt(this.doc_.getRootElement(),{"padding-bottom":`${e}px`})}removePaddingToHtml_(){this.doc_.getRootElement().style.removeProperty("padding-bottom")}setPosition_(){qt(this.getElement(),this.getPositionStyle_())}shouldPositionCenter_(){return this.positionCenterOnDesktop_&&this.desktopMediaQuery_.matches}getPositionStyle_(){return this.shouldPositionCenter_()?{"top":"50%","bottom":0,"transform":this.getDefaultTranslateY_()}:{"top":"auto","bottom":0,"transform":this.getDefaultTranslateY_()}}getDefaultTranslateY_(){return this.shouldPositionCenter_()?"translateY(-50%)":"translateY(0px)"}}(this.doc_,{},{},e),this.openPromise_=this.dialog_.open(t)),this.openPromise_}openView(t,e=!1,s={}){return this.handleCancellations(t),this.openDialog(e,s).then((e=>e.openView(t)))}handleCancellations(t){return t.whenComplete().catch((e=>{throw te(e)&&this.completeView(t),e}))}completeView(t){setTimeout((()=>{this.dialog_&&this.dialog_.getCurrentView()==t&&this.close_()}),100)}completeAll(){this.dialog_&&this.close_(),this.popupGraypane_.isAttached()&&this.popupGraypane_.destroy()}getDialog(){return this.dialog_}close_(){this.dialog_.close(),this.dialog_=null,this.openPromise_=null}popupOpened(t){this.popupWin_=t||null,this.popupGraypane_.isAttached()||this.popupGraypane_.attach(),this.popupGraypane_.show()}popupClosed(){this.popupWin_=null;try{this.popupGraypane_.hide()}catch(t){}}}(this.doc_),this.callbacks_=new class{constructor(){this.callbacks_={},this.resultBuffer_={},this.paymentResponsePromise_=null}setOnEntitlementsResponse(t){this.setCallback_(1,t)}triggerEntitlementsResponse(t){return this.trigger_(1,t.then((t=>t.clone())))}hasEntitlementsResponsePending(){return!!this.resultBuffer_[1]}setOnLoginRequest(t){this.setCallback_(4,t)}triggerLoginRequest(t){return this.trigger_(4,t)}setOnLinkProgress(t){this.setCallback_(5,t)}triggerLinkProgress(){return this.trigger_(5,!0)}resetLinkProgress(){this.resetCallback_(5)}setOnLinkComplete(t){this.setCallback_(6,t)}triggerLinkComplete(){return this.trigger_(6,!0)}hasLinkCompletePending(){return!!this.resultBuffer_[6]}setOnPayConfirmOpened(t){this.setCallback_(9,t)}triggerPayConfirmOpened(t){return this.trigger_(9,t)}setOnSubscribeRequest(t){this.setCallback_(2,t)}triggerSubscribeRequest(){return this.trigger_(2,!0)}hasSubscribeRequestCallback(){return!!this.callbacks_[2]}setOnSubscribeResponse(t){Nt("[swg.js:setOnSubscribeResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'"),this.setCallback_(3,t)}setOnContributionResponse(t){Nt("[swg.js:setOnContributionResponse]: This method has been deprecated, please switch usages to 'setOnPaymentResponse'"),this.setCallback_(3,t)}setOnPaymentResponse(t){this.setCallback_(3,t)}triggerPaymentResponse(t){return this.paymentResponsePromise_=t.then((t=>{this.trigger_(3,Promise.resolve(t.clone()))}),(t=>{if(!te(t))throw t})),!!this.callbacks_[3]}hasPaymentResponsePending(){return!!this.resultBuffer_[3]}setOnFlowStarted(t){this.setCallback_(7,t)}triggerFlowStarted(t,e={}){return this.trigger_(7,{flow:t,data:e})}setOnFlowCanceled(t){this.setCallback_(8,t)}triggerFlowCanceled(t,e={}){return this.trigger_(8,{flow:t,data:e})}setCallback_(t,e){this.callbacks_[t]&&Nt("[swg.js]: You have registered multiple callbacks for the same response."),this.callbacks_[t]=e,t in this.resultBuffer_&&this.executeCallback_(t,e,this.resultBuffer_[t])}trigger_(t,e){this.resultBuffer_[t]=e;const s=this.callbacks_[t];return s&&this.executeCallback_(t,s,e),!!s}resetCallback_(t){t in this.resultBuffer_&&delete this.resultBuffer_[t]}executeCallback_(t,e,s){l().then((()=>{e(s),this.resetCallback_(t)}))}},this.lastOffersFlow_=null,this.lastContributionsFlow_=null,s.enableGoogleAnalytics&&(this.googleAnalyticsEventListener_=new class{constructor(t){this.win_=t.win(),this.eventManager_=t.eventManager()}start(){this.eventManager_.registerEventListener(this.handleClientEvent_.bind(this))}handleClientEvent_(t){if("function"!=typeof this.win_.ga)return;let e="";t.additionalParameters&&(e=t.additionalParameters.subscriptionFlow||t.additionalParameters.getSubscriptionFlow());const s=function(t,e){let s=null;return e&&(e==Oe?s=en[t]:e==Me&&(s=sn[t])),s||tn[t]}(t.eventType,e);s&&this.win_.ga("send","event",s)}}(this),this.googleAnalyticsEventListener_.start()),this.activityPorts_=new class{constructor(t){this.deps_=t,this.activityPorts_=new ps(t.win())}addDefaultArguments(t){const e=this.deps_,s=e.pageConfig(),n=e.analytics().getContext();return Object.assign({"analyticsContext":n.toArray(),"publicationId":s.getPublicationId(),"productId":s.getProductId(),"_client":"SwG 0.1.22.209","supportsEventManager":!0},t||{})}openActivityIframePort_(t,e,s){const n=new class{constructor(t,e,s,n){this.iframePort_=new gs(t,e,n),this.callbackMap_={},this.deps_=s}whenReady(){return this.iframePort_.whenReady()}connect(){return this.iframePort_.connect().then((()=>{this.iframePort_.onMessage((t=>{const e=t&&t.RESPONSE;if(!e)return;const s=this.callbackMap_[e[0]];s&&s(function(t){const e=t?t[0]:null;if(e){const s=It[e];if(s)return new s(t)}throw new Error("Deserialization failed for "+t)}(e))})),this.deps_&&this.deps_.eventManager()&&this.on(lt,(t=>{const e=t;this.deps_.eventManager().logEvent({eventType:e.getEvent(),eventOriginator:4,isFromUserAction:e.getMeta().getIsFromUserAction(),additionalParameters:e.getParams()})}))}))}disconnect(){this.iframePort_.disconnect()}getMode(){return this.iframePort_.getMode()}acceptResult(){return this.iframePort_.acceptResult()}onResizeRequest(t){return this.iframePort_.onResizeRequest(t)}execute(t){this.iframePort_.message({"REQUEST":t.toArray()})}on(t,e){let s=null;try{s=(new t).label()}catch(t){s=null}if(!s)throw new Error("Invalid data type");if(this.callbackMap_[s])throw new Error("Invalid type or duplicate callback for ",s);this.callbackMap_[s]=e}resized(){this.iframePort_.resized()}}(t,e,this.deps_,s);return n.connect().then((()=>n))}openIframe(t,e,s,n=!1){return n&&(s=this.addDefaultArguments(s)),this.openActivityIframePort_(t,e,s)}open(t,e,s,n,i,r=!1){return r&&(n=this.addDefaultArguments(n)),this.activityPorts_.open(t,e,s,n,i)}onResult(t,e){this.activityPorts_.onResult(t,(t=>{e(new class{constructor(t){this.port_=t}acceptResult(){return this.port_.acceptResult()}}(t))}))}onRedirectError(t){this.activityPorts_.onRedirectError(t)}getOriginalWebActivityPorts(){return this.activityPorts_}}(this),this.analyticsService_=new class{constructor(t,e){this.fetcher_=e,this.doc_=t.doc(),this.deps_=t,this.activityPorts_=t.activities(),this.iframe_=Jt(this.doc_.getWin().document,"iframe",{}),qt(this.iframe_,Ns),this.doc_.getBody().appendChild(this.getElement()),this.everFinishedLog_=!1,this.context_=new at,this.setStaticContext_(),this.serviceReady_=null,this.lastAction_=null,this.eventManager_=t.eventManager(),this.eventManager_.registerEventListener(this.handleClientEvent_.bind(this)),this.unfinishedLogs_=0,this.loggingResolver_=null,this.promiseToLog_=null,this.loggingBroken_=!1,this.timeout_=null,this.getTimestamp_=()=>Es(Date.now()),this.readyForLogging_=!1,this.logs_=[]}setReadyForLogging(){this.readyForLogging_=!0,this.logs_.forEach((t=>{this.handleClientEvent_(t)}))}setTransactionId(t){const e=this.context_.getTransactionId();if(this.context_.setTransactionId(t),null!=e&&e!=t){const t=3006,s=new pt;s.setOldTransactionId(e),this.eventManager_.logSwgEvent(t,!0,s)}}getTransactionId(){return this.context_.getTransactionId()}getSku(){return this.context_.getSku()}setSku(t){this.context_.setSku(t)}setUrl(t){this.context_.setUrl(t)}addLabels(t){if(t&&t.length>0){const n=[].concat(this.context_.getLabelList());for(var e,s=r(t,!0);!(e=s()).done;){const t=e.value;-1==n.indexOf(t)&&n.push(t)}this.context_.setLabelList(n)}}getElement(){return this.iframe_}getQueryString_(){return this.doc_.getWin().location.search}getReferrer_(){return this.doc_.getWin().document.referrer}setStaticContext_(){const t=this.context_;ks(this.doc_.getWin(),"update-google-transaction-id")?t.setTransactionId(Ft()+".swg"):t.setTransactionId(Ft()),t.setReferringOrigin(Ve(this.getReferrer_()).origin),t.setClientVersion("SwG 0.1.22.209"),t.setUrl(qe(this.doc_));const e=$e(this.getQueryString_()),s=e.utm_campaign,n=e.utm_medium,i=e.utm_source;s&&t.setUtmCampaign(s),n&&t.setUtmMedium(n),i&&t.setUtmSource(i)}start(){return this.serviceReady_||(this.addLabels(Cs(this.doc_.getWin())),this.serviceReady_=this.deps_.storage().get(re.USER_TOKEN).then((t=>{const e=this.deps_.pageConfig().getPublicationId(),s=t?{sut:t,publicationId:e}:{publicationId:e};return this.activityPorts_.openIframe(this.iframe_,ns("/serviceiframe",s),null,!0)})).then((t=>(t.on(dt,this.afterLogging_.bind(this)),t.whenReady().then((()=>(this.addLabels(Cs(this.doc_.getWin())),t))))),(t=>{this.loggingBroken_=!0,this.afterLogging_(Ps("Could not connect ["+t+"]"))}))),this.serviceReady_}setReadyToPay(t){this.context_.setReadyToPay(t)}close(){this.doc_.getBody().removeChild(this.getElement())}getContext(){return this.context_}createLogRequest_(t){const e=new ht;e.setEventOriginator(t.eventOriginator),e.setIsFromUserAction(!!t.isFromUserAction),this.context_.setClientTimestamp(this.getTimestamp_());const s=new lt;return s.setEvent(t.eventType),s.setContext(this.context_),s.setMeta(e),t.additionalParameters instanceof pt&&s.setParams(t.additionalParameters),s}shouldLogPublisherEvents_(){return!0===this.deps_.config().enableSwgAnalytics}shouldAlwaysLogEvent_(t){return 11===t.eventType&&2===t.eventOriginator}handleClientEvent_(t){t.eventType!==nt&&6!==t.eventOriginator&&(!ws.isPublisherEvent(t)||this.shouldLogPublisherEvents_()||this.shouldAlwaysLogEvent_(t))&&(this.readyForLogging_?(this.unfinishedLogs_++,this.lastAction_=this.start().then((e=>{const s=this.createLogRequest_(t);e.execute(s),ks(this.doc_.getWin(),"logging-beacon")&&this.sendBeacon_(s)}))):this.logs_.push(t))}afterLogging_(t){const e=t,s=e&&e.getComplete()||!1,n=e&&e.getError()||"Unknown logging Error",i=n===Ts;s||Et("Error when logging: "+n),this.unfinishedLogs_--,i||(this.everFinishedLog_=!0),null!==this.loggingResolver_&&(0===this.unfinishedLogs_||this.loggingBroken_||i)&&(null!==this.timeout_&&(clearTimeout(this.timeout_),this.timeout_=null),this.loggingResolver_(s),this.promiseToLog_=null,this.loggingResolver_=null)}getLoggingPromise(){if(0===this.unfinishedLogs_||this.loggingBroken_)return Promise.resolve(!0);if(null===this.promiseToLog_){this.promiseToLog_=new Promise((t=>{this.loggingResolver_=t}));const t=this.afterLogging_.bind(this);this.timeout_=setTimeout((()=>{this.timeout_=null,t(Ps(Ts))}),this.everFinishedLog_?200:500)}return this.promiseToLog_}sendBeacon_(t){const e=es("/publication/"+encodeURIComponent(this.deps_.pageConfig().getPublicationId())+"/clientlogs");this.fetcher_.sendBeacon(e,t)}}(this,this.fetcher_),this.payClient_=new class{constructor(t){this.win_=t.win(),this.activityPorts_=t.activities(),this.responseCallback_=null,this.request_=null,this.response_=null,this.analytics_=t.analytics(),this.redirectVerifierHelper_=new class{constructor(t){this.win_=t,this.pairCreated_=!1,this.pair_=null,this.pairPromise_=null}prepare(){return this.getOrCreatePair_((()=>{}))}useVerifier(t){this.getOrCreatePair_((e=>{if(e)try{this.win_.localStorage.setItem(Xn,e.key)}catch(t){e=null}t(e&&e.verifier||null)}))}restoreKey(){try{return this.win_.localStorage&&this.win_.localStorage.getItem(Xn)||null}catch(t){return null}}getOrCreatePair_(t){return this.createPair_(),this.pairCreated_?t(this.pair_):this.pairPromise_&&this.pairPromise_.then((e=>t(e))),this.pairPromise_}createPair_(){if(this.pairCreated_||this.pairPromise_)return;let t;try{t=!!this.win_.localStorage}catch(e){t=!1}const e=this.win_.crypto;t&&e&&e.getRandomValues&&e.subtle&&e.subtle.digest?this.pairPromise_=new Promise(((t,s)=>{const n=new Uint8Array(16);e.getRandomValues(n);const i=btoa(Rt(n));e.subtle.digest({name:"SHA-384"},Mt(i)).then((e=>{const s=btoa(Rt(new Uint8Array(e)));t({key:i,verifier:s})}),(t=>{s(t)}))})).catch((()=>null)).then((t=>(this.pairCreated_=!0,this.pair_=t,t))):(this.pairCreated_=!0,this.pair_=null)}}(this.win_),this.client_=null,this.preconnect_=new Qn(this.win_.document),ks(this.win_,"pay-client-redirect")&&this.pageIsInitializedFromPayRedirect_()&&(this.preconnect(this.preconnect_),this.initializePaymentsClient_()),this.redirectVerifierHelper_.prepare(),this.eventManager_=t.eventManager()}createClient_(t,e,s){return Jn.googleTransactionId_=e,new Jn(t,s,!1,this.activityPorts_.getOriginalWebActivityPorts())}preconnect(t){t.prefetch(is(ti[Xe().payEnv]+"/gp/p/ui/pay")),t.prefetch("https://payments.google.com/payments/v4/js/integrator.js?ss=md"),t.prefetch("https://clients2.google.com/gr/gr_full_2.0.6.js")}initializePaymentsClient_(){this.client_=this.createClient_({environment:Xe().payEnv,"i":{"redirectKey":this.redirectVerifierHelper_.restoreKey()}},this.analytics_.getTransactionId(),this.handleResponse_.bind(this))}pageIsInitializedFromPayRedirect_(){const t=this.win_.location.hash,e=/redirectEncryptedCallbackData/.test(t),s=/swgRequest/.test(t);return e&&s}getType(){return"PAYJS"}start(t,e={}){this.request_=t,this.client_||(this.preconnect(this.preconnect_),this.initializePaymentsClient_()),e.forceRedirect&&(t=Object.assign(t,{"forceRedirect":e.forceRedirect||!1})),ei(t,"disableNative",e.forceDisableNative||this.win_!=this.top_());let s=null;const n=new Promise((t=>s=t));return this.redirectVerifierHelper_.useVerifier((n=>{if(n&&ei(t,"redirectVerifier",n),e.forceRedirect){const e=this.client_;this.eventManager_.getReadyPromise().then((()=>{this.analytics_.getLoggingPromise().then((()=>{e.loadPaymentData(t),s(!0)}))}))}else this.client_.loadPaymentData(t),s(!0)})),n}onResponse(t){this.responseCallback_=t;const e=this.response_;e&&l().then((()=>{e&&t(this.convertResponse_(e,this.request_))}))}handleResponse_(t){this.response_=t,this.responseCallback_&&this.responseCallback_(this.convertResponse_(this.response_,this.request_))}convertResponse_(t,e){return t.then((t=>(e&&(t.paymentRequest=e),t))).catch((t=>{if("object"==typeof t&&"CANCELED"==t.statusCode){const t=ee(this.win_);return t.productType=e?e.i.productType:null,Promise.reject(t)}return Promise.reject(t)}))}top_(){return this.win_.top}}(this),this.logger_=new class{constructor(t){this.eventManager_=t.eventManager()}sendSubscriptionState(t,e){if("unknown"!==(s=t)&&"non_subscriber"!==s&&"subscriber"!==s&&"past_subscriber"!==s)throw new Error("Invalid subscription state provided");var s;if((ve.SUBSCRIBER==t||ve.PAST_SUBSCRIBER==t)&&!e)throw new Error("Entitlements must be provided for users with active or expired subscriptions");if(e&&!ds(e))throw new Error("Entitlements must be an Object");let n=null;e&&(n=JSON.stringify(e)),this.eventManager_.logEvent({eventType:nt,eventOriginator:5,isFromUserAction:null,additionalParameters:{state:t,productsOrSkus:n}})}sendEvent(t){let e=null;if(!H(t.name)||!nn(t.name))throw new Error("Invalid user event provided("+t.name+")");if(t.data){if(!ds(t.data))throw new Error("Event data must be an Object("+t.data+")");e=Object.assign({},e,t.data)}if(fs(t.active))e||(e={}),Object.assign(e,{"is_active":t.active});else if(null!=t.active)throw new Error("Event active must be a boolean");this.eventManager_.logEvent({eventType:nn(t.name),eventOriginator:5,isFromUserAction:t.active,additionalParameters:e})}}(this),this.entitlementsManager_=new class{constructor(t,e,s,n,i){this.win_=t,this.pageConfig_=e,this.publicationId_=this.pageConfig_.getPublicationId(),this.fetcher_=s,this.deps_=n,this.jwtHelper_=new ce,this.responsePromise_=null,this.positiveRetries_=0,this.blockNextNotification_=!1,this.blockNextToast_=!1,this.encodedParams_=null,this.encodedParamName_=i?"encodedEntitlementsParams":"encodedParams",this.action_=i?"/article":"/entitlements",this.storage_=n.storage(),this.analyticsService_=n.analytics(),this.config_=n.config(),this.entitlementsPostPromise=null,this.useArticleEndpoint_=i,this.article_=null,this.enableMeteredByGoogle_=!1,this.deps_.eventManager().registerEventListener(this.possiblyPingbackOnClientEvent_.bind(this))}reset(t){this.responsePromise_=null,this.positiveRetries_=Math.max(this.positiveRetries_,t?3:0),t&&(this.storage_.remove(an),this.storage_.remove(hn))}clear(){this.responsePromise_=null,this.positiveRetries_=0,this.unblockNextNotification(),this.storage_.remove(an),this.storage_.remove(on),this.storage_.remove(hn)}getEntitlements(t){return"string"==typeof t&&(Date.now()>1600289016959&&Nt("[swg.js:getEntitlements]: If present, the first param of getEntitlements() should be an object of type GetEntitlementsParamsExternalDef."),t={encryption:{encryptedDocumentKey:t}}),this.responsePromise_||(this.responsePromise_=this.getEntitlementsFlow_(t)),this.responsePromise_.then((t=>(null!=t.isReadyToPay&&this.analyticsService_.setReadyToPay(t.isReadyToPay),t)))}pushNextEntitlements(t,e){const s=this.getValidJwtEntitlements_(t,!0,e);return!(!s||!s.enablesThis()||(this.storage_.set(an,t),0))}getGaaToken_(){return $e(this.win_.location.search).gaa_n}consumeMeter_(t){if(!t||t.source!==ge)return;let e,s;if(t.subscriptionTokenContents&&2===t.subscriptionTokenContents.metering.clientType)s=2002;else{if(!rn(this.win_.location.search))return;s=2001,e=this.getGaaToken_()}this.deps_.eventManager().logSwgEvent(tt,!1);const n=new ut;return n.setSource(t.source),n.setJwt(t.subscriptionToken),this.postEntitlementsRequest_(n,it,s,e)}possiblyPingbackOnClientEvent_(t){var e,s;if(!rn(this.win_.location.search,!0))return;const n=function(t){return Qs[t]}(t.eventType);if(!n)return;let i=null;switch(t.eventOriginator){case 6:i=3001;break;case 1:if(n==it)return;i=1001;break;default:return}const r=this.getGaaToken_(),o=null==t||null===(e=t.additionalParameters)||void 0===e||null===(s=e.getIsUserRegistered)||void 0===s?void 0:s.call(e);this.postEntitlementsRequest_(new ut,n,i,r,o)}postEntitlementsRequest_(t,e,s,n="",i=null){const r=new ct;r.setUsedEntitlement(t),r.setClientEventTime(Es(Date.now())),r.setEntitlementResult(e),r.setEntitlementSource(s),r.setToken(n),"boolean"==typeof i&&r.setIsUserRegistered(i);let o="/publication/"+encodeURIComponent(this.publicationId_)+this.action_;o=ln(this.win_.location,o);const a=this.encodedParams_?l():Vt(qe(this.deps_.doc())).then((t=>{const e={metering:{resource:{hashedCanonicalUrl:t}}};this.encodedParams_=zt(Ut(JSON.stringify(e)))})),h=this.storage_.get(re.USER_TOKEN,!0);this.entitlementsPostPromise=Promise.all([h,a]).then((t=>{const e=t[0];return e&&(o=Ke(o,"sut",e)),o=Ke(o,this.encodedParamName_,this.encodedParams_),this.fetcher_.sendPost(es(o),r)}))}getEntitlementsFlow_(t){return this.fetchEntitlementsWithCaching_(t).then((t=>(this.onEntitlementsFetched_(t),t)))}fetchEntitlementsWithCaching_(t){return Promise.all([this.storage_.get(an),this.storage_.get(hn)]).then((e=>{const s=e[0],n=e[1],i=!(!t||!t.encryption);if(s&&!i){const t=this.getValidJwtEntitlements_(s,!0,function(t){switch(t){case"true":return!0;case"false":return!1;default:return}}(n));if(t&&t.enablesThis())return this.positiveRetries_=0,t}return this.fetchEntitlements_(t).then((t=>(t&&t.enablesThisWithCacheableEntitlements()&&t.raw&&this.storage_.set(an,t.raw),t)))}))}getArticle(){return this.useArticleEndpoint_&&this.responsePromise_?this.responsePromise_.then((()=>Promise.resolve(this.article_))):l()}getExperimentConfigFlags(){return this.getArticle().then((t=>{const e=t.experimentConfig;if(null!=e){const t=e.experimentFlags;if(null!=t)return t}return[]}))}fetchEntitlements_(t){let e=this.positiveRetries_;this.positiveRetries_=0;const s=()=>(e--,this.fetch_(t).then((t=>t.enablesThis()||e<=0?t:new Promise((t=>{this.win_.setTimeout((()=>{t(s())}),550)})))));return s()}setToastShown(t){this.storage_.set(on,t?"1":"0")}blockNextNotification(){this.blockNextNotification_=!0}blockNextToast(){this.blockNextToast_=!0}unblockNextNotification(){this.blockNextNotification_=!1}enableMeteredByGoogle(){this.enableMeteredByGoogle_=!0}parseEntitlements(t){const e=t.isReadyToPay;null==e?this.storage_.remove(hn):this.storage_.set(hn,String(e));const s=t.signedEntitlements,n=t.decryptedDocumentKey,i=t.swgUserToken;if(i&&this.saveSwgUserToken_(i),s){const t=this.getValidJwtEntitlements_(s,!1,e,n);if(t)return t}else{const s=t.entitlements;if(s)return this.createEntitlements_("",s,e,n)}return this.createEntitlements_("",[],e)}saveSwgUserToken_(t){t&&this.storage_.set(re.USER_TOKEN,t,!0)}getValidJwtEntitlements_(t,e,s,n){try{const i=this.jwtHelper_.decode(t);if(e){const t=Date.now(),e=i.exp;if(1e3*parseFloat(e)<t)return null}const r=i.entitlements;return r&&this.createEntitlements_(t,r,s,n)||null}catch(t){this.win_.setTimeout((()=>{throw t}))}return null}createEntitlements_(t,e,s,n){return new pe("subscribe.google.com",t,de.parseListFromJson(e,this.jwtHelper_),this.pageConfig_.getProductId(),this.ack_.bind(this),this.consume_.bind(this),s,n)}onEntitlementsFetched_(t){const e=this.blockNextNotification_;this.blockNextNotification_=!1;const s=this.blockNextToast_;if(this.blockNextToast_=!1,e)return;this.deps_.callbacks().triggerEntitlementsResponse(Promise.resolve(t));const n=t.getEntitlementForThis();n?s||this.maybeShowToast_(n):this.deps_.eventManager().logSwgEvent(et,!1)}maybeShowToast_(t){if(t.source===ge)return this.deps_.eventManager().logSwgEvent(st,!1),l();const e=new pt;e.setIsUserRegistered(!0);const s="privileged"===t.source?3014:X;return this.deps_.eventManager().logSwgEvent(s,!1,e),this.storage_.get(on).then((e=>{if("1"===e)return;const s=t.source||ge;return new class{constructor(t,e,s){this.doc_=t.doc(),this.activityPorts_=t.activities(),this.src_=e,this.args_=s||{},this.animating_=null,this.iframe_=Jt(this.doc_.getWin().document,"iframe",Hs),qt(this.iframe_,qs),this.ready_=new Promise((t=>{this.iframe_.onload=t}))}getElement(){return this.iframe_}open(){return this.doc_.getBody().appendChild(this.iframe_),this.buildToast_()}buildToast_(){return this.activityPorts_.openIframe(this.iframe_,this.src_,this.args_).then((t=>t.whenReady())).then((()=>{!function(t,e){const s={};for(var n,i=r(["height"],!0);!(n=i()).done;)s[n.value]=null;Yt(t,s)}(this.iframe_),this.animate_((()=>(qt(this.iframe_,{"transform":"translateY(100%)","opactiy":1,"visibility":"visible"}),Ds(this.iframe_,{"transform":"translateY(0)","opacity":1,"visibility":"visible"},400,"ease-out")))),this.doc_.getWin().setTimeout((()=>{this.close()}),8e3)}))}animate_(t){const e=this.animating_||l();return this.animating_=e.then((()=>t())).catch((()=>{})).then((()=>{this.animating_=null}))}close(){return this.animate_((()=>(this.doc_.getWin().setTimeout((()=>(this.doc_.getBody().removeChild(this.iframe_),l())),500),Ds(this.iframe_,{"transform":"translateY(100%)","opacity":1,"visibility":"visible"},400,"ease-out"))))}}(this.deps_,ns("/toastiframe"),rs({"publicationId":this.publicationId_,"source":s})).open()}))}ack_(t){t.getEntitlementForThis()&&this.setToastShown(!0)}consume_(t,e){if(t.enablesThisWithGoogleMetering()){const s=t.getEntitlementForThis(),n=()=>{e&&e(),this.consumeMeter_(s)};if(!s.subscriptionTokenContents)return n();if(s.subscriptionTokenContents.metering&&!0===s.subscriptionTokenContents.metering.showToast){const t=new class{constructor(t,{meterClientType:e=1,meterClientUserAttribute:s="anonymous_user"}={}){this.deps_=t,this.win_=t.win(),this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.meterClientType_=e,this.meterClientUserAttribute_=s,this.onConsumeCallback_=null,this.onConsumeCallbackHandled_=!1,this.scrollEventListener_=null}start(){const t={isClosable:!0,hasSubscriptionCallback:this.deps_.callbacks().hasSubscribeRequestCallback()};return 2===this.meterClientType_&&(t.meterType="anonymous_user"===this.meterClientUserAttribute_?"UNKNOWN":"KNOWN"),this.deps_.storage().get(re.USER_TOKEN,!0).then((e=>{var s;const n=this.activityPorts_.addDefaultArguments(t),i=Ws[null!==(s=this.meterClientType_)&&void 0!==s?s:1],r={"publicationId":this.deps_.pageConfig().getPublicationId(),"origin":Ve(this.win_.location.href).origin};return e&&(r.sut=e),this.activityIframeView_=new ie(this.win_,this.activityPorts_,ns(i,r),n,!1),this.sendCloseRequestFunction_=()=>{const t=new yt;t.setClose(!0),this.activityIframeView_.execute(t),this.removeCloseEventListener(),this.deps_.eventManager().logSwgEvent(1027,!0),this.onConsumeCallback_&&!this.onConsumeCallbackHandled_&&(this.onConsumeCallbackHandled_=!0,this.onConsumeCallback_())},this.deps_.callbacks().triggerFlowStarted("showMeterToast"),this.activityIframeView_.on(At,this.startNativeFlow_.bind(this)),this.deps_.callbacks().hasSubscribeRequestCallback()||Nt("[swg.js]: `setOnNativeSubscribeRequest` has not been set before starting the metering flow, so users will not be able to subscribe from the metering dialog directly. Please call `setOnNativeSubscribeRequest` with a subscription flow callback before starting metering."),this.dialogManager_.handleCancellations(this.activityIframeView_).catch((t=>{if(this.onConsumeCallback_&&!this.onConsumeCallbackHandled_&&(this.onConsumeCallbackHandled_=!0,this.onConsumeCallback_()),!te(t))throw console.error("[swg.js]: Error occurred during meter toast handling: "+t),t})),this.dialogManager_.openDialog().then((t=>(this.setDialogBoxShadow_(),this.setLoadingViewWidth_(),t.openView(this.activityIframeView_).then((()=>{if(this.win_.addEventListener("click",this.sendCloseRequestFunction_),this.win_.addEventListener("touchstart",this.sendCloseRequestFunction_),this.win_.addEventListener("mousedown",this.sendCloseRequestFunction_),this.isMobile_())Ht(this.win_.document.body,"overflow","hidden");else{let t,e;this.scrollEventListener_=()=>{t=t||this.win_.pageYOffset,this.win_.clearTimeout(e),e=this.win_.setTimeout((()=>{Math.abs(this.win_.pageYOffset-t)>100&&this.sendCloseRequestFunction_()}),100)},this.win_.addEventListener("scroll",this.scrollEventListener_)}this.deps_.eventManager().logSwgEvent(21),this.deps_.eventManager().logSwgEvent(3011)})))))}))}setOnConsumeCallback(t){this.onConsumeCallback_=t}removeCloseEventListener(){this.win_.removeEventListener("click",this.sendCloseRequestFunction_),this.win_.removeEventListener("touchstart",this.sendCloseRequestFunction_),this.win_.removeEventListener("mousedown",this.sendCloseRequestFunction_),this.isMobile_()?Ht(this.win_.document.body,"overflow","visible"):this.win_.removeEventListener("scroll",this.scrollEventListener_)}setDialogBoxShadow_(){const t=this.win_.matchMedia("(max-width: 640px), (max-height: 640px)"),e=this.dialogManager_.getDialog().getElement();t.matches&&qt(e,{"box-shadow":Ks}),t.addListener((t=>{t.matches?qt(e,{"box-shadow":Ks}):qt(e,{"box-shadow":""})}))}setLoadingViewWidth_(){this.win_.matchMedia("(min-width: 640px) and (min-height: 640px)").matches&&qt(this.dialogManager_.getDialog().getLoadingView().getElement(),{"width":"420px","margin":"auto"})}startNativeFlow_(t){t.getNative()&&(this.removeCloseEventListener(),this.onConsumeCallbackHandled_=!0,this.deps_.callbacks().triggerSubscribeRequest())}isMobile_(){return!!this.win_.navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i)}}(this.deps_,{meterClientType:s.subscriptionTokenContents.metering.clientType,meterClientUserAttribute:s.subscriptionTokenContents.metering.clientUserAttribute});return t.setOnConsumeCallback(n),t.start()}return n()}}fetch_(t){const e=this.storage_.get(re.USER_TOKEN,!0);let s="/publication/"+encodeURIComponent(this.publicationId_)+this.action_;return Promise.all([Vt(qe(this.deps_.doc())),e]).then((e=>{var n;const i=e[0],r=e[1];s=ln(this.win_.location,s),null!=t&&t.encryption&&(s=Ke(s,"crypt",t.encryption.encryptedDocumentKey)),r&&(s=Ke(s,"sut",r));let o=this.enableMeteredByGoogle_?{metering:{clientTypes:[2],owner:this.publicationId_,resource:{hashedCanonicalUrl:i}}}:void 0;if(this.publicationId_&&null!=t&&null!==(n=t.metering)&&void 0!==n&&n.state&&rn(this.win_.location.search)){const e=t.metering.state.id;if("string"==typeof e&&e.length>0){let s=function({attributes:t,category:e}){if(t)for(var s=0,n=Object.keys(t);s<n.length;s++){const i=n[s],r=`${e}_${i}`,a=Number(t[i].timestamp),h=a>Date.now()/1e3*2;a&&!h||Nt(`SwG Entitlements: Please specify a Unix timestamp, in seconds, for the "${i}" ${e} attribute. The timestamp you passed (${t[i].timestamp}) looks invalid.`),o.metering.state.attributes.push({name:r,timestamp:a})}};o={metering:{clientTypes:[1],owner:this.publicationId_,resource:{hashedCanonicalUrl:i},state:{id:e,attributes:[]},token:this.getGaaToken_()}},s({attributes:t.metering.state.standardAttributes,category:"standard"}),s({attributes:t.metering.state.customAttributes,category:"custom"})}else Nt("SwG Entitlements: Please specify a metering state ID string, ideally a hash to avoid PII.")}return o&&(this.encodedParams_=zt(Ut(JSON.stringify(o))),s=Ke(s,this.encodedParamName_,this.encodedParams_)),es(s)})).then((t=>(this.deps_.eventManager().logSwgEvent(1024,!1),this.fetcher_.fetchCredentialedJson(t)))).then((t=>{let e=t;if(this.useArticleEndpoint_&&(this.article_=t,e=t.entitlements),t.errorMessages&&t.errorMessages.length>0)for(var s,n=r(t.errorMessages,!0);!(s=n()).done;)Nt("SwG Entitlements: "+s.value);return this.parseEntitlements(e)}))}}(this.win_,this.pageConfig_,this.fetcher_,this,s.useArticleEndpoint||!1),this.clientConfigManager_=new class{constructor(t,e,s,n){this.deps_=t,this.clientOptions_=n||{},this.publicationId_=e,this.fetcher_=s,this.responsePromise_=null,this.defaultConfig_=new js({skipAccountCreationScreen:this.clientOptions_.skipAccountCreationScreen})}fetchClientConfig(t){if(!this.publicationId_)throw new Error("fetchClientConfig requires publicationId");return this.responsePromise_||(t=t||l(),this.responsePromise_=t.then((()=>this.fetch_()))),this.responsePromise_}getClientConfig(){return this.responsePromise_||Promise.resolve(this.defaultConfig_)}getAutoPromptConfig(){return this.responsePromise_||this.fetchClientConfig(),this.responsePromise_.then((t=>t.autoPromptConfig))}getLanguage(){return this.clientOptions_.lang||"en"}getTheme(){return this.clientOptions_.theme||"light"}shouldForceLangInIframes(){return!!this.clientOptions_.forceLangInIframes&&!!this.clientOptions_.lang}shouldEnableButton(){return this.clientOptions_.disableButton?Promise.resolve(!1):(this.responsePromise_||this.fetchClientConfig(),this.responsePromise_.then((t=>{var e;return!(null===(e=t.uiPredicates)||void 0===e||!e.canDisplayButton)})))}fetch_(){return this.deps_.entitlementsManager().getArticle().then((t=>{if(t)return this.parseClientConfig_(t.clientConfig);{const t=es("/publication/"+encodeURIComponent(this.publicationId_)+"/clientconfiguration");return this.fetcher_.fetchCredentialedJson(t).then((t=>{if(t.errorMessages&&t.errorMessages.length>0)for(var e,s=r(t.errorMessages,!0);!(e=s()).done;)Nt("SwG ClientConfigManager: "+e.value);return this.parseClientConfig_(t)}))}}))}parseClientConfig_(t){const e=t.paySwgVersion,s=t.autoPromptConfig;let n;var i,r,o,a;s&&(n=new class{constructor(t,e,s,n,i){this.maxImpressionsPerWeek=t,this.clientDisplayTrigger=new class{constructor(t){this.displayDelaySeconds=t}}(e),this.explicitDismissalConfig=new class{constructor(t,e,s){this.backoffSeconds=t,this.maxDismissalsPerWeek=e,this.maxDismissalsResultingHideSeconds=s}}(s,n,i)}}(s.maxImpressionsPerWeek,null===(i=s.clientDisplayTrigger)||void 0===i?void 0:i.displayDelaySeconds,null===(r=s.explicitDismissalConfig)||void 0===r?void 0:r.backoffSeconds,null===(o=s.explicitDismissalConfig)||void 0===o?void 0:o.maxDismissalsPerWeek,null===(a=s.explicitDismissalConfig)||void 0===a?void 0:a.maxDismissalsResultingHideSeconds));const h=t.uiPredicates;let l;h&&(l=new class{constructor(t,e){this.canDisplayAutoPrompt=t,this.canDisplayButton=e}}(h.canDisplayAutoPrompt,h.canDisplayButton));const u=t.attributionParams;let c;return u&&(c=new class{constructor(t,e){this.displayName=t,this.avatarUrl=e}}(u.displayName,u.avatarUrl)),new js({autoPromptConfig:n,paySwgVersion:e,usePrefixedHostPath:t.usePrefixedHostPath,useUpdatedOfferFlows:t.useUpdatedOfferFlows,skipAccountCreationScreen:this.clientOptions_.skipAccountCreationScreen,uiPredicates:l,attributionParams:c})}}(this,e.getPublicationId(),this.fetcher_,i),this.propensityModule_=new class{constructor(t,e,s){this.win_=t,this.propensityServer_=new class{constructor(t,e,s){this.win_=t,this.deps_=e,this.publicationId_=this.deps_.pageConfig().getPublicationId(),this.clientId_=null,this.fetcher_=s,this.version_=1,this.deps_.eventManager().registerEventListener(this.handleClientEvent_.bind(this))}getDocumentCookie_(){return this.win_.document.cookie}getClientId_(){if(!this.clientId_){const t=this.getDocumentCookie_().match("(^|;)\\s*__gads\\s*=\\s*([^;]+)");this.clientId_=t&&encodeURIComponent(t.pop())}return this.clientId_}propensityUrl_(t){t=Ke(t,"u_tz","240"),t=Ke(t,"v",String(this.version_));const e=this.getClientId_();return e&&(t=Ke(t,"cookie",e)),Ke(t,"cdm",this.win_.location.hostname)}sendSubscriptionState(t,e){let s=ss("/subopt/data");return s=Ke(s,"states",this.publicationId_+":"+t),e&&(s=Ke(s,"extrainfo",e)),this.fetcher_.fetch(this.propensityUrl_(s),{method:"GET",credentials:"include"})}sendEvent_(t,e){let s=ss("/subopt/data");return s=Ke(s,"events",this.publicationId_+":"+t),e&&(s=Ke(s,"extrainfo",e)),this.fetcher_.fetch(this.propensityUrl_(s),{method:"GET",credentials:"include"})}handleClientEvent_(t){if(6===t.eventOriginator)return;if(!this.deps_.config().enablePropensity&&3!==t.eventOriginator)return;if(t.eventType===nt)return void this.sendSubscriptionState(t.additionalParameters.state,t.additionalParameters.productsOrSkus);const e=(s=t.eventType,Js[s]);var s;if(null==e)return;let n=t.additionalParameters;n instanceof pt&&(n=void 0),fs(t.isFromUserAction)&&(ds(n)||(n={}),n.is_active=t.isFromUserAction),this.sendEvent_(e,JSON.stringify(n))}parsePropensityResponse_(t){let e,s={};if(!t.header)return s={header:{ok:!1},body:{error:"No valid response"}},s;if(t.header.ok){const n=t.scores;e=[];for(let t=0;t<n.length;t++){const s=n[t];let i;if(s.score){const t={value:s.score,bucketed:2==s.score_type};i={product:s.product,score:t}}else i={product:s.product,error:s.error_message};e.push(i)}return e&&(s={header:{ok:!0},body:{scores:e}}),s}return s={header:{ok:!1},body:{error:t.error}},s}getPropensity(t,e){const s=ss("/subopt/pts?products=")+this.publicationId_+"&type="+e+"&ref="+t;return this.fetcher_.fetch(this.propensityUrl_(s),{method:"GET",credentials:"include"}).then((t=>t.json())).then((t=>this.parsePropensityResponse_(t)))}}(t,e,s),this.eventManager_=e.eventManager()}sendSubscriptionState(t,e){if(!Object.values(ve).includes(t))throw new Error("Invalid subscription state provided");if((ve.SUBSCRIBER==t||ve.PAST_SUBSCRIBER==t)&&!e)throw new Error("Entitlements must be provided for users with active or expired subscriptions");if(e&&!ds(e))throw new Error("Entitlements must be an Object");let s=null;e&&(s=JSON.stringify(e)),this.propensityServer_.sendSubscriptionState(t,s)}getPropensity(t){if(t&&!Object.values(Te).includes(t))throw new Error("Invalid propensity type requested");return t||(t=Te.GENERAL),this.propensityServer_.getPropensity(this.win_.document.referrer,t)}sendEvent(t){const e=nn(t.name);let s=null;if(!H(t.name)||!e)throw new Error("Invalid user event provided("+t.name+")");if(t.data){if(!ds(t.data))throw new Error("Event data must be an Object("+t.data+")");s={},Object.assign(s,t.data)}if(fs(t.active))s||(s={}),Object.assign(s,{"is_active":t.active});else if(null!=t.active)throw new Error("Event active must be a boolean");this.eventManager_.logEvent({eventType:e,eventOriginator:3,isFromUserAction:t.active,additionalParameters:s})}}(this.win_,this,this.fetcher_),this.eventManager_.logSwgEvent(11,!1),this.offersApi_=new class{constructor(t,e){this.config_=t,this.fetcher_=e}getOffers(t=this.config_.getProductId()){if(!t)throw new Error("getOffers requires productId in config or arguments");return this.fetch_(t)}fetch_(t){const e=es("/publication/"+encodeURIComponent(this.config_.getPublicationId())+"/offers?label="+encodeURIComponent(t));return this.fetcher_.fetchCredentialedJson(e).then((t=>t.offers||[]))}}(this.pageConfig_,this.fetcher_),this.buttonApi_=new class{constructor(t,e){this.doc_=t,this.configuredRuntimePromise_=e}init(){const t=this.doc_.getHead();if(!t)return;const e="https://news.google.com/swg/js/v1/swg-button.css";t.querySelector(`link[href="${e}"]`)||t.appendChild(Jt(this.doc_.getWin().document,"link",{"rel":"stylesheet","type":"text/css","href":e}))}create(t,e){const s=Jt(this.doc_.getWin().document,"button",{});return this.attach(s,t,e)}attach(t,e,s){const n=this.setupButtonAndGetParams_(t,1007,e,s).options,i=n.theme;return t.classList.add(`swg-button-${i}`),t.setAttribute("role","button"),n.lang&&t.setAttribute("lang",n.lang),t.setAttribute("title",Ms(_s,t)||""),this.logSwgEvent_(6),t}attachSubscribeButton(t,e,s){const n=this.setupButtonAndGetParams_(t,1017,e,s).options,i=n.theme;return t.classList.add(`swg-button-v2-${i}`),t.setAttribute("role","button"),n.lang&&t.setAttribute("lang",n.lang),n.enable||t.setAttribute("disabled","disabled"),t.innerHTML=Rs.replace("$theme$",i).replace("$textContent$",Ms(_s,t)||""),this.logSwgEvent_(16),t}attachContributeButton(t,e,s){const n=this.setupButtonAndGetParams_(t,1019,e,s).options,i=n.theme;return t.classList.add(`swg-button-v2-${i}`),t.setAttribute("role","button"),n.lang&&t.setAttribute("lang",n.lang),n.enable||t.setAttribute("disabled","disabled"),t.innerHTML=Rs.replace("$theme$",i).replace("$textContent$",Ms(Ls,t)||""),this.logSwgEvent_(19),t}attachButtonsWithAttribute(t,e,s,n){for(var i,o=r(e,!0);!(i=o()).done;){const e=i.value,r=this.doc_.getRootNode().querySelectorAll(`[${t}="${e}"]`);for(let t=0;t<r.length;t++)"subscription"===e?this.attachSubscribeButton(r[t],s,n[e]):"contribution"===e&&this.attachContributeButton(r[t],s,n[e])}}logSwgEvent_(t,e){this.configuredRuntimePromise_.then((s=>{s.eventManager().logSwgEvent(t,e)}))}getOptions_(t){const e=t&&"function"!=typeof t?t:{"theme":Os},s=e.theme;return s!==Os&&"dark"!==s&&(e.theme=Os),e}getCallback_(t,e){return("function"==typeof t?t:null)||e}setupButtonAndGetParams_(t,e,s,n){const i=this.getOptions_(s),r=this.getCallback_(s,n),o=t=>{this.logSwgEvent_(e,!0),"function"==typeof r&&r(t)};return t.addEventListener("click",o),{options:i,clickFun:o}}attachSmartButton(t,e,s,n){const i=this.setupButtonAndGetParams_(e,1007,s,n);return e.classList.add("swg-smart-button"),new class{constructor(t,e,s,n){this.deps_=t,this.win_=t.win(),this.doc_=this.win_.document,this.activityPorts_=t.activities(),this.iframe_=Jt(this.doc_,"iframe",Ss),this.button_=e,this.options_=s,this.callback_=n,this.src_=ns("/smartboxiframe");const i={"productId":this.deps_.pageConfig().getProductId(),"publicationId":this.deps_.pageConfig().getPublicationId(),"theme":this.options_&&this.options_.theme||"light","lang":this.options_&&this.options_.lang||"en"},r=this.options_&&this.options_.messageTextColor;r&&(i.messageTextColor=r),this.args_=rs(i)}handleSmartBoxClick_(t){t&&t.getIsClicked()&&this.callback_()}start(){qt(this.iframe_,{"opacity":1,"position":"absolute","top":0,"bottom":0,"left":0,"height":"100%","right":0,"width":"100%"}),this.button_.appendChild(this.iframe_);const t=this.activityPorts_.addDefaultArguments(this.args_);return this.activityPorts_.openIframe(this.iframe_,this.src_,t).then((t=>{t.on(wt,this.handleSmartBoxClick_.bind(this))})),this.iframe_}}(t,e,i.options,i.clickFun).start()}}(this.doc_,Promise.resolve(this));const o=new Qn(this.win_.document);o.prefetch("https://news.google.com/swg/js/v1/loader.svg"),o.preconnect("https://www.gstatic.com/"),o.preconnect("https://fonts.googleapis.com/"),o.preconnect("https://www.google.com/"),vn.configurePending(this),ls.configurePending(this),Zt(this.doc_,".swg-dialog,.swg-toast{background-color:#fff!important;box-sizing:border-box}.swg-toast{border:none!important;bottom:0!important;max-height:46px!important;position:fixed!important;z-index:2147483647!important}@media (min-width:871px) and (min-height:641px){.swg-dialog.swg-wide-dialog{left:-435px!important;width:870px!important}}@media (max-height:640px),(max-width:640px){.swg-dialog,.swg-toast{border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 1px 1px rgba(60,64,67,.3),0 1px 4px 1px rgba(60,64,67,.15)!important;left:-240px!important;margin-left:50vw!important;width:480px!important}}@media (min-width:641px) and (min-height:641px){.swg-dialog{background-color:transparent!important;border:none!important;left:-315px!important;margin-left:50vw!important;width:630px!important}.swg-toast{border-radius:4px!important;bottom:8px!important;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)!important;left:8px!important}}@media (max-width:480px){.swg-dialog,.swg-toast{left:0!important;margin-left:0!important;right:0!important;width:100%!important}}\n/*# sourceURL=/./src/components/dialog.css*/\n"),this.activityPorts_.onRedirectError((t=>{this.analyticsService_.addLabels(["redirect"]),this.eventManager_.logSwgEvent(Q,!1),this.jserror_.error("Redirect error",t)}))}doc(){return this.doc_}win(){return this.win_}pageConfig(){return this.pageConfig_}jserror(){return this.jserror_}activities(){return this.activityPorts_}payClient(){return this.payClient_}dialogManager(){return this.dialogManager_}entitlementsManager(){return this.entitlementsManager_}callbacks(){return this.callbacks_}storage(){return this.storage_}clientConfigManager(){return this.clientConfigManager_}analytics(){return this.analyticsService_}init(){}configure(t){this.configure_(t)}configure_(t){let e="";for(const o in t){const a=t[o];switch(o){case"windowOpenMode":a!=De&&a!=ze&&(e="Unknown windowOpenMode: "+a);break;case"experiments":for(var s,n=r(a,!0);!(s=n()).done;)i=s.value,As(this.win_)[i]=!0;this.analytics()&&this.analytics().addLabels(a);break;case"analyticsMode":0!=a&&1!=a&&(e="Unknown analytics mode: "+a);break;case"enableSwgAnalytics":fs(a)||(e="Unknown enableSwgAnalytics value: "+a);break;case"enablePropensity":fs(a)||(e="Unknown enablePropensity value: "+a);break;case"skipAccountCreationScreen":fs(a)||(e="Unknown skipAccountCreationScreen value: "+a);break;default:e="Unknown config property: "+o}}var i;Tt(!e,e||void 0),Object.assign(this.config_,t)}config(){return this.config_}reset(){this.entitlementsManager_.reset(),this.closeDialog()}clear(){this.entitlementsManager_.clear(),this.closeDialog()}closeDialog(){this.dialogManager_.completeAll()}start(){if(!this.pageConfig_.getProductId()||!this.pageConfig_.isLocked())return l();this.getEntitlements()}getEntitlements(t){return this.entitlementsManager_.getEntitlements(t).then((t=>{if(this.analyticsService_.setReadyForLogging(),this.analyticsService_.start(),t)try{const e=t.entitlements.map((t=>t.getSku()||"unknown subscriptionToken"));e.length>0&&this.analyticsService_.setSku(e.join(","))}catch(t){}return t.clone()}))}setOnEntitlementsResponse(t){this.callbacks_.setOnEntitlementsResponse(t)}getOffers(t){return this.offersApi_.getOffers(t&&t.productId)}showOffers(t){return this.documentParsed_.then((()=>(Tt(!t||!t.oldSku,"The showOffers() method cannot be used to update a subscription. Use the showUpdateOffers() method instead."),this.lastOffersFlow_=new cs(this,t),this.lastOffersFlow_.start())))}showUpdateOffers(t){return Tt(ks(this.win_,vs),"Not yet launched!"),this.documentParsed_.then((()=>(Tt(!!t&&!!t.oldSku,"The showUpdateOffers() method cannot be used for new subscribers. Use the showOffers() method instead."),new cs(this,t).start())))}showSubscribeOption(t){return this.documentParsed_.then((()=>{const e=new class{constructor(t,e){this.deps_=t,this.options_=e,this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.eventManager_=t.eventManager(),this.activityIframeView_=new ie(t.win(),this.activityPorts_,ns("/optionsiframe"),rs({"publicationId":t.pageConfig().getPublicationId(),"productId":t.pageConfig().getProductId(),"list":e&&e.list||"default","skus":e&&e.skus||null,"isClosable":!0}),!1)}start(){return this.deps_.callbacks().triggerFlowStarted(_e),this.activityIframeView_.onCancel((()=>{this.deps_.callbacks().triggerFlowCanceled(_e)})),this.activityIframeView_.on(vt,this.maybeOpenOffersFlow_.bind(this)),this.activityIframeView_.acceptResult().then((t=>{const e=t.data,s=new vt;e.subscribe&&s.setSubscribe(!0),this.maybeOpenOffersFlow_(s)}),(t=>{throw this.dialogManager_.completeView(this.activityIframeView_),t})),this.eventManager_.logSwgEvent(7),this.dialogManager_.openView(this.activityIframeView_)}maybeOpenOffersFlow_(t){if(t.getSubscribe()){const t=this.options_||{};null==t.isClosable&&(t.isClosable=!0),this.eventManager_.logSwgEvent(1008,!0),new cs(this.deps_,t).start()}}}(this,t);return e.start()}))}showAbbrvOffer(t){return this.documentParsed_.then((()=>{const e=new class{constructor(t,e={}){this.deps_=t,this.options_=e,this.win_=t.win(),this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.eventManager_=t.eventManager(),this.activityIframeView_=new ie(this.win_,this.activityPorts_,ns("/abbrvofferiframe"),rs({"publicationId":t.pageConfig().getPublicationId(),"productId":t.pageConfig().getProductId(),"showNative":t.callbacks().hasSubscribeRequestCallback(),"list":e&&e.list||"default","skus":e&&e.skus||null,"isClosable":!0}),!1)}handleLinkRequest_(t){t.getSubscriberOrMember()&&(this.eventManager_.logSwgEvent(1009,!0),this.deps_.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()}))}start(){return this.deps_.callbacks().triggerFlowStarted(Le),this.activityIframeView_.onCancel((()=>{this.deps_.callbacks().triggerFlowCanceled(Le)})),this.activityIframeView_.on(ot,this.handleLinkRequest_.bind(this)),this.activityIframeView_.acceptResult().then((t=>{if(t.data.viewOffers){const t=this.options_||{};return null==t.isClosable&&(t.isClosable=!0),this.eventManager_.logSwgEvent(1008,!0),void new cs(this.deps_,t).start()}if(t.data.native)return this.deps_.callbacks().triggerSubscribeRequest(),void this.dialogManager_.completeView(this.activityIframeView_)})),this.eventManager_.logSwgEvent(8),this.dialogManager_.openView(this.activityIframeView_)}}(this,t);return e.start()}))}showContributionOptions(t){return this.documentParsed_.then((()=>(this.lastContributionsFlow_=new class{constructor(t,e){var s;this.deps_=t,this.options_=e,this.win_=t.win(),this.clientConfigManager_=t.clientConfigManager(),this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.activityIframeView_=null;const n=null===(s=null==e?void 0:e.isClosable)||void 0===s||s;this.activityIframeViewPromise_=this.clientConfigManager_.getClientConfig().then((s=>this.shouldShow_(s)?new ie(this.win_,this.activityPorts_,this.getUrl_(s,t.pageConfig()),rs({"productId":t.pageConfig().getProductId(),"publicationId":t.pageConfig().getPublicationId(),"productType":Be,"list":e&&e.list||"default","skus":e&&e.skus||null,"isClosable":n,"supportsEventManager":!0}),!0):null))}handleLinkRequest_(t){t.getSubscriberOrMember()&&this.deps_.callbacks().triggerLoginRequest({linkRequested:!!t.getLinkRequested()})}startPayFlow_(t){const e=t.getSku(),s=t.getOneTime();if(e){const t={"skuId":e};s&&(t.oneTime=s),new hs(this.deps_,t,Be).start()}}start(){return this.activityIframeViewPromise_.then((t=>t?(this.deps_.callbacks().triggerFlowStarted(Se),t.onCancel((()=>{this.deps_.callbacks().triggerFlowCanceled(Se)})),t.on(ot,this.handleLinkRequest_.bind(this)),t.on(bt,this.startPayFlow_.bind(this)),this.activityIframeView_=t,this.dialogManager_.openView(this.activityIframeView_)):l()))}shouldShow_(t){var e;return!1!==(null===(e=t.uiPredicates)||void 0===e?void 0:e.canDisplayAutoPrompt)}getUrl_(t,e){return t.useUpdatedOfferFlows?this.clientConfigManager_.shouldForceLangInIframes()?ns("/contributionoffersiframe",{"hl":this.clientConfigManager_.getLanguage(),"publicationId":e.getPublicationId()}):ns("/contributionoffersiframe",{"publicationId":e.getPublicationId()}):ns("/contributionsiframe")}showNoEntitlementFoundToast(){this.activityIframeView_&&this.activityIframeView_.execute(new gt)}}(this,t),this.lastContributionsFlow_.start())))}getLastContributionsFlow(){return this.lastContributionsFlow_}waitForSubscriptionLookup(t){return this.documentParsed_.then((()=>{const e=new class{constructor(t,e){this.deps_=t,this.win_=t.win(),this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.openViewPromise_=null,this.accountPromise_=e||Promise.reject("No account promise provided"),this.activityIframeView_=new ie(this.win_,this.activityPorts_,ns("/waitforsubscriptionlookupiframe"),rs({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId()}),!0,!0)}start(){return this.openViewPromise_=this.dialogManager_.openView(this.activityIframeView_),this.accountPromise_.then((t=>(this.dialogManager_.completeView(this.activityIframeView_),t)),(t=>{throw this.dialogManager_.completeView(this.activityIframeView_),t}))}}(this,t);return e.start()}))}setOnLoginRequest(t){this.callbacks_.setOnLoginRequest(t)}triggerLoginRequest(t){this.callbacks_.triggerLoginRequest(t)}setOnLinkComplete(t){this.callbacks_.setOnLinkComplete(t)}linkAccount(t={}){return this.documentParsed_.then((()=>new class{constructor(t){this.deps_=t,this.activityPorts_=t.activities(),this.pageConfig_=t.pageConfig(),this.dialogManager_=t.dialogManager()}start(t={}){this.deps_.callbacks().triggerFlowStarted(je);const e=this.deps_.config().windowOpenMode==ze,s=t.ampReaderId?rs({"publicationId":this.pageConfig_.getPublicationId(),"ampReaderId":t.ampReaderId}):rs({"publicationId":this.pageConfig_.getPublicationId()}),n=this.activityPorts_.open(wn,ns("/linkbackstart"),e?"_top":"_blank",s,{});return this.deps_.eventManager().logSwgEvent(12),this.dialogManager_.popupOpened(n&&n.targetWin),l()}}(this).start(t)))}saveSubscription(t){return this.documentParsed_.then((()=>new class{constructor(t,e){this.win_=t.win(),this.deps_=t,this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.callback_=e,this.requestPromise_=null,this.openPromise_=null,this.activityIframeView_=null}getRequestPromise(){return this.requestPromise_}complete_(){this.dialogManager_.completeView(this.activityIframeView_)}handleLinkSaveResponse_(t){let e;this.complete_();let s=null;return t.linked?(this.dialogManager_.popupClosed(),this.deps_.callbacks().triggerFlowStarted(je),s=new vn(this.deps_,t),e=s.start()):e=Promise.reject(ee(this.win_,"not linked")),e.then((()=>(this.deps_.callbacks().triggerLinkProgress(),s.whenComplete()))).then((()=>!0))}sendLinkSaveToken_(t){t&&t.getRequested()&&(this.requestPromise_=new Promise((t=>t(this.callback_()))).then((t=>{const e=new mt;if(t&&t.token){if(t.authCode)throw new Error("Both authCode and token are available");e.setToken(t.token)}else{if(!t||!t.authCode)throw new Error("Neither token or authCode is available");e.setAuthCode(t.authCode)}return this.activityIframeView_.execute(e),t})).catch((t=>{throw this.complete_(),t})))}start(){const t=this.activityPorts_.addDefaultArguments({"isClosable":!0});return this.activityIframeView_=new ie(this.win_,this.activityPorts_,ns("/linksaveiframe"),t,!1,!0),this.activityIframeView_.on(ft,this.sendLinkSaveToken_.bind(this)),this.openPromise_=this.dialogManager_.openView(this.activityIframeView_,!0),this.deps_.eventManager().logSwgEvent(13),this.activityIframeView_.acceptResultAndVerify(ts(),!0,!0).then((t=>this.handleLinkSaveResponse_(t))).catch((t=>{if(this.complete_(),te(t))return this.deps_.eventManager().logSwgEvent(1016,!0),this.deps_.callbacks().triggerFlowCanceled(je),!1;throw t}))}}(this,t).start()))}showLoginPrompt(){return this.documentParsed_.then((()=>new class{constructor(t){this.deps_=t,this.win_=t.win(),this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.openViewPromise_=null,this.activityIframeView_=new ie(this.win_,this.activityPorts_,ns("/loginiframe"),rs({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),userConsent:!0}),!0)}start(){return this.deps_.callbacks().triggerFlowStarted(Ue),this.openViewPromise_=this.dialogManager_.openView(this.activityIframeView_),this.activityIframeView_.acceptResult().then((()=>{this.dialogManager_.completeView(this.activityIframeView_)}),(t=>{throw te(t)?this.deps_.callbacks().triggerFlowCanceled(Ue):this.dialogManager_.completeView(this.activityIframeView_),t}))}}(this).start()))}showLoginNotification(){return this.documentParsed_.then((()=>new class{constructor(t){this.deps_=t,this.win_=t.win(),this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.openViewPromise_=null,this.activityIframeView_=new ie(this.win_,this.activityPorts_,ns("/loginiframe"),rs({publicationId:t.pageConfig().getPublicationId(),productId:t.pageConfig().getProductId(),userConsent:!1}),!0)}start(){return this.deps_.callbacks().triggerFlowStarted("showLoginNotification"),this.openViewPromise_=this.dialogManager_.openView(this.activityIframeView_),this.activityIframeView_.acceptResult().then((()=>{this.dialogManager_.completeView(this.activityIframeView_)}),(t=>{throw this.dialogManager_.completeView(this.activityIframeView_),t}))}}(this).start()))}setOnNativeSubscribeRequest(t){this.callbacks_.setOnSubscribeRequest(t)}setOnSubscribeResponse(t){this.callbacks_.setOnSubscribeResponse(t)}setOnPaymentResponse(t){this.callbacks_.setOnPaymentResponse(t)}subscribe(t){return Tt("string"==typeof t,"The subscribe() method can only take a sku as its parameter; for subscription updates please use the updateSubscription() method"),this.documentParsed_.then((()=>new hs(this,{"skuId":t}).start()))}updateSubscription(t){return Tt(ks(this.win_,vs),"Not yet launched!"),Tt(!!t&&t.oldSku,"The updateSubscription() method should be used for subscription updates; for new subscriptions please use the subscribe() method"),this.documentParsed_.then((()=>new hs(this,t).start()))}setOnContributionResponse(t){this.callbacks_.setOnContributionResponse(t)}contribute(t){const e="string"==typeof t?{"skuId":t}:t;return this.documentParsed_.then((()=>new hs(this,e,Be).start()))}completeDeferredAccountCreation(t){return this.documentParsed_.then((()=>new class{constructor(t,e){this.deps_=t,this.win_=t.win(),this.activityPorts_=t.activities(),this.dialogManager_=t.dialogManager(),this.activityIframeView_=null,this.openPromise_=null,this.options_=Object.assign({entitlements:null,consent:!0},e||{})}start(){const t=this.options_.entitlements;if(!t||!t.getEntitlementForSource("google"))throw new Error('No entitlements with "google" source');return this.deps_.callbacks().triggerFlowStarted(Re),this.activityIframeView_=new ie(this.win_,this.activityPorts_,ns("/recoveriframe"),rs({"publicationId":this.deps_.pageConfig().getPublicationId(),"productId":this.deps_.pageConfig().getProductId(),"entitlements":t&&t.raw||null,"consent":this.options_.consent}),!0),this.openPromise_=this.dialogManager_.openView(this.activityIframeView_),this.activityIframeView_.acceptResult().then((t=>this.handleConsentResponse_(t.data)),(t=>{throw te(t)?this.deps_.callbacks().triggerFlowCanceled(Re):this.dialogManager_.completeView(this.activityIframeView_),t}))}handleConsentResponse_(t){this.deps_.entitlementsManager().blockNextNotification();const e=t.entitlements,s=t.idToken,n=t.productType,i=this.deps_.entitlementsManager().parseEntitlements({"signedEntitlements":e}),r=new me(s,(new ce).decode(s)),o=t.purchaseDataList?t.purchaseDataList.map((t=>new be(t.data,t.signature))):[new be(t.purchaseData.data,t.purchaseData.signature)],a=new ls(this.deps_),h=a.complete.bind(a),u=new we(i,r,o,h);return this.deps_.eventManager().logSwgEvent(1010,!0),a.start(new fe("",o[0],r,i,n,(()=>l()))),u}}(this,t||null).start()))}setOnFlowStarted(t){this.callbacks_.setOnFlowStarted(t)}setOnFlowCanceled(t){this.callbacks_.setOnFlowCanceled(t)}createButton(t,e){return this.buttonApi_.create(t,e)}attachButton(t,e,s){this.buttonApi_.attach(t,e,s)}attachSmartButton(t,e,s){Tt(ks(this.win_,"smartbox"),"Not yet launched!"),this.buttonApi_.attachSmartButton(this,t,e,s)}getPropensityModule(){return Promise.resolve(this.propensityModule_)}eventManager(){return this.eventManager_}getLastOffersFlow(){return this.lastOffersFlow_}getEventManager(){return Promise.resolve(this.eventManager_)}getLogger(){return Promise.resolve(this.logger_)}setShowcaseEntitlement(t){if(!(t&&Je(this.win().location)&&(e=Ve(this.win().document.referrer),Je(e=e||Ye)&&(s=(s=e)||He,Fe.test(s.hostname)))&&rn(this.win().location.search,!0)))return l();var e,s;const n=(i=t.entitlement,Zs[i]||[]||[]);var i;const r=new pt;r.setIsUserRegistered(t.isUserRegistered);for(let t=0;t<n.length;t++)this.eventManager().logEvent({eventType:n[t],eventOriginator:6,isFromUserAction:!1,additionalParameters:r});return l()}consumeShowcaseEntitlementJwt(t,e){this.entitlementsManager().parseEntitlements({signedEntitlements:t}).consume(e)}showBestAudienceAction(){Nt("Not implemented yet")}}(new class{constructor(t){this.Ci=t,this.bn=R(this.Ci,"viewport")}getWin(){return this.Ci.win}getRootNode(){return this.Ci.getRootNode()}getRootElement(){const t=this.Ci.getRootNode();return t.documentElement||t.body||t}getHead(){return this.Ci.getHeadNode()}getBody(){return this.Ci.isBodyAvailable()?this.Ci.getBody():null}isReady(){return this.Ci.isReady()}whenReady(){return this.Ci.whenReady()}addToFixedLayer(t){return this.bn.addToFixedLayer(t,!0)}}(t),s.getPageConfig(),{fetcher:new Yi(t.win),configPromise:new Promise((t=>i=t))},n,{"skipAccountCreationScreen":!0}),this.c1=this.u1.eventManager(),this.c1.registerEventFilterer(Hi.g1),this.c1.logEvent({eventType:11,eventOriginator:2,isFromUserAction:!1,additionalParameters:null}),this.u1.analytics().setUrl(t.getUrl()),i(),this.u1.setOnLoginRequest((t=>{this.d1(t&&t.linkRequested)})),this.u1.setOnLinkComplete((()=>{this.m1(),this.s1.actionEvent(this.getPlatformKey(),_i,Ui),this.s1.serviceEvent("subscriptions-link-complete",this.getPlatformKey())})),this.u1.setOnFlowStarted((t=>{const e={},s=t.data||{};switch(t.flow){case Li:e.product=s.skuId||s.product||"unknown productId",e.active=!0;break;case Mi:e.skus=s.skus||"*",e.source=s.source||"unknown triggering source",e.active=s.active||null}t.flow!=Li&&t.flow!=Si&&t.flow!=Oi&&t.flow!=Mi||this.s1.actionEvent(this.getPlatformKey(),t.flow,Ri,e)})),this.u1.setOnFlowCanceled((t=>{"linkAccount"==t.flow?(this.m1(),this.s1.actionEvent(this.getPlatformKey(),_i,ji),this.s1.serviceEvent("subscriptions-link-canceled",this.getPlatformKey())):t.flow!=Li&&t.flow!=Si&&t.flow!=Oi&&t.flow!=Mi||this.s1.actionEvent(this.getPlatformKey(),t.flow,ji)})),this.u1.setOnNativeSubscribeRequest((()=>{this.f1()})),this.u1.setOnPaymentResponse((t=>{t.then((t=>{this.b1(t,"CONTRIBUTION"===t.productType?Si:Li)}))})),this.w1=e,this.v1=R(t,"viewer"),this.A1=!1,this.I1(this.v1),this.C1=!1,function(t,e,s,n,i){const r=t.getHeadNode(),o=function(t,e,s,n){let i=t.__AMP_CSS_SM;i||(i=t.__AMP_CSS_SM=f());const r=`amp-extension=${n}`;if(r){const s=Ni(t,i,r);if(s)return"STYLE"==s.tagName&&s.textContent!==e&&(s.textContent=e),s}const o=(t.ownerDocument||t).createElement("style");o.textContent=e;let a=null;return o.setAttribute("amp-extension",n),a=Ni(t,i,"amp-runtime"),function(t,e,s=null){if(!s)return void function(t,e){t.insertBefore(e,t.firstChild)}(t,e);const n=s.nextSibling;t.insertBefore(e,n)}(t,o,a),r&&(i[r]=o),o}(r,function(t,e){const s=t.__AMP_CSS_TR;return s?s(e):e}(r,'.swg-button,.swg-button-dark,.swg-button-light{border:0;border-radius:4px;box-sizing:border-box;outline:0;padding:11px 8px;width:240px;min-width:150px;height:40px;min-height:40px}.swg-button-dark:after,.swg-button-light:after,.swg-button:after{display:block;max-width:200px;max-height:40px;width:100%;height:100%;margin:auto;content:"";border:0;background-origin:content-box;background-position:50%;background-repeat:no-repeat;background-size:contain}.swg-button,.swg-button-light{background-color:#fff;box-shadow:0 1px 1px 0 rgba(60,64,67,0.3),0 1px 3px 1px rgba(60,64,67,0.15)}.swg-button-light:after,.swg-button:after{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="235" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M169.367 19c-5.09 0-9.367-4.265-9.367-9.5s4.277-9.5 9.367-9.5c2.818 0 4.823 1.133 6.33 2.622l-1.775 1.827c-1.082-1.04-2.55-1.857-4.555-1.857-3.72 0-6.628 3.081-6.628 6.908 0 3.827 2.907 6.908 6.628 6.908 2.411 0 3.78-1 4.664-1.898.724-.745 1.19-1.806 1.37-3.265h-6.034V8.643h8.494c.09.459.139 1.02.139 1.622 0 1.95-.516 4.357-2.183 6.072-1.627 1.734-3.691 2.663-6.45 2.663z" fill="%234285F4" fill-rule="nonzero"/><path d="M192 13c0 3.456-2.69 6-6 6s-6-2.544-6-6c0-3.476 2.69-6 6-6s6 2.524 6 6zm-2.63 0c0-2.164-1.563-3.636-3.37-3.636-1.807 0-3.37 1.482-3.37 3.636 0 2.134 1.563 3.636 3.37 3.636 1.807 0 3.37-1.492 3.37-3.636z" fill="%23E94235" fill-rule="nonzero"/><path d="M205 13c0 3.456-2.69 6-6 6-3.3 0-6-2.544-6-6 0-3.476 2.69-6 6-6s6 2.524 6 6zm-2.62 0c0-2.164-1.563-3.636-3.37-3.636-1.807 0-3.37 1.482-3.37 3.636 0 2.134 1.563 3.636 3.37 3.636 1.807.01 3.37-1.492 3.37-3.636z" fill="%23FABB05" fill-rule="nonzero"/><path d="M217 7.362v10.53c0 4.337-2.499 6.108-5.457 6.108-2.786 0-4.452-1.908-5.083-3.465l2.192-.93c.392.96 1.35 2.085 2.891 2.085 1.896 0 3.064-1.204 3.064-3.445v-.841h-.087c-.564.714-1.656 1.33-3.025 1.33-2.872 0-5.495-2.554-5.495-5.842C206 9.584 208.633 7 211.495 7c1.37 0 2.46.626 3.025 1.311h.087v-.949H217zm-2.221 5.54c0-2.066-1.35-3.582-3.064-3.582-1.742 0-3.197 1.507-3.197 3.582 0 2.045 1.455 3.533 3.197 3.533 1.714 0 3.064-1.488 3.064-3.533z" fill="%234285F4" fill-rule="nonzero"/><path fill="%2334A853" fill-rule="nonzero" d="M223 1v18h-3V1z"/><path d="m232.844 14.973 2.046 1.363c-.662.981-2.256 2.664-5.014 2.664-3.42 0-5.876-2.634-5.876-6 0-3.566 2.487-6 5.585-6 3.119 0 4.643 2.474 5.144 3.816l.271.681-8.032 3.326c.612 1.202 1.574 1.823 2.918 1.823s2.276-.671 2.958-1.673zm-6.307-2.163 5.375-2.224c-.301-.751-1.184-1.272-2.237-1.272-1.343 0-3.208 1.182-3.138 3.496z" fill="%23E94235" fill-rule="nonzero"/><path d="M6.576 19.384c-1.248 0-2.468-.408-3.66-1.224-1.192-.816-1.972-1.96-2.34-3.432l2.016-.816c.24.944.732 1.74 1.476 2.388.744.648 1.58.972 2.508.972.96 0 1.78-.252 2.46-.756.68-.504 1.02-1.188 1.02-2.052 0-.96-.34-1.7-1.02-2.22-.68-.52-1.756-1.004-3.228-1.452-1.52-.48-2.672-1.1-3.456-1.86-.784-.76-1.176-1.732-1.176-2.916 0-1.232.488-2.304 1.464-3.216.976-.912 2.248-1.368 3.816-1.368 1.456 0 2.64.364 3.552 1.092.912.728 1.504 1.524 1.776 2.388l-2.016.84c-.144-.544-.5-1.048-1.068-1.512-.568-.464-1.3-.696-2.196-.696-.848 0-1.572.236-2.172.708-.6.472-.9 1.06-.9 1.764 0 .64.276 1.18.828 1.62.552.44 1.364.836 2.436 1.188.848.272 1.556.536 2.124.792a9.842 9.842 0 0 1 1.728 1.02 4.065 4.065 0 0 1 1.32 1.584c.296.632.444 1.364.444 2.196 0 .832-.172 1.576-.516 2.232a4.19 4.19 0 0 1-1.368 1.56 6.875 6.875 0 0 1-3.852 1.176zM24.936 19h-2.112v-1.632h-.096c-.336.56-.848 1.036-1.536 1.428a4.345 4.345 0 0 1-2.184.588c-1.472 0-2.588-.448-3.348-1.344-.76-.896-1.14-2.096-1.14-3.6v-7.2h2.208v6.84c0 2.192.968 3.288 2.904 3.288.912 0 1.656-.368 2.232-1.104.576-.736.864-1.584.864-2.544V7.24h2.208V19zm8.904.384c-.896 0-1.7-.192-2.412-.576-.712-.384-1.244-.864-1.596-1.44h-.096V19h-2.112V1.816h2.208V7.24l-.096 1.632h.096c.352-.576.884-1.056 1.596-1.44.712-.384 1.516-.576 2.412-.576 1.52 0 2.832.6 3.936 1.8 1.104 1.2 1.656 2.688 1.656 4.464 0 1.776-.552 3.264-1.656 4.464-1.104 1.2-2.416 1.8-3.936 1.8zm-.36-2.016c1.024 0 1.904-.388 2.64-1.164.736-.776 1.104-1.804 1.104-3.084s-.368-2.308-1.104-3.084c-.736-.776-1.616-1.164-2.64-1.164-1.04 0-1.924.384-2.652 1.152-.728.768-1.092 1.8-1.092 3.096s.364 2.328 1.092 3.096c.728.768 1.612 1.152 2.652 1.152zm12.336 2.016c-1.312 0-2.396-.32-3.252-.96a5.682 5.682 0 0 1-1.884-2.4l1.968-.816c.624 1.472 1.688 2.208 3.192 2.208.688 0 1.252-.152 1.692-.456.44-.304.66-.704.66-1.2 0-.768-.536-1.288-1.608-1.56l-2.376-.576c-.752-.192-1.464-.556-2.136-1.092-.672-.536-1.008-1.26-1.008-2.172 0-1.04.46-1.884 1.38-2.532.92-.648 2.012-.972 3.276-.972 1.04 0 1.968.236 2.784.708a3.99 3.99 0 0 1 1.752 2.028l-1.92.792c-.432-1.04-1.328-1.56-2.688-1.56-.656 0-1.208.136-1.656.408-.448.272-.672.64-.672 1.104 0 .672.52 1.128 1.56 1.368l2.328.552c1.104.256 1.92.696 2.448 1.32.528.624.792 1.328.792 2.112 0 1.056-.432 1.936-1.296 2.64-.864.704-1.976 1.056-3.336 1.056zm11.928 0c-1.76 0-3.208-.596-4.344-1.788-1.136-1.192-1.704-2.684-1.704-4.476 0-1.792.568-3.284 1.704-4.476 1.136-1.192 2.584-1.788 4.344-1.788 1.312 0 2.4.32 3.264.96a5.621 5.621 0 0 1 1.896 2.424l-2.016.84c-.608-1.472-1.704-2.208-3.288-2.208-.976 0-1.836.4-2.58 1.2-.744.8-1.116 1.816-1.116 3.048s.372 2.248 1.116 3.048c.744.8 1.604 1.2 2.58 1.2 1.648 0 2.784-.736 3.408-2.208l1.968.84c-.4.96-1.044 1.764-1.932 2.412-.888.648-1.988.972-3.3.972zm9.36-.384h-2.208V7.24h2.112v1.92h.096c.224-.64.684-1.168 1.38-1.584.696-.416 1.372-.624 2.028-.624.656 0 1.208.096 1.656.288l-.84 2.064c-.288-.112-.68-.168-1.176-.168-.8 0-1.508.316-2.124.948-.616.632-.924 1.46-.924 2.484V19zm8.904-14.712a1.504 1.504 0 0 1-1.104.456c-.432 0-.8-.152-1.104-.456a1.504 1.504 0 0 1-.456-1.104c0-.432.152-.8.456-1.104a1.504 1.504 0 0 1 1.104-.456c.432 0 .8.152 1.104.456.304.304.456.672.456 1.104 0 .432-.152.8-.456 1.104zm0 14.712H73.8V7.24h2.208V19zm9.096.384c-.896 0-1.7-.192-2.412-.576-.712-.384-1.244-.864-1.596-1.44H81V19h-2.112V1.816h2.208V7.24L81 8.872h.096c.352-.576.884-1.056 1.596-1.44.712-.384 1.516-.576 2.412-.576 1.52 0 2.832.6 3.936 1.8 1.104 1.2 1.656 2.688 1.656 4.464 0 1.776-.552 3.264-1.656 4.464-1.104 1.2-2.416 1.8-3.936 1.8zm-.36-2.016c1.024 0 1.904-.388 2.64-1.164.736-.776 1.104-1.804 1.104-3.084s-.368-2.308-1.104-3.084c-.736-.776-1.616-1.164-2.64-1.164-1.04 0-1.924.384-2.652 1.152-.728.768-1.092 1.8-1.092 3.096s.364 2.328 1.092 3.096c.728.768 1.612 1.152 2.652 1.152zm13.296 2.016c-1.776 0-3.22-.592-4.332-1.776-1.112-1.184-1.668-2.68-1.668-4.488 0-1.712.54-3.184 1.62-4.416 1.08-1.232 2.46-1.848 4.14-1.848 1.744 0 3.14.568 4.188 1.704 1.048 1.136 1.572 2.656 1.572 4.56l-.024.408h-9.288c.064 1.184.46 2.12 1.188 2.808.728.688 1.58 1.032 2.556 1.032 1.584 0 2.656-.672 3.216-2.016l1.968.816c-.384.912-1.016 1.676-1.896 2.292-.88.616-1.96.924-3.24.924zm3.168-7.68c-.048-.672-.356-1.312-.924-1.92-.568-.608-1.412-.912-2.532-.912-.816 0-1.524.256-2.124.768-.6.512-1.012 1.2-1.236 2.064h6.816zM123.72 19h-2.256l-2.928-9.024L115.632 19H113.4l-3.792-11.76h2.304l2.616 8.88h.024l2.904-8.88h2.28l2.904 8.88h.024l2.592-8.88h2.256L123.72 19zm7.632-14.712a1.504 1.504 0 0 1-1.104.456c-.432 0-.8-.152-1.104-.456a1.504 1.504 0 0 1-.456-1.104c0-.432.152-.8.456-1.104a1.504 1.504 0 0 1 1.104-.456c.432 0 .8.152 1.104.456.304.304.456.672.456 1.104 0 .432-.152.8-.456 1.104zm0 14.712h-2.208V7.24h2.208V19zm7.968.192c-1.232 0-2.172-.328-2.82-.984-.648-.656-.972-1.584-.972-2.784V9.256h-2.064V7.24h2.064v-3.6h2.208v3.6h2.88v2.016h-2.88v6c0 1.28.528 1.92 1.584 1.92.4 0 .736-.064 1.008-.192l.768 1.896c-.48.208-1.072.312-1.776.312zm5.616-17.376V7.24l-.096 1.632h.096c.32-.56.824-1.036 1.512-1.428a4.389 4.389 0 0 1 2.208-.588c1.456 0 2.568.448 3.336 1.344.768.896 1.152 2.096 1.152 3.6V19h-2.208v-6.864c0-2.176-.968-3.264-2.904-3.264-.912 0-1.656.364-2.232 1.092-.576.728-.864 1.572-.864 2.532V19h-2.208V1.816h2.208z" fill="%235F6368"/></g></svg>\')}.swg-button-dark{background-color:#000}.swg-button-dark:after{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="231" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="%23FFF" fill-rule="evenodd"><path d="M6.302 19.368c-1.196 0-2.365-.391-3.507-1.173-1.143-.782-1.89-1.878-2.243-3.289l1.932-.782c.23.905.701 1.667 1.414 2.289.714.62 1.515.931 2.404.931.92 0 1.706-.241 2.357-.725.652-.483.978-1.138.978-1.966 0-.92-.326-1.63-.978-2.128-.651-.498-1.682-.962-3.093-1.391-1.457-.46-2.56-1.054-3.312-1.783-.751-.728-1.127-1.66-1.127-2.794 0-1.18.468-2.208 1.403-3.082.935-.874 2.154-1.311 3.657-1.311 1.395 0 2.53.349 3.404 1.046.874.698 1.441 1.461 1.702 2.289l-1.932.805c-.138-.521-.48-1.004-1.024-1.449-.544-.445-1.245-.667-2.104-.667-.813 0-1.506.226-2.081.679-.576.452-.863 1.015-.863 1.69 0 .613.264 1.13.793 1.553.53.421 1.308.8 2.335 1.138.813.26 1.491.514 2.036.759a9.431 9.431 0 0 1 1.655.978c.56.406.982.912 1.265 1.518.284.605.426 1.307.426 2.104 0 .797-.165 1.51-.494 2.139a4.015 4.015 0 0 1-1.312 1.495 6.589 6.589 0 0 1-3.691 1.127zM23.696 19h-2.024v-1.564h-.092c-.322.537-.813.993-1.472 1.369a4.164 4.164 0 0 1-2.093.563c-1.41 0-2.48-.43-3.209-1.288-.728-.859-1.092-2.009-1.092-3.45v-6.9h2.116v6.555c0 2.1.927 3.151 2.783 3.151.874 0 1.587-.353 2.139-1.058a3.845 3.845 0 0 0 .828-2.438V7.73h2.116V19zm8.677.368c-.86 0-1.63-.184-2.312-.552-.682-.368-1.192-.828-1.53-1.38h-.091V19h-2.024V2.532h2.116V7.73l-.093 1.564h.093c.337-.552.847-1.012 1.529-1.38.682-.368 1.453-.552 2.312-.552 1.456 0 2.713.575 3.772 1.725 1.058 1.15 1.586 2.576 1.586 4.278 0 1.702-.528 3.128-1.587 4.278-1.058 1.15-2.315 1.725-3.771 1.725zm-.345-1.932c.98 0 1.824-.372 2.53-1.116.705-.743 1.057-1.728 1.057-2.955s-.352-2.212-1.058-2.956c-.705-.743-1.548-1.115-2.53-1.115-.996 0-1.843.368-2.541 1.104-.698.736-1.047 1.725-1.047 2.967s.35 2.231 1.047 2.967c.698.736 1.545 1.104 2.542 1.104zm11.85 1.932c-1.257 0-2.296-.307-3.116-.92a5.446 5.446 0 0 1-1.806-2.3l1.886-.782c.598 1.41 1.618 2.116 3.06 2.116.659 0 1.2-.146 1.62-.437.422-.291.633-.675.633-1.15 0-.736-.513-1.234-1.54-1.495l-2.278-.552c-.72-.184-1.403-.533-2.047-1.046-.644-.514-.966-1.208-.966-2.082 0-.997.441-1.805 1.323-2.427.881-.62 1.928-.931 3.14-.931.996 0 1.885.226 2.667.678a3.824 3.824 0 0 1 1.68 1.944l-1.84.759c-.415-.997-1.273-1.495-2.577-1.495-.628 0-1.157.13-1.587.391-.43.26-.644.613-.644 1.058 0 .644.499 1.081 1.495 1.311l2.231.529c1.058.245 1.84.667 2.346 1.265.506.598.76 1.273.76 2.024 0 1.012-.415 1.855-1.243 2.53-.828.675-1.893 1.012-3.197 1.012zm11.69 0c-1.687 0-3.074-.571-4.163-1.713-1.089-1.143-1.633-2.573-1.633-4.29s.544-3.147 1.633-4.29c1.089-1.142 2.476-1.713 4.163-1.713 1.257 0 2.3.307 3.128.92a5.387 5.387 0 0 1 1.817 2.323l-1.932.805c-.583-1.41-1.633-2.116-3.151-2.116-.935 0-1.76.383-2.472 1.15-.714.767-1.07 1.74-1.07 2.921 0 1.18.356 2.154 1.07 2.921.713.767 1.537 1.15 2.472 1.15 1.58 0 2.668-.705 3.266-2.116l1.886.805c-.383.92-1 1.69-1.852 2.311-.85.622-1.905.932-3.162.932zM64.567 19H62.45V7.73h2.024v1.84h.092c.214-.613.655-1.12 1.322-1.518.667-.399 1.315-.598 1.944-.598.628 0 1.157.092 1.587.276l-.805 1.978c-.276-.107-.652-.161-1.127-.161-.767 0-1.445.303-2.036.909-.59.605-.885 1.399-.885 2.38V19zm8.677-14.099a1.441 1.441 0 0 1-1.058.437c-.415 0-.767-.146-1.059-.437a1.441 1.441 0 0 1-.436-1.058c0-.414.145-.767.436-1.058a1.441 1.441 0 0 1 1.059-.437c.414 0 .766.146 1.057.437.292.291.438.644.438 1.058 0 .414-.146.767-.438 1.058zm0 14.099h-2.117V7.73h2.117V19zm8.86.368c-.858 0-1.629-.184-2.311-.552-.683-.368-1.192-.828-1.53-1.38h-.092V19h-2.024V2.532h2.116V7.73l-.092 1.564h.092c.338-.552.847-1.012 1.53-1.38.682-.368 1.453-.552 2.311-.552 1.457 0 2.714.575 3.772 1.725 1.058 1.15 1.587 2.576 1.587 4.278 0 1.702-.529 3.128-1.587 4.278-1.058 1.15-2.315 1.725-3.772 1.725zm-.345-1.932c.982 0 1.825-.372 2.53-1.116.706-.743 1.058-1.728 1.058-2.955s-.352-2.212-1.058-2.956c-.705-.743-1.548-1.115-2.53-1.115-.996 0-1.844.368-2.541 1.104-.698.736-1.047 1.725-1.047 2.967s.35 2.231 1.047 2.967c.697.736 1.545 1.104 2.541 1.104zm12.886 1.932c-1.702 0-3.086-.567-4.151-1.702-1.066-1.135-1.599-2.568-1.599-4.301 0-1.64.517-3.051 1.553-4.232 1.035-1.18 2.357-1.771 3.967-1.771 1.671 0 3.01.544 4.013 1.633 1.005 1.089 1.507 2.545 1.507 4.37l-.023.391h-8.901c.061 1.135.44 2.032 1.139 2.691.697.66 1.514.989 2.449.989 1.518 0 2.545-.644 3.082-1.932l1.886.782c-.368.874-.974 1.606-1.817 2.197-.843.59-1.878.885-3.105.885zm3.036-7.36c-.046-.644-.341-1.257-.885-1.84-.545-.583-1.354-.874-2.427-.874-.782 0-1.46.245-2.035.736-.576.49-.97 1.15-1.185 1.978h6.532zM119.543 19h-2.163l-2.805-8.648L111.79 19h-2.138l-3.635-11.27h2.209l2.507 8.51h.023l2.782-8.51h2.186l2.782 8.51h.023l2.484-8.51h2.163L119.541 19zM127 4.901a1.441 1.441 0 0 1-1.058.437c-.414 0-.766-.146-1.058-.437a1.441 1.441 0 0 1-.437-1.058c0-.414.146-.767.437-1.058a1.441 1.441 0 0 1 1.058-.437c.414 0 .767.146 1.058.437.292.291.437.644.437 1.058 0 .414-.145.767-.437 1.058zM127 19h-2.116V7.73H127V19zm7.665.184c-1.18 0-2.081-.314-2.702-.943-.622-.629-.932-1.518-.932-2.668V9.662h-1.978V7.73h1.978V4.28h2.116v3.45h2.76v1.932h-2.76v5.75c0 1.227.506 1.84 1.518 1.84.383 0 .705-.061.966-.184l.736 1.817c-.46.2-1.027.299-1.702.299zm5.64-16.652V7.73l-.091 1.564h.092c.306-.537.79-.993 1.449-1.369a4.206 4.206 0 0 1 2.116-.563c1.395 0 2.46.43 3.197 1.288.736.859 1.104 2.009 1.104 3.45V19h-2.116v-6.578c0-2.085-.928-3.128-2.783-3.128-.874 0-1.587.349-2.14 1.046-.551.698-.827 1.507-.827 2.427V19h-2.116V2.532h2.116z"/><g fill-rule="nonzero"><path d="M165.367 19c-5.09 0-9.367-4.265-9.367-9.5s4.277-9.5 9.367-9.5c2.818 0 4.823 1.133 6.33 2.622l-1.775 1.827c-1.082-1.04-2.55-1.857-4.555-1.857-3.72 0-6.628 3.081-6.628 6.908 0 3.827 2.907 6.908 6.628 6.908 2.411 0 3.78-1 4.664-1.898.724-.745 1.19-1.806 1.37-3.265h-6.034V8.643h8.494c.09.459.139 1.02.139 1.622 0 1.95-.516 4.357-2.183 6.072-1.627 1.734-3.691 2.663-6.45 2.663zM188 13c0 3.456-2.69 6-6 6s-6-2.544-6-6c0-3.476 2.69-6 6-6s6 2.524 6 6zm-2.63 0c0-2.164-1.563-3.636-3.37-3.636-1.807 0-3.37 1.482-3.37 3.636 0 2.134 1.563 3.636 3.37 3.636 1.807 0 3.37-1.492 3.37-3.636zM201 13c0 3.456-2.69 6-6 6-3.3 0-6-2.544-6-6 0-3.476 2.69-6 6-6s6 2.524 6 6zm-2.62 0c0-2.164-1.563-3.636-3.37-3.636-1.807 0-3.37 1.482-3.37 3.636 0 2.134 1.563 3.636 3.37 3.636 1.807.01 3.37-1.492 3.37-3.636zM213 7.362v10.53c0 4.337-2.499 6.108-5.457 6.108-2.786 0-4.452-1.908-5.083-3.465l2.192-.93c.392.96 1.35 2.085 2.891 2.085 1.896 0 3.064-1.204 3.064-3.445v-.841h-.087c-.564.714-1.656 1.33-3.025 1.33-2.872 0-5.495-2.554-5.495-5.842C202 9.584 204.633 7 207.495 7c1.37 0 2.46.626 3.025 1.311h.087v-.949H213zm-2.221 5.54c0-2.066-1.35-3.582-3.064-3.582-1.742 0-3.197 1.507-3.197 3.582 0 2.045 1.455 3.533 3.197 3.533 1.714 0 3.064-1.488 3.064-3.533zM219 1v18h-3V1zM228.844 14.973l2.046 1.363c-.662.981-2.256 2.664-5.014 2.664-3.42 0-5.876-2.634-5.876-6 0-3.566 2.487-6 5.585-6 3.119 0 4.643 2.474 5.144 3.816l.271.681-8.032 3.326c.612 1.202 1.574 1.823 2.918 1.823s2.276-.671 2.958-1.673zm-6.307-2.163 5.375-2.224c-.301-.751-1.184-1.272-2.237-1.272-1.343 0-3.208 1.182-3.138 3.496z"/></g></g></svg>\')}.swg-button-light:hover,.swg-button:hover{background-color:#f8f8f8}.swg-button-light:focus,.swg-button:focus{box-shadow:#e8e8e8}.swg-button-light:active,.swg-button:active{background-color:#fff}.swg-button-dark:hover{background-color:#3c4043}.swg-button-dark:focus{box-shadow:#202124}.swg-button-dark:active{background-color:#5f6368}.swg-smart-button{border:none;padding:0;background:transparent;min-height:126px;position:relative;min-width:300px;width:300px;border-radius:0;overflow:hidden}.swg-smart-button:focus{outline:none}.swg-button-light:lang(ar):after,.swg-button:lang(ar):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ar-lt.svg)}.swg-button-dark:lang(ar):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ar-dk.svg)}.swg-button-light:lang(de):after,.swg-button:lang(de):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-de-lt.svg)}.swg-button-dark:lang(de):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-de-dk.svg)}.swg-button-light:lang(es):after,.swg-button:lang(es):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-lt.svg)}.swg-button-dark:lang(es):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-dk.svg)}.swg-button-light:lang(es-latam):after,.swg-button:lang(es-latam):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-latam-lt.svg)}.swg-button-dark:lang(es-latam):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-latam-dk.svg)}.swg-button-light:lang(es-latn):after,.swg-button:lang(es-latn):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-latam-lt.svg)}.swg-button-dark:lang(es-latn):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-es-latam-dk.svg)}.swg-button-light:lang(fr):after,.swg-button:lang(fr):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-fr-lt.svg)}.swg-button-dark:lang(fr):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-fr-dk.svg)}.swg-button-light:lang(hi):after,.swg-button:lang(hi):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-hi-lt.svg)}.swg-button-dark:lang(hi):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-hi-dk.svg)}.swg-button-light:lang(id):after,.swg-button:lang(id):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-id-lt.svg)}.swg-button-dark:lang(id):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-id-dk.svg)}.swg-button-light:lang(it):after,.swg-button:lang(it):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-it-lt.svg)}.swg-button-dark:lang(it):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-it-dk.svg)}.swg-button-light:lang(jp):after,.swg-button:lang(jp):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-jp-lt.svg)}.swg-button-dark:lang(jp):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-jp-dk.svg)}.swg-button-light:lang(ko):after,.swg-button:lang(ko):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ko-lt.svg)}.swg-button-dark:lang(ko):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ko-dk.svg)}.swg-button-light:lang(ms):after,.swg-button:lang(ms):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ms-lt.svg)}.swg-button-dark:lang(ms):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ms-dk.svg)}.swg-button-light:lang(nl):after,.swg-button:lang(nl):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-nl-lt.svg)}.swg-button-dark:lang(nl):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-nl-dk.svg)}.swg-button-light:lang(no):after,.swg-button:lang(no):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-no-lt.svg)}.swg-button-dark:lang(no):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-no-dk.svg)}.swg-button-light:lang(pl):after,.swg-button:lang(pl):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pl-lt.svg)}.swg-button-dark:lang(pl):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pl-dk.svg)}.swg-button-light:lang(pt):after,.swg-button:lang(pt):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pt-lt.svg)}.swg-button-dark:lang(pt):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pt-dk.svg)}.swg-button-light:lang(pt-br):after,.swg-button:lang(pt-br):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pt-br-lt.svg)}.swg-button-dark:lang(pt-br):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-pt-br-dk.svg)}.swg-button-light:lang(ru):after,.swg-button:lang(ru):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ru-lt.svg)}.swg-button-dark:lang(ru):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-ru-dk.svg)}.swg-button-light:lang(se):after,.swg-button:lang(se):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-se-lt.svg)}.swg-button-dark:lang(se):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-se-dk.svg)}.swg-button-light:lang(th):after,.swg-button:lang(th):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-th-lt.svg)}.swg-button-dark:lang(th):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-th-dk.svg)}.swg-button-light:lang(tr):after,.swg-button:lang(tr):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-tr-lt.svg)}.swg-button-dark:lang(tr):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-tr-dk.svg)}.swg-button-light:lang(uk):after,.swg-button:lang(uk):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-uk-lt.svg)}.swg-button-dark:lang(uk):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-uk-dk.svg)}.swg-button-light:lang(zh-cn):after,.swg-button:lang(zh-cn):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-zh-cn-lt.svg)}.swg-button-dark:lang(zh-cn):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-zh-cn-dk.svg)}.swg-button-light:lang(zh-tw):after,.swg-button:lang(zh-tw):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-zh-tw-lt.svg)}.swg-button-dark:lang(zh-tw):after{background-image:url(https://news.google.com/swg/js/v1/i18n/b-zh-tw-dk.svg)}.swg-button-v2-dark,.swg-button-v2-light{border:0;border-radius:4px;outline:0;width:237px;min-width:237px;height:44px;min-height:44px;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;box-sizing:border-box;font-family:Google Sans,Roboto-Regular,sans-serif,arial;font-weight:500;font-size:14px;letter-spacing:0.001em;cursor:pointer}.swg-button-v2-light{color:#1a73e8;background-color:#fff;border:1px solid #dadce0}.swg-button-v2-light[disabled]{pointer-events:none;color:rgba(60,64,67,0.38);border:1px solid rgba(60,64,67,0.12)}.swg-button-v2-light:hover{box-shadow:0px 1px 2px rgba(60,64,67,0.3),0px 1px 3px 1px rgba(60,64,67,0.15);background:linear-gradient(0deg,rgba(26,115,232,0.04),rgba(26,115,232,0.04)),#fff;border:none}.swg-button-v2-light:focus{box-shadow:0px 1px 2px rgba(60,64,67,0.3),0px 2px 6px 2px rgba(60,64,67,0.15);background:linear-gradient(0deg,rgba(26,115,232,0.08),rgba(26,115,232,0.08)),#fff;border:none}.swg-button-v2-light:active{background-color:#fff;box-shadow:0px 6px 10px 4px rgba(60,64,67,0.15),0px 2px 3px rgba(60,64,67,0.3);border:none}.swg-button-v2-dark{color:#fff;background-color:#3c4043}.swg-button-v2-dark[disabled]{color:hsla(0,0%,100%,0.38);pointer-events:none}.swg-button-v2-dark:active,.swg-button-v2-dark:hover{box-shadow:0px 2px 6px 2px rgba(0,0,0,0.15),0px 1px 2px rgba(0,0,0,0.3);background-color:#202124}.swg-button-v2-dark:focus{box-shadow:0px 6px 10px 4px rgba(0,0,0,0.15),0px 2px 3px rgba(0,0,0,0.3);background-color:#202124}.swg-button-v2-icon-dark,.swg-button-v2-icon-light{background-size:contain;width:18px;height:18px;margin-left:16px;margin-right:8px}.swg-button-v2-icon-light{background-image:url(https://fonts.gstatic.com/s/i/productlogos/googleg/v6/24px.svg)}.swg-button-v2-light[disabled] .swg-button-v2-icon-light{background-image:url(https://fonts.gstatic.com/s/i/googlematerialicons/google/v20/gm_grey-24dp/2x/gm_google_gm_grey_24dp.png);opacity:0.38}.swg-button-v2-icon-dark{background-image:url(https://fonts.gstatic.com/s/i/googlematerialicons/google/v13/white-24dp/2x/gm_google_white_24dp.png)}.swg-button-v2-dark[disabled] .swg-button-v2-icon-dark{background-image:url(https://fonts.gstatic.com/s/i/googlematerialicons/google/v20/gm_grey-24dp/2x/gm_google_gm_grey_24dp.png)}[subscriptions-action][subscriptions-google-rtc]{opacity:0.5;cursor:not-allowed}\n/*# sourceURL=/extensions/amp-subscriptions-google/0.1/amp-subscriptions-google.css*/'),0,"amp-subscriptions-google");if(s){const e=t.getRootNode();if(Ti(e,o))return o;const s=setInterval((()=>{Ti(e,o)&&clearInterval(s)}),4)}}(t,0,(()=>{})),this.E1=!!this.w1.enableMetering,this.N1=!!this.w1.enableLAA,this.T1=!1!==this.w1.enableEntitlements,O(!(this.N1&&this.E1),"enableLAA and enableMetering are mutually exclusive."),this.P1=this.w1.skuMapUrl||null,this._1={},this.L1=this.maybeFetchRealTimeConfig()}static g1(t){return 1!==t.eventOriginator?0:Ki[t.eventType]?1:0}n1(t,e,s){let n=null;const i=s.action,r=s.status;Wi[t]?n=Wi[t]:i&&qi[i]&&(n=qi[i][r]),n&&this.c1.logEvent({eventType:n,eventOriginator:2,isFromUserAction:null,additionalParameters:null})}d1(t){t&&this.A1?(this.S1(),this.s1.actionEvent(this.getPlatformKey(),_i,Ri),this.s1.serviceEvent("subscriptions-link-requested",this.getPlatformKey())):this.O1(this.t1.delegateActionToLocal("login",null))}S1(){this.t1.getReaderId("local").then((t=>{this.u1.linkAccount({ampReaderId:t})}))}m1(){this.t1.resetPlatforms()}f1(){this.O1(this.t1.delegateActionToLocal(Li,null))}O1(t){t.then((t=>{t&&this.u1.reset()}))}maybeFetchRealTimeConfig(){let t=3e3;return this.e1&&(t=6e3),this.P1?(function(t,e,s="source"){var n;O(null!=t,"%s %s must be available",e,s),O("https:"==(n=(t=>"string"==typeof t?Pi(t):t)(n=t)).protocol||"localhost"==n.hostname||"127.0.0.1"==n.hostname||function(t,e){const s=t.length-e.length;return s>=0&&t.indexOf(e,s)==s}(n.hostname,".localhost")||/^\/\//.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',e,s,t)}(this.P1,"skuMapUrl must be valid https Url"),this.Ci.whenFirstVisible().then((()=>this.i1.buildUrl(this.P1,!1))).then((e=>this.Ee.timeoutPromise(t,this.l1.fetchCredentialedJson(e)))).then((t=>{O(t["subscribe.google.com"],"skuMap does not contain subscribe.google.com section"),this._1=t["subscribe.google.com"]})).catch((t=>{throw _().createError(`fetch skuMap failed for ${Vi}`,t)}))):l()}b1(t,e){let s;t.complete().then((()=>{this.t1.resetPlatforms()}));try{const e=t.entitlements&&t.entitlements.getEntitlementForThis();e&&(s=e.getSku())}catch(t){}const n={"active":!0,"product":s||"unknown subscriptionToken"};this.s1.actionEvent(this.getPlatformKey(),e,Ui,n)}M1(){return y(this.Ci.win.location.search)}R1(){return this.j1().then((t=>2!==t?null:new Fi({source:"google:laa",raw:"",service:Vi,granted:!0,grantReason:"LAA",dataObject:{},decryptedDocumentKey:null})))}j1(){return this.N1||this.E1?this.v1.getReferrerUrl().then((t=>{const e=Pi(t);if("https:"!==e.protocol||!$i.test(e.hostname))return 1;const s=this.M1();return parseInt(s.gaa_ts,16)<Date.now()/1e3?1:s.gaa_n&&s.gaa_sig?"la"===s.gaa_at&&this.N1?2:"la"!==s.gaa_at&&"g"!==s.gaa_at||!this.E1?1:3:1})):Promise.resolve(1)}isPrerenderSafe(){return this.A1&&!this.E1}getEntitlements(){const t=this.t1.getEncryptedDocumentKey("google.com");return O(!(this.N1&&t),"enableLAA cannot be used when the document is encrypted"),this.R1().then((e=>{if(e)return e;if(!this.T1)return null;const s=this.j1(),n=this.t1.loadMeteringState();return Promise.all([s,n]).then((e=>{const s=e[0],n=e[1],i={};return t&&(i.encryption={encryptedDocumentKey:t}),3===s&&n&&(this.u1.clear(),i.metering={state:n},this.t1.rememberMeteringEntitlementsWereFetched()),this.u1.getEntitlements(i).then((t=>this.createAmpEntitlement(t)))}))}))}createAmpEntitlement(t){t.isReadyToPay&&(this.C1=!0);let e,s=t.getEntitlementForThis(),n=!1;if(s&&s.source)n=!0;else{if(!t.entitlements.length||!t.entitlements[0].products.length)return null;s=t.entitlements[0]}return t.ack(),e=n?"google:metering"===s.source?"METERING":Bi:null,new Fi({source:s.source,raw:t.raw,service:Vi,granted:n,grantReason:e,dataObject:s.json(),decryptedDocumentKey:t.decryptedDocumentKey})}getPlatformKey(){return Vi}activate(t,e,s){const n=e||t,i=this.j1(),r=this.t1.loadMeteringState();Promise.all([i,r]).then((t=>{const e=t[0],i=t[1];if(3===e){if(!n.granted&&!i)return void this.U1().then(s);if(n.granted&&!n.isSubscriber())return void this.u1.consumeShowcaseEntitlementJwt(n.raw,s)}n.granted?n.isSubscriber()||this.u1.showAbbrvOffer({list:"amp"}):this.u1.showOffers({list:"amp"})}))}U1(){const t=Ai.show({iframeUrl:this.w1.googleSignInHelperUrl}),e=this.t1.getReaderId("local");return Promise.all([t,e]).then((t=>{const e=t[0],s=t[1],n=this.w1.extendedAccessRegistrationUrl,i={googleSignInDetails:e,ampReaderId:s};return this.l1.sendPostToPublisher(n,i)})).then((t=>{const e=t&&t.metering&&t.metering.state;return this.t1.saveMeteringState(e)}))}reset(){this.u1.reset()}isPingbackEnabled(){return!1}pingbackReturnsAllEntitlements(){return!1}pingback(){}getSupportedScoreFactor(t){switch(t){case"supportsViewer":return this.A1?1:0;case"isReadyToPay":return this.C1?1:0;default:return 0}}I1(t){const e=t.getParam("viewerUrl");e?this.A1=$i.test(Pi(e).hostname):t.getViewerOrigin().then((t=>{t&&(this.A1=$i.test(Pi(t).hostname))}))}getBaseScore(){return this.w1.baseScore||0}executeAction(t,e){let s,n;if(!e||!this.Ci.getElementById(e).hasAttribute("subscriptions-google-rtc"))return e&&this._1&&(s=w(this._1,`${e}.sku`),n=w(this._1,`${e}.carouselOptions`)),t==Li?(s?this.u1.subscribe(s):n?(n.isClosable=!0,this.u1.showOffers(n)):this.u1.showOffers({list:"amp",isClosable:!0}),Promise.resolve(!0)):t==Si?(s?this.u1.contribute(s):n?(n.isClosable=!0,this.u1.showContributionOptions(n)):this.u1.showContributionOptions({list:"amp",isClosable:!0}),Promise.resolve(!0)):"login"==t?(this.S1(),Promise.resolve(!0)):Promise.resolve(!1)}decorateUI(t,e,s){const n=s||{};switch(e){case Li:t.textContent="",this.u1.attachButton(t,s,(()=>{}));break;case"subscribe-smartbutton":case"subscribe-smartbutton-light":case"subscribe-smartbutton-dark":t.textContent="",n.theme="subscribe-smartbutton-dark"===e?"dark":"light",n.lang=O(t.getAttribute("subscriptions-lang"),"subscribe-smartbutton must have a language attribute");const i=t.getAttribute("subscriptions-message-text-color");i&&(n.messageTextColor=i);const r=t.getAttribute("subscriptions-message-number");r&&(n.messageNumber=r),this.u1.attachSmartButton(t,n,(()=>{}))}this.L1.then((()=>{this.br.mutate((()=>Object.keys(this._1).forEach((t=>{const e=this.Ci.getElementById(t);e&&(S(e.hasAttribute("subscriptions-google-rtc")),e.setAttribute("subscriptions-google-rtc-set",""),e.removeAttribute("subscriptions-google-rtc"))}))))}))}},Yi=class{constructor(t){this.eR=M(t,"xhr"),this.i=t}fetchCredentialedJson(t){return this.eR.fetchJson(t,{credentials:"include",prerenderSafe:!0}).then((t=>t.json()))}fetch(t,e){return this.eR.fetch(t,e)}sendPost(t,e){const s={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},credentials:"include",body:"f.req="+JSON.stringify(e.toArray(!1))};return this.fetch(t,s).then((t=>t&&t.json()||{}))}sendBeacon(t,e){const s="application/x-www-form-urlencoded;charset=UTF-8",n="f.req="+JSON.stringify(e.toArray(!1)),i=class{static getTop(t){return t.top}static getLocation(t){return t.location}static getDocumentReferrer(t){return t.document.referrer}static getHostname(t){return t.location.hostname}static getUserAgent(t){return t.navigator.userAgent}static getUserLanguage(t){return t.navigator.userLanguage||t.navigator.language}static getDevicePixelRatio(){return self.devicePixelRatio||1}static getSendBeacon(t){if(t.navigator.sendBeacon)return t.navigator.sendBeacon.bind(t.navigator)}static getXMLHttpRequest(t){return t.XMLHttpRequest}static getImage(t){return t.Image}}.getSendBeacon(this.i);if(i)return void i(t,new Blob([n],{type:s}));const r={method:"POST",headers:{"Content-Type":s},credentials:"include",body:n};this.fetch(t,r)}sendPostToPublisher(t,e){const s={method:"POST",headers:{"Content-Type":"application/json"},ampCors:!0,credentials:"include",body:JSON.stringify(e)};return this.fetch(t,s).then((t=>t&&t.json()||{}))}};t.registerServiceForDoc("subscriptions-google",(function(t){const e=new class{constructor(t){this.Ci=t}createPlatform(t,e){return new Hi(this.Ci,t,e)}}(t);return(t=>W(t,"subscriptions","amp-subscriptions"))(t.getHeadNode()).then((t=>{t.registerPlatform(Vi,((t,s)=>e.createPlatform(t,s)))})),e}))})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/**
 * @license
 * Copyright 2017 The Web Activities Authors. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/** @license
Math.uuid.js (v1.4)
http://www.broofa.com
mailto:robert@broofa.com
Copyright (c) 2010 Robert Kieffer
Dual licensed under the MIT and GPL licenses.
*/}});
//# sourceMappingURL=amp-subscriptions-google-0.1.mjs.map