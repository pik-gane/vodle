;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-gwd-animation",ev:"0.1",l:!0,f:function(t,n){(()=>{var{hasOwnProperty:n,toString:e}=Object.prototype;function i(t,e){return n.call(t,e)}function s(t){return(t.ownerDocument||t).defaultView}function o(t){return CSS.escape(t)}var r=self.AMP_CONFIG||{},a=("string"==typeof r.thirdPartyFrameRegex?new RegExp(r.thirdPartyFrameRegex):r.thirdPartyFrameRegex,("string"==typeof r.cdnProxyRegex?new RegExp(r.cdnProxyRegex):r.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function c(t){if(!self.document||!self.document.head)return null;if(self.location&&a.test(self.location.origin))return null;const n=self.document.head.querySelector(`meta[name="${t}"]`);return n&&n.getAttribute("content")||null}r.thirdPartyUrl,r.thirdPartyFrameHost,r.cdnUrl||c("runtime-host"),r.errorReportingUrl,r.betaErrorReportingUrl,r.localDev,r.geoApiUrl||c("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var u=self.__AMP_LOG;function l(t){return u.user||(u.user=h()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(u.user.win,t)?u.userForEmbed||(u.userForEmbed=h()):u.user}function h(t){return function(t,n){throw new Error("failed to call initLogConstructor")}()}function d(t,n,e,i,s,o,r,a,c,u,l){return t}function f(t,n,e,i,s,o,r,a,c,u,h){return l().assert(t,n,e,i,s,o,r,a,c,u,h)}function g(t,n){const e=function(t){const n=_(t);return n.isSingleDoc()?n.win:n}(_(t));return A(e,n)?P(e,n):null}function m(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}function _(t){return t.nodeType?(n=s(t),function(t,n){return P(t=m(t),n)}(n,"ampdoc")).getAmpDoc(t):t;var n}function P(t,n){d(A(t,n));const e=function(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}(t)[n];return e.obj||(d(e.ctor),d(e.context),e.obj=new e.ctor(e.context),d(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function A(t,n){const e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}var v=t=>g(t,"action"),p="gwd-page-wrapper",E="gwd-pause-animation",w="gwd-play-animation",T="data-gwd-label-animation",b="gwd.timelineEvent",R=["animationend","webkitAnimationEnd"],I="__AMP_GWD_GOTO_COUNTERS__",M="GWD";new Set(["c","v","a","ad"]);var y="amp-gwd-animation",$={"play":["args.id"],"pause":["args.id"],"togglePlay":["args.id"],"gotoAndPlay":["args.id","args.label"],"gotoAndPause":["args.id","args.label"],"gotoAndPlayNTimes":["args.id","args.label","args.N","event.detail.eventName"],"setCurrentPage":["args.index"]},C=class extends t.BaseElement{constructor(t){super(t),this.Gut="",this.Nut=null,this.Wut=this.Fut.bind(this)}buildCallback(){this.Gut=this.element.getAttribute("timeline-event-prefix")||"";const t=function(t,n){const e=(t.ownerDocument||t).defaultView,i=n||m(e);if(e&&e!=i&&m(e)==i)try{return e.frameElement}catch(t){}return null}(this.element,this.getAmpDoc().win);t&&(this.Nut=t.__AMP_EMBED__),this.Sst().addEventListener(b,this.Wut,!0);const n=this.qut();if(n){f(this.element.id,`The ${y} element must have an id.`);const t=`${this.element.id}.setCurrentPage(index=event.index)`;!function(t,n,e,i){let s;const o=n.getAttribute("on")||"",r="slideChange:",a=o.indexOf(r);if(-1!=a){const t=a+r.length;s=o.substr(0,t)+i+","+o.substr(t)}else s=o,s&&(s+=";"),s+=`slideChange:${i}`;v(t).setActions(n,s)}(this.element,n,0,t)}const e=this.fF.bind(this);for(const t in $)this.registerAction(t,e)}Sst(){return this.Nut?this.Nut.win.document:this.getAmpDoc().getRootNode()}qut(){return this.Sst().getElementById("pagedeck")}fF(t){this.Hut(t)&&this.Zut(t)}Hut(t){if("setCurrentPage"==t.method){const n=this.qut();return n&&t.source==n}return!0}Zut(t){const n=f(g(this.element,"gwd"),"Cannot execute action because the GWD service is not registered."),e=$[t.method].map((n=>function(t,n){const e=n.split(".");let i=t;for(let t=0;t<e.length;t++){const n=e[t];if(!n||!i||void 0===i[n]){i=void 0;break}i=i[n]}return i}(t,n)));n[t.method].apply(n,e)}Fut(t){const n=v(this.element),e=function(t){return t.detail}(t).eventName,i=`${this.Gut}${e}`;n.trigger(this.element,i,t,3)}detachedCallback(){return this.Sst().removeEventListener(b,this.Wut,!0),!0}};t.registerServiceForDoc("gwd",class{constructor(t){this.Ci=t,this.i=t.win,this.am=this.i.document,this.But=this.Jut.bind(this),t.whenReady().then((()=>{const t=this.am.body;!function(t,n,e){if(n(t))e();else{const i=new(s(t).MutationObserver)((()=>{n(t)&&(i.disconnect(),e())}));i.observe(t,{childList:!0})}}(t,(()=>!!t.querySelector(`.${o(p)}`)),this.de.bind(this))}))}de(){this.Kut(),this.setCurrentPage(0)}setEnabled(t){this.am.body.classList.toggle("i-amphtml-gwd-animation-disabled",!t)}setCurrentPage(t){const n=this.am.body.querySelectorAll(`.${o(p)}`);if(0==n.length)return;const e=(i=`.${o(p)}.${o(w)}`,this.am.body.querySelector(function(t,n){return t.replace(/^|,/g,"$&:scope ")}(i)));var i;e&&this.Qut(e);const s=n[t];s?this.Yut(s):l().error(M,"Could not find page with index "+t+".")}Yut(t){t.classList.add(w)}Qut(t){var n;t.classList.remove(w),[t].concat((n=t.querySelectorAll("*"),n?Array.prototype.slice.call(n):[])).forEach((t=>this.tdt(t)))}tdt(t){if(t.classList.remove(E),t.hasAttribute(T)){const n=t.getAttribute(T);t.classList.remove(n),t.removeAttribute(T)}delete t[I]}play(t){const n=this.getReceiver(t);n&&n.classList.remove(E)}pause(t){const n=this.getReceiver(t);n&&n.classList.add(E)}togglePlay(t){const n=this.getReceiver(t);n&&n.classList.toggle(E)}gotoAndPlay(t,n){const e=this.getReceiver(t);e&&this.ndt(e,n)}gotoAndPause(t,n){const e=this.getReceiver(t);e&&(this.ndt(e,n),this.i.setTimeout((()=>{this.pause(t)}),40))}gotoAndPlayNTimes(t,n,e,s){if(e<=0)return void l().error(M,`Invalid maxCount parameter: ${e}`);if(!s)return void l().error(M,"Event name required but not specified.");const o=this.getReceiver(t);if(!o)return;const r=`${s}_${n}`,a=function(t,n){return t[I]&&i(t[I],n)?t[I][n]:0}(o,r);a<e&&(this.ndt(o,n),function(t,n,e){t[I]||(t[I]={}),i(t[I],n)||(t[I][n]=0),t[I][n]=e}(o,r,a+1))}getReceiver(t){if("document.body"==t)return this.am.body;const n=this.am.getElementById(t);return n&&n.classList?n:(l().error(M,`Could not get receiver with id ${t}.`),null)}ndt(t,n){t.classList.remove(E);const e=t.getAttribute(T);e&&(t.classList.remove(e),t.removeAttribute(T)),e==n&&function(t){const n="__AMP_GWD_TEMP";self[n]=t.offsetWidth,delete self[n]}(t),t.classList.add(n),t.setAttribute(T,n)}Jut(t){const n=t.target.getAttribute("data-event-name");if(!n)return;const e={"eventName":n,"sourceEvent":t},i=function(t,n,e,i){const s={detail:e};return Object.assign(s,void 0),new t.CustomEvent("gwd.timelineEvent",s)}(this.i,0,e);this.am.dispatchEvent(i)}Kut(){for(let t=0;t<R.length;t++)this.am.body.addEventListener(R[t],this.But,!0)}edt(){for(let t=0;t<R.length;t++)this.am.body.removeEventListener(R[t],this.But,!0)}dispose(){this.edt()}}),t.registerElement(y,C,".i-amphtml-gwd-animation-disabled [class*=-animation],.i-amphtml-gwd-animation-disabled [class*=gwdanimation]{animation:none!important}\n/*# sourceURL=/extensions/amp-gwd-animation/0.1/amp-gwd-animation.css*/")})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-gwd-animation-0.1.mjs.map