;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-iframe",ev:"0.1",l:!0,f:function(t,n){(()=>{function n(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function e(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,i)}return e}function i(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?e(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function s(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o;function u(){return o||(o=Promise.resolve(void 0))}var{isArray:a}=Array;function c(t,n){const e=[];let i=0;for(let r=0;r<t.length;r++){const s=t[r];n(s,r,t)?e.push(s):(i<r&&(t[i]=s),i++)}return i<t.length&&(t.length=i),e}function l(t,n){const e=t.length-n.length;return e>=0&&t.indexOf(n,e)==e}var h,f,{hasOwnProperty:m,toString:d}=Object.prototype;function p(t){const n=Object.create(null);return t&&Object.assign(n,t),n}function v(t,n,e,i,r,s,o,u,a,c,l){return t}function g(t){const n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;const{message:e,stack:i}=t,r=new Error(e);for(const n in t)r[n]=t[n];return r.stack=i,r}function b(t){let n=null,e="";for(var i,r=s(arguments,!0);!(i=r()).done;){const t=i.value;t instanceof Error&&!n?n=g(t):(e&&(e+=" "),e+=t)}return n?e&&(n.message=e+": "+n.message):n=new Error(e),n}function w(t){var n,e;null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t)}function y(t){const n=b.apply(null,arguments);setTimeout((()=>{throw w(n),n}))}function P(t,...n){try{return t.apply(null,n)}catch(t){y(t)}}function A(t){return JSON.parse(t)}function _(t,n){try{return A(t)}catch(t){return null==n||n(t),null}}function I(t){return"string"==typeof t&&t.startsWith("amp-")&&-1!=t.indexOf("{")}function M(t){return(t.ownerDocument||t).defaultView}function O(t){var n;null===(n=t.parentElement)||void 0===n||n.removeChild(t)}function S(t,n,e,i){for(var r,o,u=s(a(r=t)?r:[r],!0);!(o=u()).done;){const t=o.value,r=n.getAttribute(t);null!==r?e.setAttribute(t,r):i&&e.removeAttribute(t)}}var j=["Webkit","webkit","Moz","moz","ms","O","o"],E={"getPropertyPriority":()=>"","getPropertyValue":()=>""};function T(t,n,e,i,r){const s=function(t,n,e){if(n.startsWith("--"))return n;f||(f=p());let i=f[n];if(!i||e){if(i=n,void 0===t[n]){const e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),r=function(t,n){for(let e=0;e<j.length;e++){const i=j[e]+n;if(void 0!==t[i])return i}return""}(t,e);void 0!==t[r]&&(i=r)}e||(f[n]=i)}return i}(t.style,n,r);if(!s)return;const o=i?e+i:e;t.style.setProperty(function(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return j.some((t=>n.startsWith(t+"-")))?`-${n}`:n}(s),o)}function x(t,n){return t.getComputedStyle(n)||E}var R=/vertical/,k=new WeakMap,z=new WeakMap,C=new WeakMap;function V(t){let n=k.get(t);return n||(n=new t.ResizeObserver(L),k.set(t,n)),n}function L(t){const n=new Set;for(let e=t.length-1;e>=0;e--){const i=t[e],{target:r}=i;if(n.has(r))continue;n.add(r);const s=z.get(r);if(s){C.set(r,i);for(let t=0;t<s.length;t++){const{callback:n,type:e}=s[t];N(e,n,i)}}}}function N(t,n,e){if(0==t){const{contentRect:t}=e,{height:i,width:r}=t;P(n,{width:r,height:i})}else if(1==t){const{borderBoxSize:t}=e;let i;if(t)i=t.length>0?t[0]:{inlineSize:0,blockSize:0};else{const{target:t}=e,n=M(t),r=R.test(x(n,t).writingMode),{offsetHeight:s,offsetWidth:o}=t;let u,a;r?(a=o,u=s):(u=o,a=s),i={inlineSize:u,blockSize:a}}P(n,i)}}var G=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function $(t,n=""){try{return decodeURIComponent(t)}catch(t){return n}}var D=self.AMP_CONFIG||{},F=("string"==typeof D.thirdPartyFrameRegex?new RegExp(D.thirdPartyFrameRegex):D.thirdPartyFrameRegex,("string"==typeof D.cdnProxyRegex?new RegExp(D.cdnProxyRegex):D.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/);function W(t){if(!self.document||!self.document.head)return null;if(self.location&&F.test(self.location.origin))return null;const n=self.document.head.querySelector(`meta[name="${t}"]`);return n&&n.getAttribute("content")||null}D.thirdPartyUrl;var U=D.thirdPartyFrameHost||"ampproject.net";D.cdnUrl||W("runtime-host"),D.errorReportingUrl,D.betaErrorReportingUrl,D.localDev,D.geoApiUrl||W("amp-geo-api"),self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var q=self.__AMP_LOG;function B(t){return q.user||(q.user=Y()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(q.user.win,t)?q.userForEmbed||(q.userForEmbed=Y()):q.user}function Y(t){return function(t,n){throw new Error("failed to call initLogConstructor")}()}function H(t,n,e,i,r,s,o,u,a,c,l){return t}function J(t,n,e,i,r,s,o,u,a,c,l){return B().assert(t,n,e,i,r,s,o,u,a,c,l)}function X(t,n){return et(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function Z(t,n){const e=nt(tt(t));return st(e,n)?et(e,n):null}function K(t,n){return function(t,n){const e=it(t,n);if(e)return e;const i=rt(t);return i[n]=function(){const t=new class{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}},{promise:n,reject:e,resolve:i}=t;return n.catch((()=>{})),{obj:null,promise:n,resolve:i,reject:e,context:null,ctor:null}}(),i[n].promise}(nt(t),n)}function Q(t,n){return it(nt(t),n)}function tt(t){return t.nodeType?(n=M(t),X(n,"ampdoc")).getAmpDoc(t):t;var n}function nt(t){const n=tt(t);return n.isSingleDoc()?n.win:n}function et(t,n){H(st(t,n));const e=rt(t)[n];return e.obj||(H(e.ctor),H(e.context),e.obj=new e.ctor(e.context),H(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function it(t,n){const e=rt(t)[n];return e?e.promise?e.promise:(et(t,n),e.promise=Promise.resolve(e.obj)):null}function rt(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function st(t,n){const e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}var ot="__AMP__EXPERIMENT_TOGGLES";var ut,at=t=>et(t,"timer"),ct=t=>function(t,n,e,i){const r=Q(t,n);if(r)return r;const s=tt(t);return s.whenExtensionsKnown().then((()=>{const t=s.getExtensionVersion(e);return t?X(s.win,"extensions").waitForExtension(e,t):null})).then((e=>e?i?Q(t,n):K(t,n):null))}(t,"consentPolicyManager","amp-consent"),lt=t=>Z(t,"url");function ht(t){return t.data}new Set(["c","v","a","ad"]);var ft="unlisten";function mt(t,n,e){const i=function(t,n){let{listeningFors:e}=t;return!e&&n&&(e=t.listeningFors=Object.create(null)),e||null}(t,e);if(!i)return i;let r=i[n];return!r&&e&&(r=i[n]=[]),r||null}function dt(t,n){for(let e=n;e&&e!=e.parent;e=e.parent)if(e==t)return!0;return!1}function pt(t){const n={"sentinel":ft};for(let e=t.length-1;e>=0;e--){const i=t[e];if(!i.frame.contentWindow){t.splice(e,1);const{events:r}=i;for(const t in r)r[t].splice(0,1/0).forEach((t=>{t(n)}))}}}function vt(t,n,e,i,r,s){H(t.src),H(!t.parentNode),H(e);const o=t.ownerDocument.defaultView;!function(t){t.listeningFors||t.addEventListener("message",(function(n){if(!ht(n))return;const e=function(t){return"string"==typeof t&&(t="{"==t.charAt(0)?_(t,(t=>{}))||null:I(t)?function(t){if(!I(t))return null;const n=t.indexOf("{");return v(-1!=n),_(t.substr(n),(n=>{y(new Error(`MESSAGING: Failed to parse message: ${t}\n${n.message}`))}))}(t):null),t}(ht(n));if(!e||!e.sentinel)return;const i=function(t,n,e,i){const r=mt(t,n);if(!r)return r;let s;for(let t=0;t<r.length;t++){const n=r[t],{contentWindow:e}=n.frame;if(e){if(i==e||dt(e,i)){s=n;break}}else setTimeout(pt,0,r)}return s?s.events:null}(t,e.sentinel,n.origin,n.source);if(!i)return;let r=i[e.type];if(r){r=r.slice();for(let t=0;t<r.length;t++)(0,r[t])(e,n.source,n.origin,n)}}))}(o);const u=function(t,n,e){const i=mt(t,gt(n,e),!0);let r;for(let t=0;t<i.length;t++){const e=i[t];if(e.frame===n){r=e;break}}return r||(r={frame:n,events:Object.create(null)},i.push(r)),r.events}(o,t,i),a=(c=t.src,ut||(ut=self.document.createElement("a")),function(t,n,e){return t.href="",new URL(n,t.href)}(ut,c)).origin;var c;let l,h=u[n]||(u[n]=[]),f=function(n,i,o,u){if("amp"==n.sentinel){if(i!=t.contentWindow)return;const n="null"==o&&s;if(a!=o&&!n)return}(r||i==t.contentWindow)&&(n.sentinel!=ft?e(n,i,o,u):l())};return h.push(f),l=function(){if(f){const t=h.indexOf(f);t>-1&&h.splice(t,1),f=null,h=null,e=null}}}function gt(t,n){return n?t.getAttribute("data-amp-3p-sentinel"):"amp"}var bt=[[300,250],[320,50],[300,50],[320,100]],wt=[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1];function yt(t){return{"time":t.time,"rootBounds":t.rootBounds,"boundingClientRect":t.boundingClientRect,"intersectionRect":t.intersectionRect,"intersectionRatio":t.intersectionRatio}}Date.now();var Pt={"AMP-FX-FLYING-CARPET":!0,"AMP-LIGHTBOX":!0,"AMP-STICKY-AD":!0,"AMP-LIGHTBOX-GALLERY":!0};function At(t,n){const{position:e}=x(n,t);return"fixed"==e||"sticky"==e}var _t="amp-iframe",It=["allowfullscreen","allowpaymentrequest","allowtransparency","allow","frameborder","referrerpolicy","scrolling","tabindex","title"],Mt=0,Ot=class extends t.BaseElement{constructor(t){super(t),this.wv=null,this.Pv=!1,this.Av=!1,this._v=!1,this.Iv=!1,this.Mv=null,this.Ov=!1,this.Sv=null,this.jv="",this.Ev=null,this.iframeSrc=null,this.cf=null,this.Tv=null,this.xv=!1,this.pf=new class{constructor(t){this.yf=t,this.mf=!1,this.bf=!1,this._f=this._f.bind(this)}updatePlaying(t){t!==this.mf&&(this.mf=t,t?(this.bf=!1,function(t,n){!function(t,n,e){const i=t.ownerDocument.defaultView;if(!i)return;let r=z.get(t);if(r||(r=[],z.set(t,r),V(i).observe(t)),!r.some((t=>t.callback===e&&1===t.type))){r.push({type:1,callback:e});const n=C.get(t);n&&setTimeout((()=>N(1,e,n)))}}(t,0,n)}(this.yf,this._f)):function(t,n){!function(t,n,e){const i=z.get(t);if(i&&(c(i,(t=>t.callback===e&&1===t.type)),0==i.length)){z.delete(t),C.delete(t);const n=t.ownerDocument.defaultView;n&&V(n).unobserve(t)}}(t,0,n)}(this.yf,this._f))}_f({blockSize:t,inlineSize:n}){const e=n>0&&t>0;if(e===this.bf)return;this.bf=e;const i=this.yf;e||i.pause()}}(this.element)}isLayoutSupported(t){return function(t){return"fixed"==t||"fixed-height"==t||"responsive"==t||"fill"==t||"flex-item"==t||"fluid"==t||"intrinsic"==t}(t)}ve(t,n,e=""){const{element:i}=this,r=lt(i),s=r.parse(t),{hostname:o,origin:u,protocol:a}=s;J(r.isSecure(t)||"data:"==a,"Invalid <amp-iframe> src. Must start with https://. Found %s",i);const c=r.parse(n);return J(!this.Rv(e,"allow-same-origin")||u!=c.origin&&"data:"!=a,"Origin of <amp-iframe> must not be equal to container %s if allow-same-origin is set. See https://github.com/ampproject/amphtml/blob/main/docs/spec/amp-iframe-origin-policy.md for details.",i),J(!(l(o,`.${U}`)||l(o,".ampproject.org")),"amp-iframe does not allow embedding of frames from ampproject.*: %s",t),t}kv(){const t=this.element.getLayoutBox(),n=Math.min(600,.75*this.getViewport().getSize().height);J(t.top>=n,"<amp-iframe> elements must be positioned outside the first 75% of the viewport or 600px from the top (whichever is smaller): %s  Current position %s. Min: %sPositioning rules don't apply for iframes that use `placeholder`.See https://github.com/ampproject/amphtml/blob/main/extensions/amp-iframe/amp-iframe.md#iframe-with-placeholder for details.",this.element,t.top,n)}Rv(t,n){return new RegExp(`\\s${n}\\s`,"i").test(" "+t+" ")}zv(t){if(!t)return;const{hash:n,protocol:e}=lt(this.element).parse(t);return"data:"==e||n&&"#"!=n?t:function(t){const n=t.indexOf("#");return-1==n?t:t.substring(0,n)}(t)+"#amp=1"}Cv(t,n){if(t)return J(!(" "+n+" ").match(/\s+allow-same-origin\s+/i),"allow-same-origin is not allowed with the srcdoc attribute %s.",this.element),"data:text/html;charset=utf-8;base64,"+(i=t,e="undefined"!=typeof TextEncoder?(new TextEncoder).encode(i):function(t){const n=new Uint8Array(t.length);for(let e=0;e<t.length;e++){const i=t.charCodeAt(e);v(i<=255),n[e]=i}return n}(unescape(encodeURIComponent(i))),btoa(function(t){const n=new Array(t.length);for(let e=0;e<t.length;e++)n[e]=String.fromCharCode(t[e]);return n.join("")}(e)));var e,i}preconnectCallback(t){var n;this.iframeSrc&&(n=this.win,X(n,"preconnect")).url(this.getAmpDoc(),this.iframeSrc,t)}buildCallback(){this.jv=this.element.getAttribute("sandbox");const t=this.zv(this.element.getAttribute("src"))||this.Cv(this.element.getAttribute("srcdoc"),this.jv);this.iframeSrc=this.ve(t,window.location.href,this.jv),this.wv=this.getPlaceholder(),this.Pv=!!this.wv,this.Ov=this.element.hasAttribute("resizable"),this.Ov&&this.element.setAttribute("scrolling","no"),this.element.hasAttribute("frameborder")||this.element.setAttribute("frameborder","0"),this.cf=function(t){if("no"!=t.getAttribute("scrolling")){const n=t.ownerDocument.createElement("i-amphtml-scroll-container");return t.appendChild(n),n}return t}(this.element),this.Vv()}onLayoutMeasure(){const{element:t}=this;this.Av=function(t){const{height:n,width:e}=t.getLayoutSize();for(let t=0;t<bt.length;t++){const i=bt[t][0],r=bt[t][1];if(!(r>n)&&!(i>e)&&n-r<=20&&e-i<=20)return!0}return!1}(t),this._v=this.Lv(),this.Iv=this.Av&&!function(t,n){let e=!1,i=0,r=t;do{Pt[r.tagName]?(i++,e=!1):At(r,n)&&(e=!0),r=r.parentElement}while(r&&"BODY"!=r.tagName);return!e&&i<=1}(t,this.win)}Lv(){return function(t){const{height:n,width:e}=t.getLayoutSize();return!(e>10||n>10||function(t,n){return t.closest?t.closest(".i-amphtml-overlay"):function(t,n,e){let i;for(i=t;i&&void 0!==i;i=i.parentElement)if(n(i))return i;return null}(t,(t=>function(t,n){const e=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return!!e&&e.call(t,".i-amphtml-overlay")}(t)))}(t))}(this.element)}layoutCallback(){if(J(!this.Iv,"amp-iframe is not used for displaying fixed ad. Please use amp-sticky-ad and amp-ad instead."),this.Pv||this.kv(),this.Ov&&J(this.getOverflowElement(),"Overflow element must be defined for resizable frames: %s",this.element),!this.iframeSrc)return u();if(this._v&&!this.getAmpDoc().registerSingleton(1))return console.error("Only 1 analytics/tracking iframe allowed per page. Please use amp-analytics instead or file a GitHub issue for your use case: https://github.com/ampproject/amphtml/issues/new/choose"),u();const t=this.element.ownerDocument.createElement("iframe");this.Mv=t,t.classList.add("i-amphtml-fill-content"),t.name="amp_iframe"+Mt++,this.Pv&&T(t,"zIndex",-1),S(It,this.element,t);let n=t.getAttribute("allow")||"";return n=n.replace("autoplay","autoplay-disabled"),t.setAttribute("allow",n),function(t,n,e){const i=e||"";n.setAttribute("sandbox",i)}(this.element,t,this.jv),t.src=this.iframeSrc,this._v||(this.Sv=new class{constructor(t,n){this.Nv=t,this.Gv=null,this.$v=new class{constructor(t,n,e,i){this.Mv=t,this.Dv=e,this.Fv=[],this.Wv=vt(this.Mv,n,((t,n,e)=>{this.Fv.some((t=>t.win==n))||this.Fv.push({win:n,origin:e}),i(t,n,e)}),this.Dv,this.Dv)}send(t,n){c(this.Fv,(t=>!t.win.parent)),function(t,n,e,i,r){if(!t.contentWindow)return;i.type=e,i.sentinel=gt(t,r);let s=i;r&&(s="amp-"+JSON.stringify(i));for(let t=0;t<n.length;t++){const e=n[t];e.win.postMessage(s,e.origin)}}(this.Mv,this.Fv,t,n,this.Dv)}destroy(){this.Wv(),this.Fv.length=0}}(n,"send-intersections",!1,(()=>{this.Uv()})),this.Gv=new IntersectionObserver((t=>{this.$v.send("intersection",{"changes":t.map(yt)})}),{threshold:wt})}Uv(){this.Gv.observe(this.Nv.element)}destroy(){this.Gv.disconnect(),this.Gv=null,this.$v.destroy(),this.$v=null}}(this,t)),t.onload=()=>{t.readyState="complete",this.qv(),this._v&&(this.iframeSrc=null,at(this.win).promise(5e3).then((()=>{O(t),this.element.setAttribute("amp-removed",""),this.Mv=null})))},vt(t,"embed-size",(t=>{this.Bv(t.height,t.width)}),void 0,void 0,!0),this.Ev=function(t,n,e,i){let r=t,s=e,o=t=>{try{return s(t)}catch(t){var n,e;throw null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t),t}};const u=function(){if(void 0!==h)return h;h=!1;try{const t={get capture(){return h=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return h}();return r.addEventListener(n,o,!!u&&i),()=>{null==r||r.removeEventListener(n,o,!!u&&i),s=null,r=null,o=null}}(this.win,"message",(t=>this.Yv(t)),void 0),this.Pv&&vt(t,"embed-ready",this.qv.bind(this)),vt(t,"send-consent-data",((t,n,e)=>{this.Hv(n,e)})),this.cf.appendChild(t),this.loadPromise(t).then((()=>{this.cf!=this.element&&at(this.win).delay((()=>{this.mutateElement((()=>{this.cf.classList.add("amp-active")}))}),1e3),this.pf.updatePlaying(!0)}))}Yv(t){if(!this.Mv||t.source!==this.Mv.contentWindow)return;const n=ht(t);if("string"!=typeof n||!n.startsWith("pym"))return;const e=n.split(/xPYMx/);"height"===e[2]?this.Bv(parseInt(e[3],10),void 0):"width"===e[2]&&this.Bv(void 0,parseInt(e[3],10))}Hv(t,n){var e,r;(e=this.element,r=this.getConsentPolicy(),ct(e).then((t=>{const n={"consentMetadata":t&&t.getConsentMetadataInfo,"consentString":t&&t.getConsentStringInfo,"consentPolicyState":t&&t.whenPolicyResolved,"consentPolicySharedData":t&&t.getMergedSharedData};return t?Promise.all(Object.keys(n).map((e=>n[e].call(t,r||"default").then((t=>({[e]:t})))))).then((t=>Object.assign.apply({},t))):n}))).then((e=>{this.Jv(t,n,i({"sentinel":"amp","type":"consent-data"},e))}))}Jv(t,n,e){t.postMessage(e,n)}unlayoutCallback(){return this.Ev&&(this.Ev(),this.Ev=null),this.Mv&&(O(this.Mv),this.wv&&this.togglePlaceholder(!0),this.Mv=null,this.Sv&&(this.Sv.destroy(),this.Sv=null)),this.pf.updatePlaying(!1),!0}getLayoutPriority(){return this.Av?2:this._v?1:super.getLayoutPriority()}mutatedAttributesCallback(t){const n=t.src;void 0!==n&&(this.iframeSrc=this.zv(n),this.Mv&&(this.Mv.src=this.ve(this.iframeSrc,window.location.href,this.jv))),this.Mv&&t.title&&S(["title"],this.element,this.Mv)}unlayoutOnPause(){return!0}qv(){this.wv&&this.getVsync().mutate((()=>{this.Mv&&(T(this.Mv,"zIndex",0),this.togglePlaceholder(!1))}))}firstLayoutCompleted(){}throwIfCannotNavigate(){if(!this.Rv(this.jv,"allow-top-navigation"))throw B().createError('"AMP.navigateTo" is only allowed on <amp-iframe> when its "sandbox" attribute contains "allow-top-navigation".')}Bv(t,n){if(!this.Ov)return void(this.xv||(this.user().error(_t,"Ignoring embed-size request because this iframe is not resizable",this.element),this.xv=!0));if(t<100)return void this.user().error(_t,"Ignoring embed-size request because the resize height is less than 100px. If you are using amp-iframe to display ads, consider using amp-ad instead.",this.element);let e,i;t=parseInt(t,10),isNaN(t)||(e=Math.max(t+(this.element.offsetHeight-this.Mv.offsetHeight),t)),n=parseInt(n,10),isNaN(n)||(i=Math.max(n+(this.element.offsetWidth-this.Mv.offsetWidth),n)),void 0!==e||void 0!==i?this.attemptChangeSize(e,i).then((()=>{void 0!==e&&this.element.setAttribute("height",e),void 0!==i&&this.element.setAttribute("width",i),this.element.overflowCallback(!1,e,i)}),(()=>{})):this.user().error(_t,"Ignoring embed-size request because no width or height value is provided",this.element)}Vv(){if(!function(t,n){const e=function(t){var n,e,r,o,u;if(t[ot])return t[ot];t[ot]=p();const c=t[ot];v(c);const l=i(i({},null!==(n=t.AMP_CONFIG)&&void 0!==n?n:{}),null!==(e=t.AMP_EXP)&&void 0!==e?e:A((null===(r=t.__AMP_EXP)||void 0===r?void 0:r.textContent)||"{}"));for(const t in l){const n=l[t];"number"==typeof n&&n>=0&&n<=1&&(c[t]=Math.random()<n)}const h=null===(o=t.AMP_CONFIG)||void 0===o?void 0:o["allow-doc-opt-in"];if(a(h)&&h.length){const n=t.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(n)for(var f,m,d=s((null===(f=n.getAttribute("content"))||void 0===f?void 0:f.split(","))||[],!0);!(m=d()).done;){const t=m.value;h.includes(t)&&(c[t]=!0)}}Object.assign(c,function(t){var n;let e="";try{var i;"localStorage"in t&&(e=null!==(i=t.localStorage.getItem("amp-experiment-toggles"))&&void 0!==i?i:"")}catch(t){}const r=(null===(n=e)||void 0===n?void 0:n.split(/\s*,\s*/g))||[],o=p();for(var u,a=s(r,!0);!(u=a()).done;){const t=u.value;t&&("-"==t[0]?o[t.substr(1)]=!1:o[t]=!0)}return o}(t));const g=null===(u=t.AMP_CONFIG)||void 0===u?void 0:u["allow-url-opt-in"];if(a(g)&&g.length){const n=function(t){const n=p();if(!t)return n;let e;for(;e=G.exec(t);){const t=$(e[1],e[1]),i=e[2]?$(e[2].replace(/\+/g," "),e[2]):"";n[t]=i}return n}(t.location.originalHash||t.location.hash);for(var b,w=s(g,!0);!(b=w()).done;){const t=b.value,e=n[`e-${t}`];"1"==e&&(c[t]=!0),"0"==e&&(c[t]=!1)}}return c}(t);return!!e["iframe-messaging"]}(this.win))return;const{element:t}=this,n=t.getAttribute("src");if(n&&(this.Tv=lt(t).parse(n).origin),this.registerAction("postMessage",(t=>{this.Tv?this.Mv.contentWindow.postMessage(t.args,this.Tv):B().error(_t,'"postMessage" action is only allowed with "src"attribute with an origin.')})),!this.Tv)return;let e=0;const r=t=>{if(t.source!==this.Mv.contentWindow)return;if(t.origin!==this.Tv)return void B().error(_t,'"message" received from unexpected origin: '+t.origin+". Only allowed from: "+this.Tv);if(!this.Xv())return e++,B().error(_t,'"message" event may only be triggered from a user gesture.'),void(e>=10&&(B().error(_t,'Too many non-gesture-triggered "message" events; detaching event listener.'),this.win.removeEventListener("message",r)));const n=ht(t);let i;try{i=A(JSON.stringify(n))}catch(t){return void B().error(_t,'Data from "message" event must be JSON.')}const s=function(t,n,e,i){const r={detail:e};return Object.assign(r,void 0),new t.CustomEvent("amp-iframe:message",r)}(this.win,0,{"data":i});(t=>Z(t,"action"))(this.element).trigger(this.element,"message",s,3)};this.win.addEventListener("message",r)}Xv(){if(this.getAmpDoc().getRootNode().activeElement!==this.Mv)return!1;const t=this.win.document.createElement("audio");return n=t,(e=()=>n.play(),new Promise((t=>{t(e())}))).catch((()=>{})),!t.paused;var n,e}setTargetOriginForTesting(t){this.Tv=t}};t.registerElement(_t,Ot)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-iframe-0.1.mjs.map