;
(self.AMP=self.AMP||[]).push({m:1,v:"2203281422000",n:"amp-list",ev:"0.1",l:!0,f:function(t,i){(()=>{function i(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,s=new Array(i);e<i;e++)s[e]=t[e];return s}function e(t,e){var s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return(s=s.call(t)).next.bind(s);if(Array.isArray(t)||(s=function(t,e){if(t){if("string"==typeof t)return i(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s;function n(){return s||(s=Promise.resolve(void 0))}var r=class{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}};function o(t){return t?Array.prototype.slice.call(t):[]}var{isArray:a}=Array,{hasOwnProperty:l,toString:h}=Object.prototype;function u(t){const i=Object.create(null);return t&&Object.assign(i,t),i}function c(t,i){return l.call(t,i)}function m(t,i){if("."==i)return t;let s=t;for(var n,r=e(i.split("."),!0);!(n=r()).done;){const t=n.value;if(!(t&&s&&void 0!==s[t]&&"object"==typeof s&&c(s,t))){s=void 0;break}s=s[t]}return s}function d(t,i,e,s,n,r,o,a,l,h,u){return t}function f(t,i){return t.replace(/^|,/g,`$&${i} `)}function p(t,i){return t.querySelector(f(i,":scope"))}function b(t,i){return d(/^[\w-]+$/.test(i)),p(t,`> [${i}]`)}function _(t){for(;t.firstChild;)t.removeChild(t.firstChild)}var v,g={NODISPLAY:"nodisplay",FIXED:"fixed",FIXED_HEIGHT:"fixed-height",RESPONSIVE:"responsive",CONTAINER:"container",FILL:"fill",FLEX_ITEM:"flex-item",FLUID:"fluid",INTRINSIC:"intrinsic"},P=["Webkit","webkit","Moz","moz","ms","O","o"];function A(t){const i=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return P.some((t=>i.startsWith(t+"-")))?`-${i}`:i}function y(t,i,e){if(i.startsWith("--"))return i;v||(v=u());let s=v[i];if(!s||e){if(s=i,void 0===t[i]){const e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),n=function(t,i){for(let e=0;e<P.length;e++){const s=P[e]+i;if(void 0!==t[s])return s}return""}(t,e);void 0!==t[n]&&(s=n)}e||(v[i]=s)}return s}function R(t,i){const{style:e}=t;for(const t in i)e.setProperty(A(y(e,t)),String(i[t]),"important")}function E(t,i,e,s,n){const r=y(t.style,i,n);if(!r)return;const o=s?e+s:e;t.style.setProperty(A(r),o)}function M(t,i){for(const e in i)E(t,e,i[e])}function I(t,i){void 0===i&&(i=t.hasAttribute("hidden")),i?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function T(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function x(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);i&&(s=s.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,s)}return e}function w(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?x(Object(e),!0).forEach((function(i){T(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):x(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var V=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function L(t,i=""){try{return decodeURIComponent(t)}catch(t){return i}}function S(t){const i=u();if(!t)return i;let e;for(;e=V.exec(t);){const t=L(e[1],e[1]),s=e[2]?L(e[2].replace(/\+/g," "),e[2]):"";i[t]=s}return i}var j=self.AMP_CONFIG||{},O=("string"==typeof j.thirdPartyFrameRegex?new RegExp(j.thirdPartyFrameRegex):j.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,k=("string"==typeof j.cdnProxyRegex?new RegExp(j.cdnProxyRegex):j.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function $(t){if(!self.document||!self.document.head)return null;if(self.location&&k.test(self.location.origin))return null;const i=self.document.head.querySelector(`meta[name="${t}"]`);return i&&i.getAttribute("content")||null}var F={thirdParty:j.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:j.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:O,cdn:j.cdnUrl||$("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:k,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:j.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:j.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:j.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:j.geoApiUrl||$("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var C=self.__AMP_LOG;function N(t,i){throw new Error("failed to call initLogConstructor")}function U(t){return C.user||(C.user=z()),function(t,i){return i&&i.ownerDocument.defaultView!=t}(C.user.win,t)?C.userForEmbed||(C.userForEmbed=z()):C.user}function z(t){return N()}function H(t,i,e,s,n,r,o,a,l,h,u){return t}function D(t,i,e,s,n,r,o,a,l,h,u){return U().assert(t,i,e,s,n,r,o,a,l,h,u)}function J(t,i){return Z(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),i)}function B(t,i){return Z(Y(W(t)),i)}function G(t,i){const e=Y(W(t));return tt(e,i)?Z(e,i):null}function X(t,i){return function(t,i){const e=K(t,i);if(e)return e;const s=Q(t);return s[i]=function(){const t=new r,{promise:i,reject:e,resolve:s}=t;return i.catch((()=>{})),{obj:null,promise:i,resolve:s,reject:e,context:null,ctor:null}}(),s[i].promise}(Y(t),i)}function q(t,i){return K(Y(t),i)}function W(t){return t.nodeType?(i=t,e=(i.ownerDocument||i).defaultView,J(e,"ampdoc")).getAmpDoc(t):t;var i,e}function Y(t){const i=W(t);return i.isSingleDoc()?i.win:i}function Z(t,i){H(tt(t,i));const e=Q(t)[i];return e.obj||(H(e.ctor),H(e.context),e.obj=new e.ctor(e.context),H(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function K(t,i){const e=Q(t)[i];return e?e.promise?e.promise:(Z(t,i),e.promise=Promise.resolve(e.obj)):null}function Q(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}function tt(t,i){const e=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!e||!e.ctor)}var it,et="__AMP__EXPERIMENT_TOGGLES",st=new Set(["c","v","a","ad"]),nt=t=>"string"==typeof t?rt(t):t;function rt(t,i){return it||(it=self.document.createElement("a")),function(t,i,e){return t.href="",new URL(i,t.href)}(it,t)}function ot(t,i){return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`}function at(t){return rt(function(t){if(!function(t){return F.cdnProxyRegex.test(nt(t).origin)}(t=nt(t)))return t.href;const i=t.pathname.split("/"),e=i[1];D(st.has(e),"Unknown path prefix in url %s",t.href);const s=i[2],n="s"==s?"https://"+decodeURIComponent(i[3]):"http://"+decodeURIComponent(s);return D(n.indexOf(".")>0,"Expected a . in origin %s",n),i.splice(1,"s"==s?3:2),n+i.join("/")+function(t,i){if(!t||"?"==t)return"";const e=new RegExp("[?&](amp_(js[^&=]*|gsa|r|kit)|usqp)\\b[^&]*","g"),s=t.replace(e,"").replace(/^[?&]/,"");return s?"?"+s:""}(t.search)+(t.hash||"")}(t)).origin}var lt="i-amphtml-key",ht="i-amphtml-ignore",ut={"AMP-IMG":["src","srcset","layout","width","height"]};Object.freeze({"input":{"type":/(?:image|button)/i}}),Object.freeze({"input":{"type":/(?:button|file|image|password)/i}});var ct=Object.freeze(["form","formaction","formmethod","formtarget","formnovalidate","formenctype"]);function mt(t,i,e){const s=G(t,i);return s?Promise.resolve(s):function(t,i,e,s){const n=q(t,i);if(n)return n;const r=W(t);return r.whenExtensionsKnown().then((()=>{const t=r.getExtensionVersion(e);return t?J(r.win,"extensions").waitForExtension(e,t):null})).then((e=>e?s?q(t,i):X(t,i):null))}(t,i,e)}Object.freeze({"input":ct,"textarea":ct,"select":ct}),Object.freeze({"amp-anim":["controls"],"form":["name"]});var dt,ft=t=>mt(t,"bind","amp-bind");function pt(t,i,e,s){const n={detail:e};return Object.assign(n,s),new t.CustomEvent(i,n)}function bt(t,i,e,s){return function(t,i,e,s){let n=t,r=e,o=t=>{try{return r(t)}catch(t){var i,e;throw null===(i=(e=self).__AMP_REPORT_ERROR)||void 0===i||i.call(e,t),t}};const a=function(){if(void 0!==dt)return dt;dt=!1;try{const t={get capture(){return dt=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return dt}(),l=!(null==s||!s.capture);return n.addEventListener(i,o,a?s:l),()=>{null==n||n.removeEventListener(i,o,a?s:l),r=null,n=null,o=null}}(t,i,e,s)}function _t(t){return!!t&&"function"==typeof t.getFormData}var vt=["GET","POST"],gt=[a,function(t){return"[object Object]"===h.call(t)}];function Pt(t,i){const e=w({},i);if(_t(i.body)){const t=i.body;e.headers["Content-Type"]="multipart/form-data;charset=utf-8",e.body=function(t){const i=[];for(let e=t.next();!e.done;e=t.next())i.push(e.value);return i}(t.entries())}return{input:t,init:e}}Et.KEY="data-key",Et.IGNORE="data-ignore",Et.CHECKSUM="data-checksum";var At,yt="_set-dom-mounted",Rt=null;function Et(t,i){Rt=[],function(t,i){if(!t)throw new Error("set-dom: You must provide a valid node to update.")}(t&&t.nodeType),9===t.nodeType&&(t=t.documentElement),11===i.nodeType?It(t,i):Mt(t,i),t[yt]||(t[yt]=!0,Vt(t));var e=Rt;return Rt=null,e}function Mt(t,i){if(t.nodeType===i.nodeType)if(1===t.nodeType){if(function(t,i){const e=wt(t)&&wt(i);return e&&Rt.push(t,i),e||xt(t)===xt(i)||t.isEqualNode(i)}(t,i))return;if(It(t,i),t.nodeName===i.nodeName)!function(t,i){var e,s,n,r,o;for(e=t.length;e--;)r=(s=t[e]).namespaceURI,o=s.localName,(n=i.getNamedItemNS(r,o))||t.removeNamedItemNS(r,o);for(e=i.length;e--;)r=(s=i[e]).namespaceURI,o=s.localName,(n=t.getNamedItemNS(r,o))?n.value!==s.value&&(n.value=s.value):(i.removeNamedItemNS(r,o),t.setNamedItemNS(s))}(t.attributes,i.attributes);else{for(var e=i.cloneNode();t.firstChild;)e.appendChild(t.firstChild);t.parentNode.replaceChild(e,t)}}else t.nodeValue!==i.nodeValue&&(t.nodeValue=i.nodeValue);else t.parentNode.replaceChild(i,Lt(t)),Vt(i)}function It(t,i){for(var e,s,n,r,o,a,l=t.firstChild,h=i.firstChild,u=0;l;)u++,s=Tt(e=l),l=l.nextSibling,s&&(a||(a={}),a[s]=e);for(l=t.firstChild;h;)u--,n=h,h=h.nextSibling,a&&(r=Tt(n))&&(o=a[r])?(delete a[r],o!==l?t.insertBefore(o,l):l=l.nextSibling,Mt(o,n)):l?(e=l,l=l.nextSibling,Tt(e)?(t.insertBefore(n,e),Vt(n)):Mt(e,n)):(t.appendChild(n),Vt(n));for(s in a)u--,t.removeChild(Lt(a[s]));for(;--u>=0;)t.removeChild(Lt(t.lastChild))}function Tt(t){if(1===t.nodeType){var i=t.getAttribute(Et.KEY)||t.id;return i?"_set-dom-"+i:void 0}}function xt(t){return t.getAttribute(Et.CHECKSUM)||NaN}function wt(t){return null!=t.getAttribute(Et.IGNORE)}function Vt(t){return St(t,"mount")}function Lt(t){return St(t,"dismount")}function St(t,i){if(Tt(t)){var e=document.createEvent("Event"),s={value:t};e.initEvent(i,!1,!1),Object.defineProperty(e,"target",s),Object.defineProperty(e,"srcElement",s),t.dispatchEvent(e)}for(var n=t.firstChild;n;)n=St(n,i).nextSibling;return t}function jt(t){const i=t.ownerDocument||t;return At&&At.ownerDocument===i||(At=i.createElement("div")),Ot}function Ot(t){return function(t,i){d(1===i.length),t.innerHTML=i[0];const e=t.firstElementChild;return d(e),d(!e.nextElementSibling),t.removeChild(e),e}(At,t)}var kt=['<amp-list-load-more load-more-button class="amp-visible i-amphtml-default-ui"><button load-more-clickable class=i-amphtml-list-load-more-button><label>See More</label></button></amp-list-load-more>'],$t=["<amp-list-load-more load-more-loading class=i-amphtml-default-ui><div class=i-amphtml-list-load-more-spinner></div></amp-list-load-more>"],Ft=['<amp-list-load-more load-more-failed class=i-amphtml-default-ui><div class=i-amphtml-list-load-more-message>Unable to Load More</div><button load-more-clickable class="i-amphtml-list-load-more-button i-amphtml-list-load-more-button-has-icon i-amphtml-list-load-more-button-small"><div class=i-amphtml-list-load-more-icon></div><label>Retry</label></button></amp-list-load-more>'],Ct={NONE:0,OPT_IN:1,ALL:2};function Nt(t,i,e,s){const n=(t=>G(t,"url-replace"))(t);return(e>=Ct.OPT_IN?n.expandUrlAsync(i):Promise.resolve(i)).then((i=>{if(e===Ct.OPT_IN){const i=n.collectDisallowedVarsSync(t);if(i.length>0)throw U().createError(`URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. Please add data-amp-replace="${i.join(" ")}" to the <${t.tagName}> element. See https://bit.ly/amp-var-subs.`)}const r={};return t.hasAttribute("credentials")&&(r.credentials=t.getAttribute("credentials")),s&&(r.cache="reload"),{"xhrUrl":i,"fetchOpt":r}}))}var Ut="amp-list",zt="amp-state:",Ht=class extends t.BaseElement{constructor(t){super(t),this.cf=null,this.bn=null,this.ML=!1,this.IL=new class{constructor(t,i,e){this.Ee=Z(t,"timer"),this.Te=i,this.ye=e||0,this.Ie=-1,this.Me=0,this.Re=!1,this.we=()=>{this.be()}}isPending(){return-1!=this.Ie}schedule(t){let i=t||this.ye;this.Re&&i<10&&(i=10);const e=Date.now()+i;return(!this.isPending()||e-this.Me<-10)&&(this.cancel(),this.Me=e,this.Ie=this.Ee.delay(this.we,i),!0)}be(){this.Ie=-1,this.Me=0,this.Re=!0,this.Te(),this.Re=!1}cancel(){this.isPending()&&(this.Ee.cancel(this.Ie),this.Ie=-1)}}(this.win,(()=>this.VL())),this.LL=null,this.jL=null,this.tg=null,this.OL=!1,this.$L=!1,this.FL=null,this.NL=null,this.UL=null,this.zL=!1,this.HL=null,this.DL=null,this.JL=!1,this.BL=null,this.registerAction("refresh",(()=>{if(this.OL)return this.GL(),this.XL({refresh:!0})})),this.registerAction("changeToLayoutContainer",(()=>this.qL())),this.Xj=null,this.fc=null,this.zT=null}isLayoutSupported(t){if(t===g.CONTAINER){const t=this.element.ownerDocument,i=t&&function(t){return function(t,i){const e=i.documentElement;return["âš¡4email","amp4email"].some((t=>e.hasAttribute(t)))}(0,t)}(t),s=this.getPlaceholder()||this.element.hasAttribute("diffable");return i||(D(function(t,i){const s=function(t){var i,s,n,r,o;if(t[et])return t[et];t[et]=u();const l=t[et];d(l);const h=w(w({},null!==(i=t.AMP_CONFIG)&&void 0!==i?i:{}),null!==(s=t.AMP_EXP)&&void 0!==s?s:(c=(null===(n=t.__AMP_EXP)||void 0===n?void 0:n.textContent)||"{}",JSON.parse(c)));var c;for(const t in h){const i=h[t];"number"==typeof i&&i>=0&&i<=1&&(l[t]=Math.random()<i)}const m=null===(r=t.AMP_CONFIG)||void 0===r?void 0:r["allow-doc-opt-in"];if(a(m)&&m.length){const i=t.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(i)for(var f,p,b=e((null===(f=i.getAttribute("content"))||void 0===f?void 0:f.split(","))||[],!0);!(p=b()).done;){const t=p.value;m.includes(t)&&(l[t]=!0)}}Object.assign(l,function(t){var i;let s="";try{var n;"localStorage"in t&&(s=null!==(n=t.localStorage.getItem("amp-experiment-toggles"))&&void 0!==n?n:"")}catch(t){}const r=(null===(i=s)||void 0===i?void 0:i.split(/\s*,\s*/g))||[],o=u();for(var a,l=e(r,!0);!(a=l()).done;){const t=a.value;t&&("-"==t[0]?o[t.substr(1)]=!1:o[t]=!0)}return o}(t));const _=null===(o=t.AMP_CONFIG)||void 0===o?void 0:o["allow-url-opt-in"];if(a(_)&&_.length){const i=S(t.location.originalHash||t.location.hash);for(var v,g=e(_,!0);!(v=g()).done;){const t=v.value,e=i[`e-${t}`];"1"==e&&(l[t]=!0),"0"==e&&(l[t]=!1)}}return l}(t);return!!s["amp-list-layout-container"]}(this.win),'Experiment "amp-list-layout-container" is not turned on.'),D(s,"amp-list[layout=container] should have a placeholder to establish an initial size. See https://go.amp.dev/c/amp-list/#placeholder-and-fallback. %s",this.element)),this.$L=!0}return function(t){return t==g.FIXED||t==g.FIXED_HEIGHT||t==g.RESPONSIVE||t==g.FILL||t==g.FLEX_ITEM||t==g.FLUID||t==g.INTRINSIC}(t)}buildCallback(){this.tg=B(this.element,"templates"),this.fc=G(this.element,"action"),this.zT=(t=>B(t,"owners"))(this.element),this.fc.addToAllowlist("AMP-LIST",["changeToLayoutContainer","refresh"],["email"]),this.bn=this.getViewport();const t=(t=>B(t,"viewer"))(this.getAmpDoc());this.Xj=new class{constructor(t,i,e){this.Ue=i,this.tg=e,this.Dj=t}isEnabled(){const t=this.Ue.getAmpDoc();return!(!t.isSingleDoc()||!t.getRootNode().documentElement.hasAttribute("allow-viewer-render-template"))&&this.Ue.hasCapability("viewerRenderTemplate")}assertTrustedViewer(t){return this.Ue.isTrustedViewer().then((i=>{D(i,"Refused to attempt SSR in untrusted viewer: ",t)}))}ssr(t,i,e=null,s={}){let n;return e||(n=this.tg.maybeFindTemplate(t)),this.assertTrustedViewer(t).then((()=>this.Ue.sendMessageAwaitResponse("viewerRenderTemplate",this.Cj(i,n,e,s))))}applySsrOrCsrTemplate(t,i){let e;return this.isEnabled()?(D("string"==typeof i.html,"Skipping template rendering due to failed fetch"),e=this.assertTrustedViewer(t).then((()=>this.tg.findAndSetHtmlForTemplate(t,i.html)))):e=a(i)?this.tg.findAndRenderTemplateArray(t,i):this.tg.findAndRenderTemplate(t,i),e}Cj(t,i,e,s={}){const n={"type":this.Dj},r=e&&e.successTemplate?e.successTemplate:i;r&&(n.successTemplate={"type":"amp-mustache","payload":r.innerHTML});const o=e&&e.errorTemplate?e.errorTemplate:null;return o&&(n.errorTemplate={"type":"amp-mustache","payload":o.innerHTML}),s&&Object.assign(n,s),{"originalRequest":Pt(t.xhrUrl,t.fetchOpt),"ampComponent":n}}}(Ut,t,this.tg),this.zL=this.element.hasAttribute("load-more"),D(!(this.zL&&this.$L),"%s initialized with layout=container does not support infinite scrolling with [load-more]. %s",Ut,this.element),this.FL=this.element.getAttribute("src"),this.element.hasAttribute("diffable")&&(this.NL=this.WL(),this.NL&&(this.cf=this.NL)),this.cf||(this.cf=this.YL(),this.element.appendChild(this.cf)),this.element.hasAttribute("auto-resize"),Et.KEY=lt,Et.IGNORE=ht,ft(this.element).then((t=>{this.UL=t}))}reconstructWhenReparented(){return!1}layoutCallback(){this.OL=!0;const t=this.getPlaceholder();return t?this.ZL(t):this.NL&&this.ZL(this.cf),this.bn.onResize((()=>{this.KL()})),this.zL&&this.QL(),this.XL()}WL(){let t=this.element.hasAttribute("single-item")?"> div":"> div[role=list]";return t+=":not([placeholder]):not([fallback]):not([fetch-error])",p(this.element,t)}QL(){return this.mutateElement((()=>{this._N().initializeLoadMore();const t=this.getOverflowElement();t&&I(t,!1),this.element.warnOnMissingOverflow=!1})).then((()=>{this.gN(),bt(this._N().getLoadMoreFailedClickable(),"click",(()=>this.PN(!0,!0))),bt(this._N().getLoadMoreButtonClickable(),"click",(()=>this.PN(!1,!0)))}))}KL(){if(!this.zL)return this.ZL(this.cf);this.AN(this.cf)}_N(){return this.HL||(this.HL=new class{constructor(t){this.yN=t,this.RN=null,this.EN=null,this.MN=null,this.IN=null,this.TN=null,this.xN=null}initializeLoadMore(){this.wN(),this.VN(),this.LN(),this.SN()}wN(){this.RN=b(this.yN,"load-more-button"),this.RN?this.RN.classList.add("amp-visible"):this.RN=jt(this.yN)(kt),this.yN.appendChild(this.RN),M(this.RN,{visibility:"hidden"})}VN(){this.MN=b(this.yN,"load-more-loading"),this.MN||(this.MN=jt(this.yN)($t)),this.yN.appendChild(this.MN)}getLoadMoreButton(){return this.RN||this.wN(),this.RN}getLoadMoreLoadingElement(){return this.MN||this.VN(),this.MN}getLoadMoreButtonClickable(){if(!this.EN){const t=this.getLoadMoreButton();this.EN=b(t,"load-more-clickable")||t}return this.EN}LN(){this.IN=b(this.yN,"load-more-failed"),this.IN||(this.IN=jt(this.yN)(Ft)),this.yN.appendChild(this.IN)}getLoadMoreFailedElement(){return this.IN||this.LN(),this.IN}getLoadMoreFailedClickable(){if(!this.TN){const t=this.getLoadMoreFailedElement();this.TN=b(t,"load-more-clickable")||t}return this.TN}SN(){this.xN||(this.xN=b(this.yN,"load-more-end"),this.xN&&this.yN.appendChild(this.xN))}getLoadMoreEndElement(){return this.xN}setLoadMoreEnded(){this.getLoadMoreFailedElement().classList.toggle("amp-visible",!1),this.getLoadMoreButton().classList.toggle("amp-visible",!1),this.getLoadMoreLoadingElement().classList.toggle("amp-visible",!1);const t=this.getLoadMoreEndElement();t&&t.classList.toggle("amp-visible",!0)}toggleLoadMoreLoading(t){t&&this.getLoadMoreFailedElement().classList.toggle("amp-visible",!1);const i=this.getLoadMoreEndElement();i&&i.classList.toggle("amp-visible",!1),this.getLoadMoreButton().classList.toggle("amp-visible",!t),this.getLoadMoreLoadingElement().classList.toggle("amp-visible",t)}setLoadMoreFailed(){const t=this.getLoadMoreFailedElement(),i=this.getLoadMoreButton();(t||i)&&(t.classList.toggle("amp-visible",!0),i.classList.toggle("amp-visible",!1),this.getLoadMoreLoadingElement().classList.toggle("amp-visible",!1))}hideAllLoadMoreElements(){this.getLoadMoreButton().classList.toggle("amp-visible",!1),this.getLoadMoreLoadingElement().classList.toggle("amp-visible",!1),this.getLoadMoreFailedElement().classList.toggle("amp-visible",!1),this.getLoadMoreEndElement()&&this.getLoadMoreEndElement().classList.toggle("amp-visible",!1)}}(this.element)),this.HL}gN(){let t,i;return this.measureMutateElement((()=>{t=this._N().getLoadMoreButton().offsetHeight,i=this.element.offsetHeight}),(()=>{var e;M(this.cf,{"max-height":`calc(100% - ${e=t,`${e}px`})`}),this.element.applySize(i+t)}))}jN(t){return t.startsWith(zt)}ON(t){return ft(this.element).then((i=>{D(i,'"amp-state:" URLs require amp-bind to be installed.'),D(!this.Xj.isEnabled(),'[amp-list]: "amp-state" URIs cannot be used in SSR mode.');const e=t.slice(zt.length);return i.getStateAsync(e).catch((t=>{const i=e.split(".")[0];throw U().error(Ut,`'amp-state' element with id '${i}' was not found.`),t}))})).then((i=>(D(void 0!==i,`[amp-list] No data was found at provided uri: ${t}`),i)))}kN(t){return n().then((()=>{return D(!this.Xj.isEnabled(),'[amp-list]: "amp-script" URIs cannot be used in SSR mode.'),(i=this.element,mt(i,"amp-script","amp-script")).then((i=>i.fetch(t)));var i})).then((i=>(D("object"==typeof i,`[amp-list] ${t} must return json, but instead returned: ${typeof i}`),i)))}mutatedAttributesCallback(t){let i;const e=t.src;void 0!==e&&("string"==typeof e?this.OL&&(this.GL(),i=this.XL()):"object"==typeof e?i=(t=>{this.element.setAttribute("src",""),D(!this.Xj.isEnabled(),'[amp-list] "[src]" may not be bound in SSR mode.');const i=a(t)?t:[t];return this.GL(!1),this.Pf(i,!1)})(e):this.user().error(Ut,'Unexpected "src" type: '+e)),t["is-layout-container"]&&this.qL()}YL(){const t=this.win.document.createElement("div");var i;return this.$N(t,"list"),this.zL||this.$L||((i=t).classList.add("i-amphtml-fill-content"),i.classList.add("i-amphtml-replaced-content")),t}FN(t,i){t.forEach((t=>{t.hasAttribute("role")||this.$N(t,"listitem"),i.appendChild(t)}))}$N(t,i){this.element.hasAttribute("single-item")||t.setAttribute("role",i)}CN(t){(t||this.ML)&&(this.toggleFallback(t),this.ML=t)}GL(t=!0){if(t&&this.element.hasAttribute("reset-on-refresh")||"always"===this.element.getAttribute("reset-on-refresh")){const t=()=>{this.togglePlaceholder(!0);const t=this.element.hasAttribute("reset-on-refresh");if(this.toggleLoading(!0,t),this.CN(!1),this.UL){const t=o(this.cf.children);this.UL.rescan([],t,{"fast":!0,"update":!1})}this.zT.scheduleUnlayout(this.element,this.cf),_(this.cf)};if(!this.zL&&this.$L)return void this.NN(t);this.mutateElement((()=>{t(),this.zL&&this._N().hideAllLoadMoreElements()}))}}UN(t){const i=this.element.getAttribute("items")||"items";let e=t;return"."!=i&&(e=m(t,i)),D(void 0!==e,'Response must contain an array or object at "%s". %s',i,this.element),this.element.hasAttribute("single-item")&&(a(e)||(e=[e])),e=U().assertArray(e),this.element.hasAttribute("max-items")&&(e=this.zN(e)),e}HN(t){const i=t?pt(this.win,`${Ut}.error`,{"response":t.response}):null;this.fc.trigger(this.element,"fetch-error",i,1)}XL(t={}){const{append:i=!1,refresh:e=!1}=t,s=this.element.getAttribute("src");if(!s)return n();let r;return this.Xj.isEnabled()?r=this.DN(e):(r=this.jN(s)?this.ON(s):s.startsWith("amp-script:")?this.kN(s):this.JN(e),r=r.then((t=>{if(s!==this.element.getAttribute("src"))return;const e=this.UN(t);return this.zL&&this.BN(t),this.Pf(e,i,t).then((()=>this.GN()))}))),r.catch((t=>{if(i)throw t;throw this.HN(t),this.XN(),t}))}zN(t){const i=parseInt(this.element.getAttribute("max-items"),10);return i<t.length&&(t=t.slice(0,i)),t}BN(t){const i=this.element.getAttribute("load-more-bookmark")||"load-more-src";this.DL=m(t,i)}DN(t){const i=this.element.getAttribute("src");let e;return Nt(this.element,i,this.SL(),t).then((t=>{var i,s,n;e=t,e.xhrUrl=(i=this.win,s=e.xhrUrl,n=e.fetchOpt,d("string"==typeof s),!1!==n.ampCors&&(s=function(t,i){return function(t){D(!("__amp_source_origin"in S(rt(t).search)),"Source origin is not allowed in %s",t)}(i),function(t,i,e,s){return function(t,i,e){if(!i)return t;const s=t.split("#",2),n=s[0].split("?",2);let r=n[0]+(n[1]?`?${n[1]}&${i}`:`?${i}`);return r+=s[1]?`#${s[1]}`:"",r}(t,ot("__amp_source_origin",e))}(i,0,at(t.location.href))}(i,s)),s),e.fetchOpt=function(t,i,e){e=e||{};const s=function(t){return t.origin||rt(t.location.href).origin}(t);return s==rt(i).origin&&(e.headers=e.headers||{},e.headers["AMP-Same-Origin"]="true"),e}(this.win,e.xhrUrl,e.fetchOpt),function(t){const i=function(t,i){const e=t||{},s=e.credentials;return d(void 0===s||"include"==s||"omit"==s),e.method=void 0===(n=e.method)?"GET":(n=n.toUpperCase(),d(vt.includes(n)),n),e.headers=e.headers||{},e.headers.Accept=i,d(null!==e.body),e;var n}(t,"application/json");if("POST"==i.method&&!_t(i.body)){d(gt.some((t=>t(i.body)))),i.headers["Content-Type"]=i.headers["Content-Type"]||"text/plain;charset=utf-8";const t=i.headers["Content-Type"];i.body="application/x-www-form-urlencoded"===t?function(t){const i=[];for(const s in t){let n=t[s];if(null!=n){n=a(e=n)?e:[e];for(let t=0;t<n.length;t++)i.push(ot(s,n[t]))}}var e;return i.join("&")}(i.body):JSON.stringify(i.body)}}(t.fetchOpt);const r={"ampListAttributes":{"items":this.element.getAttribute("items")||"items","singleItem":this.element.hasAttribute("single-item"),"maxItems":this.element.getAttribute("max-items")}};return this.Xj.ssr(this.element,e,null,r)})).then((t=>{D(t,`Failed fetching JSON data: XHR Failed fetching (${this.qN(e)}): received no response.`);const i=t.init;if(i){const t=i.status;if(t>=300)throw U().createError(`Failed fetching JSON data (${this.qN(e)}): HTTP error`,t)}return D("string"==typeof t.html,`Failed fetching JSON data: XHR Failed fetching (${this.qN(e)}): Expected response with format {html: <string>}. Received: `,t),e.fetchOpt.responseType="application/json",t}),(t=>{throw U().createError(`Failed fetching JSON data: XHR Failed fetching (${this.qN(e)})`,t)})).then((t=>{if(i===this.element.getAttribute("src"))return this.Pf(t,!1)}))}qN(t){return`${(i=this.element,G(i,"url")).parse(t.xhrUrl).origin}/...`;var i}Pf(t,i,e){const s=new r,{promise:n,reject:o,resolve:a}=s;return this.LL||this.IL.schedule(),this.LL={data:t,resolver:a,rejecter:o,append:i,payload:e},this.jL&&i&&(this.LL.payload=e||{}),n}VL(){const t=this.LL;H(t&&t.data);const i=()=>{this.LL!==t?this.IL.schedule(1):(this.jL=this.LL.data,this.LL=null)},e=this.Xj.isEnabled();let s=this.Xj.applySsrOrCsrTemplate(this.element,t.data).then((i=>this.WN(i,t.append))).then((i=>this.Co(i,t.append)));if(!e){const i=t.payload;s=s.then((()=>this.YN(i)))}s.then((()=>{i(),t.resolver()}),(()=>{i(),t.rejecter()}))}YN(t){if(this.zL){const i=[];return i.push(this.ZN(this._N().getLoadMoreButton(),t)),i.push(this.ZN(this._N().getLoadMoreEndElement(),t)),Promise.all(i)}return n()}ZN(t,i){return t&&this.tg.hasTemplate(t)?this.tg.findAndRenderTemplate(t,i).then((i=>this.mutateElement((()=>{_(t),t.appendChild(i)})))):n()}WN(t,i){const e=a(t)?t:[t],s=this.element.getAttribute("binding");if("no"===s)return Promise.resolve(e);if(!e.some((t=>t.hasAttribute("i-amphtml-binding")||!!t.querySelector("[i-amphtml-binding]"))))return Promise.resolve(e);const n=t=>{const s=i?[]:[this.cf];return t.rescan(e,s,{"fast":!0,"update":!0}).then((()=>e),(()=>e))};return s&&s.startsWith("refresh")?this.UL&&this.UL.signals().get("FIRST_MUTATE")?n(this.UL):(this.element.hasAttribute("diffable")||this.KN(e,[]),Promise.resolve(e)):ft(this.element).then((t=>t?n(t):Promise.resolve(e)))}KN(t,i){const e=this.element.getAttribute("binding");e&&e.startsWith("refresh")&&ft(this.element).then((s=>{if(s){const n="refresh-evaluate"==e&&"evaluate";s.rescan(t,i,{"fast":!0,"update":n})}}))}Co(t,i=!1){const e=this.cf,s=()=>{this.QN(),this.element.hasAttribute("diffable")?(this.mU(e,t),this.KN([e],[e])):(i||(this.zT.scheduleUnlayout(this.element,e),_(e)),this.FN(t,e));const s=pt(this.win,"amp:dom-update",null,{bubbles:!0});return this.cf.dispatchEvent(s),this.element.getResources().getResourceForElement(this.element).resetPendingChangeSize(),this.KL()};return!this.zL&&this.$L?this.NN((()=>{(s()||Promise.resolve(!0)).then((t=>t?this.dU():null))})):this.mutateElement(s)}mU(t,i){const e=this.YL();this.FN(i,e),this.NL&&this.pU(t);const s=Et(t,e);for(let t=0;t<s.length;t+=2){const i=s[t],e=s[t+1];this.bU(i,e)}}pU(t){let i=-1;o(t.querySelectorAll(".i-amphtml-element")).forEach((t=>{!function(t,e){const s=t.tagName.startsWith("AMP-"),n=t.hasAttribute("i-amphtml-binding");!n&&ut[t.tagName]?t.setAttribute(ht,""):(n||s)&&(t.hasAttribute(lt)||t.setAttribute(lt,String(i--)))}(t)}))}bU(t,i){H(t.nodeName==i.nodeName);const e=ut[t.nodeName];if(e)if(e.some((e=>t.getAttribute(e)!==i.getAttribute(e))))t.parentElement.replaceChild(i,t);else{for(let e=0;e<i.classList.length;e++)t.classList.add(i.classList[e]);for(let e=0;e<t.classList.length;e++){const s=t.classList[e];s.startsWith("i-amphtml-")||i.classList.contains(s)||t.classList.remove(s)}if(i.hasAttribute("style")){const e=i.getAttribute("style");t.setAttribute("style",`${t.getAttribute("style")||""};${e}`)}}}NN(t){if(!this.$L||this.zL)return(C.dev||(C.dev=N())).error(Ut,"%s initialized with layout=container does not support infinite scrolling with [load-more]. %s",this.element),n();let i;return this.measureMutateElement((()=>{i=this.element.offsetHeight}),(()=>(R(this.element,{"height":`${i}px`,"overflow":"hidden"}),t())))}dU(){H(this.$L&&!this.zL),R(this.element,{"height":"","overflow":""})}ZL(t){return this.element.getAttribute("layout")!=g.CONTAINER||this.$L?this.measureElement((()=>{const i=t.scrollHeight;return!(i>this.element.offsetHeight)||this.attemptChangeHeight(i).then((()=>!0),(()=>!1))})):Promise.resolve(!0)}AN(t){const i=this.DL?this._N().getLoadMoreButton():this._N().getLoadMoreEndElement();this._U(i,t)}_U(t,i){this.element.getAttribute("layout")!=g.CONTAINER&&this.measureElement((()=>{const e=i.scrollHeight,s=this.element.offsetHeight,n=t?t.offsetHeight:0;e+n>s&&this.attemptChangeHeight(e+n).then((()=>{this.JL=!1,"auto"===this.element.getAttribute("load-more")&&this.vU(),M(this.cf,{"max-height":""})})).catch((()=>{this.JL=!0,this.gN()}))}))}gU(t){const i=function(t){if("nodisplay"===(i=t)||"fixed"===i||"fixed-height"===i||"responsive"===i||"container"===i||"fill"===i||"flex-item"===i||"fluid"===i||"intrinsic"===i)return t;var i}(t),e=function(t){return"i-amphtml-layout-"+t}(H(i));this.element.classList.remove(e,"i-amphtml-layout-size-defined"),[g.FIXED,g.FLEX_ITEM,g.FLUID,g.INTRINSIC,g.RESPONSIVE].includes(i)?M(this.element,{width:"",height:""}):i==g.FIXED_HEIGHT&&M(this.element,{height:""}),this.element.applySize()}qL(){if(this.$L)return n();const t=this.element.getAttribute("i-amphtml-layout");return t==g.CONTAINER?n():this.mutateElement((()=>{this.gU(t),this.cf.classList.remove("i-amphtml-fill-content","i-amphtml-replaced-content");const i=this.getOverflowElement();i&&I(i,!1),this.element.setAttribute("layout","container"),this.element.setAttribute("i-amphtml-layout","container"),this.element.classList.add("i-amphtml-layout-container")}))}GN(){return this.zL?this.PU():n()}PU(){return this.DL?("auto"===this.element.getAttribute("load-more")&&this.AU(),this.mutateElement((()=>{this._N().toggleLoadMoreLoading(!1),M(this._N().getLoadMoreButton(),{visibility:""})}))):this.mutateElement((()=>this._N().setLoadMoreEnded()))}PN(t=!1,i=!1){if(this.DL)this.element.setAttribute("src",this.DL),this.DL=null;else if(!t)return n();const e=this.cf,s=this.yU(e);return this.mutateElement((()=>{this._N().toggleLoadMoreLoading(!0)})),this.XL({append:!0}).then((()=>this.mutateElement((()=>{this.DL?(this._N().toggleLoadMoreLoading(!1),s&&i&&function(t){try{t.focus()}catch(t){}}(s)):this._N().setLoadMoreEnded()})))).then((()=>{this.AN(this.cf)})).catch((t=>{this.HN(t),this.RU()}))}RU(){this.mutateElement((()=>this._N().setLoadMoreFailed())).then((()=>{this._U(this._N().getLoadMoreFailedElement(),this.cf)}))}Ce(t=!1){return function(t,i,e={}){const{expr:s=".",urlReplacement:n=Ct.NONE,refresh:r=!1,xssiPrefix:o,url:a=i.getAttribute("src")}=e;!function(t,i,e="source"){var s;D(null!=t,"%s %s must be available",i,e),D("https:"==(s=nt(s=t)).protocol||"localhost"==s.hostname||"127.0.0.1"==s.hostname||function(t,i){const e=t.length-i.length;return e>=0&&t.indexOf(i,e)==e}(s.hostname,".localhost")||/^\/\//.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',i,e,t)}(a,i);const l=J(t.win,"batched-xhr");return Nt(i,a,n,r).then((t=>l.fetchJson(t.xhrUrl,t.fetchOpt))).then((i=>(t=>J(t,"xhr"))(t.win).xssiJson(i,o))).then((t=>{if(null==t)throw new Error("Response is undefined.");return m(t,s||".")})).catch((t=>{throw U().createError("failed fetching JSON data",t)}))}(this.getAmpDoc(),this.element,{expr:".",urlReplacement:this.SL(),refresh:t,xssiPrefix:this.element.getAttribute("xssi-prefix")||void 0})}AU(){this.BL||(this.BL=this.bn.onChanged((()=>this.vU())))}vU(){if(this.JL)return;const t=this.cf.lastChild||this.cf;this.bn.getClientRectAsync(t).then((t=>{const i=this.bn.getHeight();if(t.bottom>0&&3*i>t.bottom)return this.PN()}))}JN(t=!1){return this.Ce(t)}SL(){const t=this.element.getAttribute("src");let i=Ct.OPT_IN;return t!=this.FL&&at(t)!=at(this.getAmpDoc().win.location)||(i=Ct.ALL),i}QN(){this.element.classList.remove("i-amphtml-list-fetch-error"),this.toggleLoading(!1),this.getFallback()&&this.CN(!1),this.togglePlaceholder(!1)}XN(){this.element.classList.add("i-amphtml-list-fetch-error"),b(this.element,"fetch-error")&&this.ZL(this.element),this.toggleLoading(!1),this.getFallback()&&(this.CN(!0),this.togglePlaceholder(!1))}yU(t){const i=t.querySelectorAll(f('button, a[href], input, select, textarea, [tabindex]:not([tabindex="-1"]), audio[controls], video[controls], [contenteditable]:not([contenteditable="false"])',":scope"));return i?i[i.length-1]:null}};t.registerElement(Ut,Ht,'amp-list.i-amphtml-list-fetch-error [fetch-error],amp-list[load-more] [load-more-button].amp-visible,amp-list[load-more] [load-more-end].amp-visible,amp-list[load-more] [load-more-failed].amp-visible,amp-list[load-more] [load-more-loading].amp-visible{display:block}amp-list[load-more] [load-more-button].i-amphtml-default-ui,amp-list[load-more] [load-more-failed].i-amphtml-default-ui,amp-list[load-more] [load-more-loading].i-amphtml-default-ui{height:80px;padding:12px 0px;box-sizing:border-box}.i-amphtml-list-load-more-button,amp-list[load-more] [load-more-button].i-amphtml-default-ui,amp-list[load-more] [load-more-failed].i-amphtml-default-ui,amp-list[load-more] [load-more-loading].i-amphtml-default-ui{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-weight:700;font-size:14px;text-transform:uppercase;letter-spacing:.1em;color:#333;text-align:center}amp-list[load-more] [load-more-loading].i-amphtml-default-ui .i-amphtml-list-load-more-spinner{display:inline-block;width:40px;height:40px;margin:8px 0px;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="a"><stop stop-color="%23333" stop-opacity=".75"/><stop offset="100%" stop-color="%23333" stop-opacity="0"/></linearGradient></defs><path d="M11 4.4A18 18 0 1 0 38 20" fill="none" stroke="url(%23a)" stroke-width="1.725"/></svg>\');animation:amp-list-load-more-spinner 1000ms linear infinite}@keyframes amp-list-load-more-spinner{0%{transform:rotate(0deg)}to{transform:rotate(360deg)}}.i-amphtml-list-load-more-button{border:none;display:inline-block;background-color:rgba(51,51,51,.75);color:#fff;margin:4px 0px;padding:0px 32px;box-sizing:border-box;height:48px;border-radius:24px}[load-more] div[role=list]{overflow-y:hidden}.i-amphtml-list-load-more-button,.i-amphtml-list-load-more-button label,.i-amphtml-list-load-more-icon{cursor:pointer}.i-amphtml-list-load-more-button:hover{background-color:#333}.i-amphtml-list-load-more-button.i-amphtml-list-load-more-button-small{margin:0px;padding:4px 16px;height:32px}.i-amphtml-list-load-more-button label{display:inline-block;vertical-align:middle;line-height:24px}amp-list[load-more] [load-more-failed].i-amphtml-default-ui .i-amphtml-list-load-more-message{line-height:24px}amp-list[load-more] [load-more-failed].i-amphtml-default-ui .i-amphtml-list-load-more-icon{height:24px;width:24px;display:inline-block;vertical-align:middle;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path fill="%23fff" d="M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>\')}\n/*# sourceURL=/extensions/amp-list/0.1/amp-list.css*/')})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-list-0.1.mjs.map